function str_repeat(n,t){for(var i=[];t>0;i[--t]=n);return i.join("")}function sprintf(){for(var f=0,n,i=arguments[f++],r=[],t,u,e,o;i;){if(t=/^[^\x25]+/.exec(i))r.push(t[0]);else if(t=/^\x25{2}/.exec(i))r.push("%");else if(t=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(i)){if((n=arguments[t[1]||f++])==null||n==undefined)throw"Too few arguments.";if(/[^s]/.test(t[7])&&typeof n!="number")throw"Expecting number but found "+typeof n;switch(t[7]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":n=parseInt(n);break;case"e":n=t[6]?n.toExponential(t[6]):n.toExponential();break;case"f":n=t[6]?parseFloat(n).toFixed(t[6]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&t[6]?n.substring(0,t[6]):n;break;case"u":n=Math.abs(n);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}n=/[def]/.test(t[7])&&t[2]&&n>0?"+"+n:n,e=t[3]?t[3]=="0"?"0":t[3].charAt(1):" ",o=t[5]-String(n).length,u=t[5]?str_repeat(e,o):"",r.push(t[4]?n+u:u+n)}else throw"Huh ?!";i=i.substring(t[0].length)}return r.join("")}var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,n=function(n,t){for(n=String(n),t=t||2;n.length<t;)n="0"+n;return n};return function(u,f,e){var h=dateFormat;if(arguments.length!=1||Object.prototype.toString.call(u)!="[object String]"||/\d/.test(u)||(f=u,u=undefined),u=u?new Date(u):new Date,isNaN(u))throw SyntaxError("invalid date");f=String(h.masks[f]||f||h.masks["default"]),f.slice(0,4)=="UTC:"&&(f=f.slice(4),e=!0);var o=e?"getUTC":"get",c=u[o+"Date"](),y=u[o+"Day"](),l=u[o+"Month"](),p=u[o+"FullYear"](),s=u[o+"Hours"](),w=u[o+"Minutes"](),b=u[o+"Seconds"](),a=u[o+"Milliseconds"](),v=e?0:u.getTimezoneOffset(),k={d:c,dd:n(c),ddd:h.i18n.dayNames[y],dddd:h.i18n.dayNames[y+7],m:l+1,mm:n(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(p).slice(2),yyyy:p,h:s%12||12,hh:n(s%12||12),H:s,HH:n(s),M:w,MM:n(w),s:b,ss:n(b),l:n(a,3),L:n(a>99?Math.round(a/10):a),t:s<12?"a":"p",tt:s<12?"am":"pm",T:s<12?"A":"P",TT:s<12?"AM":"PM",Z:e?"UTC":(String(u).match(i)||[""]).pop().replace(r,""),o:(v>0?"-":"+")+n(Math.floor(Math.abs(v)/60)*100+Math.abs(v)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return f.replace(t,function(n){return n in k?k[n]:n.slice(1,n.length-1)})}}(),CanvasXpress;dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(n,t){return dateFormat(this,n,t)},typeof CanvasXpress=="undefined"&&(CanvasXpress={}),CanvasXpress=function(n,t,i,r,u,f,e){this.$=function(n){return document.getElementById(n)},this.$cX=function(n,t,i){var u=document.createElement(n),r;if(t)for(r in t)u[r]=t[r];if(i)for(r in i)u.style[r]=i[r];return u},n?typeof n=="object"&&(t=n.data||!1,i=n.config||!1,r=n.events||!1,u=n.hidden||!1,f=n.info||!1,e=n.check||!1,n=n.renderTo||this.createNewTarget()):n=this.createNewTarget(),this.setInit=function(){this.version=7.1,this.target=n,this.events=r,this.info=f,this.userId=652191601133150,this.startTime=(new Date).getTime()},this.validateParameters=function(){this.validateData(),this.validateConfig(),this.validateEvents(),this.validateInfo()},this.validateData=function(){if(t&&!this.subBrowser)try{JSON.stringify(t)}catch(n){alert("Data object malformed:\n"+n)}},this.validateConfig=function(){if(this.addConfigLocation(),i){if(!this.subBrowser)try{JSON.stringify(i)}catch(n){alert("Config object malformed:\n"+n)}}else i={};this.userConfig=i},this.validateEvents=function(){},this.validateInfo=function(){f||(f="")},this.addConfigLocation=function(){var n=window.location.href.split(/&/),t,r,e,u,f;if(n&&n.length>0)for(t=0;t<n.length;t++)if(r=n[t].match(/canvasXpress=(\{.+\})/),r&&r.length>1){e=decodeURIComponent(JSON.stringify(r[1]).replace(/^\"/,"").replace(/\"$/,""));try{u=JSON.parse(e)}catch(o){alert("Location parameters malformed:\n"+o)}if(u){i||(i={});for(f in u)i[f]||(i[f]=u[f])}}},this.newId=function(n){for(var i=0,t=this.target+n+i,r=this.$(t);r;)i++,t=this.target+n+i,r=this.$(t);return t},this.createNewTarget=function(){var n=this.$cX("canvas",{id:this.newId("canvasXpress")});return document.body.appendChild(n),n.id},this.insertTarget=function(n,t,i,r,u){if(n&&t){var f=this.$(n);if(f)return;f=this.$cX("canvas",{id:n,width:i,height:r}),u?t.parentNode.insertBefore(f,t.nextSibling):t.parentNode.insertBefore(f,t)}},this.removeTarget=function(n){var t=this.$(n);t&&t.parentNode.removeChild(t)},this.save=function(){return{renderTo:this.target,data:this.data,config:this.getConfig(),events:this.events}},this.print=function(n){return function(){var t,i;return n.resetConfigurator(),alert("A new window will open so you can right click on the graph and save it"),n.isIE?(t=n.canvas.parentNode.childNodes[0],window.open().document.write("<html><body>"+t.innerHTML+"<\/body><\/html>")):(i=n.canvas.toDataURL("image/png"),window.open().document.write('<html><body><img src="'+i+'" /><\/body><\/html>'))}}(this),this.exportToExcel=function(n){for(var i="",t=0;t<n.length;t++)i+=n[t].join("%09")+"%0D";return window.open("data:text/tab-separeted-values,"+i)},this.exporttoHTML=function(n){for(var t="<table>",i=0;i<n.length;i++)t+="<tr><td>",t+=n[i].join("<\/td><td>"),t+="<\/td><\/tr>";return t+="<\/table>",window.open().document.write(t)},this.prettyJSON=function(n,t){var o=function(n){return typeof n=="object"?n===null?"null":n.constructor==[].constructor?"array":n.constructor==(new Date).constructor?"date":n.constructor==(new RegExp).constructor?"regex":"object":typeof n},s,e;t||(t="");var i,u="  ",f=o(n),r=0;if(f=="array"){if(n.length==0)return"[]";i="["}else{for(s in n){r++;break}if(r==0)return"{}";i="{"}r=0;for(e in n){v=n[e],r>0&&(i+=","),i+=f=="array"?"\n"+t+u:"\n"+t+u+'"'+e+'": ';switch(o(v)){case"array":case"object":i+=this.prettyJSON(v,t+u);break;case"boolean":case"number":i+=v.toString();break;case"null":i+="null";break;case"string":i+='"'+v+'"'}r++}return i+(f=="array"?"\n"+t+"]":"\n"+t+"}")},this.dumpToConsole=function(n){console.log(this.target),console.log(this.prettyJSON(n))},this.profile=function(n){var t=(new Date).getTime(),i=this.profileTime||this.startTime;n||(n=""),console.log(this.target+": "+n+": "+(t-i)),this.profileTime=t},this.stack=function(){if(this.debug)for(var n in this)if(arguments.callee.caller===this[n]){CanvasXpress.stack[this.target].push(n);return}},this.initialize=function(){this.initCSS(),this.setInit(),this.initCrossBrowser(e),this.validateParameters(),this.initConfig(i),this.initViewport(u),this.initUtils(),this.initPrimitives(),this.initExample(),this.initData(t),this.initLayout(),this.initEvents(),this.initAnimation(),this.initRemote(),this.initGraph(),this.showToolbar(!0)},this.initialize(),CanvasXpress.references.push(this),CanvasXpress.stack[this.target]=[]},CanvasXpress.references=[],CanvasXpress.cacheImages={},CanvasXpress.cacheText={},CanvasXpress.stack={},CanvasXpress.current=!1,CanvasXpress.resizing=!1,CanvasXpress.getObject=function(n){for(var t=0;t<CanvasXpress.references.length;t++)if(CanvasXpress.references[t].target==n)return CanvasXpress.references[t]},CanvasXpress.prototype.initCrossBrowser=function(n){this.hasClass=function(n,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(n.className)},this.addClass=function(n,t){hasClass(n,t)||(n.className+=(n.className?" ":"")+t)},this.removeClass=function(n,t){hasClass(n,t)&&(n.className=n.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},this.cancelEvent=function(n){n||(n=window.event),n.preventDefault?n.preventDefault():n.returnValue=!1},this.stopEvent=function(n){n||(n=window.event),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},this.normalizeEvtName=function(n){return this.isIE?"on"+n:n},this.addEvtListener=function(n,t,i,r){n&&t&&i&&(this.registeredEvents||(this.registeredEvents={}),n.id?(this.registeredEvents[n.id]||(this.registeredEvents[n.id]={}),this.registeredEvents[n.id][t]=[i,r]):(this.registeredEvents[n]||(this.registeredEvents[n]={}),this.registeredEvents[n][t]=[i,r]),this.isIE?n.attachEvent(this.normalizeEvtName(t),i):(n.addEventListener(t,i,r),t=="mousewheel"&&n.addEventListener("DOMMouseScroll",i,r)))},this.removeEvtListener=function(n,t,i,r){var u,f;n&&t&&i&&(u=this.registeredEvents[n.id||n],u&&u.hasOwnProperty(t)&&(delete u[t],this.isIE?n.detachEvent(this.normalizeEvtName(t),i):(n.removeEventListener(t,i,r),t=="mousewheel"&&n.removeEventListener("DOMMouseScroll",i,r)),f=this.getKeys(this.registeredEvents[n.id||n]),f&&f.length<1&&delete this.registeredEvents[n.id||n]))},this.addRemoveEvtListener=function(n,t,i,r,u){n&&t&&i&&r&&this[n](t,i,r,u)},this.purgeEventListeners=function(){var n,t,i;for(n in this.registeredEvents){t=this.$(n)||n;for(i in this.registeredEvents[n])this.removeEvtListener(t,i,this.registeredEvents[n][0],this.registeredEvents[n][1])}},this.preventSelection=function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},this.getTargetEvent=function(n){return this.isIE&&this.useFlashIE&&this.browserVersion<9?n.srcElement.parentNode:n.target||n.srcElement},this.isGoogleChromeFrame=function(){if(this.browser=="Explorer"&&this.browserVersion<9&&!n&&navigator.userAgent.toLowerCase().indexOf("chromeframe")<0)try{var t=document.createElement("script");t.type="text/javascript",t.src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js",document.getElementsByTagName("head")[0].appendChild(t),CFInstall.check({mode:"overlay"})}catch(i){alert("CanvasXpress works much faster in fully HTML 5 compliant browsers.\nPlease consider installing Google chrome frame to make this browser compliant.")}},this.dataBrowser=[{string:navigator.platform,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],this.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.isSubstandardBrowser=function(){return this.browser=="Firefox"&&this.browserVersion>4||this.browser=="Opera"&&this.browserVersion>9||this.browser=="Safari"&&this.browserVersion>4||this.browser=="Chrome"&&this.browserVersion>1?!1:!0},this.isMobileApp=function(){return this.browser.match(/iPhone|iPod|iPad|Android|BlackBerry/i)?!0:!1},this.searchString=function(n){for(var i,r,t=0;t<n.length;t++)if(i=n[t].string,r=n[t].prop,this.versionSearchString=n[t].versionSearch||n[t].identity,i){if(i.indexOf(n[t].subString)!=-1)return n[t].identity}else if(r)return n[t].identity},this.searchVersion=function(n){var t=n.indexOf(this.versionSearchString);if(t!=-1)return parseFloat(n.substring(t+this.versionSearchString.length+1))},this.initializeBrowser=function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.browserVersion=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.browserOS=this.searchString(this.dataOS)||"an unknown OS",this.browser=="Explorer"?(this.isIE=!0,this.subBrowser=!0,this.mobileApp=!1):(this.isIE=!1,this.subBrowser=this.isSubstandardBrowser(),this.mobileApp=this.isMobileApp()),this.isGoogleChromeFrame()},this.initializeBrowser()},CanvasXpress.prototype.initCSS=function(){var n=" table.shorts{margin:2px 3px;padding:2px 3px;border:1px solid #fafafa;border-collapse:collapse;font-size:x-small}",t;n+=" td.k{text-align:center;padding:2px 5px;margin:2px 5px;border:1px solid #cccccc;}",n+=" td.d{padding:2px 5px;margin:2px 5px;border:1px solid #cccccc;}",n+=" th.d{padding:2px 5px;margin:2px 5px;border:1px solid #cccccc;}",n+=" th.cxx,th.cxz,th.cxb,th.cxs,th.cxv,td.cxx,td.cxz,td.cxb,td.cxs,td.cxv{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border:1px solid #cccccc;vertical-align:middle;}",n+=" td.cxx,td.cxz,td.cxb,td.cxs,td.cxv{background:#fefefe}",n+=" td.cxy{border:1px solid #cccccc;vertical-align:middle;text-align:right;}",n+=" div.cxc{left:0px;top:0px;margin-left:5px;margin-top:2px;white-space:nowrap;overflow:hidden;}",n+=" div.CanvasXpressDrag{opacity:0.5;filter:alpha(opacity=50);background-color:rgb(240,240,240);position:absolute;}",n+=" div.CanvasXpressTooltip{border:1px solid rgb(113,139,183);border-radius:5px;background-color:rgb(240,240,240);cursor:move;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;margin:2px 3px;overflow:hidden;padding:2px 3px;position:absolute;white-space:nowrap;}",n+=" img.CanvasXpressTooltip{cursor:default;float:right;height:13px;margin:2px 3px 0px 0px;width:13px;cursor:default;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" span.CanvasXpressTooltip{border:1px solid rgb(113,139,183);border-radius:5px;background-color:rgb(240,240,240);cursor:move;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;margin:2px 3px;overflow:hidden;padding:2px 3px;position:absolute;white-space:nowrap;}",n+=" div.CanvasXpressDataTable{border:1px solid rgb(113,139,183);border-radius:5px;background-color:rgb(240,240,240);clear:both;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;overflow:hidden;position:absolute;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataTableToolbar{border:0px;border-radius:5px 5px 0px 0px;background-color:rgb(240,240,240);color:rgb(34,34,34);cursor:move;font:normal 11px arial,tahoma,sans-serif;height:18px;left:0px;line-height:100%;position:absolute;top:0px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" img.CanvasXpressDataTableToolbarImage{cursor:default;float:right;height:13px;margin:2px 3px 0px 0px;width:13px;cursor:default;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataTableContainer{background-color:rgb(240,240,240);border-radius:0px 0px 5px 5px;color:rgb(34,34,34);display:block;font:normal 11px arial,tahoma,sans-serif;left:0px;line-height:100%;position:absolute;top:20px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataTableVertical{background-color:rgb(240,240,240);overflow:auto;position:absolute;right:2px;top:2px;width:18px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataTableHorizontal{background-color:rgb(240,240,240);bottom:2px;height:18px;left:2px;overflow:auto;position:absolute;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataTableResizer{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/resize_w.png);background-repeat:no-repeat;cursor:se-resize;bottom:1px;height:15px;position:absolute;right:1px;width:15px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" table.CanvasXpressDataTable{border:0px;border-spacing:1px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;left:1px;line-height:20px;position:absolute;table-layout:fixed;top:1px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataTableMask{border:0px;left:1px;position:absolute;top:1px;overflow:hidden;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" th.CanvasXpressTableCellHead{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border-left:1px solid #ffffff;border-top:1px solid #ffffff;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" th.CanvasXpressTableCellHeadActive{background-image:url(http://www.canvasxpress.org/images/accordion_active.png);background-repeat:repeat-x;border-left:1px solid #ffffff;border-top:1px solid #ffffff;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" td.CanvasXpressTableCell{background-color:#ffffff;border:0px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" td.CanvasXpressTableCellActive{background-color:#dfe8f9;border:0px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:20px;padding:0px;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressTableCell{font:normal 11px arial,tahoma,sans-serif;line-height:20px;margin:2px 2px 1px 5px;overflow:hidden;white-space:nowrap;}",n+=" div.CanvasXpressTableCellSortAsc{background:url(http://www.canvasxpress.org/images/sort_asc.gif) no-repeat right 6px;font:normal 11px arial,tahoma,sans-serif;line-height:20px;margin:2px 2px 1px 5px;overflow:hidden;white-space:nowrap;}",n+=" div.CanvasXpressTableCellSortDesc{background:url(http://www.canvasxpress.org/images/sort_desc.gif) no-repeat right 6px;font:normal 11px arial,tahoma,sans-serif;line-height:20px;margin:2px 2px 1px 5px;overflow:hidden;white-space:nowrap;}",n+=" div.CanvasXpressConfigurator{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" span.CanvasXpressConfigurator{cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" textarea.CanvasXpressConfigurator{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",n+=" img.CanvasXpressConfigurator{cursor:default;float:right;height:13px;margin-left:2px;width:13px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" select.CanvasXpressConfigurator{background-color:rgb(255,255,255);border:1px solid rgb(113,139,183);color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;padding-left:3px;}",n+=" input.CanvasXpressConfigurator{background-color:rgb(255,255,255);border:1px solid rgb(113,139,183);color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;padding-left:3px;}",n+=" div.CanvasXpressConfiguratorOptions{cursor:default;font:normal 11px arial,tahoma,sans-serif;height:100px;line-height:16px;margin-top:8px;overflow:auto;width:180px;}",n+=" div.CanvasXpressConfiguratorFilter{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",n+=" select.CanvasXpressConfiguratorFilter{border:1px solid rgb(113,139,183);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",n+=" input.CanvasXpressConfiguratorFilter{border:1px solid rgb(113,139,183);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",n+=" div.CanvasXpressConfiguratorColor{border:1px solid rgb(113,139,183);font:normal 11px arial,tahoma,sans-serif;line-height:16px;}",n+=" div.accordionHead{margin-top:2px;height:16px;overflow:hidden;float:left;cursor:pointer;vertical-align:middle;text-align:left;display:table-cell;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.accordionContent{overflow:auto;}",n+=" div.hoverable:hover{background-color:#dfe8f6}",n+=" div.CanvasXpressContainer{position:relative;float:left;}",n+=" div.CanvasXpressHandler{position:relative;float:left;background-position:50% 50%;background-repeat:no-repeat;}",n+=" div.CanvasXpressWrapper{position:relative;float:left;line-height:100%;}",n+=" div.CanvasXpressDataFilter{color:rgb(34,34,34);font:normal 11px arial,tahoma,sans-serif;line-height:100%;margin:0px;padding:0px;position:absolute;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataFilterToolbar{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border:1px solid rgb(113,139,183);border-radius:5px;color:rgb(34,34,34);cursor:move;font:normal 11px arial,tahoma,sans-serif;height:18px;left:0px;line-height:100%;margin:0px;padding:2px;position:absolute;top:0px;}",n+=" span.CanvasXpressDataFilterToolbarText{font:normal 11px arial,tahoma,sans-serif;left:8px;line-height:100%;position:relative;top:5px;}",n+=" img.CanvasXpressDataFilterToolbarImage{cursor:default;width:13px;height:13px;margin-top:2px;margin-right:2px;float:right;}",n+=" span.CanvasXpressDataFilterText{background-image:url(http://www.canvasxpress.org/images/arrowright.png);background-repeat:no-repeat;background-position:-3px;font:normal 11px arial,tahoma,sans-serif;left:8px;line-height:100%;position:relative;top:5px;}",n+=" span.CanvasXpressDataFilterTextActive{background-image:url(http://www.canvasxpress.org/images/arrowdown.png);background-repeat:no-repeat;background-position:-3px;font:normal 11px arial,tahoma,sans-serif;left:8px;line-height:100%;position:relative;top:5px;}",n+=" div.CanvasXpressDataFilterContainer{border:0px;left:0px;margin:0px;padding:0px;position:absolute;top:24px;}",n+=" div.CanvasXpressDataFilterContainerMask{background-color:#ffffff;border:1px solid #d0d0d0;margin:1px 3px 3px 3px;overflow-x:hidden;overflow-y:scroll;}",n+=" div.CanvasXpressDataFilterContainerItem{background-color:#ffffff;color:#4181ba;height:15px;padding:1px 0px 0px 1px;}",n+=" div.CanvasXpressDataFilterContainerItemSelected{background-color:#4181ba;color:rgb(255,255,255);height:15px;padding:1px 0px 0px 1px;}",n+=" div.CanvasXpressDataFilterContainerHoverable{border:1px solid rgb(113,139,183);margin:2px;margin-bottom:4px;}",n+=" div.CanvasXpressDataFilterContainerHoverable:hover{background-color:#dfe8f6}",n+=" div.CanvasXpressDataFilterContainerNumeric{background-color:#ffffff;border:1px solid rgb(113,139,183);clear:both;height:14px;margin:2px;}",n+=" div.CanvasXpressDataFilterContainerMin{background-image:url(http://www.canvasxpress.org/images/move_right.png);background-repeat:no-repeat;float:left;height:14px;position:relative;width:14px;z-index:10002;}",n+=" div.CanvasXpressDataFilterContainerMax{background-image:url(http://www.canvasxpress.org/images/move_left.png);background-repeat:no-repeat;float:left;height:14px;position:relative;width:14px;z-index:10002;}",n+=" div.CanvasXpressDataFilterContainerRange{background-color:#4181ba;float:left;height:14px;left:0px;position:relative;z-index:10001;}",n+=" select.CanvasXpressDataFilterContainerString{background-color:rgb(255,255,255);font:normal 11px arial,tahoma,sans-serif;margin-left:3px;margin-bottom:3px;}",n+=" div.CanvasXpressDataFilterHead{background-image:url(http://www.canvasxpress.org/images/accordion.png);background-repeat:repeat-x;border:1px solid rgb(113,139,183);border-radius:5px 5px 5px 5px;color:rgb(34,34,34);cursor:pointer;float:left;height:18px;margin-top:2px;overflow:hidden;padding:2px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataFilterHeadActive{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/accordion_active.png);background-repeat:repeat-x;border:1px solid rgb(113,139,183);border-radius:5px 5px 0px 0px;color:rgb(34,34,34);cursor:pointer;float:left;height:18px;margin-top:2px;overflow:hidden;padding:2px;text-align:left;vertical-align:middle;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressDataFilterContent{background-color:rgb(255,255,255);border:1px solid rgb(113,139,183);border-radius:0px 0px 5px 5px;border-top:0px;color:rgb(113,139,183);overflow:auto;padding:2px;}",n+=" div.CanvasXpressLink{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/menu.gif);background-repeat:repeat-y;border:1px solid rgb(113,139,183);border-radius:3px;box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:100%;margin:0px;padding:0px;position:absolute;-moz-box-shadow:rgba(154,154,154,0.2) 3px 3px;}",n+=" div.CanvasXpressMenu{background-color:rgb(240,240,240);background-image:url(http://www.canvasxpress.org/images/menu.gif);background-repeat:repeat-y;border:1px solid rgb(113,139,183);border-radius:3px;box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:100%;margin:0px;padding:0px;position:absolute;-moz-box-shadow:rgba(154,154,154,0.2) 3px 3px;}",n+=" ul.CanvasXpressList{background:transparent;border:0px none;cursor:default;list-style:none;margin:0px;overflow:hidden;padding:2px;}",n+=" li.CanvasXpressListItemSep{cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;font-size:1px;line-height:1px;list-style:none;margin:0px;padding:1px;white-space:nowrap;}",n+=" li.CanvasXpressListItem{cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:100%;list-style:none;margin:0px;padding:1px;white-space:nowrap;}",n+=" li.CanvasXpressListItemActive{background-color:rgb(219,236,244);background-image:url(http://www.canvasxpress.org/images/item-over.gif);background-repeat:repeat-x;background-position:left bottom;border-color:rgb(170,204,246);border-style:solid;border-width:1px 0px;cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:100%;list-style:none;margin:0px 1px;padding:0px;white-space:nowrap;}",n+=" a.CanvasXpressListItemA{color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;outline-style:none;outline-width:0px;padding:3px 21px 3px 27px;position:relative;text-decoration:none;white-space:nowrap;}",n+=" a.CanvasXpressListItemAArrow{background:url(http://www.canvasxpress.org/images/menu-parent.gif) no-repeat scroll right 50% transparent;color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;outline-style:none;outline-width:0px;padding:3px 21px 3px 27px;position:relative;text-decoration:none;white-space:nowrap;}",n+=" a.CanvasXpressListItemAActive{border-color:rgb(170,204,246);border-style:solid;border-width:0px 1px;color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;outline-style:none;outline-width:0px;margin:0px -1px;padding:3px 21px 3px 27px;position:relative;text-decoration:none !important;white-space:nowrap;}",n+=" a.CanvasXpressListItemAArrowActive{background:url(http://www.canvasxpress.org/images/menu-parent.gif) no-repeat scroll right 50% transparent;border-color:rgb(170,204,246);border-style:solid;border-width:0px 1px;color:rgb(34,34,34);cursor:pointer;display:block;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;margin:0px -1px;outline-style:none;outline-width:0px;padding:3px 21px 3px 27px;position:relative;text-decoration:none !important;white-space:nowrap;}",n+=" img.CanvasXpressListIcon{background-position:center;border:0px none;color:rgb(34,34,34);cursor:pointer;font:normal 11px arial,tahoma,sans-serif;height:16px;left:3px;line-height:16px;list-style:none;margin:0px;padding:0px;position:absolute;top:3px;vertical-align:top;width:16px;white-space:nowrap;}",n+=" span.CanvasXpressListItemText{color:rgb(34,34,34);cursor:pointer;font:normal 11px arial,tahoma,sans-serif;line-height:16px;list-style:none;margin-right:50px;white-space:nowrap;}",n+=" span.CanvasXpressListItemTextShort{color:rgb(34,34,34);cursor:pointer;font:italic 9px arial,tahoma,sans-serif;line-height:16px;list-style:none;position:absolute;right:4px;white-space:nowrap;}",n+=" span.CanvasXpressListItemTextSep{background-color:rgb(224,224,224);border-bottom:1px solid;border-bottom-color:rgb(255,255,255);cursor:default;display:block;font:normal 11px arial,tahoma,sans-serif;font-size:1px;line-height:1px;list-style:none;margin:2px 3px;overflow:hidden;white-space:nowrap;}",n+=" img.CanvasXpressToolbarHelp{cursor:default;float:right;height:13px;margin-left:2px;width:13px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" div.CanvasXpressToolbarHelp{background-color:rgb(240,240,240);border-radius:5px;border:1px solid rgb(113,139,183);box-shadow:rgba(154,154,154,0.2) 3px 3px;color:rgb(34,34,34);cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",n+=" p.CanvasXpressToolbarHelp{cursor:default;font:normal 11px arial,tahoma,sans-serif;line-height:16px;margin:0px;padding:5px 5px 5px 20px;}",n+=" img.CanvasXpressToolbarImage{margin-left:4px;float:right;}",n+=" canvas.CanvasXpress{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-user-select:none;}",t=document.createElement("style"),t.type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(t)},CanvasXpress.prototype.initConfig=function(n){this.setConfigDefaults=function(){this.config=[],this.graphType="Bar",this.config.push("graphType"),this.showGraph=!0,this.config.push("showGraph"),this.useFlashIE=!0,this.config.push("useFlashIE"),this.graphOrientation="horizontal",this.config.push("graphOrientation"),this.foreground="rgb(0,0,0)",this.config.push("foreground"),this.foregroundWindow="rgb(0,0,0)",this.config.push("foregroundWindow"),this.background="rgb(255,255,255)",this.config.push("background"),this.backgroundWindow="rgb(204,204,204)",this.config.push("backgroundWindow"),this.backgroundType="solid",this.config.push("backgroundType"),this.backgroundImage=!1,this.config.push("backgroundImage"),this.backgroundVideo=!1,this.config.push("backgroundVideo"),this.gradientOrientation="vertical",this.config.push("gradientOrientation"),this.backgroundWindowGradientOrientation="vertical",this.config.push("backgroundWindowGradientOrientation"),this.backgroundGradient1Color="rgb(0,0,200)",this.config.push("backgroundGradient1Color"),this.backgroundGradient2Color="rgb(0,0,36)",this.config.push("backgroundGradient2Color"),this.backgroundWindowGradient1Color="rgb(0,0,200)",this.config.push("backgroundWindowGradient1Color"),this.backgroundWindowGradient2Color="rgb(0,0,36)",this.config.push("backgroundWindowGradient2Color"),this.gradient=!1,this.config.push("gradient"),this.gradientType="radial",this.config.push("gradientType"),this.gradientRatio=1.3,this.config.push("gradientRatio"),this.transparency=null,this.config.push("transparency"),this.margin=5,this.config.push("margin"),this.marginLeft=20,this.config.push("marginLeft"),this.marginTop=20,this.config.push("marginTop"),this.marginBottom=20,this.config.push("marginBottom"),this.marginRight=20,this.config.push("marginRight"),this.showShadow=!1,this.config.push("showShadow"),this.shadowOffsetX=3,this.config.push("shadowOffsetX"),this.shadowOffsetY=3,this.config.push("shadowOffsetY"),this.shadowBlur=2,this.config.push("shadowBlur"),this.shadowColor="rgba(0,0,0,0.5)",this.config.push("shadowColor"),this.canvasBox=!0,this.config.push("canvasBox"),this.canvasBoxColor="rgb(204,204,204)",this.config.push("canvasBoxColor"),this.autoAdjust=!0,this.config.push("autoAdjust"),this.autoAdjustYTries=0,this.autoAdjustXTries=0,this.autoAdjustMax=3,this.config.push("autoAdjustMax"),this.acknowledgment=!1,this.config.push("acknowledgment"),this.acknowledgementIcon="cx.png",this.config.push("acknowledgmentIcon"),this.acknowledgementIconPosition="outside",this.config.push("acknowledgmentIconPosition"),this.functions=[],this.videoControls=!0,this.config.push("videoControls"),this.videoAutoplay=!0,this.config.push("videoAutoplay"),this.videoLoop=!1,this.config.push("videoLoop"),this.videoPreload="none",this.config.push("videoPreload"),this.videoData="{}",this.config.push("videoData"),this.videoPoster="",this.config.push("videoPoster"),this.videoClassName="video-js vjs-default-skin",this.config.push("videoClassName"),this.videoPlaybackRate=1,this.config.push("videoPlaybackRate"),this.videoCurrentTime=!1,this.config.push("videoCurrentTime"),this.videoGrid=!1,this.config.push("videoGrid"),this.videoGridStep=10,this.config.push("videoGridStep"),this.videoColor="rgb(255,0,0)",this.config.push("videoColor"),this.fonts=this.isVML||this.subBrowser?["Gentilis","Helvetiker","Optimer"]:["Gentilis","Helvetiker","Optimer","Verdana, sans-serif"],this.fontName=this.isVML?"Gentilis":this.subBrowser?"Optimer":"Verdana, sans-serif",this.config.push("fontName"),this.fontStyle=!1,this.config.push("fontStyle"),this.fontSize=12,this.config.push("fontSize"),this.font=this.fontStyle?this.fontStyle+this.fontSize+"pt "+this.fontName:this.fontSize+"pt "+this.fontName,this.align="center",this.config.push("align"),this.baseline="middle",this.config.push("baseline"),this.maxTextSize=14,this.config.push("maxTextSize"),this.minTextSize=4,this.config.push("minTextSize"),this.autoScaleFont=!0,this.config.push("autoScaleFont"),this.scaleTextConstantMult=40,this.scaleTextConstantAdd=2.5,this.title=!1,this.config.push("title"),this.titleHeight=30,this.config.push("titleHeight"),this.titleColor="rgb(0,0,0)",this.config.push("titleColor"),this.subtitle=!1,this.config.push("subtitle"),this.subtitleHeight=16,this.config.push("subtitleHeight"),this.subtitleColor="rgb(0,0,0)",this.config.push("subtitleColor"),this.citation=!1,this.config.push("citation"),this.citationColor="rgb(0,0,0)",this.config.push("citationColor"),this.citationFontSize=6,this.config.push("citationSize"),this.citationFont=this.citationFontSize+"Pt "+this.fontName,this.citationScaleFontFactor=1,this.config.push("citationScaleFontFactor"),this.dashLength=8,this.config.push("dashLength"),this.dotLength=1,this.config.push("dotLength"),this.arrowPointSize=10,this.config.push("arrowPointSize"),this.capType="butt",this.config.push("capType"),this.outlineWidth=1,this.config.push("outlineWidth"),this.lines=[],this.colorScheme="user",this.config.push("colorScheme"),this.colors0=["rgb(255,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,255,0)","rgb(0,255,255)","rgb(255,0,255)","rgb(153,51,0)","rgb(0,0,128)","rgb(128,128,0)","rgb(255,102,0)","rgb(0,128,128)","rgb(102,0,102)","rgb(255,153,204)","rgb(102,102,153)","rgb(51,51,0)","rgb(255,204,153)","rgb(204,255,255)","rgb(153,153,255)","rgb(255,128,128)","rgb(51,102,255)","rgb(51,153,102)","rgb(255,204,0)","rgb(0,204,255)","rgb(208,32,144)","rgb(153,51,102)","rgb(0,102,204)","rgb(153,204,0)","rgb(255,153,0)","rgb(51,204,204)","rgb(204,153,255)","rgb(128,0,0)","rgb(51,51,153)","rgb(0,128,0)","rgb(255,255,204)","rgb(153,204,255)","rgb(128,0,128)"],this.colors1=["rgb(0,0,255)","rgb(255,0,77)","rgb(255,191,0)","rgb(116,255,0)","rgb(164,0,255)","rgb(255,116,0)","rgb(255,255,0)","rgb(0,255,255)","rgb(255,0,0)","rgb(255,211,0)","rgb(61,0,255)","rgb(0,255,0)","rgb(255,0,255)","rgb(255,146,0)","rgb(211,255,0)","rgb(0,144,255)","rgb(109,0,255)","rgb(255,73,0)","rgb(255,232,0)","rgb(0,255,146)","rgb(255,0,144)","rgb(255,170,0)","rgb(170,255,0)","rgb(0,77,255)"],this.colors2=["rgb(60,60,157)","rgb(157,60,90)","rgb(157,133,60)","rgb(104,157,60)","rgb(122,60,157)","rgb(157,104,60)","rgb(157,157,60)","rgb(60,157,157)","rgb(157,60,60)","rgb(157,140,60)","rgb(83,60,157)","rgb(60,157,60)","rgb(157,60,157)","rgb(157,115,60)","rgb(140,157,60)","rgb(60,115,157)","rgb(102,60,157)","rgb(157,88,60)","rgb(157,148,60)","rgb(60,157,115)","rgb(157,60,115)","rgb(157,125,60)","rgb(125,157,60)","rgb(60,90,157)"],this.colors3=["rgb(0,0,117)","rgb(117,0,36)","rgb(117,88,0)","rgb(53,117,0)","rgb(76,0,117)","rgb(117,53,0)","rgb(117,117,0)","rgb(0,117,117)","rgb(117,0,0)","rgb(117,97,0)","rgb(28,0,117)","rgb(0,117,0)","rgb(117,0,117)","rgb(117,67,0)","rgb(97,117,0)","rgb(0,66,117)","rgb(50,0,117)","rgb(117,33,0)","rgb(117,107,0)","rgb(0,117,67)","rgb(117,0,66)","rgb(117,78,0)","rgb(78,117,0)","rgb(0,36,117)"],this.colors4=["rgb(101,101,255)","rgb(255,101,147)","rgb(255,216,101)","rgb(171,255,101)","rgb(200,101,255)","rgb(255,171,101)","rgb(255,255,101)","rgb(101,255,255)","rgb(255,101,101)","rgb(255,229,101)","rgb(137,101,255)","rgb(101,255,101)","rgb(255,101,255)","rgb(255,189,101)","rgb(229,255,101)","rgb(101,188,255)","rgb(167,101,255)","rgb(255,145,101)","rgb(255,241,101)","rgb(101,255,189)","rgb(255,101,188)","rgb(255,204,101)","rgb(204,255,101)","rgb(101,147,255)"],this.colors5=["rgb(181,181,255)","rgb(255,181,203)","rgb(255,237,181)","rgb(215,255,181)","rgb(229,181,255)","rgb(255,215,181)","rgb(255,255,181)","rgb(181,255,255)","rgb(255,181,181)","rgb(255,242,181)","rgb(199,181,255)","rgb(181,255,181)","rgb(255,181,255)","rgb(255,223,181)","rgb(242,255,181)","rgb(181,223,255)","rgb(213,181,255)","rgb(255,202,181)","rgb(255,248,181)","rgb(181,255,223)","rgb(255,181,223)","rgb(255,230,181)","rgb(230,255,181)","rgb(181,203,255)"],this.colors6=["rgb(254,41,108)","rgb(72,126,182)","rgb(167,206,49)","rgb(248,204,3)","rgb(255,140,2)","rgb(105,150,150)","rgb(183,120,68)","rgb(131,172,208)","rgb(194,224,118)","rgb(250,220,90)","rgb(255,84,159)","rgb(255,175,84)","rgb(154,184,183)","rgb(210,166,131)","rgb(61,105,155)","rgb(135,172,34)","rgb(205,169,8)","rgb(208,33,88)","rgb(208,115,0)","rgb(86,118,118)"],this.colors=this.colors6,this.config.push("colors"),this.colorHSV=[0,0,1],this.colorRGB=[1,1,1],this.shapes=["sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","pacman","mdavid","rect2","rect3","arc","rectangle","image"],this.config.push("shapes"),this.sizes=[4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34],this.config.push("sizes"),this.images=[],this.config.push("images"),this.timeFormat="isoDate",this.config.push("timeFormat"),this.oddColor=this.background,this.config.push("oddColor"),this.evenColor="rgb(240,240,240)",this.config.push("evenColor"),this.maxSmpStringLen=50,this.config.push("maxSmpStringLen"),this.smpLabelDescription=!1,this.config.push("smpLabelDescription"),this.smpTitle=!1,this.config.push("smpTitle"),this.smpTitleFontSize=10,this.config.push("smpTitleFontSize"),this.smpTitleFont=this.smpTitleFontSize+"Pt "+this.fontName,this.smpTitleColor=this.foreground,this.config.push("smpTitleColor"),this.smpTitleScaleFontFactor=1,this.config.push("smpTitleScaleFontFactor"),this.smpLabelFontSize=10,this.config.push("smpLabelFontSize"),this.smpLabelFont=this.smpLabelFontSize+"Pt "+this.fontName,this.smpLabelColor=this.foreground,this.config.push("smpLabelColor"),this.smpLabelScaleFontFactor=1,this.config.push("smpLabelScaleFontFactor"),this.smpLabelRotate=0,this.config.push("smpLabelRotate"),this.smpLabelInterval=1,this.config.push("smpLabelInterval"),this.showSampleNames=!0,this.config.push("showSampleNames"),this.smpLabelCircular=!1,this.config.push("smpLabelCircular"),this.highlightSmp=[],this.config.push("highlightSmp"),this.smpHighlightColor="rgb(255,0,0)",this.config.push("smpHighlightColor"),this.filterSmpBy=[],this.config.push("filterSmpBy"),this.filterSmpByOp=[],this.filterSmpByValue=[],this.filterSmpByCase=[],this.filteredSmpIndices=[],this.maxVarStringLen=30,this.config.push("maxVarStringLen"),this.varLabelDescription=!1,this.config.push("varLabelDescription"),this.varTitle=!1,this.config.push("varTitle"),this.varTitleFontSize=10,this.config.push("varTitleFontSize"),this.varTitleFont=this.varTitleFontSize+"Pt "+this.fontName,this.varTitleColor=this.foreground,this.config.push("varTitleColor"),this.varTitleScaleFontFactor=1,this.config.push("varTitleScaleFontFactor"),this.varLabelFontSize=10,this.config.push("varLabelFontSize"),this.varLabelFont=this.varLabelFontSize+"Pt "+this.fontName,this.varLabelColor=this.foreground,this.config.push("varLabelColor"),this.varLabelScaleFontFactor=1,this.config.push("varLabelScaleFontFactor"),this.varLabelRotate=0,this.config.push("varLabelRotate"),this.varLabelInterval=1,this.config.push("varLabelInterval"),this.showVariableNames=!0,this.config.push("showVariableNames"),this.varTitleLabelOverlayPosition="bottom",this.config.push("varTitleLabelOverlayPosition"),this.highlightVar=[],this.config.push("highlightVar"),this.varHighlightColor="rgb(255,0,0)",this.config.push("varHighlightColor"),this.filterVarBy=[],this.config.push("filterVarBy"),this.filterVarByOp=[],this.filterVarByValue=[],this.filterVarByCase=[],this.filteredVarIndices=[],this.overlaysWidth=30,this.config.push("overlaysWidth"),this.smpOverlays=[],this.config.push("smpOverlays"),this.varOverlays=[],this.config.push("varOverlays"),this.showOverlays=!0,this.config.push("showOverlays"),this.showLevelOverlays=!1,this.config.push("showLevelOverlays"),this.overlayFontSize=6,this.config.push("overlayFontSize"),this.overlayFont=this.overlayFontSize+"Pt "+this.fontName,this.overlayFontColor=this.foreground,this.config.push("overlayFontColor"),this.overlayScaleFontFactor=1,this.config.push("overlayScaleFontFactor"),this.smpOverlayRecycleColors=!1,this.config.push("smpOverlayRecycleColors"),this.varOverlayRecycleColors=!1,this.config.push("varOverlayRecycleColors"),this.showLegend=!0,this.config.push("showLegend"),this.legendPosition="right",this.config.push("legendPosition"),this.legendColor=this.foreground,this.config.push("legendColor"),this.legendBox=!0,this.config.push("legendBox"),this.legendBoxColor="rgb(204,204,204)",this.config.push("legendBoxColor"),this.legendBackgroundColor=this.background,this.config.push("legendBackgroundColor"),this.legendFontSize=10,this.config.push("legendFontSize"),this.legendFont=this.legendFontSize+"Pt "+this.fontName,this.legendScaleFontFactor=1,this.config.push("legendScaleFontFactor"),this.showIndicators=!0,this.config.push("showIndicators"),this.indicatorsPosition="bottom",this.config.push("indicatorsPosition"),this.showDecorations=!1,this.config.push("showDecorations"),this.decorationsPosition="bottom",this.config.push("decorationsPosition"),this.decorationsColor=this.foreground,this.config.push("decorationsColor"),this.decorationFontSize=10,this.config.push("decorationFontSize"),this.decorationFont=this.decorationFontSize+"Pt "+this.fontName,this.decorationScaleFontFactor=1,this.config.push("decorationScaleFontFactor"),this.decorationsWidth=10,this.config.push("decorationsWidth"),this.decorationsHeight=20,this.config.push("decorationsHeight"),this.decorationsType="bar",this.config.push("decorationsType"),this.decorations=[],this.config.push("decorations"),this.decorationsColors=[],this.config.push("decorationsColors"),this.decorationsProperties={},this.config.push("decorationsProperties"),this.axisTickColor=this.foreground,this.config.push("axisTickColor"),this.axisTickFontSize=10,this.config.push("axisTickFontSize"),this.axisTickFont=this.axisTickFontSize+"Pt "+this.fontName,this.tickScaleFontFactor=1,this.config.push("tickScaleFontFactor"),this.tickRotate=0,this.config.push("tickRotate"),this.axisTitleColor=this.foreground,this.config.push("axisTitleColor"),this.axisTitleFontSize=10,this.config.push("axisTitleFontSize"),this.axisTitleFont=this.axisTitleFontSize+"Pt "+this.fontName,this.axisTitleScaleFontFactor=1,this.config.push("axisTitleScaleFontFactor"),this.isGroupedData=!1,this.isTransformedData=!1,this.isBoxPlotCalc=!1,this.isMarketDataFormated=!1,this.isMarketSwitched=!1,this.isGraphTime=!1,this.config.push("isGraphTime"),this.groupingFactors=[],this.config.push("groupingFactors"),this.segregateSamplesBy=!1,this.config.push("segregateSamplesBy"),this.segregateVariablesBy=!1,this.config.push("segregateVariablesBy"),this.isLogData=!1,this.config.push("isLogData"),this.smpSort=-1,this.varSort=-1,this.tmpAsciiArray=[],this.sortDir="ascending",this.config.push("sortDir"),this.transformBase=2,this.config.push("transformBase"),this.transformType=!1,this.config.push("transformType"),this.ratioReference=0,this.config.push("ratioReference"),this.zscoreAxis="samples",this.config.push("zscoreAxis"),this.showErrorBars=!0,this.config.push("showErrorBars"),this.randomData=!1,this.config.push("randomData"),this.randomDataMean=100,this.config.push("randomDataMean"),this.randomDataSigma=50,this.config.push("randomDataSigma"),this.randomDataVariables=6,this.config.push("randomDataVariables"),this.randomDataSamples=12,this.config.push("randomDataSamples"),this.randomDataVariableAnnotations=2,this.config.push("randomDataVariableAnnotations"),this.randomDataSampleAnnotations=3,this.config.push("randomDataSampleAnnotations"),this.randomDataVariableAnnotationRatio=2,this.config.push("randomDataVariableAnnotationRatio"),this.randomDataSampleAnnotationRatio=2,this.config.push("randomDataSampleAnnotationRatio"),this.randomMissingDataPercentage=0,this.config.push("randomMissingDataPercentage"),this.missingDataColor="rgb(255,255,0)",this.config.push("missingDataColor"),this.zoom=1,this.config.push("zoom"),this.zoomGlobal=1,this.zoomStep=.2,this.config.push("zoomStep"),this.zoomVariablesDisable=!1,this.config.push("zoomVariablesDisable"),this.zoomSamplesDisable=!1,this.config.push("zoomSamplesDisable"),this.panningX=0,this.config.push("panningX"),this.panningY=0,this.config.push("panningY"),this.panningGlobalX=0,this.panningGlobalY=0,this.panningStep=.2,this.config.push("panningStep"),this.distance="euclidian",this.config.push("distance"),this.linkage="single",this.config.push("linkage"),this.clusterAxis="samples",this.config.push("clusterAxis"),this.kmeansClusters=3,this.config.push("kmeansClusters"),this.maxIterations=10,this.config.push("maxIterations"),this.imputeMethod="mean",this.config.push("imputeMethod"),this.centerData=!1,this.config.push("centerData"),this.useSmpVarIndexOnClustering=!1,this.config.push("useSmpVarIndexOnClustering"),this.xAxisAbsMax=null,this.xAxisAbsMin=null,this.xAxis2AbsMax=null,this.xAxis2AbsMin=null,this.yAxisAbsMax=null,this.yAxisAbsMin=null,this.zAxisAbsMax=null,this.zAxisAbsMin=null,this.rAxisAbsMax=null,this.rAxisAbsMin=null,this.xAxisMaxStrLength=!1,this.xAxis2MaxStrLength=!1,this.yAxisMaxStrLength=!1,this.zAxisMaxStrLength=!1,this.rAxisMaxStrLength=!1,this.setMax=null,this.config.push("setMax"),this.setMin=null,this.config.push("setMin"),this.setMax2=null,this.config.push("setMax2"),this.setMin2=null,this.config.push("setMin2"),this.setMaxX=null,this.config.push("setMaxX"),this.setMinX=null,this.config.push("setMinX"),this.setMaxY=null,this.config.push("setMaxY"),this.setMinY=null,this.config.push("setMinY"),this.setMaxZ=null,this.config.push("setMaxZ"),this.setMinZ=null,this.config.push("setMinZ"),this.setMaxR=null,this.config.push("setMaxR"),this.setMinR=null,this.config.push("setMinR"),this.xAxisCurrent=0,this.config.push("xAxisCurrent"),this.yAxisCurrent=0,this.config.push("yAxisCurrent"),this.zAxisCurrent=0,this.config.push("zAxisCurrent"),this.rAxisCurrent=0,this.config.push("rAxisCurrent"),this.xAxisTitle=!1,this.config.push("xAxisTitle"),this.yAxisTitle=!1,this.config.push("yAxisTitle"),this.zAxisTitle=!1,this.config.push("zAxisTitle"),this.rAxisTitle=!1,this.config.push("rAxisTitle"),this.xAxis=[],this.config.push("xAxis"),this.xAxis2=[],this.config.push("xAxis2"),this.yAxis=[],this.config.push("yAxis"),this.zAxis=[],this.config.push("zAxis"),this.xAxisTickStyle="solid",this.config.push("xAxisTickStyle"),this.yAxisTickStyle="solid",this.config.push("yAxisTickStyle"),this.zAxisTickStyle="solid",this.config.push("zAxisTickStyle"),this.rAxisTickStyle="solid",this.config.push("rAxisTickStyle"),this.xAxisTickFormat=!1,this.config.push("xAxisTickFormat"),this.xAxis2TickFormat=!1,this.config.push("xAxis2TickFormat"),this.yAxisTickFormat=!1,this.config.push("yAxisTickFormat"),this.zAxisTickFormat=!1,this.config.push("zAxisTickFormat"),this.rAxisTickFormat=!1,this.config.push("rAxisTickFormat"),this.xAxisTickColor="rgb(204,204,204)",this.config.push("xAxisTickColor"),this.yAxisTickColor="rgb(204,204,204)",this.config.push("yAxisTickColor"),this.zAxisTickColor="rgb(204,204,204)",this.config.push("zAxisTickColor"),this.rAxisTickColor="rgb(204,204,204)",this.config.push("rAxisTickColor"),this.axisExtension=.1,this.config.push("axisExtension"),this.axisExact=!1,this.config.push("axisExact"),this.xAxisExact=!1,this.config.push("xAxisExact"),this.xAxis2Exact=!1,this.config.push("xAxis2Exact"),this.yAxisExact=!1,this.config.push("yAxisExact"),this.zAxisExact=!1,this.config.push("zAxisExact"),this.rAxisExact=!1,this.config.push("rAxisExact"),this.timeValues=[],this.config.push("timeValues"),this.timeValueIndices=[],this.config.push("timeValueIndices"),this.xAxisValues=[],this.config.push("xAxisValues"),this.xAxis2Values=[],this.config.push("xAxis2Values"),this.yAxisValues=[],this.config.push("yAxisValues"),this.zAxisValues=[],this.config.push("zAxisValues"),this.rAxisValues=[],this.config.push("rAxisValues"),this.xAxisMinorValues=[],this.config.push("xAxisMinorValues"),this.xAxis2MinorValues=[],this.config.push("xAxis2MinorValues"),this.yAxisMinorValues=[],this.config.push("yAxisMinorValues"),this.zAxisMinorValues=[],this.config.push("zAxisMinorValues"),this.rAxisMinorValues=[],this.config.push("rAxisMinorValues"),this.xAxisTransform=!1,this.config.push("xAxisTransform"),this.yAxisTransform=!1,this.config.push("yAxisTransform"),this.zAxisTransform=!1,this.config.push("zAxisTransform"),this.rAxisTransform=!1,this.config.push("rAxisTransform"),this.xAxisTransformTicks=!0,this.config.push("xAxisTransformTicks"),this.yAxisTransformTicks=!0,this.config.push("yAxisTransformTicks"),this.zAxisTransformTicks=!0,this.config.push("zAxisTransformTicks"),this.rAxisTransformTicks=!0,this.config.push("rAxisTransformTicks"),this.xAxisShow=!0,this.config.push("xAxisShow"),this.xAxis2Show=!0,this.config.push("xAxis2Show"),this.yAxisShow=!0,this.config.push("yAxisShow"),this.zAxisShow=!0,this.config.push("zAxisShow"),this.rAxisShow=!0,this.config.push("rAxisShow"),this.ticks=50,this.config.push("ticks"),this.timeTicksFirst=!1,this.config.push("timeTicksFirst"),this.xAxisTicks=5,this.config.push("xAxisTicks"),this.xAxis2Ticks=5,this.config.push("xAxis2Ticks"),this.yAxisTicks=5,this.config.push("yAxisTicks"),this.zAxisTicks=5,this.config.push("zAxisTicks"),this.rAxisTicks=5,this.config.push("rAxisTicks"),this.xAxisMinorTicks=!0,this.config.push("xAxisMinorTicks"),this.xAxis2MinorTicks=!0,this.config.push("xAxis2MinorTicks"),this.yAxisMinorTicks=!0,this.config.push("yAxisMinorTicks"),this.zAxisMinorTicks=!1,this.config.push("zAxisMinorTicks"),this.rAxisMinorTicks=!1,this.config.push("rAxisMinorTicks"),this.smpHairline="dotted",this.config.push("smpHairline"),this.smpHairlineWidth=.3,this.config.push("smpHairlineWidth"),this.smpHairlineColor="rgb(204,204,204)",this.config.push("smpHairlineColor"),this.blockContrast=!1,this.config.push("blockContrast"),this.seriesSeparationFactor=2,this.config.push("seriesSeparationFactor"),this.blockSeparationFactor=1,this.config.push("blockSeparationFactor"),this.blockFactor=1,this.config.push("blockFactor"),this.plotByVariable=!1,this.config.push("plotByVariable"),this.is3DPlot=!1,this.config.push("is3DPlot"),this.showDataValues=!1,this.config.push("showDataValues"),this.lineDecoration="symbol",this.config.push("lineDecoration"),this.coordinateLineColor=!0,this.config.push("coordinateLineColor"),this.lineThickness=1,this.config.push("lineThickness"),this.lineType="rect",this.config.push("lineType"),this.tension=.3,this.config.push("tension"),this.dotPlotJitter=!1,this.config.push("dotPlotJitter"),this.dotPlotDataPointRatio=2,this.config.push("dotPlotDataPointRatio"),this.dotPlotDataPointTransparency=.5,this.config.push("dotPlotDataPointTransparency"),this.boxPlotOutliersRatio=8,this.config.push("boxPlotOutliersRatio"),this.showBoxplotOriginalData=!1,this.config.push("showBoxplotOriginalData"),this.areaIsCumulative=!1,this.config.push("areaIsCumulative"),this.colorBy=!1,this.config.push("colorBy"),this.shapeBy=!1,this.config.push("shapeBy"),this.shapeByData=!1,this.config.push("shapeByData"),this.shapeByShape=!1,this.config.push("shapeByShape"),this.sizeBy=!1,this.config.push("sizeBy"),this.sizeByData=!1,this.config.push("sizeByData"),this.outlineBy=!1,this.config.push("outlineBy"),this.outlineByData=!1,this.config.push("outlineByData"),this.scatterType=!1,this.config.push("scatterType"),this.scatterSeries="y",this.config.push("scatterSeries"),this.selectDataMode="area",this.config.push("selectDataMode"),this.selectDataModeDescription=!1,this.config.push("selectDataModeDescription"),this.selectDataPoint=[],this.hideDataPoint=[],this.isSelectDataPoints=0,this.isHistogram=!1,this.config.push("isHistogram"),this.histogramBarWidth=.5,this.config.push("histogramBarWidth"),this.histogramBins=20,this.config.push("histogramBins"),this.isCreateHistogram=!1,this.allVsAll=!1,this.config.push("allVsAll"),this.allVsAllType="both",this.config.push("allVsAllType"),this.functionIntervals=20,this.config.push("functionIntervals"),this.xRotate=45,this.config.push("xRotate"),this.yRotate=0,this.config.push("yRotate"),this.zRotate=0,this.config.push("zRotate"),this.x3DRatio=1,this.config.push("x3DRatio"),this.y3DRatio=1,this.config.push("y3DRatio"),this.z3DRatio=1,this.config.push("z3DRatio"),this.bar3DInverseWeight=1,this.config.push("bar3DInverseWeight"),this.minRotate=null,this.config.push("minRotate"),this.maxRotate=null,this.config.push("maxRotate"),this.show3DGrid=!0,this.config.push("show3DGrid"),this.rotationDelay=100,this.config.push("rotationDelay"),this.rotationSensitivity=45,this.config.push("rotationSensitivity"),this.rotationStep=2,this.config.push("rotationStep"),this.cullingThreshold=1e4,this.config.push("cullingThreshold"),this.indicatorCenter="white",this.config.push("indicatorCenter"),this.indicatorHeight=8,this.config.push("indicatorHeight"),this.indicatorWidth=1,this.config.push("indicatorWidth"),this.heatmapType="blue-red",this.config.push("heatmapType"),this.varIndicesStart=-1,this.smpIndicesStart=-1,this.isMultidimensionalHeatmap=!1,this.correlationAxis="samples",this.config.push("correlationAxis"),this.correlationAnchorLegend=!1,this.config.push("correlationAnchorLegend"),this.correlationAnchorLegendAlignWidth=40,this.config.push("correlationAnchorLegendAlignWidth"),this.correlationLabelInterval=1,this.config.push("correlationLabelInterval"),this.showSmpDendrogram=!1,this.config.push("showSmpDendrogram"),this.showVarDendrogram=!1,this.config.push("showVarDendrogram"),this.varDendrogramPosition="top",this.config.push("varDendrogramPosition"),this.smpDendrogramPosition="left",this.config.push("smpDendrogramPosition"),this.dendrogramSpace=6,this.config.push("dendrogramSpace"),this.dendrogramHang=!1,this.config.push("dendrogramHang"),this.dendrogramHeight=!1,this.config.push("dendrogramHeight"),this.dendrogramColor="rgb(204,204,204)",this.config.push("dendrogramColor"),this.vennLegendColors=!1,this.config.push("vennLegendColors"),this.vennGroups=4,this.config.push("vennGroups"),this.vennCompartments=["A","B","AB","C","AC","BC","ABC","D","AD","BD","CD","ABD","ACD","BCD","ABCD"],this.vennColors=[],this.config.push("vennColors"),this.pieType="separated",this.config.push("pieType"),this.pieSegmentPrecision=0,this.config.push("pieSegmentPrecision"),this.pieSegmentSeparation=3,this.config.push("pieSegmentSeparation"),this.pieSegmentLabels="inside",this.config.push("pieSegmentLabels"),this.maxPieSectors=20,this.config.push("maxPieSectors"),this.showPieGrid=!0,this.config.push("showPieGrid"),this.showPieValues=!0,this.config.push("showPieValues"),this.showPieSampleLabel=!0,this.config.push("showPieSampleLabel"),this.startPieSectors=0,this.config.push("startPieSectors"),this.donutProportion=.3,this.config.push("donutProportion"),this.ringSegmentSeparation=4,this.config.push("ringSegmentSeparation"),this.ringType=[],this.config.push("ringType"),this.ringWeight=[],this.config.push("ringWeight"),this.rAxis=!1,this.config.push("rAxis"),this.rAxisZero=!0,this.config.push("rAxisZero"),this.circularLetterSeparationFactor=2,this.config.push("circularLetterSeparationFactor"),this.showVolume=!0,this.config.push("showVolume"),this.stockIndicators=["Sma5","Sma10","Sma25"],this.config.push("stockIndicators"),this.sma5Color="rgb(255,0,0)",this.config.push("sma5Color"),this.sma10Color="rgb(0,255,0)",this.config.push("sma1Color"),this.sma20Color="rgb(0,0,255)",this.config.push("sma20Color"),this.sma25Color="rgb(255,0,255)",this.config.push("sma25Color"),this.sma50Color="rgb(0,0,0)",this.config.push("sma50Color"),this.calculateLayout=!0,this.config.push("calculateLayout"),this.networkFreeze=!1,this.config.push("networkFreeze"),this.networkFreezeOnLoad=!1,this.config.push("networkFreezeOnLoad"),this.networkStack=[],this.subNetworks=!1,this.networkStackStates=8,this.config.push("networkStackStates"),this.networkStackIndex=0,this.approximateNodePositions=!1,this.config.push("approximateNodePositions"),this.networkLayoutType="forceDirected",this.config.push("networkLayoutType"),this.networkForceConstant=0,this.config.push("networkForceConstant"),this.temperature=0,this.config.push("temperature"),this.initialTemperature=0,this.config.push("initialTemperature"),this.networkNodeMinDistance=4,this.config.push("networkNodeMinDistance"),this.attractiveForceFunction="FruchtermanReingold",this.config.push("attractiveForceFunction"),this.repulsiveForceFunction="square",this.config.push("repulsiveForceFunction"),this.networkRoot=!1,this.config.push("networkRoot"),this.showNetworkRadialLayout=!1,this.config.push("showNetworkRadialLayout"),this.networkDepth=0,this.networkDivisions=0,this.preScaleNetwork=!1,this.config.push("preScaleNetwork"),this.showNetworkNodesLegend=!0,this.config.push("showNetworkNodesLegend"),this.showNetworkEdgesLegend=!0,this.config.push("showNetworkEdgesLegend"),this.showNetworkTextLegend=!0,this.config.push("showNetworkTextLegend"),this.showNetworkDecorationsLegend=!0,this.config.push("showNetworkDecorationsLegend"),this.highlightNode=[],this.config.push("highlightNode"),this.nodeHighlightColor="rgb(255,0,0)",this.config.push("nodeHighlightColor"),this.selectNode={},this.isSelectNodes=0,this.showNodeNameThreshold=50,this.config.push("showNodeNameThreshold"),this.showHiddenChildEdges=!0,this.config.push("showHiddenChildEdges"),this.nodeSize=this.preScaleNetwork?10:20,this.config.push("nodeSize"),this.edgeWidth=1,this.config.push("edgeWidth"),this.layoutTime=15,this.config.push("layoutTime"),this.nodeFontSize=this.nodeSize,this.config.push("nodeFontSize"),this.nodeFont=this.nodeFontSize+"Pt "+this.fontName,this.nodeFontColor=this.foreground,this.config.push("nodeFontColor"),this.nodeScaleFontFactor=1,this.config.push("nodeScaleFontFactor"),this.randomNetwork=!1,this.config.push("randomNetwork"),this.reduceRandomNetwork=!1,this.config.push("reduceRandomNetwork"),this.randomNetworkNodes=50,this.config.push("randomNetworkNodes"),this.randomNetworkNodeEdgesMax=5,this.config.push("randomNetworkNodeEdgesMax"),this.colorNodeBy=!1,this.config.push("colorNodeBy"),this.shapeNodeBy=!1,this.config.push("shapeNodeBy"),this.sizeNodeBy=!1,this.config.push("sizeNodeBy"),this.colorEdgeBy=!1,this.config.push("colorEdgeBy"),this.shapeEdgeBy=!1,this.config.push("shapeEdgeBy"),this.sizeEdgeBy=!1,this.config.push("sizeEdgeBy"),this.sizeDecorationBy=!1,this.config.push("sizeDecorationBy"),this.is3DNetwork=!1,this.config.push("is3DNetwork"),this.network2DRotate=0,this.skipClick=!1,this.autoHideOnDecorationsCenter=!1,this.config.push("autoHideOnDecorationsCenter"),this.networkNodesOnTop=!0,this.config.push("networkNodesOnTop"),this.overrideEventlessNodes=!1,this.config.push("overrideEventlessNodes"),this.moveParentsWithChildren=!1,this.config.push("moveParentsWithChildren"),this.nodeConfigurableProperties=["x","y","z","parentNode","shape","color","outline","size","width","height","pattern","rotate","outlineWidth","imagePath","zIndex","eventless","hide","hideLabel","anchor"],this.config.push("nodeConfigurableProperties"),this.edgeConfigurableProperties=["color","width","cap","exact","type"],this.config.push("edgeConfigurableProperties"),this.filterNodeBy=[],this.config.push("filterNodeBy"),this.filterNodeByOp=[],this.filterNodeByValue=[],this.filterNodeByCase=[],this.filterEdgeBy=[],this.config.push("filterEdgeBy"),this.filterEdgeByOp=[],this.filterEdgeByValue=[],this.filterEdgeByCase=[],this.trackNameFontSize=10,this.config.push("trackNameFontSize"),this.trackNameFont=this.trackNameFontSize+"Pt "+this.fontName,this.trackNameFontColor=this.background,this.config.push("trackNameFontColor"),this.subtracksMaxDefault=8,this.config.push("subtracksMaxDefault"),this.showFeatureNameThereshold=20,this.config.push("showFeatureNameThereshold"),this.featureNameFontSize=8,this.config.push("featureNameFontSize"),this.featureNameFont=this.featureNameFontSize+"Pt "+this.fontName,this.featureNameFontColor=this.background,this.config.push("featureNameFontColor"),this.maxFeatureStringLen=50,this.config.push("maxFeatureStringLen"),this.featureWidthDefault=3,this.config.push("featureWidthDefault"),this.featureHeightDefault=14,this.config.push("featureHeightDefault"),this.featureTraceHeight=40,this.config.push("featureTraceHeight"),this.featureTraceTrim=1,this.config.push("featureTraceTrim"),this.featureTracesShow=!0,this.config.push("featureTracesShow"),this.featureQualityHeight=12,this.config.push("featureQualityHeight"),this.featureQualityValues=!1,this.config.push("featureQualityValues"),this.featureQualityShow=!0,this.config.push("featureQualityShow"),this.featureSignalToNoiseHeight=12,this.config.push("featureSignalToNoiseHeight"),this.featureSignalToNoiseValues=!1,this.config.push("featureSignalToNoiseValues"),this.featureSignalToNoiseShow=!0,this.config.push("featureSignalToNoiseShow"),this.featureCoordinateHeight=12,this.config.push("featureCoordinateHeight"),this.featureCoordinateShow=!0,this.config.push("featureCoordinateShow"),this.featureTranslateHeight=12,this.config.push("featureTranslateHeight"),this.featureTranslateShow=!0,this.config.push("featureTranslateShow"),this.featureTypeDefault="line",this.config.push("featureTypeDefault"),this.featureStaggered=!1,this.config.push("featureStaggered"),this.sequenceFontSize=10,this.config.push("sequenceFontSize"),this.sequenceFont=this.sequenceFontSize+"Pt "+this.fontName,this.sequenceFill=!1,this.config.push("sequenceFill"),this.sequenceGAPColor="rgb(255,0,255)",this.config.push("sequenceGAPColor"),this.sequenceAColor="rgb(0,103,0)",this.config.push("sequenceAColor"),this.sequenceBColor="rgb(0,0,0)",this.config.push("sequenceBColor"),this.sequenceCColor="rgb(0,0,255)",this.config.push("sequenceCColor"),this.sequenceDColor="rgb(0,0,0)",this.config.push("sequenceDColor"),this.sequenceEColor="rgb(0,0,0)",this.config.push("sequenceEColor"),this.sequenceFColor="rgb(0,0,255)",this.config.push("sequenceFColor"),this.sequenceGColor="rgb(0,0,0)",this.config.push("sequenceGColor"),this.sequenceHColor="rgb(255,0,0)",this.config.push("sequenceHColor"),this.sequenceIColor="rgb(0,103,0)",this.config.push("sequenceIColor"),this.sequenceKColor="rgb(255,0,0)",this.config.push("sequenceKColor"),this.sequenceLColor="rgb(0,103,0)",this.config.push("sequenceLColor"),this.sequenceMColor="rgb(0,103,0)",this.config.push("sequenceMColor"),this.sequenceNColor="rgb(0,0,0)",this.config.push("sequenceNColor"),this.sequencePColor="rgb(255,165,0)",this.config.push("sequencePColor"),this.sequenceQColor="rgb(0,0,0)",this.config.push("sequenceQColor"),this.sequenceRColor="rgb(255,0,0)",this.config.push("sequenceRColor"),this.sequenceSColor="rgb(255,165,0)",this.config.push("sequenceSColor"),this.sequenceTColor="rgb(255,0,0)",this.config.push("sequenceTColor"),this.sequenceUColor="rgb(255,0,0)",this.config.push("sequenceUColor"),this.sequenceVColor="rgb(0,103,0)",this.config.push("sequenceVColor"),this.sequenceWColor="rgb(0,0,255)",this.config.push("sequenceWColor"),this.sequenceXColor="rgb(0,0,0)",this.config.push("sequenceXColor"),this.sequenceYColor="rgb(0,0,255)",this.config.push("sequenceYColor"),this.sequenceZColor="rgb(0,0,0)",this.config.push("sequenceZColor"),this.sequenceStartColor="rgb(0,204,0)",this.config.push("sequenceStartColor"),this.sequenceEndColor="rgb(255,0,0)",this.config.push("sequenceEndColor"),this.wireColor=this.isVML?"rgb(204,204,204)":"rgba(204,204,204,0.1)",this.config.push("wireColor"),this.periodTicksLabels=5,this.config.push("periodTicksLabels"),this.genomeResolution="low",this.trackConfigurableProperties=["name","hideName","hideFeatureNames","type","height","fill","outline","hide","connect","subtracksMax","highlight"],this.config.push("trackConfigurableProperties"),this.featureConfigurableProperties=["id","name","label","hideName","fill","outline","dir","showDir","connect","offset","data","subtype","quality","signalToNoise","coordinate","sequence","trace","gaps","translate","hide","counter"],this.config.push("featureConfigurableProperties"),this.filterFeatureBy=[],this.config.push("filterFeatureBy"),this.filterFeatureByOp=[],this.filterFeatureByValue=[],this.filterFeatureByCase=[],this.errors=[],this.debug=!1,this.config.push("debug"),this.showVersion=!0,this.config.push("showVersion"),this.showCode=!1,this.config.push("showCode"),this.codeType="pretty",this.config.push("codeType"),this.skin="grey",this.config.push("skin"),this.skinProperties=["skinBackgroundColor","skinBorderColor","skinColor","skinShadowColor"],this.skinPropertiesBlue=["rgb(223,232,246)","rgb(224,224,224)","rgb(68,68,68)","rgba(204,204,204,0.2)"],this.skinPropertiesGrey=["rgb(240,240,240)","rgb(113,139,183)","rgb(34,34,34)","rgba(154,154,154,0.2)"],this.skinHighlight,this.selectedBackgroundColor="rgb(255,0,0)",this.config.push("selectedBackgroundColor"),this.disableToolbar=!1,this.config.push("disableToolbar"),this.toolbarPermanent=!1,this.config.push("toolbarPermanent"),this.disableDataTable=!1,this.config.push("disableDataTable"),this.disableDataFilters=!1,this.config.push("disableDataFilters"),this.disableConfigurator=!1,this.config.push("disableConfigurator"),this.isLayoutConfigurator=!1,this.config.push("isLayoutConfigurator"),this.resizable=!0,this.config.push("resizable"),this.showAdvancedConfiguration=!1,this.config.push("showAdvancedConfiguration"),this.configuratorWidth=250,this.config.push("configuratorWidth"),this.dataFilterWidth=200,this.config.push("dataFilterWidth"),this.disableEvents=!1,this.config.push("disableEvents"),this.eventKeys=!0,this.config.push("eventKeys"),this.eventArrowKeys=!0,this.config.push("eventArrowKeys"),this.eventPlusMinusKeys=!1,this.config.push("eventPlusMinusKeys"),this.helpKeyEvents=!0,this.config.push("helpKeyEvents"),this.maintainZoomOnDrag=!1,this.config.push("maintainZoomOnDrag"),this.infoTimeOut=3e3,this.config.push("infoTimeOut"),this.infoStartTime=(new Date).getTime(),this.infoTimeIn=50,this.config.push("infoTimeIn"),this.dataEvent=[],this.broadcast=!0,this.config.push("broadcast"),this.broadcastType="var",this.config.push("broadcastType"),this.destroyCanvasXpressZombies=!0,this.config.push("destroyCanvasXpressZombies"),this.monitorCanvasXpressZombiesTime=3e4,this.config.push("monitorCanvasXpressZombiesTime"),this.resizerBackgroundColor=this.isIE?"rgb(204,204,204)":"rgba(204,204,204,0.7)",this.config.push("resizerBackgroundColor"),this.resizerBackgroundColorCurrent="rgb(237,247,255)",this.config.push("resizerBackgroundColorCurrent"),this.resizerBackgroundColorOutlineCurrent="rgb(59,138,229)",this.config.push("resizerBackgroundColorOutlineCurrent"),this.resizerTransparency=!0,this.config.push("resizerTransparency"),this.resizerType=!1,this.config.push("resizerType"),this.resizerDraw=!1,this.config.push("resizerDraw"),this.resizerPosition="bottom",this.config.push("resizerPosition"),this.resizerWidth=50,this.config.push("resizerWidth"),this.resizerBackgroundImage=!1,this.config.push("resizerBackgroundImage"),this.resizerDataIndex=0,this.config.push("resizerDataIndex"),this.resizerEventData={},this.showAnimation=!1,this.config.push("showAnimation"),this.showAnimationFontSize=10,this.config.push("showAnimationFontSize"),this.showAnimationFont=this.showAnimationFontSize+"Pt "+this.fontName,this.showAnimationFontColor=this.background,this.config.push("showAnimationFontColor"),this.animationTime=30,this.config.push("animationTime"),this.animationType="grow",this.config.push("animationType"),this.animationCycles=20,this.config.push("animationCycles"),this.snapshotCopyChangeOnly=!0,this.config.push("snapshotCopyChangeOnly"),this.snapshots=[],this.isAnimation=!1,this.weight=1,this.scaleX=1,this.scaleY=1,this.translateX=0,this.translateY=0,this.offsetX=0,this.offsetY=0,this.layoutWidth=0,this.layoutHeight=0,this.layout="1X1",this.config.push("layout"),this.layoutComb=!1,this.config.push("layoutComb"),this.layoutAdjust=!1,this.config.push("layoutAdjust"),this.layoutCurrent=0,this.layoutMaxVarLegend=0,this.layoutMulticolor=!0,this.config.push("layoutMulticolor"),this.layoutAxis=3,this.imageDir="http://canvasxpress.org/images/",this.config.push("imageDir"),this.playButton="control_play_blue.png",this.config.push("playButton"),this.stopButton="control_stop_blue.png",this.config.push("stopButton"),this.previousButton="control_rewind_blue.png",this.config.push("previousButton"),this.nextButton="control_forward_blue.png",this.config.push("nextButton"),this.dropdownButton="menu_dropdown.png",this.config.push("dropdownButton"),this.remoteService=!1,this.config.push("remoteService"),this.remoteParams={},this.config.push("remoteParams"),this.remoteDirection="next",this.config.push("remoteDirection"),this.remoteParentId="",this.remoteDataIndex=0,this.remoteIds=[],this.remoteWindow=1,this.config.push("remoteWindow"),this.remoteAutoPlay=!1,this.config.push("remoteAutoPlay"),this.remoteAutoPlayDelay=3e3,this.config.push("remoteAutoPlayDelay"),this.remoteUpdating=!1,this.remoteUpdate=!1,this.config.push("remoteUpdate"),this.remoteUpdateDelay=1e4,this.config.push("remoteUpdateDelay"),this.skipConfigurableProperties=!0,this.config.push("skipConfigurableProperties"),this.nodesProperties=[],this.config.push("nodesProperties"),this.edgesProperties=[],this.config.push("edgesProperties"),this.featuresProperties=[],this.config.push("featuresProperties"),this.filterType="and",this.config.push("filterType"),this.filterSkipNullKeys=!1,this.config.push("filterSkipNullKeys"),this.showDataTable=!1,this.config.push("showDataTable"),this.dataTableTransposed=!0,this.config.push("dataTableTransposed"),this.maxRows=10,this.config.push("maxRows"),this.maxCols=10,this.config.push("maxCols"),this.colWidth=50,this.config.push("colWidth"),this.rowHeight=18,this.config.push("rowHeight"),this.freezeColLeft=0,this.config.push("freezeColLeft"),this.freezeColRight=0,this.config.push("freezeColRight"),this.freezeRowTop=0,this.config.push("freezeRowTop"),this.freezeRowBottom=0,this.config.push("freezeRowBottom"),this.refresehDataTableOnDraw=!1,this.config.push("refresehDataTableOnDraw"),this.showDataTableOnSelect=!1,this.config.push("showDataTableOnSelect"),this.networkShowDataTable="nodes",this.config.push("networkShowDataTable"),this.startCol=0,this.startRow=0,this.dataTableColumnWidth=[],this.dataTableRowHeight=[]},this.setInitialConfig=function(){if(n)for(var t in n)this[t]=n[t]},this.resetConfig=function(n){var i={},t;if(n)for(t=0;t<n.length;t++)i[n[t]]=this[n[t]];this.setConfigDefaults();for(t in i)this[t]=i[t]},this.updateConfig=function(n){if(n){this.userConfig=n;for(var t in n)this[t]=n[t]}},this.getConfig=function(){for(var i={},t,n=0;n<this.config.length;n++)t=this.config[n],this[t]!=undefined&&(i[t]=this[t]);return i},this.getUserConfig=function(){return this.userConfig},this.setSkin=function(n){n||(n=this.skin);for(var t=0;t<this.skinProperties.length;t++)this[this.skinProperties[t]]=n=="blue"?this.skinPropertiesBlue[t]:this.skinPropertiesGrey[t];this.skinHighlight=n=="blue"?"rgb(250,250,250)":"rgb(223,232,246)"},this.setPath=function(){var t=document.getElementsByTagName("script"),n;if(t)for(n=0;n<t.length;n++)if(t[n].src){var i=t[n].src,r=i.lastIndexOf("/"),u=i.substring(0,r+1),f=i.substring(r+1);f.match(/canvasXpress/)&&(this.path=u)}},this.getNewCanvasContext=function(n){var t=this.$(n);return t&&t.tagName.toLowerCase()=="canvas"||(t=this.$cX("canvas",{id:n}),document.body.appendChild(t)),this.browser=="Explorer"&&this.browserVersion<9&&navigator.userAgent.toLowerCase().indexOf("chromeframe")<0&&(this.useFlashIE?typeof FlashCanvas!="undefined"&&FlashCanvas.initElement(t):window.G_vmlCanvasManager.initElement(t)),t.getContext("2d")},this.setCanvas=function(){var n=this.$(this.target);if(n)if(this.browser=="Explorer"&&this.browserVersion<9&&navigator.userAgent.toLowerCase().indexOf("chromeframe")<0?this.useFlashIE?(this.isVML=!1,typeof FlashCanvas!="undefined"&&(FlashCanvas.setOptions({disableContextMenu:!0,swfPath:"http://www.canvasxpress.org/js/"}),this.canvas=FlashCanvas.initElement(n))):(this.isVML=!0,this.canvas=window.G_vmlCanvasManager.initElement(n)):(this.isVML=!1,this.canvas=n),this.ctx=this.canvas.getContext("2d"),(this.backgroundType=="video"||this.graphType=="Video")&&this.backgroundVideo){this.graphType=="Video"&&(this.backgroundType="video"),this.isVideo=!0;var i=this.$cX("script",{type:"text/javascript",src:"http://vjs.zencdn.net/c/video.js"}),r=this.$cX("link",{type:"text/css",rel:"stylesheet",href:"http://vjs.zencdn.net/c/video-js.css"}),t=document.getElementsByTagName("head")[0];t.appendChild(r),t.appendChild(i),this.background="rgba(255,255,255,0)",this.legendBackgroundColor="rgba(255,255,255,0)",this.disableToolbar=!0}else this.isVideo=!1},this.inititalizeConfig=function(){var t,i;if(this.setConfigDefaults(),n.graphType=="Network"&&(n.backgroundType||(this.backgroundType="gradient",this.nodeFontColor=this.background)),n)for(t=0;t<this.config.length;t++)i=this.config[t],n.hasOwnProperty(i)&&(this[i]=n[i]);this.isVML&&(this.showAnimation=!1),this.setSkin(),this.setPath(),this.setCanvas()},this.inititalizeConfig()},CanvasXpress.prototype.initColor=function(){this.validateColor=function(n,t){return n=n.toString(),n=n.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i)?RegExp.$2?"rgba("+RegExp.$1+","+RegExp.$2+")":"rgb("+RegExp.$1+")":n.match(/^#?[0-9abcdef]/i)?this.hexToRgb(n):!1,n&&t!=null?this.addColorTransparency(n,t):n},this.darkenLightenColor=function(n,t){var f,i,r,u;return n=this.rgbToHex(n).substring(1,7),f=parseInt(n,16),i=(f>>16)+t,i=i>255?255:i<0?0:i,r=(f>>8&255)+t,r=r>255?255:r<0?0:r,u=(f&255)+t,u=u>255?255:u<0?0:u,n=u|r<<8|i<<16,this.hexToRgb(n.toString(16))},this.rgbToHex=function(n){var t=function(n){return(n=parseInt(n,10),isNaN(n))?"00":(n=Math.max(0,Math.min(n,255)),"0123456789ABCDEF".charAt((n-n%16)/16)+"0123456789ABCDEF".charAt(n%16))};return n.substr(0,1)==="#"?n:n.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/)?"#"+t(RegExp.$1)+t(RegExp.$2)+t(RegExp.$3):n},this.hexToRgb=function(n){var t=function(){return parseInt(n.substring(0,2),16)},i=function(){return parseInt(n.substring(2,4),16)},r=function(){return parseInt(n.substring(4,6),16)};return n=n.charAt(0)=="#"?n.substring(1,7):n,"rgb("+t()+","+i()+","+r()+")"},this.addColorTransparency=function(n,t){return n&&n.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i)?RegExp.$2?"rgba("+RegExp.$1+","+t+")":"rgba("+RegExp.$1+","+t+")":!1},this.disableGradientTransparency=function(){this.gradientTemp=this.gradient,this.transparencyTemp=this.transparency,this.gradient=!1,this.transparency=null},this.enableGradientTransparency=function(){this.gradient=this.gradientTemp,this.transparency=this.transparencyTemp},this.getGradientColor=function(n){if(n.match(/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(?:,([0-9\.]+))?/i)){var t=Math.floor(parseInt(RegExp.$1)/this.gradientRatio),i=Math.floor(parseInt(RegExp.$2)/this.gradientRatio),r=Math.floor(parseInt(RegExp.$3)/this.gradientRatio),u=RegExp.$4?parseFloat(RegExp.$4):!1;return u?"rgba("+t+","+i+","+r+","+u+")":"rgb("+t+","+i+","+r+")"}return!1},this.setGradient=function(n,t,i,r,u){this.gradientType=="radial"?this.setRadialGradient(n,t,i,r,!1,!1,!0):this.setLinearGradient(n,t,i,r,u,!1,!0)},this.setLinearGradient=function(n,t,i,r,u,f,e){e||this.ctx.save();var o=this.ctx.createLinearGradient(n,t,i,r);f?(o.addColorStop(0,u),o.addColorStop(1,f)):(f=this.getGradientColor(u),o.addColorStop(0,f),o.addColorStop(.6,u),o.addColorStop(1,u)),this.ctx.fillStyle=o},this.setRadialGradient=function(n,t,i,r,u,f,e){e||this.ctx.save();var s=i/5.5,o=this.ctx.createRadialGradient(n-s,t-s,1,n,t,i);u||(u=this.transparency!=null?"rgba(0,0,0,"+this.transparency+")":"rgb(0,0,0)"),f||(f="rgba(0,0,0,0)"),o.addColorStop(0,r),o.addColorStop(1,u),o.addColorStop(1,f),this.ctx.fillStyle=o}},CanvasXpress.prototype.initText=function(){this.drawTextMultiple=function(n,t,i,r,u,f,e,o,s,h){var c=n.split(/\n/),l,a;for(r||(r=this.font),l=this.getFontPt(r)+4,c.length%2?i-=parseInt(c.length/2)*l+l/2:i=i-parseInt(c.length/2)*l,a=0;a<c.length;a++)this.drawText(c[a],t,i,r,u,f,e,o,s,h),i+=l},this.drawArcText=function(n,t,i,r,u,f,e,o,s,h,c,l){var v,y,a;if(n!=null){if(!this.ctx){this.debug&&alert("Dude, there is no canvas");return}if(isNaN(t)||isNaN(i)){this.debug&&alert("Not a valid coordinate ("+t+", "+i+") to draw "+n);return}for(l||isNaN(n)||(n=this.formatNumber(n)),t||(t=0),i||(i=0),e||(e=this.font),o||(o=this.foreground),s||(s=this.align),h||(h=this.baseline),this.ctx.save(),this.ctx.strokeStyle=o,this.ctx.fillStyle=o,this.ctx.font=e,this.ctx.textAlign=s,this.ctx.textBaseline=h,this.showShadow&&(this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor),v=f/(n.length*this.circularLetterSeparationFactor),y=u+f/2+v/2-v*(n.length/2),this.ctx.translate(t,i),this.ctx.rotate(y),a=0;a<n.length;a++)this.ctx.save(),this.ctx.rotate(a*v+Math.PI/2),this.ctx.fillText(n[a],0,-r),this.ctx.restore();return this.ctx.restore(),this.showShadow&&(this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor=this.background),[]}},this.drawText=function(n,t,i,r,u,f,e,o,s,h,c){var k=0,d=function(n){n.shift();var u=[],r=Math.PI/2+o==0?-Math.PI/2:o-Math.PI/2,c=["poly"],f=n.shift()-t,e=n.shift()-i,s=n.shift()-t,h=n.shift()-i;for(u.push(e*Math.sin(r)-f*Math.cos(r)),u.push(e*Math.cos(r)+f*Math.sin(r)),u.push(h*Math.sin(r)-f*Math.cos(r)),u.push(h*Math.cos(r)+f*Math.sin(r)),u.push(h*Math.sin(r)-s*Math.cos(r)),u.push(h*Math.cos(r)+s*Math.sin(r)),u.push(e*Math.sin(r)-s*Math.cos(r)),u.push(e*Math.cos(r)+s*Math.sin(r));u.length>1;)c.push(u.shift()+t),c.push(u.shift()+i);return c},p=[],l,a,v,y,w,b;if(n!=null){if(this.isMultipleLines(n))return this.drawTextMultiple(n,t,i,r,u,f,e,o,s,h);if(!this.ctx){this.debug&&alert("Dude, there is no canvas");return}if(isNaN(t)||isNaN(i)){this.debug&&alert("Not a valid coordinate ("+t+", "+i+") to draw "+n);return}if(o<Math.PI/-2||o>Math.PI/2){this.debug&&alert("Dude, you can only rotate between -PI/2 and PI/2");return}if(c||isNaN(n)||(n=this.formatNumber(n)),t||(t=0),i||(i=0),r||(r=this.font),u||(u=this.foreground),f||(f=this.align),e||(e=this.baseline),l=this.measureText(n,r),a=this.getFontPt(r),s)while(l>s&&k<10)n=n.substring(0,n.length-1),l=this.measureText(n,r),k++;return f=="left"?(v=t,w=v+l):f=="right"?(v=t-l,w=t):(v=t-l/2,w=t+l/2),e=="top"?(y=i,b=y+a):e=="bottom"?(y=i-a,b=i):(y=i-a/2,b=i+a/2),p=["rect",v,y,w,b],o&&(p=d(p)),this.ctx.save(),this.ctx.strokeStyle=u,this.ctx.fillStyle=u,this.ctx.font=r,this.ctx.save(),this.ctx.translate(t,i),this.ctx.textAlign=f,this.ctx.textBaseline=e,this.showShadow&&(this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor),o&&this.ctx.rotate(o),h?this.ctx.strokeText(n,0,0):this.ctx.fillText(n,0,0),this.ctx.restore(),this.showShadow&&(this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor=this.background),p}},this.isMultipleLines=function(n){var t=n.toString().split(/\n/);return t.length-1},this.capitalize=function(n){if(n)return n.charAt(0).toUpperCase()+n.slice(1)},this.measureTextMultiple=function(n,t){var u=n.split(/\n/),r=0,i;if(!this.ctx)return 0;for(t||(t=this.font),this.ctx.font=t,i=0;i<u.length;i++)r=Math.max(r,this.ctx.measureText(u[i]).width);return r},this.measureText=function(n,t){return!n||!this.ctx?0:(n=n.toString(),t||(t=this.font),CanvasXpress.cacheText[t]||(CanvasXpress.cacheText[t]={}),CanvasXpress.cacheText[t][n]||(this.ctx.font=t,CanvasXpress.cacheText[t][n]=this.isMultipleLines(n)?this.measureTextMultiple(n,t):this.ctx.measureText(n).width),CanvasXpress.cacheText[t][n])},this.scaleTextToFont=function(n,t,i){var r=t+"pt "+this.fontName;if(n)while(this.measureText(n,r)>i&&t>=this.minTextSize)t-=2,r=t+"pt "+this.fontName;return r},this.getFontPt=function(n){return Math.max(1,parseInt(n.match(/^[\-\d]+/)[0]))},this.scaleTextToSize=function(n){var t=this.scaleTextConstantMult;return n||(n=1),Math.ceil(1/Math.sqrt(n)*t)},this.formatNumber=function(n,t){if(t||(t=2),n.toString().length>=7){var i=sprintf("%."+t+"e",Number(n)),r=sprintf("%."+t+"f",Number(n));return r.toString().length>i.toString().length?i.toString():r.toString()}return n.toString()},this.bestFormatNumber=function(n,t){return t<1?sprintf("%.0f",Number(n)):Math.abs(n)<.001?sprintf("%.2e",Number(n)):sprintf("%.3f",Number(n))},this.getMaxText=function(n){for(var r="",u=0,i,t=0;t<n.length;t++)i=this.measureText(n[t].toString(),this.font),i>u&&(r=n[t].toString(),u=i);return r},this.shortenText=function(n,t,i){return n?(n=n.toString(),i?n.substring(0,Math.max(parseInt(i*1/t)-2,1))+"..":n.length<=t?n:n.substring(0,t-3)+"..."):""},this.convertToNumber=function(n){return isNaN(n)?n:parseFloat(n)}},CanvasXpress.prototype.initTime=function(){Date.prototype.getWeek=function(){var n=new Date(this.getFullYear(),0,1);return Math.ceil(((this-n)/864e5+n.getDay()+1)/7)},Date.prototype.getDayYear=function(){var n=new Date(this.getFullYear(),0,1);return Math.ceil((this-n)/864e5)},this.getMillisecond=function(n){return n.getMilliseeconds()},this.getSecond=function(n){return n.getSeconds()},this.getMinuteSecond=function(n){return n.getMinutes()+":"+n.getSeconds()},this.getMinute=function(n){return n.getMinutes()},this.getHourMinute=function(n){return n.getHours()+":"+n.getMinutes()},this.getHour=function(n){return n.getHours()},this.getYearWeek=function(n){return n.getFullYear()+"-"+n.getWeek()},this.getYearMonth=function(n){return n.getFullYear()+"-"+n.getMonth()},this.getYear=function(n){return n.getFullYear()},this.times={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31556952e3},this.parseDate=function(n){var i=0,r=0,u=0,f=parseInt(n.toString().substring(0,4)),e=parseInt(n.toString().substring(4,6).replace(/^0/,"")),o=parseInt(n.toString().substring(6,8).replace(/^0/,"")),t=n.toString().match(/\:/)?n.toString().substring(10).split(":"):!1;return t&&(i=t[0]?parseInt(t[0].replace(/^0/,"")):0,r=t[1]?parseInt(t[1].replace(/^0/,"")):0,u=t[2]?parseInt(t[2].replace(/^0/,"")):0),new Date(f,e-1,o,i,r,u)},this.setTimeAxis=function(){var i=this.validateTimeAxis(),f,t,n;if(i){var t=Date.parse(i[i.length-1])-Date.parse(i[0]),u,e={},r=[];if(this.timeValues=[],this.timeValueIndices=[],u=t>this.times.year*2?"getYear":t>this.times.month*2?"getYearMonth":t>this.times.week*2?"getYearWeek":t<this.times.second?"getMillisecond":t<this.times.minute?"getSecond":t<this.times.hour/4?"getMinuteSecond":t<this.times.hour?"getMinute":t<this.times.day/4?"getHourMinute":t<this.times.day?"getHour":!1,u)if(this.timeTicksFirst)for(n=0;n<i.length;n++)f=this[u](i[n]),e.hasOwnProperty(f)||(r.push(i[n]),this.timeValueIndices.push(n),e[f]=!0);else for(n=i.length-1;n>=0;n--)f=this[u](i[n]),e.hasOwnProperty(f)||(r.unshift(i[n]),this.timeValueIndices.unshift(n),e[f]=!0);else for(n=0;n<i.length;n++)this.timeValues.push(dateFormat(i[n],this.timeFormat)),this.timeValueIndices.push(n);for(t=Date.parse(r[r.length-1])-Date.parse(r[r.length-2]),u=="getYear"&&t<this.times.month*3?(this.timeValues.pop(),this.timeValueIndices.pop()):u=="getYearMonth"&&t<this.times.week*4?(this.timeValues.pop(),this.timeValueIndices.pop()):u=="getYearWeek"&&t<this.times.day*7&&(this.timeValues.pop(),this.timeValueIndices.pop()),n=0;n<r.length;n++)this.timeValues.push(dateFormat(r[n],this.timeFormat))}},this.createRandomTimes=function(n){var r,e=new Date,t=e.getTime(),u=[new Date(t)],f=this.isGroupedData?this.data.w:this.data.y,i;for(n&&this.times[n]||(n="day"),i=0;i<f.smps.length;i++)r=Date.parse(f.smps[i]),isNaN(r)?t-=this.times[n]:t=r,u.unshift(new Date(t));return u},this.validateTimeAxis=function(){for(var t=this.isGroupedData?this.data.w:this.data.y,r=!1,u=[],i,n=0;n<this.smpIndices.length;n++)if(i=this.smpIndices.length!=t.smps.length?Date.parse(t.smps[this.smpIndices[n]]):Date.parse(t.smps[n]),isNaN(i)){if(this.isExample)return this.createRandomTimes();r=!0;break}else u.push(new Date(i));return r?!1:u}},CanvasXpress.prototype.initAttributes=function(){this.validateNumbers=function(n){for(var t=0;t<n.length;t++)if(isNaN(n[t]))return!1;return!0},this.lineTo=function(n,t,i,r){n==i?(n=Math.round(n)+.5,i=n):t==r&&(t=Math.round(t)+.5,r=t),this.ctx.moveTo(n,t),this.ctx.lineTo(i,r),this.ctx.stroke()},this.clip=function(n,t,i){var u,e,r,f,l,a,n,o,s,c,h,v=[];if(i&&i.length==4?(s=i[0],o=i[1],c=s+i[2],h=o+i[3]):(s=this.marginLeft+this.offsetX+this.left,o=this.marginTop+this.offsetY+this.top,c=s+this.x,h=o+this.y),n=="rect"){if(u=parseInt(t[0]),r=parseInt(t[1]),e=parseInt(u+t[2]),f=parseInt(r+t[3]),u>c+this.outlineWidth||f>h+this.outlineWidth||e<s||r<o)return!1;u<s&&(u=s),e>c&&(e=c),f<o&&(f=o),r>h&&(r=h),v=[u,r,e-u,f-r]}else if(n!="poly")if(n=="circle"){if(u=parseInt(t[0]),r=parseInt(t[1]),u>c||u<s||r<o||r>h)return!1;v=[u,r]}else if(n=="line"){if(u=parseFloat(t[0]),r=parseFloat(t[1]),e=parseFloat(t[2]),f=parseFloat(t[3]),u==e){if(u<s||u>c)return!1;if(r>f){if(r<o||(r>h&&(r=h),f>h))return!1;f<o&&(f=o)}else{if(r>h||(r<o&&(r=o),f<o))return!1;f>h&&(f=h)}}else if(r==f){if(r<o||r>h)return!1;if(u>e){if(u<s||(u>c&&(u=c),e>c))return!1;e<s&&(e=s)}else{if(u>c||(u<s&&(u=s),e<s))return!1;e>c&&(e=c)}}else if(u>e){if(u<s||e>c)return!1;if(r>f){if(r<o||f>h)return!1;l=r-f,a=u-e,u>c&&(r-=(u-c)*l/a,u=c),r>h&&(u-=(r-h)*a/l,r=h),e<s&&(f+=(s-e)*l/a,e=s),f<o&&(e+=(o-f)*a/l,f=o)}else{if(f<o||r>h)return!1;l=f-r,a=u-e,u>c&&(r+=(u-c)*l/a,u=c),r<o&&(u-=(o-r)*a/l,r=o),e<s&&(f-=(s-e)*l/a,e=s),f>h&&(e+=(f-h)*a/l,f=h)}}else{if(e<s||u>c)return!1;if(r>f){if(r<o||f>h)return!1;l=r-f,a=e-u,u<s&&(r-=(s-u)*l/a,u=s),r>h&&(u+=(r-h)*a/l,r=h),e>c&&(f+=(e-c)*l/a,e=c),f<o&&(e-=(o-f)*a/l,f=o)}else{if(f<o||r>h)return!1;l=f-r,a=e-u,u<s&&(r+=(s-u)*l/a,u=s),r<o&&(u+=(o-r)*a/l,r=o),e>c&&(f-=(e-c)*l/a,e=c),f>h&&(e-=(f-h)*a/l,f=h)}}v=[u,r,e,f]}else return!1;return v},this.lineLength=function(n,t,i,r){return Math.sqrt(Math.pow(i-n,2)+Math.pow(r-t,2))},this.shortenLine=function(n,t,i,r,u,f,e){if(this.validateNumbers([n,t,i,r,u,f])){if(e.match(/bezier/))return e.match(/beziery/i)?r>t?[n,t+u,i,r-f]:[n,t-u,i,r+f]:i>n?[n+u,t,i-f,r]:[n-u,t,i+f,r];if(e.match(/curved/))return[n,t,i,r];var o=Math.atan2(r-t,i-n),s=Math.cos(o),h=Math.sin(o),c=this.lineLength(n,t,i,r);if(c){while(c<u+f)u/=1.1,f/=1.1;n+=s*u,t+=h*u,i-=s*f,r-=h*f}return[n,t,i,r]}},this.errorBar=function(n,t,i,r,u,f){if(!this.isGroupedData&&this.isRawData,this.showErrorBars&&this.validateNumbers([u])){var e=this.drawLine("line",n,t,i,r,f,!1,!1,!1,!1,!0);return u>0?this.drawLine("line",i,r-u/2,i,r+u/2,f,!1,!1,!1,!1,!0):this.drawLine("line",i-u/2,r,i+u/2,r,f,!1,!1,!1,!1,!0),e}},this.splineControlPoint=function(n,t,i,r,u,f){var o=Math.sqrt(Math.pow(i-n,2)+Math.pow(r-t,2)),h=Math.sqrt(Math.pow(u-i,2)+Math.pow(f-r,2)),e=this.tension*o/(o+h),s=this.tension-e,c=i+e*(n-u),l=r+e*(t-f),a=i-s*(n-u),v=r-s*(t-f);return[c,l,a,v]},this.drawLine=function(n,t,i,r,u,f,e,o,s,h,c,l){var a=this,nt,k=[],b=!1,p=!1,y=!1,st=function(){a.ctx.save(),f=a.transparency!=null?f?a.validateColor(f,a.transparency)||a.addColorTransparency(a.foreground,a.transparency):a.addColorTransparency(a.foreground,a.transparency):f?a.validateColor(f)||a.foreground:a.foreground,a.ctx.fillStyle=f,a.ctx.strokeStyle=f,a.ctx.lineWidth=e?e:a.outlineWidth,a.ctx.lineCap=o?o:a.capType,a.showShadow&&(a.ctx.shadowOffsetX=a.shadowOffsetX,a.ctx.shadowOffsetY=a.shadowOffsetY,a.ctx.shadowBlur=a.shadowBlur,a.ctx.shadowColor=a.shadowColor)},ht=function(){a.showShadow&&(a.ctx.shadowOffsetX=0,a.ctx.shadowOffsetY=0,a.ctx.shadowBlur=0,a.ctx.shadowColor=a.background),a.ctx.restore()},et=function(){var n;n=t,t=r,r=n,n=i,i=u,u=n},d=function(n){var it=function(n,t,i,r){for(var f=[],e,u=0;u<n.length;u++)f.push([n[u][0]*Math.cos(t)-n[u][1]*Math.sin(t),n[u][0]*Math.sin(t)+n[u][1]*Math.cos(t)]);for(e=[],u=0;u<f.length;u++)e.push([f[u][0]+i,f[u][1]+r]);return e},c=a.arrowPointSize,g=Math.max(c/2-1,1),ut=e?e/2:a.outlineWidth/2,rt=n?[[0,-c],[0,c]]:[[Math.floor(c/2.5),0],[-c,-g*e],[-c,g*e]],v=r-t,w=u-i,f,h;if(p)p=="Y"?v=Math.abs(w)>Math.abs(v)?0:r>t?a.arrowPointSize:-a.arrowPointSize:w=Math.abs(v)>Math.abs(w)?0:u>i?a.arrowPointSize:-a.arrowPointSize;else if(y){var nt=a.lineLength(t,i,r,u),tt=a.shortenLine(t,i,r,u,0,nt/2,"line"),k=tt[2],l=tt[3],o=nt/2,s=y/o,b=r>t?Math.asin((l-i)/o):Math.asin(-(l-i)/o),d=b-Math.PI/20;r>t?(t=k+o*Math.cos(d-s),i=l+o*Math.sin(d-s),r=k+o*Math.cos(b-s),u=l+o*Math.sin(b-s)):(t=k+o*Math.cos(d-s+Math.PI),i=l+o*Math.sin(d-s+Math.PI),r=k+o*Math.cos(b-s+Math.PI),u=l+o*Math.sin(b-s+Math.PI)),v=r-t,w=u-i}for(f=it(rt,Math.atan2(w,v),r,u),st(),a.ctx.beginPath(),a.ctx.moveTo(f[0][0],f[0][1]),h=1;h<f.length;h++)isNaN(f[h][0])||isNaN(f[h][1])||a.ctx.lineTo(f[h][0],f[h][1]);n?(a.ctx.closePath(),a.ctx.stroke()):(isNaN(f[0][0])||isNaN(f[0][1])||a.ctx.lineTo(f[0][0],f[0][1]),a.ctx.closePath(),a.ctx.fill()),ht()},ct,ot,v;if(n=="spline"){if(t.length<3)return!1;var tt=[],w=[],ri=[],rt=0;for(k=["poly"],v=0;v<t.length;v++)if(this.validateNumbers([t[v],i[v]]))w.push(t[v],i[v]),k.push(t[v],i[v]-2),ri.push(i[v]+2,t[v]),rt+=2;else return!1;for(k=k.concat(ri.reverse()),st(),v=0;v<rt-4;v+=2)tt=tt.concat(this.splineControlPoint(w[v],w[v+1],w[v+2],w[v+3],w[v+4],w[v+5]));for(this.ctx.beginPath(),this.ctx.moveTo(w[0],w[1]),this.ctx.quadraticCurveTo(tt[0],tt[1],w[2],w[3]),v=2;v<rt-5;v+=2)this.ctx.bezierCurveTo(tt[2*v-2],tt[2*v-1],tt[2*v],tt[2*v+1],w[v+2],w[v+3]);return this.ctx.moveTo(w[rt-2],w[rt-1]),this.ctx.quadraticCurveTo(tt[2*rt-10],tt[2*rt-9],w[rt-4],w[rt-3]),this.ctx.stroke(),ht(),k}if(this.validateNumbers([t,i,r,u])){if(s||(s=0),h||(h=0),n.match(/bezier/i)?n.match(/beziery/i)?(nt="bezierLine",p="Y",b="Y",(s||h)&&(u>i?i+s>u-h&&(n=n.replace(/beziery/i,""),nt="line",p=!1,b=!1):i-s<u+h&&(n=n.replace(/beziery/i,""),nt="line",p=!1,b=!1))):(nt="bezierLine",p="X",b="X",(s||h)&&(r>t?t+s>r-h&&(n=n.replace(/bezier[x]?/i,""),nt="line",p=!1,b=!1):t-s<r+h&&(n=n.replace(/bezier[x]?/i,""),nt="line",p=!1,b=!1))):n.match(/curved/i)?n.match(/curvedc/i)?(nt="curvedLine",y=!0,b=!0):(nt="curvedLine",y=!0,b=!1):nt=n.match(/dashed/i)?"dashedLine":n.match(/dotted/i)?"dottedLine":"line",(s||h)&&(ct=this.shortenLine(t,i,r,u,s,h,n),t=ct[0],i=ct[1],r=ct[2],u=ct[3]),c)if(ot=this.clip("line",[t,i,r,u],l),ot)t=ot[0],i=ot[1],r=ot[2],u=ot[3];else return!1;switch(nt){case"dashedLine":case"dottedLine":var ui=Math.atan2(u-i,r-t),ai=Math.cos(ui),vi=Math.sin(ui),pt=this.lineLength(t,i,r,u),ni=nt=="dashedLine"?this.dashLength:this.dotLength,fi=Math.floor(pt/(ni*2));if(fi){var ti=ai*ni,ii=vi*ni,lt=t,at=i,wt=r,bt=u;for(wt=lt+ti,bt=at+ii,v=0;v<fi;v++)this.drawLine("line",lt,at,wt,bt,f,e,o),lt+=ti*2,at+=ii*2,wt=lt+ti,bt=at+ii;this.drawLine("line",lt,at,wt,bt,f,e,o),k=["poly",t+2,i,r+2,u,r-2,u,t-2,i]}else return!1;break;case"bezierLine":if(t==r||i==u)return this.drawLine("line",t,i,r,u,f,e,o,s,h,c,l);t=parseInt(t)+.5,i=parseInt(i)+.5,r=parseInt(r)+.5,u=parseInt(u)+.5,b=b=="Y"?"Y":"X";var yi=r>t?!0:!1,g=(t+r)/2,ut=(i+u)/2;k=yi?b=="X"?["poly",t,i-2,g+2,i-2,g+2,u-2,r,u-2,r,u+2,g-2,u+2,g-2,i+2,t,i+2]:["poly",t-2,i,t-2,ut+2,r-2,ut+2,r-2,u,r+2,u,r+2,ut-2,t+2,ut-2,t+2,i]:b=="X"?["poly",t,i-2,g-2,i-2,g-2,u-2,r,u-2,r,u+2,g+2,u+2,g+2,i+2,t,i+2]:["poly",t-2,i,t-2,ut-2,r-2,ut-2,r-2,u,r+2,u,r+2,ut+2,t+2,ut+2,t+2,i],st(),this.ctx.moveTo(t,i),b=="Y"?this.ctx.bezierCurveTo(t,u,r,i,r,u):this.ctx.bezierCurveTo(r,i,t,u,r,u),this.ctx.stroke(),ht();break;case"curvedLine":var g=12,kt=1,pt=this.lineLength(t,i,r,u),ei=this.shortenLine(t,i,r,u,0,pt/2,"line"),vt=ei[2],yt=ei[3],it=pt/2,oi=s/it,si=h/it,pi=vt-t,hi=yt-i,ci=b&&t>r?!1:!b&&r>=t?!0:b,ft=r>=t?Math.asin(hi/it):Math.asin(-hi/it),li=ft+Math.PI,dt=Math.PI/g,gt=r>=t?0:Math.PI;for(k=["poly"],v=kt;v<=g-kt;v++)k.push(vt-(it+2)*Math.cos(ft+dt*v-gt)),k.push(yt-(it+2)*Math.sin(ft+dt*v-gt));for(v=g-kt;v>=kt;v--)k.push(vt-(it-2)*Math.cos(ft+dt*v-gt)),k.push(yt-(it-2)*Math.sin(ft+dt*v-gt));st(),this.ctx.beginPath(),r>=t?this.ctx.arc(vt,yt,it,ft-si,li+oi,ci):this.ctx.arc(vt,yt,it,ft+oi,li-si,ci),this.ctx.stroke(),ht();break;case"line":k=["poly",t+2,i,r+2,u,r-2,u,t-2,i],st(),this.ctx.beginPath(),this.lineTo(t,i,r,u),ht()}return n.match(/arrowheadsquaretail|squaretailarrowhead/i)?(y=y?h:!1,d(!1,p,y),n.match(/curve/)||et(),y=y?s:!1,d(!0,p,y)):n.match(/arrowtailsquarehead|squareheadarrowtail/i)?(y=y?h:!1,d(!0,p,y),n.match(/curve/)||et(),y=y?s:!1,d(!1,p,y)):n.match(/arrowhead/i)?(y=y?h:!1,d(!1,p,y)):n.match(/squarehead/i)?(y=y?h:!1,d(!0,p,y)):n.match(/arrowtail/i)?(n.match(/curve/)||et(),y=y?s:!1,d(!1,p,y)):n.match(/squaretail/i)?(n.match(/curve/)||et(),y=y?s:!1,d(!0,p,y)):n.match(/arrow/i)?(y=y?h:!1,d(!1,p,y),n.match(/curve/)||et(),y=y?s:!1,d(!1,p,y)):n.match(/square/i)&&(y=y?s:!1,d(!0,p,y),n.match(/curve/)||et(),y=y?h:!1,d(!0,p,y)),k}return!1},this.polygon=function(n,t,i,r,u,f,e,o,s){return this.drawShape("polygon",n,t,!1,!1,i,r,u,f,e,o,s)},this.circle=function(n,t,i,r,u,f,e,o,s,h,c){return this.drawShape("circle",n,t,i,r,u,f,e,o,s,h,c)},this.rectangle=function(n,t,i,r,u,f,e,o,s,h,c){return this.drawShape("rectangle",n+i/2,t+r/2,i,r,u,f,e,o,s,h,c)},this.rectangleHM=function(n,t,i,r,u,f,e,o,s,h,c){return this.drawShape("rectangleHM",n+i/2,t+r/2,i,r,u,f,e,o,s,h,c)},this.drawShape=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var w=this,rt=function(){w.ctx.save(),w.ctx.translate(t,i),s&&w.ctx.rotate(s),f=w.transparency!=null?f?w.validateColor(f,w.transparency)||w.addColorTransparency(w.foreground,w.transparency):w.addColorTransparency(w.foreground,w.transparency):f?w.validateColor(f)||w.foreground:w.foreground,w.gradient?w.gradientType=="radial"?w.setGradient(0,0,Math.max(Math.abs(r),Math.abs(u)),f):w.setGradient(0,0,r,u,f):w.ctx.fillStyle=f,e&&(e=w.validateColor(e)||w.foreground),w.ctx.strokeStyle=e?e:w.foreground,w.ctx.lineWidth=h?h:w.outlineWidth,w.showShadow&&(w.ctx.shadowOffsetX=w.shadowOffsetX,w.ctx.shadowOffsetY=w.shadowOffsetY,w.ctx.shadowBlur=w.shadowBlur,w.ctx.shadowColor=w.shadowColor)},ut=function(t,i,r){var e,u;if(n!="image")if(n=="rectangleHM"){if(t){for(t[0][0]=Math.round(t[0][0])+.5,t[3][0]=t[0][0],t[1][0]=Math.round(t[1][0])+1.5,t[2][0]=t[1][0],t[0][1]=Math.round(t[0][1])+.5,t[1][1]=t[0][1],t[2][1]=Math.round(t[2][1])+1.5,t[3][1]=t[2][1],w.ctx.beginPath(),w.ctx.moveTo(t[0][0],t[0][1]),u=1;u<t.length;u++)w.ctx.lineTo(t[u][0],t[u][1]);i||w.ctx.closePath(),o&&o=="open"?w.ctx.stroke():(w.ctx.stroke(),w.ctx.fill())}}else if(n=="spline"){var f=[],s=[],h=[];for(s.push(r.shift()),s.push(r.shift()),h.push(r.pop()),h.unshift(r.pop()),e=r.length,u=0;u<e-4;u+=2)f=f.concat(w.splineControlPoint(r[u],r[u+1],r[u+2],r[u+3],r[u+4],r[u+5]));for(w.ctx.beginPath(),w.ctx.moveTo(s[0],s[1]),w.ctx.lineTo(r[0],r[1]),w.ctx.quadraticCurveTo(f[0],f[1],r[2],r[3]),u=2;u<e-5;u+=2)w.ctx.bezierCurveTo(f[2*u-2],f[2*u-1],f[2*u],f[2*u+1],r[u+2],r[u+3]);w.ctx.quadraticCurveTo(f[2*e-10],f[2*e-9],r[e-2],r[e-1]),w.ctx.lineTo(h[0],h[1]),w.ctx.lineTo(s[0],s[1]),o&&o=="open"?w.ctx.stroke():(w.ctx.stroke(),w.ctx.fill())}else if(n=="arc3")w.ctx.stroke();else{if(t){for(w.ctx.beginPath(),w.ctx.moveTo(t[0][0]+.5,t[0][1]+.5),u=1;u<t.length;u++)w.ctx.lineTo(t[u][0]+.5,t[u][1]+.5);i||w.ctx.closePath()}o&&o=="open"?w.ctx.stroke():(w.ctx.stroke(),w.ctx.fill())}w.showShadow&&(w.ctx.shadowOffsetX=0,w.ctx.shadowOffsetY=0,w.ctx.shadowBlur=0,w.ctx.shadowColor=w.background),w.ctx.restore()},gt=function(n){var a,r,c,l,h;if(n){if(n[0]=="circle")return n;if(a=n.shift(),r=[],a=="rect"){var u=n.shift()-t,f=n.shift()-i,e=n.shift()-t,o=n.shift()-i;r.push(f*Math.sin(s)-u*Math.cos(s)),r.push(f*Math.cos(s)+u*Math.sin(s)),r.push(o*Math.sin(s)-u*Math.cos(s)),r.push(o*Math.cos(s)+u*Math.sin(s)),r.push(o*Math.sin(s)-e*Math.cos(s)),r.push(o*Math.cos(s)+e*Math.sin(s)),r.push(f*Math.sin(s)-e*Math.cos(s)),r.push(f*Math.cos(s)+e*Math.sin(s))}else while(n.length>1)c=n.shift()-t,l=n.shift()-i,r.push(l*Math.sin(s)-c*Math.cos(s)),r.push(l*Math.cos(s)+c*Math.sin(s));for(h=["poly"];r.length>1;)h.push(r.shift()+t),h.push(r.shift()+i);return h}},d,tt,it,st,ht,ct,lt,at,et,oi,vt,dt,g;if(n=="polygon"||n=="path"||n=="spline"){var yt=Number.MAX_VALUE,pt=Number.MAX_VALUE*-1,wt=Number.MAX_VALUE,bt=Number.MAX_VALUE*-1,ni=n=="polygon"?!1:!0,ti=[],ii=[];if(d=[],tt=["poly"],t.length==i.length){if(n=="spline"&&t.length<5)return!1;for(g=0;g<t.length;g++)if(this.validateNumbers([t[g],i[g]]))yt=Math.min(yt,t[g]),pt=Math.max(pt,t[g]),wt=Math.min(wt,i[g]),bt=Math.max(bt,i[g]),d.push([t[g],i[g]]),n=="spline"?(tt.push(t[g],i[g]-2),ti.push(i[g]+2,t[g])):tt.push(t[g],i[g]);else return!1;for(t=(yt+pt)/2,i=(wt+bt)/2,g=0;g<d.length;g++)d[g][0]-=t,d[g][1]-=i,ii.push(d[g][0],d[g][1]);return s&&(tt=gt(tt)),d?(n=="spline"&&(tt=tt.concat(ti.reverse())),rt(ni),ut(d,ni,ii),tt):!1}return!1}if(this.validateNumbers([t,i,r,u])){if(c)if(d=n.match(/rectangle/)?this.clip("rect",[t-r/2,i-u/2,r,u],l):this.clip("circle",[t,i],l),d)n.match(/rectangle/)?(r=d[2],u=d[3],t=d[0]+r/2,i=d[1]+u/2):(t=d[0],i=d[1]);else return!1;var b=r/2,k=u/2,kt=u/r,nt=1.5,tt=["rect",t-b,i-k,t+b,i+k];switch(n){case"image":d=!1,this.ctx.save(),this.ctx.translate(t,i),s&&this.ctx.rotate(s),this.drawImage(CanvasXpress.cacheImages[y],-b*this.zoom,-k*this.zoom,r*this.zoom,u*this.zoom,y),tt=["rect",t-b*this.zoom,i-k*this.zoom,t+b*this.zoom,i+k*this.zoom],this.ctx.restore();break;case"circle":case"sphere":tt=["circle",t,i,r/2],d=!1,rt(),this.ctx.beginPath(),this.ctx.arc(0,0,r/2,0,Math.PI*2,!0),this.ctx.closePath(),ut();break;case"box":case"rect":case"rectangle":case"rectangleHM":d=[[-b,-k],[b,-k],[b,k],[-b,k]];break;case"rect2":return this.drawShape("rectangle",t,i,r,r/2,f,e,o,s,h,c,l,a,v,y,p);case"rect3":return this.drawShape("rectangle",t,i,r,r/3,f,e,o,s,h,c,l,a,v,y,p);case"roundrect":it=r>u?u/4:r/4,d=!1,rt(),this.ctx.beginPath(),ctx.moveTo(-b,-k+it),ctx.lineTo(-b,k-it),ctx.quadraticCurveTo(-b,k,-b+it,k),ctx.lineTo(b-it,k),ctx.quadraticCurveTo(b,k,b,k-it),ctx.lineTo(b,-k+it),ctx.quadraticCurveTo(b,-k,b-it,-k),ctx.lineTo(-b+it,-k),ctx.quadraticCurveTo(-b,-k,-b,-k+it),this.ctx.closePath(),ut();break;case"square":d=[[-b,-b],[b,-b],[b,b],[-b,b]];break;case"triangle":if(r==u)return this.drawShape("equilateral",t,i,r,u,f,e,o,s,h,c,l,a,v,y,p);tt=["poly",t,i-k,t+b,i+k,t-b,i+k],d=[[0,-k],[b,k],[-b,k]];break;case"triangle2":if(r==u)return this.drawShape("equilateral2",t,i,r,u,f,e,o,s,h,c,l,a,v,y,p);tt=["poly",t,i+k,t+b,i-k,t-b,i-k],d=[[0,k],[b,-k],[-b,-k]];break;case"equilateral":var it=r*Math.sqrt(3)/6,ft=it/2,ot=Math.sqrt(it*it-ft*ft);tt=["poly",t,i-it,t+ot,i+ft,t-ot,i+ft],d=[[0,-k],[b,k],[-b,k]];break;case"equilateral2":var it=r*Math.sqrt(3)/6,ft=it/2,ot=Math.sqrt(it*it-ft*ft);tt=["poly",t,i+it,t+ot,i-ft,t-ot,i-ft],d=[[0,k],[b,-k],[-b,-k]];break;case"diamond":case"rhombus":tt=["poly",t,i-k,t+b,i,t,i+k,t-b,i],d=[[0,-k],[b,0],[0,k],[-b,0]];break;case"hexagon":et=r/3,st=et-b,d=[[st,-k],[-st,-k],[b,0],[-st,k],[st,k],[-b,0]];break;case"octagon":ht=r/4,ct=u/4,d=[[-ht,-k],[ht,-k],[b,-ct],[b,ct],[ht,k],[-ht,k],[-b,ct],[-b,-ct]];break;case"oval":d=!1,rt(),this.ctx.scale(1,kt),this.ctx.beginPath(),this.ctx.arc(0,0,r/2,0,Math.PI*2,!0),this.ctx.closePath(),ut();break;case"oval2":return this.drawShape("oval",t,i,r,r/2,f,e,o,s,h,c,l,a,v,y,p);case"oval3":return this.drawShape("oval",t,i,r,r/3,f,e,o,s,h,c,l,a,v,y,p);case"arc":d=!1,rt(),this.ctx.scale(1,kt),this.ctx.beginPath(),this.ctx.arc(0,0,r/2,0,Math.PI,!0),o!="open"&&this.ctx.closePath(),ut();break;case"arc2":d=!1;var ri=u*Math.cos(a),ui=u*Math.sin(a),si=u*Math.cos(v),hi=u*Math.sin(v),fi=this.shortenLine(0,0,ri,ui,0,r,"line"),ei=this.shortenLine(0,0,si,hi,0,r,"line");rt(),this.ctx.beginPath(),this.ctx.moveTo(fi[2],fi[3]),this.ctx.lineTo(ri,ui),this.ctx.arc(0,0,u,a,v,!1),this.ctx.lineTo(ei[2],ei[3]),this.ctx.arc(0,0,u-r,v,a,!0),this.ctx.closePath(),ut();break;case"arc3":d=!1,rt(),this.ctx.beginPath(),this.ctx.arc(0,0,r/2,a,v,!1),ut();break;case"ellipse":lt=b*.5522848,at=k*.5522848,d=!1,rt(),this.ctx.beginPath(),this.ctx.moveTo(0,k),this.ctx.bezierCurveTo(0,k-at,b-lt,0,b,0),this.ctx.bezierCurveTo(b+lt,0,r,k-at,r,k),this.ctx.bezierCurveTo(r,k+at,b+lt,u,b,u),this.ctx.bezierCurveTo(b-lt,u,0,k+at,0,k),this.ctx.closePath(),ut();break;case"ellipse2":return this.drawShape("ellipse",t,i,r,r/2,f,e,o,s,h,c,l,a,v,y,p);case"ellipse3":return this.drawShape("ellipse",t,i,r,r/3,f,e,o,s,h,c,l,a,v,y,p);case"plus":d=[[-nt,-k],[nt,-k],[nt,-nt],[b,-nt],[b,nt],[nt,nt],[nt,k],[-nt,k],[-nt,nt],[-b,nt],[-b,-nt],[-nt,-nt],[-nt,-k]];break;case"minus":d=[[-b,-nt],[b,-nt],[b,nt],[-b,nt],[-b,-nt]];break;case"mdavid":for(et=r/3,oi=Math.PI/6,tt=["circle",t,i,r/2],d=!1,rt(),this.ctx.beginPath(),this.ctx.moveTo(et,0),g=0;g<11;g++)this.ctx.rotate(oi),g%2==0?this.ctx.lineTo(et/.55,0):this.ctx.lineTo(et,0),this.ctx.closePath();ut();break;case"star":for(vt=r/4,dt=Math.PI/5,tt=["circle",t,i,r/2],d=!1,rt(),this.ctx.save(),this.ctx.scale(.7,.7),this.ctx.rotate(dt*.45),this.ctx.beginPath(),this.ctx.moveTo(vt,0),g=0;g<9;g++)this.ctx.rotate(dt),g%2==0?this.ctx.lineTo(vt/.35,0):this.ctx.lineTo(vt,0);this.ctx.closePath(),this.ctx.restore(),ut();break;case"pie":typeof a=="undefined"&&(a=0),typeof v=="undefined"&&(v=Math.PI*2),d=!1,rt(),this.ctx.scale(1,kt),this.ctx.beginPath(),this.ctx.arc(0,0,r/2,a,v,!1),this.ctx.closePath(),ut();break;case"pie0":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI/5,y,p);case"pie1":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI/3.5,y,p);case"pie2":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI/2,y,p);case"pie3":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI/1.5,y,p);case"pie4":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI,y,p);case"pie5":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI*1.2,y,p);case"pie6":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI*1.4,y,p);case"pie7":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI*1.6,y,p);case"pie8":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI*1.8,y,p);case"pie9":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,0,Math.PI*2,y,p);case"pacman":return this.drawShape("pie",t,i,r,r/2,f,e,o,s,h,c,l,Math.PI*5/4,Math.PI*3/4,y,p)}return s&&(tt=gt(tt)),d&&(rt(),ut(d)),tt}return!1},this.drawImage=function(n,t,i,r,u,f){if(this.isIE&&this.useFlashIE&&this.browserVersion<9&&n==1){var e=this,o=function(){e.drawImage(CanvasXpress.cacheImages[f],t,i,r,u)};CanvasXpress.cacheImages[f].onload=o,CanvasXpress.cacheImages[f].src=f}else try{this.ctx.drawImage(n,t,i,r,u)}catch(s){}},this.setRGB=function(){var t;this.reds=[],this.greens=[],this.blues=[],this.yellows=[],this.cyans=[],this.purples=[],this.greys=[],this.indicatorBins=this.allVsAll?Math.min(this.x,this.y)/(this.layoutRows*2):Math.min(this.x,this.y)/4,this.indicatorBins=this.indicatorBins>512?1:this.indicatorBins>256?2:this.indicatorBins>128?4:8;var r=this.indicatorBins,u=parseInt(256/r),n,i=255;for(t=0;t<u;t++)this.greys.push("rgb("+i+","+i+","+i+")"),i-=r;if(this.indicatorCenter=="rainbow-green")for(n=r-1,i=255,t=0;t<u;t++)this.greens.push("rgb(0,255,"+n+")"),this.cyans.push("rgb(0,"+i+",255)"),this.blues.push("rgb("+n+",0,255)"),this.purples.push("rgb(255,0,"+i+")"),this.reds.push("rgb(255,"+n+",0)"),this.yellows.push("rgb("+i+",255,0)"),n+=r,i-=r;else if(this.indicatorCenter.match("rainbow"))for(n=r-1,i=255,t=0;t<u;t++)this.reds.push("rgb(255,0,"+n+")"),this.purples.push("rgb("+i+",0,255)"),this.blues.push("rgb(0,"+n+",255)"),this.cyans.push("rgb(0,255,"+i+")"),this.greens.push("rgb("+n+",255,0)"),this.yellows.push("rgb(255,"+i+",0)"),n+=r,i-=r;else if(this.indicatorCenter=="black")for(n=255,t=0;t<u;t++)this.reds.push("rgb("+n+",0,0)"),this.purples.push("rgb("+n+",0,"+n+")"),this.blues.push("rgb(0,0,"+n+")"),this.cyans.push("rgb(0,"+n+","+n+")"),this.greens.push("rgb(0,"+n+",0)"),this.yellows.push("rgb("+n+","+n+",0)"),n-=r;else for(this.reds.push("rgb(255,0,0)"),this.purples.push("rgb(255,0,255)"),this.blues.push("rgb(0,0,255)"),this.cyans.push("rgb(0,255,255)"),this.greens.push("rgb(0,255,0)"),this.yellows.push("rgb(255,255,0)"),n=r-1,t=0;t<u-1;t++)this.reds.push("rgb(255,"+n+","+n+")"),this.purples.push("rgb(255,"+n+",255)"),this.blues.push("rgb("+n+","+n+",255)"),this.cyans.push("rgb("+n+",255,255)"),this.greens.push("rgb("+n+",255,"+n+")"),this.yellows.push("rgb(255,255,"+n+")"),n+=r},this.setLineTypes=function(){this.lines=this.getLineTypes()},this.setCodonTable=function(){this.codon={TTT:["F","Phe","Phenylalanine"],TCT:["S","Ser","Serine"],TAT:["Y","Tyr","Tyrosine"],TGT:["C","Cys","Cysteine"],TTC:["F","Phe","Phenylalanine"],TCC:["S","Ser","Serine"],TAC:["Y","Tyr","Tyrosine"],TGC:["C","Cys","Cysteine"],TTA:["L","Leu","Leucine"],TCA:["S","Ser","Serine"],TAA:["*","Stop","Ochre"],TGA:["*","Stop","Opal"],TTG:["L","Leu","Leucine"],TCG:["S","Ser","Serine"],TAG:["*","Stop","Amber"],TGG:["W","Trp","Tryptophan"],CTT:["L","Leu","Leucine"],CCT:["P","Pro","Proline"],CAT:["H","His","Histidine"],CGT:["R","Arg","Arginine"],CTC:["L","Leu","Leucine"],CCC:["P","Pro","Proline"],CAC:["H","His","Histidine"],CGC:["R","Arg","Arginine"],CTA:["L","Leu","Leucine"],CCA:["P","Pro","Proline"],CAA:["Q","Gln","Glutamine"],CGA:["R","Arg","Arginine"],CTG:["L","Leu","Leucine"],CCG:["P","Pro","Proline"],CAG:["Q","Gln","Glutamine"],CGG:["R","Arg","Arginine"],ATT:["I","Ile","Isoleucine"],ACT:["T","Thr","Threonine"],AAT:["N","Asn","Asparagine"],AGT:["S","Ser","Serine"],ATC:["I","Ile","Isoleucine"],ACC:["T","Thr","Threonine"],AAC:["N","Asn","Asparagine"],AGC:["S","Ser","Serine"],ATA:["I","Ile","Isoleucine"],ACA:["T","Thr","Threonine"],AAA:["K","Lys","Lysine"],AGA:["R","Arg","Arginine"],ATG:["M","Met","Methionine"],ACG:["T","Thr","Threonine"],AAG:["K","Lys","Lysine"],AGG:["R","Arg","Arginine"],GTT:["V","Val","Valine"],GCT:["A","Ala","Alanine"],GAT:["D","Asp","Aspartic acid"],GGT:["G","Gly","Glycine"],GTC:["V","Val","Valine"],GCC:["A","Ala","Alanine"],GAC:["D","Asp","Aspartic acid"],GGC:["G","Gly","Glycine"],GTA:["V","Val","Valine"],GCA:["A","Ala","Alanine"],GAA:["E","Glu","Glutamic acid"],GGA:["G","Gly","Glycine"],GTG:["V","Val","Valine"],GCG:["A","Ala","Alanine"],GAG:["E","Glu","Glutamic acid"],GGG:["G","Gly","Glycine"]}},this.setReverseComplement=function(){this.reverseComplement={a:"t",c:"g",g:"c",t:"a",u:"a",A:"T",C:"G",G:"C",T:"A","/":"/","[":"[","]":"]"}},this.initializeAttributes=function(){this.setLineTypes(),this.setRGB(),this.setCodonTable(),this.setReverseComplement()},this.initializeAttributes()},CanvasXpress.prototype.initPrimitives=function(){this.initText(),this.initTime(),this.initColor(),this.initAttributes()},CanvasXpress.prototype.initDimensions=function(){this.resizeCanvas=function(n,t,i){this.ctx&&(this.disableGradientTransparency(),(n||t||i)&&(t||i?(t&&(this.width=t,this.originalWidth=t),i&&(this.height=i,this.originalHeight=i)):n&&(this.width=this.originalWidth,this.height=this.originalHeight),this.top=this.margin,this.title&&(this.top+=this.titleHeight+this.margin,this.subtitle&&(this.top+=this.subtitleHeight+this.margin)),this.left=this.margin,this.right=this.margin,this.bottom=this.margin,this.dataEvent=[]),this.isIE&&this.useFlashIE&&this.browserVersion<9?(this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.firstChild.width=this.width,this.canvas.firstChild.height=this.height):(this.canvas.width=this.width,this.canvas.height=this.height),this.backgroundType=="image"||this.backgroundType=="windowImage"?(this.ctx.save(),this.ctx.translate(0,0),this.drawImage(CanvasXpress.cacheImages[this.backgroundImage],0,0,this.width,this.height),this.ctx.restore()):this.backgroundType=="solid"||this.backgroundType=="window"||this.backgroundType=="windowSolidGradient"||this.backgroundType=="video"?this.rectangle(0,0,this.width,this.height,this.background,this.background):(this.setLinearGradient(0,0,0,this.height,this.backgroundGradient1Color,this.backgroundGradient2Color),this.ctx.fillRect(0,0,this.width,this.height)),this.enableGradientTransparency())},this.setWidth=function(n){n||(n=1e3),this.draw(n)},this.setHeight=function(n){n||(n=8e3),this.draw(!1,n)},this.setDimensions=function(n,t){n||(n=1e3),t||(t=1e3),this.draw(n,t)},this.initializeDimensions=function(){this.canvas.width?(this.originalWidth=this.canvas.width,this.width=this.canvas.width):this.width?(this.originalWidth=this.width,this.canvas.width=this.width):(this.width=600,this.originalWidth=this.width,this.canvas.width=this.width),this.canvas.height?(this.originalHeight=this.canvas.height,this.height=this.canvas.height):this.height?(this.originalHeight=this.height,this.canvas.height=this.height):(this.height=600,this.originalHeight=this.height,this.canvas.height=this.height),this.top=this.margin,this.title&&(this.top+=this.titleHeight+this.margin,this.subtitle&&(this.top+=this.subtitleHeight+this.margin)),this.left=this.margin,this.right=this.margin,this.bottom=this.margin,this.x=this.width-(this.leftMargin+this.left+this.rightMargin+this.right),this.y=this.height-(this.topMargin+this.top+this.bottomMargin+this.bottom)},this.initializeDimensions()},CanvasXpress.prototype.initPlotUtils=function(){this.setVideoControls=function(){var n,i,t,r;this.isVideo&&(n=this,typeof _V_!="undefined"&&_V_.autoSetupTimeout?(i=_V_(this.target+"-cX-Video"),t=this.$(this.target+"-cX-Video"),i&&t&&(t.style.position="absolute",t.style.background="transparent",this.video=t.childNodes[0],this.video.style.display="hidden",this.video.style.zIndex=-1,this.video.playbackRate=this.videoPlaybackRate,n.addEvtListener(this.video,"loadeddata",function(){n.addEvtListener(n.video,"play",n.videoPlay,!1)},!1),this.videoAutoplay&&(i.play(),r=function(){this.play=function(){n.video.readyState==4&&(n.copyVideo(n.video,n.ctx,n.width,n.height),clearInterval(t))};var t=setInterval(this.play,30)},r.call()))):setTimeout(function(){n.setVideoControls()},100))},this.drawCanvasBox=function(n){this.canvasBox&&(this.graphType!="Network"||n)&&this.rectangle(0,0,this.width-1,this.height-1,!1,this.canvasBoxColor,"open")},this.drawPlotWindow=function(){if(this.backgroundType.match("window")){this.disableGradientTransparency();var n=this.marginLeft+this.offsetX,t=this.marginTop+this.offsetY;this.backgroundType=="windowGradient2"||this.backgroundType=="windowSolidGradient"?(this.ctx.save(),this.backgroundWindowGradientOrientation=="horizontal"?this.setLinearGradient(n+this.left,t,n+this.left+this.x,t,this.backgroundWindowGradient1Color,this.backgroundWindowGradient2Color):this.setLinearGradient(n,t+this.top,n,t+this.top+this.y,this.backgroundWindowGradient1Color,this.backgroundWindowGradient2Color),this.ctx.fillRect(n+this.left,t+this.top,this.x,this.y)):this.rectangle(n+this.left,t+this.top,this.x,this.y,this.backgroundWindow,this.backgroundWindow),this.enableGradientTransparency()}},this.maskArea=function(n){var i;this.disableGradientTransparency();var p=function(n,t,i,r){this.ctx.fillRect(n,t,i,r)},t,r=this.marginLeft+this.offsetX,u=this.marginTop+this.offsetY,f=this.outlineWidth+1,o=[0,0,this.width,this.marginTop],s=[0,0,this.marginLeft,this.height],h=[0,this.height-this.marginBottom,this.width,this.marginBottom],c=[this.width-this.marginRight,0,this.marginRight,this.height],l=n?[r,u,this.left,this.top-f]:[r,u,this.left+this.x+this.right,this.top-f],a=n?[r,u+this.top+this.y,this.left-f,this.bottom]:[r,u,this.left-f,this.top+this.y+this.bottom],v=n?[r+this.left+this.x,u+this.top+this.y+f,this.right,this.bottom]:[r,u+this.top+this.y+f,this.left+this.x+this.right,this.bottom],y=n?[r+this.left+this.x+f,u,this.right,this.top]:[r+this.left+this.x+f,u,this.right,this.top+this.y+this.bottom],e=[o,s,h,c,l,a,v,y];if(this.backgroundType=="image"||this.backgroundType=="windowImage"){for(this.ctx.save(),this.ctx.translate(0,0),i=0;i<e.length;i++)e[i].unshift(CanvasXpress.cacheImages[this.backgroundImage]);t=this.drawImage}else if(this.backgroundType=="solid"||this.backgroundType=="window"||this.backgroundType=="windowSolidGradient"||this.backgroundType=="video"){for(i=0;i<e.length;i++)e[i].push(this.background),e[i].push(this.background);t=this.rectangle}else this.setLinearGradient(0,0,0,this.height,this.backgroundGradient1Color,this.backgroundGradient2Color),t=p;this.marginTop&&t.apply(this,o),this.marginLeft&&t.apply(this,s),this.marginBottom&&t.apply(this,h),this.marginRight&&t.apply(this,c),t.apply(this,l),t.apply(this,a),t.apply(this,v),t.apply(this,y),(this.backgroundType=="image"||this.backgroundType=="windowImage")&&this.ctx.restore(),this.enableGradientTransparency()},this.maskPlotArea=function(){this.maskArea()},this.maskTreeArea=function(){this.maskArea(!0)},this.setTrees=function(){this.showSmpDendrogram&&this.data.t.smps&&(this.smpDendrogram={},this.smpDendrogram.data=[],this.smpDendrogram.nodes=[],this.smpDendrogram.idxs=[],this.smpDendrogram.heights=[],this.parseNewick(this.data.t.smps,"smpDendrogram")),this.showVarDendrogram&&this.data.t.vars&&(this.varDendrogram={},this.varDendrogram.data=[],this.varDendrogram.nodes=[],this.varDendrogram.idxs=[],this.varDendrogram.heights=[],this.parseNewick(this.data.t.vars,"varDendrogram"))},this.setOverlayColors=function(){var u=0,i,n,f,t,r,o;if(this.smpOverlays.length>0&&!this.isGroupedData)for(this.smpOverlayColors||(this.smpOverlayColors={}),i=0;i<this.smpOverlays.length;i++)if(n=this.smpOverlays[i],this.smpOverlayColors[n]||(this.smpOverlayColors[n]={}),this.smpOverlayRecycleColors&&(u=0),this.data.x.hasOwnProperty(n))if(this.isNumeric(this.data.x[n],!0))for(f=this.range(this.data.x[n],!0),t=0;t<this.smpIndices.length;t++){var r=this.smpIndices[t],e=this.data.x[n][r],s=isNaN(e)?this.missingDataColor:this.getHeatmapColor(f[0],f[1],e);this.smpOverlayColors[n][e.toString()]=s}else for(t=0;t<this.smpIndices.length;t++)r=this.smpIndices[t],o=this.data.x[n][r],this.smpOverlayColors[n][o]||(this.smpOverlayColors[n][o]=this.colors[u%this.colors.length],u++);if(u=0,this.varOverlays.length>0&&this.graphType=="Heatmap")for(this.varOverlayColors||(this.varOverlayColors={}),i=0;i<this.varOverlays.length;i++)if(n=this.varOverlays[i],this.varOverlayColors[n]||(this.varOverlayColors[n]={}),this.varOverlayRecycleColors&&(u=0),this.data.z.hasOwnProperty(n))if(this.isNumeric(this.data.z[n],!0))for(f=this.range(this.data.z[n],!0),t=0;t<this.varIndices.length;t++){var r=this.varIndices[t],e=this.data.z[n][r],s=isNaN(e)?this.missingDataColor:this.getHeatmapColor(f[0],f[1],e);this.varOverlayColors[n][e.toString()]=s}else for(t=0;t<this.varIndices.length;t++)r=this.varIndices[t],o=this.data.z[n][r],this.varOverlayColors[n][o]||(this.varOverlayColors[n][o]=this.colors[u%this.colors.length],u++)},this.setOverlayFont=function(){var n=Math.min(this.overlayScaleFontFactor*this.overlayFontSize,this.maxTextSize);n=parseInt(Math.max(n,this.minTextSize)),this.overlayFont=n+"Pt "+this.fontName},this.setValidDataColorShapeSize=function(){for(var t=["color","shape","size"],n=0;n<t.length;n++)this[t[n]+"By"]&&(!this.data.x||this.data.x[this[t[n]+"By"]]||!this.data.z||this.data.z[this[t[n]+"By"]]||this.isMultidimensionalHeatmap||(this[t[n]+"By"]=!1));!(this.shapeBy||this.sizeBy)||this.colorBy||this.isMultidimensionalHeatmap?this.shapeBy||this.sizeBy||this.colorBy!="variable"||(this.colorBy=!1):this.colorBy="variable"},this.parseNewick=function(n,t){for(var v=n.split(/,/),e=0,f=0,c=0,y=1,o=0,s=0,l=0,p=0,b,a,r,h,i=0;i<v.length;i++){var k=v[i],w=k.split(/:(?=[0-9\.]+)/),u=w.shift();for(u=u.replace(/[\(\)]/g,""),this.useSmpVarIndexOnClustering?(this[t].nodes.push(t=="smpDendrogram"?this.data.y.smps[u]:this.data.y.vars[u]),this[t].idxs.push(u)):(this[t].nodes.push(u),this[t].idxs.push(t=="smpDendrogram"?this.getSampleIndices(u):this.getVariableIndices(u))),r=0;r<w.length;r++)b=w[r].replace(/[\(\)]/g,""),s=Math.max(s,b),this[t].heights.push(b);for(this[t].max=s,a=v[i].split(""),f=0,r=0;r<a.length;r++)a[r]=="("&&(e++,f++),a[r]==")"&&(e--,f--);p+=f,c>e?this[t].data.push([y,c,f,p]):this[t].data.push([y,e,f,p]),c=e,l=Math.max(l,c),o+=f,y++}if(this[t].unit=s>0?l*this.dendrogramSpace/s:0,this[t].depth=l,o>0?alert("Dude! Malformed newick tree. There are "+o+" additional right parenthesis!"):o<0&&alert("Dude! Malformed newick tree. There are "+Math.abs(o)+" additional left parenthesis!"),t=="varDendrogram")if(this.varIndicesStart<0)this[t].nodes.length!=this.data.y.vars.length?(alert("Dude! The length of the variable nodes in the dendrogram ("+this[t].nodes.length+") is different to that one in the data ("+this.data.y.vars.length+"). This ain't gonna work!"),this.showVarDendrogram=!1):this[t].nodes.length!=this.varIndices.length?(alert("Ooops! Cannot show dendrogram with "+this[t].nodes.length+" nodes when only "+this.varIndices.length+" variables are visible."),this.showVarDendrogram=!1):this.varIndices=this[t].idxs;else for(h=this.varIndicesStart+this.varIndices.length,this.varIndices=[],i=this.varIndicesStart;i<h;i++)this.varIndices.push(this[t].idxs[i]);else if(this.smpIndicesStart<0)this[t].nodes.length!=this.data.y.smps.length?(alert("Dude! The length of the sample nodes in the dendrogram ("+this[t].nodes.length+") is different to that one in the data ("+this.data.y.smps.length+"). This ain't gonna work!"),this.showSmpDendrogram=!1):this[t].nodes.length!=this.smpIndices.length?(alert("Ooops! Cannot show dendrogram with "+this[t].nodes.length+" nodes when only "+this.smpIndices.length+" samples visible."),this.showSmpDendrogram=!1):this.smpIndices=this[t].idxs;else for(h=this.smpIndicesStart+this.smpIndices.length,this.smpIndices=[],i=this.smpIndicesStart;i<h;i++)this.smpIndices.push(this[t].idxs[i])}},CanvasXpress.prototype.initGeneralUtils=function(){this.modifyObjectArray=function(n,t,i){var u=this[i],f,e,r;if(t){if(f={},e=[],this.isArray(n))for(r=0;r<n.length;r++)f[n[r]]=1;else f[n]=1;for(r=0;r<u.length;r++)f.hasOwnProperty(u[r])||e.push(u[r]);this[i]=e}else if(this.isArray(n))for(r=0;r<n.length;r++)u.push(n[r]);else u.push(n)},this.getObjectArray=function(n){var i={},t;if(n&&this.isArray(n))for(t=0;t<n.length;t++)i[n[t]]=1;return i},this.isInArray=function(n,t){if(t&&!t.propertyIsEnumerable("length")&&typeof t=="object"&&typeof t.length=="number")for(var i=0;i<t.length;i++)if(t[i]==n)return!0;return!1},this.isArray=function(n){return n&&!n.propertyIsEnumerable("length")&&typeof n=="object"&&typeof n.length=="number"?!0:!1},this.isObject=function(n){return n instanceof Object},this.toArray=function(n){return this.isArray(n)?n:[n]},this.getKeys=function(n){var t=[],i;if(this.isObject(n))for(i in n)t.push(i);return t},this.getUniqueKeys=function(n){var t={},i;if(this.isArray(n)&&(n=this.getObjectArray(n)),this.isObject(n))for(i in n)t[i]=!0;return this.getKeys(t)},this.toNumber=function(n,t){var r=[],u=this.isArray(n),i;for(n=this.toArray(n),i=0;i<n.length;i++)t?r.push(parseFloat(n[i])):r.push(parseInt(n[i]));return u?r:r[0]},this.cloneObject=function(n){var t,i;if(n==null||typeof n!="object")return n;t=new n.constructor;for(i in n)t[i]=this.cloneObject(n[i]);return t},this.isSameObject=function(n,t){var i;if(n===t)return!0;if(typeof n!="object"||typeof t!="object")return!1;for(i in n)if(n[i]!==t[i]&&(t[i]===undefined||typeof n[i]!=typeof t[i]||!this.isSameObject(n[i],t[i])))return!1;for(i in t)if(n[i]===undefined)return!1;return!0}},CanvasXpress.prototype.initConfigUtils=function(){this.getPixelImage=function(){if(navigator.onLine)return this.imageDir+"canvasXpress.gif";if(this.path)return this.path+"canvasXpress.gif";alert("Dude! I couldn't find canvasXpress.js")},this.drawTitle=function(){var n,t,i;this.title&&(t=this.titleHeight/2,n=this.scaleTextToFont(this.title,this.titleHeight-t,this.width),this.drawText(this.title,this.width/2,this.marginTop+this.titleHeight/2,n,this.titleColor,"center","middle"),this.subtitle&&(i=this.subtitleHeight/4,n=this.scaleTextToFont(this.subtitle,this.subtitleHeight-i,this.x),this.drawText(this.subtitle,this.width/2,this.marginTop+this.titleHeight+this.subtitleHeight/2,n,this.subtitleColor,"center","middle")))},this.drawCitation=function(n,t,i){if(this.citation){var r=this.citationFont;n||(n=this.width-this.margin),t||(t=this.height-this.margin),i&&(r=this.citationFontSize*this.citationScaleFontFactor*i+"Pt "+this.fontName),this.drawText(this.citation,n,t,r,this.citationColor,"right","bottom")}},this.drawSelectedBackgroundLabel=function(n,t,i,r){this.selectDataMode=="name"&&this.isInSelectedDataPoints(n,t)&&(lab=this.selectDataModeDescription&&this.data.z&&this.data.z[this.selectDataModeDescription]?this.data.z[this.selectDataModeDescription][n]||this.data.y.vars[n]:this.data.y.vars[n],this.drawText(lab,i,r,this.varLabelFont,this.foreground,"center","middle"))},this.drawSelectedBackground=function(n,t,i,r,u,f,e,o,s){this.selectDataMode=="area"&&this.isInSelectedDataPoints(n,t)&&this.drawShape(i,r,u,f+12,e+12,this.selectedBackgroundColor,this.foreground,"closed",o,1,s)},this.isInSelectedDataPoints=function(n,t){return this.isSelectDataPoints&&this.selectDataPoint[n]&&(this.broadcastType=="var"||this.selectDataPoint[n].hasOwnProperty(t))?!0:!1},this.isVisibleSelectedDataPoint=function(n,t){return this.isSelectDataPoints&&this.hideDataPoint.length>0&&this.hideDataPoint[n]&&(this.broadcastType=="var"||this.hideDataPoint[n].hasOwnProperty(t))?!1:!0},this.getVarColor=function(n){if(this.isArray(this.highlightVar)){for(var t=0;t<this.highlightVar.length;t++)if(this.highlightVar[t]==n)return this.varHighlightColor}else if(this.highlightVar==n)return this.varHighlightColor;return this.varLabelColor},this.getSmpColor=function(n){if(this.isArray(this.highlightSmp)){for(var t=0;t<this.highlightSmp.length;t++)if(this.highlightSmp[t]==n)return this.smpHighlightColor}else if(this.highlightSmp==n)return this.smpHighlightColor;return this.smpLabelColor},this.getNodeColor=function(n,t){if(this.isArray(this.highlightNode)){for(var i=0;i<this.highlightNode.length;i++)if(this.highlightNode[i]==n)return this.nodeHighlightColor}else if(this.highlightNode==n)return this.nodeHighlightColor;return this.selectNode.hasOwnProperty(n)?this.nodeHighlightColor:t?t:this.nodeFontColor},this.getTechnicalIndicatorColor=function(n){return this[n.toLowerCase()+"Color"]?this[n.toLowerCase()+"Color"]:"rgb(255,255,0)"},this.setPieData=function(n,t){for(var i={no:0,idso:[],ids:[],data:{},oprc:0,tot:this.sum(n)},u,f,r=0;r<n.length;r++)u=t?this.varIndices[r]:r,f=n[u]/i.tot,i.data[u]=f,r>=this.maxPieSectors-1?(i.oprc+=f,i.idso.push(u),i.no++):i.ids.push(u);return i.no&&i.ids.push(-1),i},this.drawPie=function(n,t,i,r,u){var nt=function(){for(var t=0;t<n.ids.length;t++)if(isNaN(n.data[t]))return!1;return!0},o=this.startPieSectors?this.startPieSectors*Math.PI/180%360:0,p=this.pieSegmentLabels=="inside"?r-r/3:r+r/10,w=0,b=this.layoutComb?this.smpIndices[0]:this.xAxisIndices?this.xAxisIndices[0]:0,tt=this.ctx.lineWidth,f,s,l,h,c,e,y;if(nt()){for(l=0;l<n.ids.length;l++){var a=n.ids[l],v=a>-1?n.data[a]:n.oprc,k=l%this.colors.length;f=s!=null?parseFloat(s):parseFloat(Math.PI*2*w-o),s=parseFloat(f+Math.PI*2*v);var d=(f+s)/2,it=(s-f)/32,g=this.transparency!=null?this.validateColor(this.colors[k],this.transparency):this.colors[k];if(this.gradient?this.setRadialGradient(t,i,r*1.3,g):this.ctx.fillStyle=g,this.ctx.beginPath(),this.ctx.lineWidth=this.pieSegmentSeparation,this.ctx.strokeStyle=this.pieType=="separated"?this.background:this.pieType=="solid"?this.foreground:this.foreground,this.showShadow&&(this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor),this.ctx.moveTo(t,i),this.ctx.arc(t,i,r,f,s,!1),this.ctx.lineTo(t,i),this.ctx.closePath(),this.ctx.fill(),this.graphType!="Network"&&this.ctx.stroke(),this.showShadow&&(this.ctx.restore(),this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.shadowBlur=0,this.ctx.shadowColor=this.background),h=t-Math.sin(d-Math.PI/2)*p,c=i+Math.cos(d-Math.PI/2)*p,this.graphType!="Network"&&this.showPieValues&&this.drawText(sprintf("%."+this.pieSegmentPrecision+"f",v*100)+"%",h,c,this.axisTickFont,this.axisTickColor,"center","middle"),u){for(h=t+r*Math.cos(f),c=i+r*Math.sin(f),e=["poly",t,i,h,c],o=f,y=0;y<32;y++)o+=it,h=t+r*Math.cos(o),c=i+r*Math.sin(o),e.push(h),e.push(c);e.push(t),e.push(i),a>-1?this.addArea(e,[a,b]):(n.idso.push(b),this.addArea(e,n.idso))}w+=v}this.ctx.lineWidth=tt}},this.drawBarPlot=function(n,t,i,r,u,f,e,o,s,h,c,l){var p,w,y,v,k=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,d=this.seriesSeparationFactor/2,b=u/2,a;if(h=="vertical")for(a=0;a<n.length;a++)p=(n[a]-s)*e-o,isNaN(p)||(this.addArea(this.rectangle(i+d,r,u-this.seriesSeparationFactor,-p,c[a],c[a],"closed",!1,!1,!0),l[a]),y=r-p,v=i+b,t[a]&&!isNaN(t[a])&&(w=t[a]/2*e-o/2,this.errorBar(v,y,v,y+w,-b,k),this.errorBar(v,y,v,y-w,-b,k)),this.showDataValues&&this.drawText(n[a],v,r-(w+this.overlayFontSize),this.overlayFont,c[a],"center","bottom")),i+=f;else for(a=0;a<n.length;a++)p=(n[a]-s)*e-o,isNaN(p)||(this.addArea(this.rectangle(i,r+d,p,u-this.seriesSeparationFactor,c[a],c[a],"closed",!1,!1,!0),l[a]),y=i+p,v=r+b,t[a]&&!isNaN(t[a])&&(w=t[a]/2*e-o/2,this.errorBar(y,v,y+w,v,b,k),this.errorBar(y,v,y-w,v,b,k)),this.showDataValues&&this.drawText(n[a],n+w+this.overlayFontSize,v,this.overlayFont,c[a],"left","middle")),r+=f},this.drawLinePlot=function(n,t,i,r,u,f,e,o,s,h,c,l){var b,a,p,tt,v,w,it,d=u/2,g=u/3,rt=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,nt=n.length-1,y=[[],[]],k;if(s=="vertical"){for(a=i,p=i+f,k=1;k<n.length;k++)b=k-1,v=r-(n[b]-o)*e,w=r-(n[k]-o)*e,isNaN(v)||(this.lineDecoration&&c&&this.addArea(this.drawShape(c,a,v,g,g,h,rt,"closed",!1,!1,!0),l[b]),t[b]&&!isNaN(t[b])&&(it=t[b]/2*e,this.errorBar(a,v,a,v+it,-d,h),this.errorBar(a,v,a,v-it,-d,h)),this.lineType=="spline"&&(y[0].push(a),y[1].push(v))),this.lineType=="spline"||isNaN(v)||isNaN(w)?this.lineType=="spline"&&isNaN(w)&&(this.drawLine("spline",y[0],y[1],!1,!1,h,this.lineThickness),y=[[],[]]):this.drawLine("line",a,v,p,w,h,this.lineThickness,"butt",!1,!1,!0),a+=f,p+=f;isNaN(w)||(this.lineDecoration&&c&&this.addArea(this.drawShape(c,a,w,g,g,h,rt,"closed",!1,!1,!0),l[nt]),t[nt]&&!isNaN(t[nt])&&(it=t[nt]/2*e,this.errorBar(a,w,a,w+it,-d,h),this.errorBar(a,w,a,w-it,-d,h)),this.lineType=="spline"&&(y[0].push(a),y[1].push(w))),this.lineType=="spline"&&this.drawLine("spline",y[0],y[1],!1,!1,h,this.lineThickness)}else{for(v=r,w=r+f,k=1;k<n.length;k++)b=k-1,a=i+(n[b]-o)*e,p=i+(n[k]-o)*e,isNaN(a)||(this.lineDecoration&&c&&this.addArea(this.drawShape(c,a,v,g,g,h,rt,"closed",!1,!1,!0),l[b]),t[b]&&!isNaN(t[b])&&(tt=t[b]/2*e,this.errorBar(a,v,a+tt,v,d,h),this.errorBar(a,v,a-tt,v,d,h)),this.lineType=="spline"&&(y[0].push(a),y[1].push(v))),this.lineType=="spline"||isNaN(a)||isNaN(p)?this.lineType=="spline"&&isNaN(p)&&(this.drawLine("spline",y[0],y[1],!1,!1,h,this.lineThickness),y=[[],[]]):this.drawLine("line",p,w,a,v,h,this.lineThickness,"butt",!1,!1,!0),v+=f,w+=f;isNaN(p)||(this.lineDecoration&&c&&this.addArea(this.drawShape(c,p,v,g,g,h,rt,"closed",!1,!1,!0),l[nt]),t[nt]&&!isNaN(t[nt])&&(tt=t[nt]/2*e,this.errorBar(p,v,p+tt,v,-d,h),this.errorBar(p,v,p-tt,v,-d,h)),this.lineType=="spline"&&(y[0].push(p),y[1].push(v))),this.lineType=="spline"&&this.drawLine("spline",y[0],y[1],!1,!1,h,this.lineThickness)}},this.drawStackedPlot=function(n,t,i,r,u,f,e,o,s,h){var c,l;if(o=="vertical")for(c=0;c<n.length;c++)l=u?n[c]*100/f*e:n[c]*e,this.addArea(this.rectangle(t,i,r,-l,s[c]),h[c]),i-=l;else for(c=0;c<n.length;c++)l=u?n[c]*100/f*e:n[c]*e,this.addArea(this.rectangle(t,i,l,r,s[c]),h[c]),t+=l},this.drawAreaPlot=function(n,t,i,r,u,f,e,o,s,h,c,l){var tt=h?"open":"close",k=n.length-1,d=h&&this.lineType=="rect"?"path":this.lineType=="rect"?"polygon":"spline",g=[],it=[],a,p,b,nt;if(this.graphOrientation=="vertical"){for(a=0;a<n[0].length;a++)g[a]=i;for(a=0;a<n.length;a++){var w=t,v=h?[]:[t],y=h?[]:[i];for(p=0;p<n[0].length;p++)isNaN(n[a][p])?(h||(v.push(w-f),y.push(i)),h&&this.lineType=="spline"?this.addArea(this.drawLine(d,v,y,!1,!1,c[a],this.lineThickness),l[a]):this.addArea(this.drawShape(d,v,y,!1,!1,c[a],c[a],tt),l[a]),v=h?[]:[w+f],y=h?[]:[i]):(b=(n[a][p]-o)*e,v.push(w),this.areaIsCumulative?(y.push(g[p]-b),g[p]-=b):y.push(i-b)),w+=f;h||(v.push(t+r),y.push(i)),it.push([v,y])}}else{for(a=0;a<n[0].length;a++)g[a]=t;for(a=0;a<n.length;a++){var w=i,v=h?[]:[t],y=h?[]:[i];for(p=0;p<n[0].length;p++)isNaN(n[a][p])?(h||(v.push(t),y.push(w-f)),h&&this.lineType=="spline"?this.addArea(this.drawLine(d,v,y,!1,!1,c[a],this.lineThickness),l[a]):this.addArea(this.drawShape(d,v,y,!1,!1,c[a],c[a],tt),l[a]),v=h?[]:[t],y=h?[]:[w+f]):(b=(n[a][p]-o)*e,y.push(w),this.areaIsCumulative?(v.push(g[p]+b),g[p]+=b):v.push(t+b)),w+=f;h||(v.push(t),y.push(i+u)),it.push([v,y])}}while(k>=0)nt=it.pop(),h&&this.lineType=="spline"?this.addArea(this.drawLine(d,nt[0],nt[1],!1,!1,c[k],this.lineThickness),l[k]):this.addArea(this.drawShape(d,nt[0],nt[1],!1,!1,c[k],c[k],tt),l[k]),k--},this.drawBoxPlot=function(n,t,i,r,u,f,e,o,s,h,c){var k=function(n){return o=="vertical"?i-(n-e)*f:t+(n-e)*f},p=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,w=this.seriesSeparationFactor/2,b=r/2,d=r/this.boxPlotOutliersRatio,l,y,a,v;if(o=="vertical")for(l=0;l<n.length;l++){for(y=t+b,a=[],v=0;v<5;v++)a.push(k(n[l][v]));if(this.addArea(this.rectangle(t+w,a[2],r-this.seriesSeparationFactor,a[3]-a[2],s[l],s[l],h,!1,!1,!0),c[l]),this.drawLine("line",t+w,a[4],t+(r-w),a[4],p,!1,"butt",!1,!1,!0),this.errorBar(y,a[2],y,a[0],-b,p),this.errorBar(y,a[3],y,a[1],-b,p),n[l][5])for(v=0;v<n[l][5].length;v++)this.drawShape("sphere",y,k(n[l][5][v]),d,d,s[l],p,h,!1,!1,!0);t+=u}else for(l=0;l<n.length;l++){for(y=i+b,a=[],v=0;v<5;v++)a.push(k(n[l][v]));if(this.addArea(this.rectangle(a[2],i+w,a[3]-a[2],r-this.seriesSeparationFactor,s[l],s[l],h,!1,!1,!0),c[l]),this.drawLine("line",a[4],i+w,a[4],i+(r-w),p,!1,"butt",!1,!1,!0),this.errorBar(a[2],y,a[0],y,b,p),this.errorBar(a[3],y,a[1],y,b,p),n[l][5])for(v=0;v<n[l][5].length;v++)this.drawShape("sphere",k(n[l][5][v]),y,d,d,s[l],p,h,!1,!1,!0);i+=u}},this.drawCandlestickPlot=function(n,t,i,r,u,f,e,o,s,h,c){var p=function(n){return s=="vertical"?i-(n-e)*f:t+(n-e)*f},b=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,w=r/2,v,a,l,y;if(s=="vertical")for(v=0;v<n.length;v++){for(a=t+w,l=[],y=0;y<n[v].length;y++)l.push(p(n[v][y]));o?l[0]>l[1]?(this.addArea(this.rectangle(t,l[0],r,l[1]-l[0],!1,h,"open",!1,!1,!0),c[v]),this.drawLine("line",a,l[1],a,l[2],h,!1,"butt",!1,!1,!0),this.drawLine("line",a,l[3],a,l[0],h,!1,"butt",!1,!1,!0)):(this.addArea(this.rectangle(t,l[0],r,l[1]-l[0],h,h,"closed",!1,!1,!0),c[v]),this.drawLine("line",a,l[3],a,l[1],h,!1,"butt",!1,!1,!0),this.drawLine("line",a,l[0],a,l[2],h,!1,"butt",!1,!1,!0)):this.addArea(this.rectangle(t,l[0],r,i-l[0],h,h,"closed",!1,!1,!0),c[v]),t+=u}else for(v=0;v<n.length;v++){for(a=i+w,l=[],y=0;y<n[v].length;y++)l.push(p(n[v][y]));o?l[1]>l[0]?(this.addArea(this.rectangle(l[0],i,l[1]-l[0],r,!1,h,"open",!1,!1,!0),c[v]),this.drawLine("line",l[1],a,l[2],a,h,!1,"butt",!1,!1,!0),this.drawLine("line",l[3],a,l[0],a,h,!1,"butt",!1,!1,!0)):(this.addArea(this.rectangle(l[0],i,l[1]-l[0],r,h,h,"closed",!1,!1,!0),c[v]),this.drawLine("line",l[3],a,l[1],a,h,!1,"butt",!1,!1,!0),this.drawLine("line",l[0],a,l[2],a,h,!1,"butt",!1,!1,!0)):this.addArea(this.rectangle(t,i,l[0]-t,r,h,h,"closed",!1,!1,!0),c[v]),i+=u}},this.drawDotPlot=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var k,d,g=this.dotPlotJitter?Math.ceil(Math.log(this.varIndices.length*5)/Math.LN10):1,nt=this.dotPlotJitter?v/g:0,tt=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,p,b,w;if(c=="vertical")for(this.dotPlotJitter&&(i-=v/2),p=0;p<n.length;p++){for(b=0,w=0;w<n[p].length;w++)k=r-(n[p][w]-s)*o,isNaN(k)||(this.addArea(this.drawShape(a[p][w],i+b,k,h[p][w],h[p][w],l[p][w],tt,"closed",!1,!1,!0),y[p][w]),t[p]&&!isNaN(t[p])&&(d=t[p]/2*o,this.errorBar(i+b,k,i+b,k+d,-f,l[p][w]),this.errorBar(i+b,k,i+b,k-d,-f,l[p][w])),b=this.dotPlotJitter&&(w+1)%(g+1)?b+nt:0);i+=e}else for(this.dotPlotJitter&&(r-=v/2),p=0;p<n.length;p++){for(b=0,w=0;w<n[p].length;w++)k=i+(n[p][w]-s)*o,isNaN(k)||(this.addArea(this.drawShape(a[p][w],k,r+b,h[p][w],h[p][w],l[p][w],tt,"closed",!1,!1,!0),y[p][w]),t[p]&&!isNaN(t[p])&&(d=t[p]/2*o,this.errorBar(k,r+b,k+d,r+b,f,l[p][w]),this.errorBar(k,r+b,k-d,r+b,f,l[p][w])),b=this.dotPlotJitter&&(w+1)%(g+1)?b+nt:0);r+=e}},this.drawHeatmap=function(n,t,i,r,u,f,e,o,s,h){for(var a=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,y=this.graphType=="Network"?!1:!0,l,v,c=0;c<n.length;c++)l=n[c],v=isNaN(l)?this.missingDataColor:this.getHeatmapColor(f,e,l),a=o?v:a,this.addArea(this.rectangleHM(t,i,r,u,v,a,"closed",!1,!1,y),s[c],h),this.showDataValues&&this.drawText(l,t+r-2,i+u-2,this.overlayFont,this.foreground,"right","bottom"),t+=r}},CanvasXpress.prototype.init3dUtils=function(){this.set3DRotation=function(){var t,n=0,i=0;this.graphType=="Network"?(n=this.maxRotate!=null?this.maxRotate:360,i=this.minRotate!=null?this.minRotate:360):(this.graphType=="Scatter3D"||this.is3DPlot)&&(n=this.maxRotate!=null?this.maxRotate:90,i=this.minRotate!=null?this.minRotate:0),this.xRotate>n&&(this.xRotate=n),this.xRotate<0&&(this.xRotate=i),this.yRotate>n&&(this.yRotate=n),this.yRotate<0&&(this.yRotate=i),this.zRotate>n&&(this.zRotate=n),this.zRotate<0&&(this.zRotate=i),this.xRotate>0?(t=180/this.xRotate,this.ry=Math.PI/t):this.ry=0,this.yRotate>0?(t=180/this.yRotate,this.rx=Math.PI/t):this.rx=0,this.zRotate>0?(t=180/this.zRotate,this.rz=Math.PI/t):this.rz=0},this.set3DParams=function(){this.perspective=this.x*1.5,this.lenX=this.x/4*this.zoom*this.x3DRatio,this.lenY=this.x/4*this.zoom*this.y3DRatio,this.lenZ=this.x/4*this.zoom*this.z3DRatio,this.padX!=null&&this.padX||(this.padX=this.x/2),this.padY!=null&&this.padY||(this.padY=this.y/2),this.padZ!=null&&this.padZ||(this.padZ=this.y/2)},this.get3DTransfrom=function(n,t,i){var r,u,f,e=[];return u=t,f=i,t=u*Math.cos(this.rx)-f*Math.sin(this.rx),i=u*Math.sin(this.rx)+f*Math.cos(this.rx),r=n,f=i,n=f*Math.sin(this.ry)+r*Math.cos(this.ry),i=f*Math.cos(this.ry)-r*Math.sin(this.ry),r=n,u=t,n=r*Math.cos(this.rz)-u*Math.sin(this.rz),t=r*Math.sin(this.rz)+u*Math.cos(this.rz),n=n*(this.perspective/(i+this.perspective)),t=t*(this.perspective/(i+this.perspective)),i=i*(this.perspective/(i+this.perspective)),e.push(n+this.padX),e.push(t+this.padY),e.push(i+this.padZ),e},this.backfaceCulling=function(n){for(var f=[],e=[],o=[],s=[],h=[],c=[],t=0;t<n.length;t++){var l=n[t][1][0]-n[t][0][0],a=n[t][1][1]-n[t][0][1],v=n[t][1][2]-n[t][0][2],i=n[t][2][0]-n[t][0][0],r=n[t][2][1]-n[t][0][1],u=n[t][2][2]-n[t][0][2],y=n[t][3][0]-n[t][0][0],p=n[t][3][1]-n[t][0][1],w=n[t][3][2]-n[t][0][2];f[t]=a*u-r*v,e[t]=i*v-l*u,o[t]=l*r-i*a,s[t]=p*u-r*w,h[t]=i*w-y*u,c[t]=y*r-i*p}return[f,e,o,s,h,c]}},CanvasXpress.prototype.initLegendUtils=function(){this.drawDecorationData=function(){var c=this.marginLeft+this.offsetX+this.left,s=this.marginTop+this.offsetY+this.top,t=this.data.d,wt,bt,kt,et,fi,o,w,l,r,i,e,h,at,vt,yt,pt,u,n,f;if(this.showDecorations&&t){if(t.nlfit)for(et=this.varIndices,n=0;n<t.nlfit.length;n++){var dt=[],ui=[],u=n%this.colors.length,b=this.transformValue(this.yAxisTransform,t.nlfit[n].param[0]),ot=this.transformValue(this.yAxisTransform,t.nlfit[n].param[1]),y=t.nlfit[n].param[2],st=t.nlfit[n].param[3],gt=this.xAxisIndices.length==1?this.xAxisIndices[0]:this.xAxisIndices[n],ni=this.getDataForSmpGrpAtIndex(gt);for(this.xAxisTransform=="percentile"&&(wt=this.range(ni),kt=wt[0],bt=wt[1]),et.sort(function(n,t){return ni[n]-ni[t]}),u=t.nlfit[n].color?t.nlfit[n].color:this.colors[u],f=0;f<et.length;f++){var ci=et[f],g=this.getDataAtPos(ci,gt),k,p=[];if(g>0){if(f>0){if(fi=et[f-1],o=this.getDataAtPos(fi,gt),o>0)for(w=(g-o)/this.functionIntervals,l=0;l<this.functionIntervals;l++)p.push(o),o+=w}else p=[g];for(l=0;l<p.length;l++)k=t.nlfit[n].type=="reg"?b+(ot-b)/(1+y/Math.pow(p[l],st)):b+(ot-b)/(1+Math.pow(p[l]/y,st)),this.xAxisTransform&&(p[l]=this.xAxisTransform=="percentile"?this.percentile(kt,bt,p[l]):this.transformValue(this.xAxisTransform,p[l])),r=c+(p[l]-this.xAxisMin)*this.xAxisUnit,i=s+this.y-(k-this.yAxisMin)*this.yAxisUnit,dt.push(r),ui.push(i)}}dt.length>0&&(this.drawShape("path",dt,ui,!1,!1,u,u,"open"),k=t.nlfit[n].type=="reg"?b+(ot-b)/(1+y/Math.pow(y,st)):b+(ot-b)/(1+Math.pow(y/y,st)),this.xAxisTransform&&(y=this.xAxisTransform=="percentile"?this.percentile(kt,bt,y):this.transformValue(this.xAxisTransform,y)),r=c+(y-this.xAxisMin)*this.xAxisUnit,i=s+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.drawLine("dottedLine",c,i,r,i,u),this.drawLine("dottedLine",r,i,r,s+this.y,u))}if(t.line)for(n=0;n<t.line.length;n++)if(t.line[n].x||t.line[n].y){var u=t.line[n].color?t.line[n].color:this.colors[n%this.colors.length],nt=t.line[n].type?t.line[n].type:"line",g=t.line[n].x?t.line[n].x:!1,k=t.line[n].y?t.line[n].y:!1,r,i,e,h;g&&(r=c+g*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,i=s,e=r,h=i+this.y,this.drawLine(nt,r,i,e,h,u)),k&&(r=c,i=s+k*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,e=r+this.x,h=i,this.drawLine(nt,r,i,e,h,u))}if(t.lines)for(n=0;n<t.lines.length;n++){var r,i,e,h,ti=!0,nt=t.lines[n].type||"line",li=t.lines[n].color,ei=t.lines[n].value||0,ii=t.lines[n].label||!1;this.graphOrientation=="vertical"?(r=this.marginLeft+this.offsetX+this.left,e=r+this.x,i=this.marginTop+this.offsetY+this.top+this.y-(ei-this.xAxisMin)*this.xAxisUnit,h=i,ti=i<=this.marginTop+this.offsetY+this.top+this.y&&i>=this.marginTop+this.offsetY+this.top?!0:!1):(r=this.marginLeft+this.offsetX+this.left+(ei-this.xAxisMin)*this.xAxisUnit,e=r,i=this.marginTop+this.offsetY+this.top,h=i+this.y,ti=r<=this.marginLeft+this.offsetX+this.left+this.x&&this.marginLeft+this.offsetX+this.left?!0:!1),ti&&(ii&&(this.graphOrientation=="vertical"?this.drawText(ii,e-this.margin,h-this.margin,this.decorationFont,this.decorationColor,"right","bottom"):this.drawText(ii,e+this.margin,h-this.margin,this.decorationFont,this.decorationColor,"left","bottom")),this.drawLine(nt,r,i,e,h,li))}if(t.reg)for(n=0;n<t.reg.length;n++)if(t.reg[n].slope&&t.reg[n].intercept){var u=n%this.colors.length,nt=t.reg[n].type?t.reg[n].type:"line",oi=t.reg[n].slope,si=t.reg[n].intercept,ai=t.reg[n].cor,r=t.reg[n].start?t.reg[n].start:this.xAxisMin,i=oi*r+si,e=t.reg[n].end?t.reg[n].end:this.xAxisMax,h=oi*e+si;r=c+r*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,i=s+this.y-i*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,e=c+e*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,h=s+this.y-h*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,u=t.reg[n].color?t.reg[n].color:this.colors[u],this.drawLine(nt,r,i,e,h,u)}if(t.nor)for(n=0;n<t.nor.length;n++)if(t.nor[n].mu&&t.nor[n].sigma){var tt=[],it=[],ht=[],r,i,u=n%this.colors.length,v=t.nor[n].mu,hi=t.nor[n].sigma,ct=t.nor[n].start?t.nor[n].start:t.nor[n].yAxis?this.yAxisMin:this.xAxisMin,ri=t.nor[n].end?t.nor[n].end:t.nor[n].yAxis?this.yAxisMax:this.xAxisMax,d=120;if(ct<v&&v<ri){var o,a,lt,rt,w=(v-ct)/d,ut=hi*hi,vi=ut*2,ft=1/Math.sqrt(2*Math.PI*ut);if(t.nor[n].yAxis){for(lt=t.nor[n].max?t.nor[n].max*this.xAxisUnit:this.x-this.x*this.axisExtension,rt=lt/ft,o=ct,f=0;f<d-1;f++)a=ft*Math.pow(Math.E,-Math.pow(o-v,2)/ut),ht.push([o,a]),r=c+a*rt,i=s+this.y-o*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,tt.push(r),it.push(i),o+=w;for(w=(ri-v)/d,o=v,f=0;f<d;f++)a=ft*Math.pow(Math.E,-Math.pow(o-v,2)/ut),ht.push([o,a]),r=c+a*rt,i=s+this.y-o*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,tt.push(r),it.push(i),o+=w;u=t.nor[n].color?t.nor[n].color:this.colors[u],this.drawShape("path",tt,it,!1,!1,u,u,"open")}else{for(lt=t.nor[n].max?t.nor[n].max*this.yAxisUnit:this.y-this.y*this.axisExtension,rt=lt/ft,o=ct,f=0;f<d-1;f++)a=ft*Math.pow(Math.E,-Math.pow(o-v,2)/ut),ht.push([o,a]),r=c+o*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,i=s+this.y-a*rt,tt.push(r),it.push(i),o+=w;for(w=(ri-v)/d,o=v,f=0;f<d;f++)a=ft*Math.pow(Math.E,-Math.pow(o-v,2)/ut),ht.push([o,a]),r=c+o*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,i=s+this.y-a*rt,tt.push(r),it.push(i),o+=w;u=t.nor[n].color?t.nor[n].color:this.colors[u],this.drawShape("path",tt,it,!1,!1,u,u,"open")}}}if(t.area)for(n=0;n<t.area.length;n++)if(t.area[n].type&&t.area[n].x&&t.area[n].y&&t.area[n].size&&this.isValidShape(t.area[n].type)){var r=c+t.area[n].x*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,i=s+this.y-t.area[n].y*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,u=t.area[n].color?t.area[n].color:this.colors[n%this.colors.length];this[t.area[n].type](r,i,u,t.area[n].size)}if(t.kaplanMeier)for(n=0;n<t.kaplanMeier.length;n++)for(u=t.kaplanMeier[n].color,r=c,i=s+this.y-this.yAxisUnit+this.yAxisMin*this.yAxisUnit,e=c+t.kaplanMeier[n].data.times[0]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,h=s+this.y-t.kaplanMeier[n].data.data[0][3]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,vt=s+this.y-t.kaplanMeier[n].data.data[0][4]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,pt=s+this.y-t.kaplanMeier[n].data.data[0][5]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,this.drawLine("line",r,i,e,i,u),this.drawLine("line",e,i,e,h,u),this.drawLine("dottedLine",r,i,e,i,u,.5),this.drawLine("dottedLine",e,i,e,vt,u,.5),this.drawLine("dottedLine",r,i,e,i,u,.5),this.drawLine("dottedLine",e,i,e,pt,u,.5),f=1;f<t.kaplanMeier[n].data.times.length;f++)r=c+t.kaplanMeier[n].data.times[f-1]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,i=s+this.y-t.kaplanMeier[n].data.data[f-1][3]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,at=s+this.y-t.kaplanMeier[n].data.data[f-1][4]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,yt=s+this.y-t.kaplanMeier[n].data.data[f-1][5]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,e=c+t.kaplanMeier[n].data.times[f]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,h=s+this.y-t.kaplanMeier[n].data.data[f][3]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,vt=s+this.y-t.kaplanMeier[n].data.data[f][4]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,pt=s+this.y-t.kaplanMeier[n].data.data[f][5]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,this.drawLine("line",r,i,e,i,u),this.drawLine("line",e,i,e,h,u),this.drawLine("dottedLine",r,at,e,at,u,.5),this.drawLine("dottedLine",e,at,e,vt,u,.5),this.drawLine("dottedLine",r,yt,e,yt,u,.5),this.drawLine("dottedLine",e,yt,e,pt,u,.5)}},this.setDecorationLegendDimension=function(){var i,f,n,t,r;if(this.legendDecorationWidth=0,this.legendDecorationHeight=0,i=this.data.d,this.showDecorations&&i){var u=this.getFontPt(this.decorationFont),e=0,s=0,e=0,o=0;if(i.nlfit){for(f=this.measureText(sprintf("%90s","X"),this.decorationFont)+this.margin*5,n=0,t=0;t<i.nlfit.length;t++)r=this.measureText(i.nlfit[t].label,this.decorationFont),n=Math.max(r,n);e=this.margin+n+this.margin+f+this.margin,this.legendDecorationHeight=i.nlfit.length*u*2+u+this.margin}if(i.line){for(n=0,t=0;t<i.line.length;t++)r=this.measureText(i.line[t].label,this.decorationFont),n=Math.max(r,n);o=this.margin+n+this.margin,this.legendDecorationHeight+=i.line.length*u*2+this.margin}if(i.reg){for(f=this.measureText(sprintf("%45s","X"),this.decorationFont)+this.margin*2,n=0,t=0;t<i.reg.length;t++)r=this.measureText(i.reg[t].label,this.decorationFont),n=Math.max(r,n);s=this.margin+n+this.margin+f+this.margin,this.legendDecorationHeight+=i.reg.length*u*2+u+this.margin}if(i.nor){for(f=this.measureText(sprintf("%30s","X"),this.decorationFont)+this.margin*1,n=0,t=0;t<i.nor.length;t++)r=this.measureText(i.nor[t].label,this.decorationFont),n=Math.max(r,n);e=this.margin+n+this.margin+f+this.margin,this.legendDecorationHeight+=i.nor.length*u*2+u+this.margin}if(i.area){for(n=0,t=0;t<i.area.length;t++)r=this.measureText(i.area[t].label,this.decorationFont),n=Math.max(r,n);o=this.margin+n+this.margin,this.legendDecorationHeight+=i.area.length*u*2+this.margin}if(i.kaplanMeier){for(n=0,t=0;t<i.kaplanMeier.length;t++)r=this.measureText(i.kaplanMeier[t].label,this.decorationFont),n=Math.max(r,n);o=this.margin+n+this.margin,this.legendDecorationHeight+=i.kaplanMeier.length*u*2+this.margin}this.legendDecorationWidth=Math.max(Math.max(Math.max(e,s),e),o)}},this.drawDecorationLegend=function(){var o=this.marginLeft+this.offsetX+this.left,a=this.marginTop+this.offsetY+this.top,i=this.data.d,e,u,t,r,s,h,c,l,n,f;if(this.showDecorations&&i){if(e=this.getFontPt(this.decorationFont),u=this.measureText(sprintf("%15s","X"),this.decorationFont),r=this.decorationsPosition=="right"?a+e/2+(this.y-this.legendDecorationHeight)/2:a+this.y+this.bottom-this.legendDecorationHeight,i.nlfit)for(h=this.margin*6+6*u,s=this.decorationsPosition=="right"?o+this.x+this.right+u-h:o+(this.x-this.legendDecorationWidth)/2+(this.legendDecorationWidth-h)+u,t=s,this.drawText("Min",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("Max",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("EC50",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("Slope",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("p-Val",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("F-Chg",t,r,this.decorationFont,this.decorationsColor,"right","middle"),r+=e+e,n=0;n<i.nlfit.length;n++){for(f=n%this.colors.length,f=i.nlfit[n].color?i.nlfit[n].color:this.colors[f],t=s+this.margin-u,this.graphType=="ScatterBubble2D"&&this.decorationsPosition=="right"&&this.zAxisShow&&(t+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.nlfit[n].label,t,r,this.decorationFont,f,"right","middle"),t=s,c=0;c<6;c++)l=i.nlfit[n].param[c],c<2?l=this.transformValue(this.yAxisTransform,l):c==2&&(l=this.transformValue(this.xAxisTransform,l)),this.drawText(this.formatNumber(l),t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin;r+=e+e}if(i.line)for(n=0;n<i.line.length;n++)if(i.line[n].label)for(t=this.decorationsPosition=="right"?o+this.x+this.margin:o+(this.x-this.legendDecorationWidth)/2+this.margin,n=0;n<i.line.length;n++)f=i.line[n].color?i.line[n].color:this.colors[n%this.colors.length],this.graphType=="ScatterBubble2D"&&this.decorationsPosition=="right"&&this.zAxisShow&&(t+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.line[n].label,t,r,this.decorationFont,f,"left","middle"),r+=e+e;if(i.reg)for(h=this.margin*3+3*u,s=this.decorationsPosition=="right"?o+this.x+this.right-h:o+(this.x-this.legendDecorationWidth)/2+(this.legendDecorationWidth-h)+u,t=s,this.drawText("Slope",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("Int",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("Cor",t,r,this.decorationFont,this.decorationsColor,"right","middle"),r+=e+e,n=0;n<i.reg.length;n++)f=n%this.colors.length,f=i.reg[n].color?i.reg[n].color:this.colors[f],t=s+this.margin-u,this.graphType=="ScatterBubble2D"&&this.decorationsPosition=="right"&&this.zAxisShow&&(t+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.reg[n].label,t,r,this.decorationFont,f,"right","middle"),t=s,this.drawText(this.formatNumber(i.reg[n].slope),t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText(this.formatNumber(i.reg[n].intercept),t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText(this.formatNumber(i.reg[n].cor),t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,r+=e+e;if(i.nor)for(h=this.margin*2+2*u,s=this.decorationsPosition=="right"?o+this.x+this.right-h:o+(this.x-this.legendDecorationWidth)/2+(this.legendDecorationWidth-h)+u,t=s,this.drawText("Mu",t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText("Sigma",t,r,this.decorationFont,this.decorationsColor,"right","middle"),r+=e+e,n=0;n<i.nor.length;n++)f=n%this.colors.length,f=i.nor[n].color?i.nor[n].color:this.colors[f],t=s+this.margin-u,this.graphType=="ScatterBubble2D"&&this.decorationsPosition=="right"&&this.zAxisShow&&(t+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.nor[n].label,t,r,this.decorationFont,f,"right","middle"),t=s,this.drawText(this.formatNumber(i.nor[n].mu),t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,this.drawText(this.formatNumber(i.nor[n].sigma),t,r,this.decorationFont,this.decorationsColor,"right","middle"),t+=u+this.margin,r+=e+e;if(i.area)for(n=0;n<i.area.length;n++)i.area[n].label&&(t=this.decorationsPosition=="right"?o+this.x+this.margin:o+(this.x-this.legendDecorationWidth)/2+this.margin,f=i.area[n].color?i.area[n].color:this.colors[n%this.colors.length],this.graphType=="ScatterBubble2D"&&this.decorationsPosition=="right"&&this.zAxisShow&&(t+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.area[n].label,t,r,this.decorationFont,f,"left","middle"),r+=e+e);if(i.kaplanMeier)for(n=0;n<i.kaplanMeier.length;n++)i.kaplanMeier[n].label&&(t=this.decorationsPosition=="right"?o+this.x+this.margin:o+(this.x-this.legendDecorationWidth)/2+this.margin,f=i.kaplanMeier[n].color?i.kaplanMeier[n].color:this.colors[n%this.colors.length],this.graphType=="ScatterBubble2D"&&this.decorationsPosition=="right"&&this.zAxisShow&&(t+=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.drawText(i.kaplanMeier[n].label,t,r,this.decorationFont,f,"left","middle"),r+=e+e)}},this.setLegendFont=function(){this.autoScaleFont?(this.legendFont=this.layoutComb?parseInt(Math.max(this.minTextSize,this.legendFontSize-Math.min(this.layoutRows,this.layoutCols))*this.legendScaleFontFactor):parseInt(this.legendFontSize*this.legendScaleFontFactor),this.legendFont=this.legendFont+"Pt "+this.fontName):this.legendFont=parseInt(this.legendFontSize)+"Pt "+this.fontName},this.setSampleLegendDimension=function(){var i,n,t,r;if(this.legendSampleWidth=0,this.legendSampleHeight=0,this.xAxisIndices.length!=this.yAxisIndices.length||this.xAxisIndices.length>1){if(i=this.getFontPt(this.legendFont),n=0,this.xAxisIndices.length==this.yAxisIndices.length&&this.xAxisIndices.length>1)for(t=0;t<this.xAxisIndices.length;t++)r=this.measureText(this.shortenText(this.xAxis[t],this.maxSmpStringLen)+" vs "+this.shortenText(this.yAxis[t],this.maxSmpStringLen),this.legendFont),n=Math.max(r,n);else this.xAxisIndices.length>this.yAxisIndices.length?n=this.measureText(this.shortenText(this.getMaxText(this.xAxis),this.maxSmpStringLen)+" vs "+this.shortenText(this.yAxis[0],this.maxSmpStringLen),this.legendFont):this.yAxisIndices.length>this.xAxisIndices.length&&(n=this.measureText(this.shortenText(this.getMaxText(this.yAxis),this.maxSmpStringLen)+" vs "+this.shortenText(this.xAxis[0],this.maxSmpStringLen),this.legendFont));this.legendSampleWidth=i-1+n+this.margin*3,this.legendSampleHeight=Math.max(this.xAxisIndices.length,this.yAxisIndices.length)*(i+this.margin)+this.margin}},this.drawSampleLegend=function(n,t){var u=n,f=t,r=this.getFontPt(this.legendFont),e=(r-1)/2,s,i;for(t+=this.margin+e,this.legendBox&&(this.disableGradientTransparency(),this.rectangle(u,f,this.legendSampleWidth,this.legendSampleHeight,this.legendBackgroundColor,this.legendBoxColor),this.enableGradientTransparency()),s=Math.max(this.xAxisIndices.length,this.yAxisIndices.length),i=0;i<s;i++){var h=i%this.colors.length,c=0,l=this.xAxisIndices.length==this.yAxisIndices.length?this.yAxis[i]:this.xAxisIndices.length>this.yAxisIndices.length?this.yAxis[0]:this.xAxis[0],a=this.shortenText(this.xAxisIndices.length<this.yAxisIndices.length?this.yAxis[i]:this.xAxis[i],this.maxSmpStringLen)+" vs "+this.shortenText(l,this.maxSmpStringLen),o=n+e+this.margin,v=t+e+this.margin;this.colorBy?this.drawShape(this.shapes[c],o,t,r-1,r-1,this.background,this.colors[h],"open"):this.drawShape(this.shapes[c],o,t,r-1,r-1,this.colors[h],this.foreground,"closed"),this.drawText(a,o+e+this.margin,t,this.legendFont,this.legendColor,"left","middle"),t+=r+this.margin}this.legendBox&&this.rectangle(u,f,this.legendSampleWidth,this.legendSampleHeight,!1,this.legendBoxColor,"open"),this.addArea(["rect",u,f,u+this.legendSampleWidth,f+this.legendSampleHeight],[-1],"-legend-sample")},this.setVariableLegendDimension=function(){if(this.legendVariableWidth=0,this.legendVariableHeight=0,this.colorBy&&this.colorBy=="variable"||this.shapeBy&&this.shapeBy=="variable"||this.sizeBy&&this.sizeBy=="variable"){var n=this.sizeBy&&this.sizeBy=="variable"?Math.max(this.sizes[this.varIndices.length-1],this.getFontPt(this.legendFont)):this.getFontPt(this.legendFont),t=this.shortenText(this.maxVarNameStr,this.maxVarStringLen);this.legendVariableWidth=n-1+this.measureText(t,this.legendFont)+this.margin*3,this.legendVariableHeight=this.varIndices.length*(n+this.margin)+this.margin}},this.drawVariableLegend=function(n,t){var i;if(this.colorBy&&this.colorBy=="variable"||this.shapeBy&&this.shapeBy=="variable"||this.sizeBy&&this.sizeBy=="variable"){var r=n,u=t,h=this.getFontPt(this.legendFont),f=this.sizeBy&&this.sizeBy=="variable"?Math.max(this.sizes[this.varIndices.length-1],h):h;for(t+=this.margin+f/2,this.legendBox&&this.legendBackgroundColor&&(this.disableGradientTransparency(),this.rectangle(r,u,this.legendVariableWidth,this.legendVariableHeight,this.legendBackgroundColor,this.legendBoxColor),this.enableGradientTransparency()),i=0;i<this.varIndices.length;i++){var l=this.varIndices[i],a=this.colorBy&&this.colorBy=="variable"?i%this.colors.length:0,c=this.shapeBy&&this.shapeBy=="variable"?i%this.shapes.length:0,e=this.sizeBy&&this.sizeBy=="variable"?this.sizes[i%this.sizes.length]:f,o=f/2,s=n+o+this.margin,y=t+o+this.margin,v=this.shortenText(this.data.y.vars[l],this.maxVarStringLen);this.colorBy&&this.colorBy!="variable"?this.drawShape(this.shapes[c],s,t,e,e,this.background,this.foreground,"open"):this.drawShape(this.shapes[c],s,t,e,e,this.colors[a],this.foreground,"closed"),this.drawText(v,s+o+this.margin,t,this.legendFont,this.legendColor,"left","middle"),t+=f+this.margin}this.legendBox&&this.rectangle(r,u,this.legendVariableWidth,this.legendVariableHeight,!1,this.legendBoxColor,"open"),this.addArea(["rect",r,u,r+this.legendVariableWidth,u+this.legendVariableHeight],[-1],"-legend-variable")}},this.setColorLegendIndicatorDimensions=function(){if(this.colorBy||this.outlineBy){var n=this.heatmapType.split("-");this.legendColorIndicatorWidth=this.heatmapType.split("-").length>1?parseInt(512*this.indicatorWidth/this.indicatorBins)+this.margin*4+1:parseInt(256*this.indicatorWidth/this.indicatorBins)+this.margin*4+1,this.legendColorIndicatorHeight=this.indicatorHeight+this.margin*3+this.getFontPt(this.legendFont),this.legendColorIndicatorHeight+=this.getFontPt(this.legendFont)+this.margin}},this.getHeatmapColor=function(n,t,i){var r=Math.abs(n),u;return n+=r,t+=r,i+=r,u=((i-n)*this.heatmapColors.length/(t-n)).toFixed()-1,this.heatmapColors[Math.max(0,Math.min(this.heatmapColors.length-1,u))]},this.drawColorIndicator=function(n,t,i,r,u,f){var e,o;if(this.colorBy||this.outlineBy||f){var s=n,h=t,c=this.indicatorHeight,l=this.indicatorHeight;if(this.indicatorsPosition=="bottom"){for(e=0;e<this.heatmapColors.length;e++)o=this.transparency!=null?this.addColorTransparency(this.heatmapColors[e],this.transparency):this.heatmapColors[e],this.drawLine("line",n,t,n,t+l,o,this.indicatorWidth+.5),n+=this.indicatorWidth;n=s-this.indicatorWidth/2,t+=l+this.margin,this.drawText(sprintf("%."+u+"f",i),n,t,this.legendFont,this.legendColor,"center","top"),n+=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.heatmapColors.length>=10&&this.drawText(sprintf("%."+u+"f",(i+r)/2),n,t,this.legendFont,this.legendColor,"center","top"),f||this.drawText(this.colorBy||this.outlineBy,n,t+this.margin+this.getFontPt(this.legendFont),this.legendFont,this.legendColor,"center","top"),n+=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.drawText(sprintf("%."+u+"f",r),n,t,this.legendFont,this.legendColor,"center","top"),this.addArea(["rect",s-this.margin*2,h-this.margin,n+this.margin*2,t+this.getFontPt(this.legendFont)+this.margin],[-1],"-legend-indicator-color")}else{for(e=0;e<this.heatmapColors.length;e++)o=this.transparency!=null?this.addColorTransparency(this.heatmapColors[e],this.transparency):this.heatmapColors[e],this.drawLine("line",n,t,n+c,t,o,this.indicatorWidth+.5),t-=this.indicatorWidth;n+=c+this.margin,t=h-this.indicatorWidth/2,this.drawText(sprintf("%."+u+"f",i),n,t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),t-=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.heatmapColors.length>=10&&this.drawText(sprintf("%."+u+"f",(i+r)/2),n,t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),f||this.drawText(this.colorBy||this.outlineBy,n+this.margin+this.getFontPt(this.legendFont),t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),t-=this.heatmapColors.length*this.indicatorWidth/2-this.indicatorWidth/2,this.drawText(sprintf("%."+u+"f",r),n,t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.addArea(["rect",s-this.margin,t-this.margin*2,n+this.margin+this.getFontPt(this.legendFont),h+this.margin*2],[-1],"-legend-indicator-color")}}},this.setShapeLegendIndicatorDimensions=function(){this.shapeBy&&(this.legendShapeIndicatorWidth=10*(this.indicatorHeight+this.margin)+this.margin*2,this.legendShapeIndicatorHeight=this.indicatorHeight+this.margin*3+this.getFontPt(this.legendFont),this.legendShapeIndicatorHeight+=this.getFontPt(this.legendFont)+this.margin)},this.drawShapeIndicator=function(n,t,i,r,u){var f;if(this.shapeBy){var e=n,o=t,c=this.indicatorHeight/2,s=n,h=t;if(this.indicatorsPosition=="bottom"){for(f=0;f<10;f++)this.drawShape("pie"+f,s,h+this.margin,this.indicatorHeight,this.indicatorHeight,this.background,this.foreground,"open"),s+=this.indicatorHeight+c;n=e,t+=this.indicatorHeight+this.margin,this.drawText(sprintf("%."+u+"f",i),n,t,this.legendFont,this.legendColor,"center","top"),n+=this.indicatorHeight*7,this.drawText(sprintf("%."+u+"f",(i+r)/2),n,t,this.legendFont,this.legendColor,"center","top"),this.drawText(this.shapeBy||shapeBy,n,t+this.margin+this.getFontPt(this.legendFont),this.legendFont,this.legendColor,"center","top"),n+=this.indicatorHeight*7,this.drawText(sprintf("%."+u+"f",r),n,t,this.legendFont,this.legendColor,"center","top"),this.addArea(["rect",e-this.margin*2,o-this.margin,n+this.margin*2,t+this.getFontPt(this.legendFont)+this.margin],[-1],"-legend-indicator-shape")}else{for(f=0;f<10;f++)this.drawShape("pie"+f,s+this.margin,h,this.indicatorHeight,this.indicatorHeight,this.background,this.foreground,"open"),h-=this.indicatorHeight+c;n+=this.indicatorHeight+this.margin,t=o,this.drawText(sprintf("%."+u+"f",i),n,t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),t-=this.indicatorHeight*7,this.heatmapColors.length>=10&&this.drawText(sprintf("%."+u+"f",(i+r)/2),n,t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(this.shapeBy||shapeBy,n+this.margin+this.getFontPt(this.legendFont),t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),t-=this.indicatorHeight*7,this.drawText(sprintf("%."+u+"f",r),n,t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.addArea(["rect",e-this.margin,t-this.margin*2,n+this.margin+this.getFontPt(this.legendFont),o+this.margin*2],[-1],"-legend-indicator-shape")}}},this.setSizeLegendIndicatorDimensions=function(){var t,i,n;if(this.sizeBy){for(t=0,i=this.indicatorHeight/2,n=0;n<10;n++)t+=this.sizes[n]+i;this.legendSizeIndicatorWidth=t-(this.sizes[0]+this.sizes[9])+this.margin*4,this.legendSizeIndicatorHeight=this.sizes[9]+this.margin*3+this.getFontPt(this.legendFont),this.legendSizeIndicatorHeight+=this.getFontPt(this.legendFont)+this.margin}},this.drawSizeIndicator=function(n,t,i,r,u){var f,e;if(this.sizeBy){var l=n,a=t,o=this.indicatorHeight/2,s=this.sizes[9],h=n,c=t,v=n,y=t;if(this.indicatorsPosition=="bottom"){for(f=0;f<10;f++)e=this.sizes[f],this.drawShape("sphere",h,c+s/2,e,e,this.background,this.foreground,"open"),h+=e+o,f<4?v+=e+o:f==5&&(v+=(e+o)/2);t+=s+this.margin,this.drawText(sprintf("%."+u+"f",i),l,t,this.legendFont,this.legendColor,"center","top"),this.drawText(sprintf("%."+u+"f",(i+r)/2),v,t,this.legendFont,this.legendColor,"center","top"),this.drawText(this.sizeBy,l+this.legendSizeIndicatorWidth/2,t+this.margin+this.getFontPt(this.legendFont),this.legendFont,this.legendColor,"center","top"),this.drawText(sprintf("%."+u+"f",r),h-(s+o),t,this.legendFont,this.legendColor,"center","top"),this.addArea(["rect",l-this.margin*2,a-this.margin,h-s+this.margin*2,t+this.getFontPt(this.legendFont)+this.margin],[-1],"-legend-indicator-size")}else{for(f=0;f<10;f++)e=this.sizes[f],this.drawShape("sphere",h+s/2,c,e,e,this.background,this.foreground,"open"),c-=e+o,f<4?y-=e+o:f==5&&(y-=(e+o)/2);n+=s+this.margin,this.drawText(sprintf("%."+u+"f",i),n,t,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(sprintf("%."+u+"f",(i+r)/2),n,y,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(this.sizeBy,n+this.margin+this.getFontPt(this.legendFont),a-this.legendSizeIndicatorWidth/2,this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.drawText(sprintf("%."+u+"f",r),n,c+(s+o),this.legendFont,this.legendColor,"center","top",-Math.PI/2),this.addArea(["rect",l-this.margin,c+(s+o)-this.margin*2,n+this.margin+this.getFontPt(this.legendFont),a+this.margin*2],[-1],"-legend-indicator-size")}}},this.setDataColorShapeSizeIndicatorDimensions=function(){this.setColorLegendIndicatorDimensions(),this.setShapeLegendIndicatorDimensions(),this.setSizeLegendIndicatorDimensions()},this.getDiameterLegend=function(){return this.x>=600?10:this.x>=400?8:this.x>=200?6:4},this.setColorLegendDimensions=function(n){var t,i,r,f,e,u,o;this.legendColorWidth=0,this.legendColorHeight=0,(this.colorBy||this.outlineBy)&&(r=this.getDiameterLegend(),n?(t=this.colorBy||this.outlineBy,i=n):this.data.x&&this.data.x.hasOwnProperty(this.colorBy)?(t=this.setMaxSmpStringAnnt(this.colorBy),i=this.legendColorsMax):this.data.z&&this.data.z.hasOwnProperty(this.colorBy)?(t=this.setMaxVarStringAnnt(this.colorBy),i=this.setMaxVarStringLabel(this.colorBy)):(t=0,i=0),f=this.measureText(t,this.legendFont),e=this.measureText(i,this.legendFont)+r+this.margin,this.legendColorWidth=Math.max(f,e)+this.margin*2,u=this.getFontPt(this.legendFont),o=Math.max(r,u),this.legendColorHeight=this.legendColorsN*(o+this.margin)+u+this.margin*3)},this.drawColorLegend=function(n,t){var u;if(this.outlineBy&&this.isMultidimensionalHeatmap||this.colorBy&&(this.data.x&&this.data.x.hasOwnProperty(this.colorBy)||this.data.z&&this.data.z.hasOwnProperty(this.colorBy))){var r=this.getDiameterLegend(),f=this.getFontPt(this.legendFont),e=f/2,i=t+this.margin+e,o=Math.max(r,f);this.disableGradientTransparency(),this.legendBackgroundColor?this.rectangle(n,t,this.legendColorWidth,this.legendColorHeight,this.legendBackgroundColor,this.legendBoxColor):this.rectangle(n,t,this.legendColorWidth,this.legendColorHeight,!1,this.legendBoxColor,"open"),this.enableGradientTransparency(),this.drawText(this.colorBy||this.outlineBy,n+this.legendColorWidth/2,i,this.legendFont,this.colorLegend,"center","middle"),i+=e+this.margin,this.drawLine("line",n,i,n+this.legendColorWidth,i,this.legendBoxColor),i+=this.margin+o/2;for(u in this.legendColors)this.outlineBy?this.drawShape("circle",n+this.margin+r/2,i,r,r,!1,this.legendColors[u],"open",!1,2):this.drawShape("circle",n+this.margin+r/2,i,r,r,this.legendColors[u],this.foreground,"closed"),this.drawText(u,n+this.margin*2+r,i,this.legendFont,this.colorLegend,"left","middle"),i+=this.margin+o;this.addArea(["rect",n,t,n+this.legendColorWidth,t+this.legendColorHeight],[-1],"-legend-color")}},this.setShapeLegendDimensions=function(n){var t,i,r,f,e,u,o;this.legendShapeWidth=0,this.legendShapeHeight=0,this.shapeBy&&(r=this.getDiameterLegend(),n?(t=this.shapeBy,i=n):this.data.x&&this.data.x.hasOwnProperty(this.shapeBy)?(t=this.setMaxSmpStringAnnt(this.shapeBy),i=this.legendShapesMax):this.data.z&&this.data.z.hasOwnProperty(this.shapeBy)?(t=this.setMaxVarStringAnnt(this.shapeBy),i=this.setMaxVarStringLabel(this.shapeBy)):(t=0,i=0),f=this.measureText(t,this.legendFont),e=this.measureText(i,this.legendFont)+r+this.margin,this.legendShapeWidth=Math.max(f,e)+this.margin*2,u=this.getFontPt(this.legendFont),o=Math.max(r,u),this.legendShapeHeight=this.legendShapesN*(o+this.margin)+u+this.margin*3)},this.drawShapeLegend=function(n,t){var u;if(this.shapeBy&&this.isMultidimensionalHeatmap||this.shapeBy&&(this.data.x&&this.data.x.hasOwnProperty(this.shapeBy)||this.data.z&&this.data.z.hasOwnProperty(this.shapeBy))){var r=this.getDiameterLegend(),f=this.getFontPt(this.legendFont),e=f/2,i=t+this.margin+e,o=Math.max(r,f);this.disableGradientTransparency(),this.legendBackgroundColor?this.rectangle(n,t,this.legendShapeWidth,this.legendShapeHeight,this.legendBackgroundColor,this.legendBoxColor):this.rectangle(n,t,this.legendShapeWidth,this.legendShapeHeight,!1,this.legendBoxColor,"open"),this.enableGradientTransparency(),this.drawText(this.shapeBy,n+this.legendShapeWidth/2,i,this.legendFont,this.colorLegend,"center","middle"),i+=e+this.margin,this.drawLine("line",n,i,n+this.legendShapeWidth,i,this.legendBoxColor),i+=this.margin+o/2;for(u in this.legendShapes)this.drawShape(this.legendShapes[u],n+this.margin+r/2,i,r,r,this.background,this.foreground,"closed"),this.drawText(u,n+this.margin*2+r,i,this.legendFont,this.colorLegend,"left","middle"),i+=this.margin+o;this.addArea(["rect",n,t,n+this.legendShapeWidth,t+this.legendShapeHeight],[-1],"-legend-shape")}},this.setSizeLegendDimensions=function(n){var t,i,r,f,e,u,o;this.legendSizeWidth=0,this.legendSizeHeight=0,this.sizeBy&&(r=this.sizes[this.legendSizesN-1],n?(t=this.sizeBy,i=n):this.data.x&&this.data.x.hasOwnProperty(this.sizeBy)?(t=this.setMaxSmpStringAnnt(this.sizeBy),i=this.legendSizesMax):this.data.z&&this.data.z.hasOwnProperty(this.sizeBy)?(t=this.setMaxVarStringAnnt(this.sizeBy),i=this.setMaxVarStringLabel(this.sizeBy)):(t=0,i=0),f=this.measureText(t,this.legendFont),e=this.measureText(i,this.legendFont)+r+this.margin,this.legendSizeWidth=Math.max(f,e)+this.margin*2,u=this.getFontPt(this.legendFont),o=Math.max(r,u),this.legendSizeHeight=this.legendSizesN*(o+this.margin)+u+this.margin*3)},this.drawSizeLegend=function(n,t){var r;if(this.sizeBy&&this.isMultidimensionalHeatmap||this.sizeBy&&(this.data.x&&this.data.x.hasOwnProperty(this.sizeBy)||this.data.z&&this.data.z.hasOwnProperty(this.sizeBy))){var u=this.sizes[this.legendSizesN-1],f=this.getFontPt(this.legendFont),e=f/2,i=t+this.margin+e,o=Math.max(u,f);this.disableGradientTransparency(),this.legendBackgroundColor?this.rectangle(n,t,this.legendSizeWidth,this.legendSizeHeight,this.legendBackgroundColor,this.legendBoxColor):this.rectangle(n,t,this.legendSizeWidth,this.legendSizeHeight,!1,this.legendBoxColor,"open"),this.enableGradientTransparency(),this.drawText(this.sizeBy,n+this.legendSizeWidth/2,i,this.legendFont,this.colorLegend,"center","middle"),i+=e+this.margin,this.drawLine("line",n,i,n+this.legendSizeWidth,i,this.legendBoxColor),i+=this.margin+o/2;for(r in this.legendSizes)this.drawShape("circle",n+this.margin+u/2,i,this.legendSizes[r],this.legendSizes[r],this.background,this.foreground,"closed"),this.drawText(r,n+this.margin*2+u,i,this.legendFont,this.colorLegend,"left","middle"),i+=this.margin+o;this.addArea(["rect",n,t,n+this.legendSizeWidth,t+this.legendSizeHeight],[-1],"-legend-size")}},this.setDataColorShapeSizeDimensions=function(){this.setColorLegendDimensions(),this.setShapeLegendDimensions(),this.setSizeLegendDimensions()},this.setDataColor=function(n){var s,u,l,c,f,h,r,o,e,i,t;if(this.colorByType=!1,n&&this.isMultidimensionalHeatmap)if(s=0,u={},this.dataColors=[],this.legendColors={},this.legendColorsN=0,this.isNumeric2DArray(n)){for(r=this.setRangeDataObject(n),t=0;t<this.varIndices.length;t++)for(f=0;f<this.smpIndices.length;f++)e=n[this.varIndices[t]][this.smpIndices[f]],i=isNaN(e)?this.missingDataColor:this.getHeatmapColor(r[0],r[1],e),this.dataColors.push(i);this.legendColorsN=-1,this.legendColorRange=r,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else{for(c=0,t=0;t<this.varIndices.length;t++)for(f=0;f<this.smpIndices.length;f++)i=n[this.varIndices[t]][this.smpIndices[f]],u.hasOwnProperty(i)||(h=this.measureText(i,this.legendFont),h>c&&(c=h,this.legendColorsMax=i),u[i]=s%this.colors.length,this.legendColors[i]=this.colors[u[i]],s++),this.dataColors.push(this.colors[u[i]]);this.legendColorsN=s,this.setColorLegendDimensions(this.legendColorsMax)}else if(this.colorBy)if(s=0,u={},this.dataColors=[],this.legendColors={},this.legendColorsN=0,this.data.x&&this.data.x.hasOwnProperty(this.colorBy))if(this.colorByType="x",l=this.isGroupedData?this.grpIndices:this.smpIndices,this.isNumeric(this.data.x[this.colorBy],!0)){for(r=this.range(this.data.x[this.colorBy],!0),t=0;t<l.length;t++)if(o=l[t],this.isGroupedData&&(this.graphType=="Dotplot"||this.graphType=="Boxplot"&&this.showBoxplotOriginalData))for(f=0;f<this.data.w.grps[o].length;f++)e=this.data.x[this.colorBy][this.data.w.grps[o][f]],i=isNaN(e)?this.missingDataColor:this.getHeatmapColor(r[0],r[1],e),this.dataColors.push(i);else e=this.isGroupedData?this.mean(this.getSmpAnnotations(this.colorBy,this.data.w.grps[t],!1,!0)):this.data.x[this.colorBy][o],i=isNaN(e)?this.missingDataColor:this.getHeatmapColor(r[0],r[1],e),this.dataColors.push(i);this.legendColorsN=-1,this.legendColorRange=r,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else{for(c=0,t=0;t<l.length;t++)if(o=l[t],this.isGroupedData&&(this.graphType=="Dotplot"||this.graphType=="Boxplot"&&this.showBoxplotOriginalData))for(f=0;f<this.data.w.grps[o].length;f++)i=this.data.x[this.colorBy][this.data.w.grps[o][f]],u.hasOwnProperty(i)||(h=this.measureText(i,this.legendFont),h>c&&(c=h,this.legendColorsMax=i),u[i]=s%this.colors.length,this.legendColors[i]=this.colors[u[i]],s++),this.dataColors.push(this.colors[u[i]]);else i=this.isGroupedData?this.getSmpAnnotations(this.colorBy,this.data.w.grps[t],!0):this.data.x[this.colorBy][o],u.hasOwnProperty(i)||(h=this.measureText(i,this.legendFont),h>c&&(c=h,this.legendColorsMax=i),u[i]=s%this.colors.length,this.legendColors[i]=this.colors[u[i]],s++),this.dataColors.push(this.colors[u[i]]);this.legendColorsN=s,this.setColorLegendDimensions()}else if(this.data.z&&this.data.z.hasOwnProperty(this.colorBy))if(this.colorByType="z",this.isNumeric(this.data.z[this.colorBy],!1,!0)){for(r=this.range(this.data.z[this.colorBy],!1,!0),t=0;t<this.varIndices.length;t++)o=this.varIndices[t],e=this.data.z[this.colorBy][o],isNaN(e)?this.dataColors.push(this.missingDataColor):this.dataColors.push(this.getHeatmapColor(r[0],r[1],e));this.legendColorRange=r,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else{for(t=0;t<this.varIndices.length;t++)o=this.varIndices[t],i=this.data.z[this.colorBy][o],u.hasOwnProperty(i)||(u[i]=s%this.colors.length,this.legendColors[i]=this.colors[u[i]],s++),this.dataColors.push(this.colors[u[i]]);this.legendColorsN=s,this.setColorLegendDimensions()}else if(this.getSampleIndices(this.colorBy)>-1){if(s=this.getSampleIndices(this.colorBy),r=this.getAxisRangeBySample(s),!this.scatterType||this.scatterType!="function")for(t=0;t<this.varIndices.length;t++)o=this.varIndices[t],e=this.getDataAtPos(o,s),isNaN(e)?this.dataColors.push(this.missingDataColor):this.dataColors.push(this.getHeatmapColor(r[0],r[1],e));this.legendColorRange=r,this.legendColorDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],this.heatmapColors.length)),this.setColorLegendIndicatorDimensions()}else if(this.colorBy=="variable"){for(t=0;t<this.varIndices.length;t++)i=t%this.colors.length,this.dataColors.push(this.colors[i]);this.setVariableLegendDimension()}else for(t=0;t<this.varIndices.length;t++)this.dataColors.push(this.colors[0])},this.setDataShape=function(n){var v,l,u,c,r,e,f,h,t,i;if(this.shapeByType=!1,n&&this.isMultidimensionalHeatmap){var s=0,o={},a="square";if(this.dataShapes=[],this.legendShapes={},this.legendShapesN=0,this.isNumeric2DArray(n)){for(r=this.setRangeDataObject(n),i=0;i<this.varIndices.length;i++)for(u=0;u<this.smpIndices.length;u++)f=n[this.varIndices[i]][this.smpIndices[u]],isNaN(f)?this.dataShapes.push(a):(h=this.percentile(r[0],r[1],f),t=parseInt(h/10),t>0&&t--,this.dataShapes.push("pie"+t));this.legendShapeRange=r,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setShapeLegendIndicatorDimensions()}else{for(l=0,i=0;i<this.varIndices.length;i++)for(u=0;u<this.smpIndices.length;u++)t=n[this.varIndices[i]][this.smpIndices[u]],o.hasOwnProperty(t)||(c=this.measureText(t,this.legendFont),c>l&&(l=c,this.legendShapesMax=t),o[t]=s%this.shapes.length,this.legendShapes[t]=this.shapes[o[t]],s++),this.dataShapes.push(this.shapes[o[t]]);this.legendShapesN=s,this.setShapeLegendDimensions(this.legendShapesMax)}}else if(this.shapeBy){var s=0,o={},a="square";if(this.dataShapes=[],this.legendShapes={},this.legendShapesN=0,this.data.x&&this.data.x.hasOwnProperty(this.shapeBy))if(this.shapeByType="x",v=this.isGroupedData?this.grpIndices:this.smpIndices,this.isNumeric(this.data.x[this.shapeBy],!0)){for(r=this.range(this.data.x[this.shapeBy],!0),i=0;i<v.length;i++)if(e=v[i],this.isGroupedData)for(u=0;u<this.data.w.grps[e].length;u++)f=this.data.x[this.shapeBy][this.data.w.grps[e][u]],isNaN(f)?this.dataShapes.push(a):(h=this.percentile(r[0],r[1],f),t=parseInt(h/10),t>0&&t--,this.dataShapes.push("pie"+t));else f=this.data.x[this.shapeBy][e],isNaN(f)?this.dataShapes.push(a):(h=this.percentile(r[0],r[1],f),t=parseInt(h/10),t>0&&t--,this.dataShapes.push("pie"+t));this.legendShapeRange=r,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setShapeLegendIndicatorDimensions()}else{for(l=0,i=0;i<v.length;i++)if(e=v[i],this.isGroupedData)for(u=0;u<this.data.w.grps[e].length;u++)t=this.data.x[this.shapeBy][this.data.w.grps[e][u]],o.hasOwnProperty(t)||(c=this.measureText(t,this.legendFont),c>l&&(l=c,this.legendShapesMax=t),o[t]=s%this.shapes.length,this.legendShapes[t]=this.shapes[o[t]],s++),this.dataShapes.push(this.shapes[o[t]]);else t=this.data.x[this.shapeBy][e],o.hasOwnProperty(t)||(c=this.measureText(t,this.legendFont),c>l&&(l=c,this.legendShapesMax=t),o[t]=s%this.shapes.length,this.legendShapes[t]=this.shapes[o[t]],s++),this.dataShapes.push(this.shapes[o[t]]);this.legendShapesN=s,this.setShapeLegendDimensions()}else if(this.data.z&&this.data.z.hasOwnProperty(this.shapeBy))if(this.shapeByType="z",this.isNumeric(this.data.z[this.shapeBy],!1,!0)){for(r=this.range(this.data.z[this.shapeBy],!1,!0),i=0;i<this.varIndices.length;i++)e=this.varIndices[i],f=this.data.z[this.shapeBy][e],isNaN(f)?this.dataShapes.push(a):(h=this.percentile(r[0],r[1],f),t=parseInt(h/10),t>0&&t--,this.dataShapes.push("pie"+t));this.legendShapeRange=r,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setShapeLegendIndicatorDimensions()}else{for(i=0;i<this.varIndices.length;i++)e=this.varIndices[i],t=this.data.z[this.shapeBy][e],o.hasOwnProperty(t)||(o[t]=s%this.shapes.length,this.legendShapes[t]=this.shapes[o[t]],s++),this.dataShapes.push(this.shapes[o[t]]);this.legendShapesN=s,this.setShapeLegendDimensions()}else if(this.getSampleIndices(this.shapeBy)>-1){for(s=this.getSampleIndices(this.shapeBy),r=this.getAxisRangeBySample(s),i=0;i<this.varIndices.length;i++)e=this.varIndices[i],f=this.getDataAtPos(e,s),isNaN(f)?this.dataShapes.push(a):(h=this.percentile(r[0],r[1],f),t=parseInt(h/10),t>0&&t--,this.dataShapes.push("pie"+t));this.legendShapeRange=r,this.legendShapeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setShapeLegendIndicatorDimensions()}else if(this.shapeBy=="variable"){for(i=0;i<this.varIndices.length;i++)t=i%this.shapes.length,this.dataShapes.push(this.shapes[t]);this.setVariableLegendDimension()}else for(i=0;i<this.varIndices.length;i++)this.dataShapes.push(this.shapes[0])}},this.setDataSize=function(n){var s,u,a,l,f,c,r,o,e,h,t,i;if(this.sizeByType=!1,n&&this.isMultidimensionalHeatmap)if(s=0,u={},this.dataSizes=[],this.legendSizes={},this.legendSizesN=0,this.isNumeric2DArray(n)){for(r=this.setRangeDataObject(n),i=0;i<this.varIndices.length;i++)for(f=0;f<this.smpIndices.length;f++)e=n[this.varIndices[i]][this.smpIndices[f]],isNaN(e)?this.dataSizes.push(0):(h=this.percentile(r[0],r[1],e),t=parseInt(h/10),t>0&&t--,this.dataSizes.push(this.sizes[t]));this.legendSizeRange=r,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setSizeLegendIndicatorDimensions()}else{for(l=0,i=0;i<this.varIndices.length;i++)for(f=0;f<this.smpIndices.length;f++)t=n[this.varIndices[i]][this.smpIndices[f]],u.hasOwnProperty(t)||(c=this.measureText(t,this.legendFont),c>l&&(l=c,this.legendSizesMax=t),u[t]=s%this.sizes.length+3,this.legendSizes[t]=this.sizes[u[t]],s++),this.dataSizes.push(this.sizes[u[t]]);this.legendSizesN=s,this.setSizeLegendDimensions(this.legendSizesMax)}else if(this.sizeBy)if(s=0,u={},this.dataSizes=[],this.legendSizes={},this.legendSizesN=0,this.data.x&&this.data.x.hasOwnProperty(this.sizeBy))if(this.sizeByType="x",a=this.isGroupedData?this.grpIndices:this.smpIndices,this.isNumeric(this.data.x[this.sizeBy],!0)){for(r=this.range(this.data.x[this.sizeBy],!0),i=0;i<a.length;i++)if(o=a[i],this.isGroupedData)for(f=0;f<this.data.w.grps[o].length;f++)e=this.data.x[this.sizeBy][this.data.w.grps[o][f]],isNaN(e)?this.dataSizes.push(0):(h=this.percentile(r[0],r[1],e),t=parseInt(h/10),t>0&&t--,this.dataSizes.push(this.sizes[t]));else e=this.data.x[this.sizeBy][o],isNaN(e)?this.dataSizes.push(0):(h=this.percentile(r[0],r[1],e),t=parseInt(h/10),t>0&&t--,this.dataSizes.push(this.sizes[t]));this.legendSizeRange=r,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setSizeLegendIndicatorDimensions()}else{for(l=0,i=0;i<a.length;i++)if(o=a[i],this.isGroupedData)for(f=0;f<this.data.w.grps[o].length;f++)t=this.data.x[this.sizeBy][this.data.w.grps[o][f]],u.hasOwnProperty(t)||(c=this.measureText(t,this.legendFont),c>l&&(l=c,this.legendSizesMax=t),u[t]=s%this.sizes.length+3,this.legendSizes[t]=this.sizes[u[t]],s++),this.dataSizes.push(this.sizes[u[t]]);else t=this.isGroupedData?this.getSmpAnnotations(this.sizeBy,this.data.w.grps[i],!0):this.data.x[this.sizeBy][o],u.hasOwnProperty(t)||(c=this.measureText(t,this.legendFont),c>l&&(l=c,this.legendSizesMax=t),u[t]=s%this.sizes.length+3,this.legendSizes[t]=this.sizes[u[t]],s++),this.dataSizes.push(this.sizes[u[t]]);this.legendSizesN=s,this.setSizeLegendDimensions()}else if(this.data.z&&this.data.z.hasOwnProperty(this.sizeBy))if(this.sizeByType="z",this.isNumeric(this.data.z[this.sizeBy],!1,!0)){for(r=this.range(this.data.z[this.sizeBy],!1,!0),i=0;i<this.varIndices.length;i++)o=this.varIndices[i],e=this.data.z[this.sizeBy][o],isNaN(e)?this.dataSizes.push(0):(h=this.percentile(r[0],r[1],e),t=parseInt(h/10),t>0&&t--,this.dataSizes.push(this.sizes[t]));this.legendSizeRange=r,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setSizeLegendIndicatorDimensions()}else{for(i=0;i<this.varIndices.length;i++)o=this.varIndices[i],t=this.data.z[this.sizeBy][o],u.hasOwnProperty(t)||(u[t]=s%this.sizes.length,this.legendSizes[t]=this.sizes[u[t]],s++),this.dataSizes.push(this.sizes[u[t]]);this.legendSizesN=s,this.setSizeLegendDimensions()}else if(this.getSampleIndices(this.sizeBy)>-1){for(s=this.getSampleIndices(this.sizeBy),r=this.getAxisRangeBySample(s),i=0;i<this.varIndices.length;i++)o=this.varIndices[i],e=this.getDataAtPos(o,s),isNaN(e)?this.dataSizes.push(0):(h=this.percentile(r[0],r[1],e),t=parseInt(h/10),t>0&&t--,this.dataSizes.push(this.sizes[t]));this.legendSizeRange=r,this.legendSizeDecs=this.getAxisDecimals(this.getAxisIncrements(r[0],r[1],10)),this.setSizeLegendIndicatorDimensions()}else if(this.sizeBy=="variable"){for(i=0;i<this.varIndices.length;i++)t=i%this.sizes.length,this.dataSizes.push(this.sizes[t]);this.setVariableLegendDimension()}else for(i=0;i<this.varIndices.length;i++)this.dataSizes.push(this.scatterPointSize)},this.setDataColorShapeSize=function(){this.resetLegends(),this.setLegendFont(),this.isMultidimensionalHeatmap?(this.outlineByData&&this.data.y[this.outlineByData]&&this.setDataColor(this.data.y[this.outlineByData]),this.shapeByData&&this.data.y[this.shapeByData]&&this.setDataShape(this.data.y[this.shapeByData]),this.sizeByData&&this.data.y[this.sizeByData]&&this.setDataSize(this.data.y[this.sizeByData])):(this.setDataColor(),this.setDataShape(),this.setDataSize()),this.allVsAll||this.graphType!="Scatter2D"&&this.graphType!="ScatterBubble2d"||this.setSampleLegendDimension()},this.resetLegends=function(){for(var t=["Color","Shape","Size"],i,n=0;n<t.length;n++)this["legend"+t[n]+"IndicatorWidth"]=0,this["legend"+t[n]+"IndicatorHeight"]=0,this["data"+t[n]+"s"]=[],this["legend"+t[n]+"s"]={},this["legend"+t[n]+"s"]=0;for(i=this.allVsAll?["Color","Shape","Size","Variable"]:["Color","Shape","Size","Variable","Sample"],n=0;n<i.length;n++)this["legend"+i[n]+"Width"]=0,this["legend"+i[n]+"Height"]=0},this.setLegendDimensions=function(){var o,s,h,u,n,t,i;if(this.legendLayout=[],o=this.margin,s=this.margin,this.showIndicators)for(h=["Color","Shape","Size"],n=0;n<h.length;n++)t=this["legend"+h[n]+"IndicatorWidth"],i=this["legend"+h[n]+"IndicatorHeight"],t&&(this.indicatorsPosition=="bottom"?s+=this.margin+i:o+=this.margin+i);var f=0,e=0,r=0;if(this.showLegend)for(u=this.allVsAll?["Color","Shape","Size","Variable"]:["Color","Shape","Size","Variable","Sample"],n=0;n<u.length;n++)t=this["legend"+u[n]+"Width"],i=this["legend"+u[n]+"Height"],t>0&&(this.legendPosition=="right"?e+this.margin+i>this.height?(o+=this.margin+t,f=t,e=i,r++,this.legendLayout[r]=[u[n]]):(t>f&&(o+=t-f,f=t),e+=i,this.legendLayout[r]||(this.legendLayout[r]=[]),this.legendLayout[r].push(u[n])):f+this.margin+t>this.width?(s+=this.margin+i,f=t,e=i,r++,this.legendLayout[n]=[u[n]]):(i>e&&(s+=i-e,e=i),f+=t,this.legendLayout[r]||(this.legendLayout[r]=[]),this.legendLayout[r].push(u[n])));this.legendWidth=o+this.margin,this.legendHeight=s+this.margin},this.getXYLegendCoords=function(n,t,i){var l,a,h,c,e=0,o=0,s=-1,r=-1,u,f;if(this.legendLayout){for(u=0;u<this.legendLayout.length;u++){for(l=0,a=0,f=0;f<this.legendLayout[u].length;f++)this.legendLayout[u][f]==n&&(r=f),l+=this["legend"+this.legendLayout[u][f]+"Width"]+this.margin,a+=this["legend"+this.legendLayout[u][f]+"Height"]+this.margin,e=Math.max(e,l),o=Math.max(o,a);if(r>-1){s=u;break}}this.legendPosition=="right"?(i=r==0&&this.allVsAll?this.marginTop+this.layoutTop:r==0?this.marginTop+this.offsetY+this.top:i,h=t,c=r==0&&this.allVsAll?(this.height-o)/2:r==0?this.marginTop+this.offsetY+this.top+(this.y-o)/2:i,t=r==this.legendLayout[s].length-1?t+e:t,i=c+this["legend"+this.legendLayout[s][r]+"Height"]+this.margin):(t=r==0&&this.allVsAll?this.marginLeft+this.layoutLeft:r==0?this.marginLeft+this.offsetX+this.left:t,h=r==0&&this.allVsAll?(this.width-e)/2:r==0?this.marginLeft+this.offsetX+this.left+(this.x-e)/2+this.margin:t+this.margin,c=i,t=h+this["legend"+this.legendLayout[s][r]+"Width"]+this.margin,i=r==this.legendLayout[s].length-1?i+o:i)}return[h,c,t,i]},this.drawScatterLegend=function(n,t){var r=this.allVsAll?this.width-(this.marginRight+this.layoutRight):this.marginLeft+this.offsetX+this.left+this.x,u=this.allVsAll?this.height-(this.marginBottom+this.layoutBottom):this.marginTop+this.offsetY+this.top+this.y,f,s,l,a,e,o,i,h,c;if(n&&(r+=n),t&&(u+=t),this.showIndicators)for(this.allVsAll||this.graphType!="Scatter2D"&&this.graphType!="ScatterBubble2D"?(r+=this.margin*1,u+=this.margin*1):(r+=this.margin*2,u+=this.get2DXAxisHeight()+this.margin,this.graphType=="ScatterBubble2D"&&this.zAxisShow&&(r+=this.getFontPt(this.axisTitleFont)+this.margin*2)),e=["Color","Shape","Size"],i=0;i<e.length;i++)if(f=this["legend"+e[i]+"IndicatorWidth"],s=this["legend"+e[i]+"IndicatorHeight"],f){var h="draw"+e[i]+"Indicator",v=this["legend"+e[i]+"Range"],y=this["legend"+e[i]+"Decs"];this.indicatorsPosition=="bottom"?(l=this.allVsAll?(this.width-f)/2:this.marginLeft+this.offsetX+this.left+(this.x-f)/2,a=u,this[h](l,a,v[0],v[1],y),u+=s+this.margin):(l=r,a=this.allVsAll?(this.height-s)/2:this.marginTop+this.offsetY+this.top+(this.y-(this.y-f)/2),this[h](l,a,v[0],v[1],y),r+=s+this.margin)}if(this.showLegend)for(o=this.allVsAll?["Color","Shape","Size","Variable"]:["Color","Shape","Size","Variable","Sample"],i=0;i<o.length;i++)f=this["legend"+o[i]+"Width"],s=this["legend"+o[i]+"Height"],f>0&&(h="draw"+o[i]+"Legend",c=this.getXYLegendCoords(o[i],r,u),this[h](c[0],c[1]),this.legendPosition=="right"?u=c[3]+this.margin:r=c[2]+this.margin)}},CanvasXpress.prototype.initApi=function(){this.getValidGraphTypes=function(){return this.validGraphTypes},this.setHeatmapScheme=function(){this.initializeAttributes()},this.hasIndicator=function(){return this.graphType.match(/Scatter/)||this.graphType=="Bar"?!0:!1},this.hasLegend=function(){return this.graphType!="Network"&&this.graphType!="Genome"&&this.graphType!="Correlation"&&this.graphType!="Heatmap"?!0:!1},this.hasLegendProperties=function(){return this.graphType!="Network"&&this.graphType!="Genome"&&this.graphType!="Correlation"&&this.graphType!="Heatmap"&&this.graphType!="Pie"?!0:!1},this.hasData=function(){return this.graphType!="Network"&&this.graphType!="Genome"&&this.graphType!="Venn"?!0:!1},this.hasDataSamples=function(){return this.graphType=="Network"||this.graphType=="Genome"||this.graphType=="Venn"||this.graphType=="Pie"||this.graphType.match(/Scatter/)?!1:this.graphType=="Correlation"&&this.correlationAxis!="samples"?!1:!0},this.hasDataGroups=function(){return this.graphType=="Network"||this.graphType=="Genome"||this.graphType=="Venn"||this.graphType=="Pie"||this.graphType.match(/Scatter/)?!1:this.graphType=="Correlation"&&this.correlationAxis!="samples"?!1:this.data.x?!0:!1},this.hasDataVariables=function(){return this.graphType!="Network"&&this.graphType!="Genome"&&this.graphType!="Venn"?this.graphType=="Correlation"&&this.correlationAxis!="variables"?!1:!0:!1},this.hasDataProperties=function(){return this.graphType!="Network"&&this.graphType!="Genome"&&this.graphType!="Heatmap"&&this.graphType!="Venn"&&this.graphType!="Pie"&&this.graphType!="Correlation"?!0:!1},this.hasOrientation=function(){return this.graphType=="Network"||this.graphType=="Genome"||this.graphType=="Venn"||this.graphType=="Pie"||this.graphType=="Correlation"||this.graphType=="Circular"||this.graphType.match(/Scatter/)?!1:!0},this.hasOverlays=function(){return this.graphType=="Network"||this.graphType=="Genome"||this.graphType=="Venn"||this.graphType=="Pie"||this.graphType=="Correlation"||this.graphType.match(/Scatter/)?!1:!0},this.hasDendrograms=function(){return this.graphType!="Heatmap"&&(this.data.t.smps||this.data.t.vars)?!0:!1},this.hasDecorations=function(){return this.data.d&&(this.data.d.nlfit||this.data.d.line||this.data.d.reg||this.data.d.nor||this.data.d.area)?!0:!1},this.isSegregable=function(){return this.graphType=="Network"||this.graphType=="Genome"||this.graphType=="Venn"||this.graphType=="Pie"||this.graphType=="Correlation"||this.graphType.match(/Scatter/)?!1:!0},this.getLineTypes=function(){for(var r=["line"],u=["","dashed","dotted","bezierY","bezierX","curved"],t=["arrow","arrowHead","arrowTail","arrowHeadSquareTail","arrowTailSquareHead","square","squareHead","squareTail","squareHeadArrowTail","squareTailArrowHead"],i,n=0;n<t.length;n++)r.push(t[n]+"Line");for(n=1;n<u.length;n++)for(i=0;i<t.length;i++)r.push(u[n]+this.capitalize(t[i])+"Line");return r},this.isValidShape=function(n){for(var t=0;t<this.shapes.length;t++)if(this.shapes[t]==n)return!0;return!1},this.isCompatibleGraphType=function(n,t){return n.match(/^Bar$|^Line$|Boxplot|Dotplot/)?t.match(/^Bar$|^Line$|Boxplot|Dotplot/)?!0:!1:!1},this.modifyHighlights=function(n,t,i){var r=i?"highlightVar":"highlightSmp";this.modifyObjectArray(n,t,r)},this.getHighlights=function(n){var t=n?this.highlightVar:this.highlightSmp;return this.getObjectArray(t)},this.modifySmpOverlays=function(n,t){this.modifyObjectArray(n,t,"smpOverlays")},this.modifyVarOverlays=function(n,t){this.modifyObjectArray(n,t,"varOverlays")},this.getSmpOverlays=function(){return this.getObjectArray(this.smpOverlays)},this.getVarOverlays=function(){return this.getObjectArray(this.varOverlays)},this.getXData=function(){var n=[],t;if(!this.isGroupedData&&this.data.x)for(t in this.data.x)n.push(t);return n},this.getZData=function(){var n=[],t;if(this.data.z)for(t in this.data.z)n.push(t);return n},this.getXZData=function(){return this.graphType.match(/Scatter/)?this.getZData():this.getXData()},this.getSamplesAsArray=function(){for(var t=this.getSamples(),i=[],n=0;n<t.length;n++)i.push(t[n].name);return i},this.getVariablesAsArray=function(){for(var t=this.getVariables(),i=[],n=0;n<t.length;n++)i.push(t[n].name);return i},this.getNodeData=function(n){return this.getNetworkData("nodes",n)},this.getEdgeData=function(n){return this.getNetworkData("edges",n)},this.getSampleData=function(n){if(!this.samplesData&&(this.samplesData={smps:{o:this.getObjectArray(this.data.y.smps),t:"string"}},this.data.x))for(att in this.data.x)this.samplesData[att]={o:this.getObjectArray(this.getUniqueKeys(this.data.x[att])),t:this.isNumeric(this.data.x[att])?"numeric":"string"};return n?this.samplesData:this.getKeys(this.samplesData)},this.getVariableData=function(n){if(!this.variablesData&&(this.variablesData={vars:{o:this.getObjectArray(this.data.y.vars),t:"string"}},this.data.z))for(att in this.data.z)this.variablesData[att]={o:this.getObjectArray(this.getUniqueKeys(this.data.z[att])),t:this.isNumeric(this.data.z[att])?"numeric":"string"};return n?this.variablesData:this.getKeys(this.variableData)},this.getNetworkData=function(n,t){var f,u,r,i;if(this.graphType=="Network"&&!this[n+"Data"])for(this[n+"Data"]={},f=this.skipConfigurableProperties?this.getObjectArray(this[n.replace("s","")+"ConfigurableProperties"]):{},u=0;u<this.data[n].length;u++){r=this.data[n][u];for(i in r)f[i]||(typeof r[i]!="object"?this[n+"Data"].hasOwnProperty(i)?(this[n+"Data"][i].o.hasOwnProperty(r[i])?this[n+"Data"][i].o[r[i]]++:this[n+"Data"][i].o[r[i]]=1,isNaN(r[i])&&(this[n+"Data"][i].t="string")):(this[n+"Data"][i]={o:{},t:isNaN(r[i])?"string":"numeric"},this[n+"Data"][i].o[r[i]]=1):r[i].constructor==(new Date).constructor);this[n+"Properties"].length>0&&this.getAdditionalData(r,this[n+"Data"],this[n+"Properties"])}return this.graphType=="Network"?t?this[n+"Data"]:this.getKeys(this[n+"Data"]):!1},this.getFeatureData=function(n){var e,r,o,u,f,i,t;if(!this.featuresData)for(this.featuresData={},e=this.skipConfigurableProperties?this.getObjectArray(this.featureConfigurableProperties):{},r=0;r<this.data.tracks.length;r++){for(o=this.data.tracks[r],u=o.data,f=0;f<u.length;f++){i=u[f];for(t in i)e[t]||(typeof i[t]!="object"?this.featuresData.hasOwnProperty(t)?(this.featuresData[t].o.hasOwnProperty(i[t])?this.featuresData[t].o[i[t]]++:this.featuresData[t].o[i[t]]=1,isNaN(i[t])&&(this.featuresData[t].t="string")):(this.featuresData[t]={o:{},t:isNaN(i[t])?"string":"numeric"},this.featuresData[t].o[i[t]]=1):i[t].constructor==(new Date).constructor)}this.featuresProperties.length>0&&this.getAdditionalData(u,this.featuresData,this.featuresProperties)}return n?this.featuresData:this.getKeys(this.featuresData)},this.getAdditionalData=function(n,t,i){for(var u,o,e,s,r,f=0;f<i.length;f++)if(u=n,o=!1,i[f].length>0){for(e=0;e<i[f].length;e++)if(s=i[f][e],u[s])u=u[s];else{o=!0;break}if(!o)for(r in u)typeof u[r]!="object"?t.hasOwnProperty(r)?(t[r].o.hasOwnProperty(u[r])?t[r].o[u[r]]++:t[r].o[u[r]]=1,isNaN(u[r])&&(t[r].t="string")):(t[r]={o:{},t:isNaN(u[r])?"string":"numeric",r:f},t[r].o[u[r]]=1):u[r].constructor==(new Date).constructor}},this.getOperators=function(){return["","like","not like",">",">=","<","<=","==","null","not null"]},this.resetFilters=function(n,t){for(var r=[],r=n?[n]:["filterSmpBy","filterVarBy","filterNodeBy","filterEdgeBy","filterFeatureBy"],i=0;i<r.length;i++)c=r[i],c=="filterSmpBy"?this.resetSmpFilters(t):c=="filterVarBy"?this.resetVarFilters(t):c=="filterNodeBy"?this.resetNodeFilters(t):c=="filterEdgeBy"?this.resetEdgeFilters(t):c=="filterFeatureBy"&&this.resetFeatureFilters(t)},this.zoonIn=function(n){this.handleWheelEvent(n,1)},this.zoonOut=function(n){this.handleWheelEvent(n,-1)},this.clusterSamples=function(){this.clusterAxis="samples",this.showSmpDendrogram=!0,this.data.t||(this.data.t={}),this.data.t.smps=this.cluster(),this.draw()},this.clusterVariables=function(){this.clusterAxis="variables",this.showVarDendrogram=!0,this.data.t||(this.data.t={}),this.data.t.vars=this.cluster(),this.draw()},this.kmeansSamples=function(){this.clusterAxis="samples",this.showOverlays=!0,this.data.x||(this.data.x={}),this.data.x["k-Means"]=this.kmeans(),this.isInArray("k-Means",this.smpOverlays)||this.smpOverlays.push("k-Means"),this.draw()},this.kmeansVariables=function(){this.clusterAxis="variables",this.showOverlays=!0,this.data.z||(this.data.z={}),this.data.z["k-Means"]=this.kmeans(),this.isInArray("k-Means",this.varOverlays)||this.varOverlays.push("k-Means"),this.draw()},this.setFunctions=function(){this.functions.push("clusterSamples"),this.functions.push("clusterVariables"),this.functions.push("transpose"),this.functions.push("transform"),this.functions.push("sortSamplesByCategory"),this.functions.push("sortSamplesByVariable"),this.functions.push("sortVariablesByCategory"),this.functions.push("sortVariablesBySample"),this.functions.push("hideUnhideSmps"),this.functions.push("hideUnhideVars"),this.functions.push("desegregateSamples"),this.functions.push("segregateSamples"),this.functions.push("groupSamples"),this.functions.push("ungroupSamples"),this.functions.push("desegregateVariables"),this.functions.push("segregateVariables"),this.functions.push("kmeansSamples"),this.functions.push("kmeansVariables"),this.functions.push("showCodeDiv"),this.functions.push("hideCodeDiv"),this.functions.push("showInfoDiv"),this.functions.push("hideInfoDiv"),this.functions.push("updateCodeDiv"),this.functions.push("createHistogram"),this.functions.push("removeHistogram"),this.functions.push("addRegressionLine"),this.functions.push("addNormalDistributionLine"),this.functions.push("recalculateLayout"),this.functions.push("setSkin"),this.functions.push("createRandomData"),this.functions.push("draw"),this.functions.push("reset"),this.functions.push("print"),this.functions.push("saveRemoteParameters")},this.initializeApi=function(){this.setFunctions()},this.initializeApi()},CanvasXpress.prototype.initUtils=function(){this.initDimensions(),this.initGeneralUtils(),this.initPlotUtils(),this.initConfigUtils(),this.initLegendUtils(),this.init3dUtils(),this.initApi()},CanvasXpress.prototype.initLayout=function(){this.isValidLayout=function(){var i=this.layout.split(/X/i),r,t,u,n;if(this.autoAdjust&&!this.plotByVariable)if(i.length==2?(this.layoutRows=i[0],this.layoutCols=i[1]):(this.layoutRows=1,this.layoutCols=1,this.layoutValid=!1),!this.graphType.match(/Scatter/)&&this.layoutComb&&this.data.l&&(this.data.l.vars||this.data.l.smps)&&this.data.l.weight&&this.data.l.type){if(this.data.l.comp=[],this.data.l.vars&&this.data.l.smps){for(r=0,n=0;n<this.data.l.smps.length;n++)for(t=0;t<this.data.l.vars.length;t++)this.data.l.comp[r]=[this.getVariableIndices(this.data.l.vars[t]),this.getSampleIndices(this.data.l.smps[n])],r++;this.layoutRows=this.data.l.smps.length,this.layoutCols=this.data.l.vars.length}else{if(this.data.l.vars)for(n=0;n<this.data.l.vars.length;n++)this.data.l.comp[n]=this.getVariableIndices(this.data.l.vars[n]);else for(n=0;n<this.data.l.smps.length;n++)this.data.l.comp[n]=this.getSampleIndices(this.data.l.smps[n]);this.graphType!="Pie"&&(this.graphOrientation=="vertical"?this.layoutRows=this.data.l.comp.length:this.layoutCols=this.data.l.comp.length)}this.layoutValid=!0,this.layoutAdjust=!0}else if(this.layoutComb&&this.data.l&&this.data.l.smps&&this.data.l.weight&&this.data.l.type){for(this.data.l.comp=[],u=this.getVariableIndices(this.data.y.vars),n=0;n<this.data.l.type.length;n++)this.data.l.comp[n]=u;this.layoutValid=!0}else this.layoutValid=this.data.l&&this.data.l.comp?this.data.l.comp.length<=this.layoutRows*this.layoutCols?!0:!1:!1;else this.layoutRows=1,this.layoutCols=1,this.layoutValid=!1},this.setLayout=function(){},this.addLayoutResizer=function(n){var t=0;return this.resizerType&&this.resizerPosition==n&&(t+=this.resizerWidth+this.margin*2,this.resizerType=="samples"&&(t+=14+this.margin)),t},this.getLayoutResizerDimensions=function(){if(this.resizerType){var r,u,i,f,h=this.data.l.comp.length-1,e=this.resizerWidth,o=this.resizerWidth,n=this.marginTop+this.layoutTop,l=this.marginRight+this.layoutRight,a=this.marginBottom+this.layoutBottom,t=this.marginLeft+this.layoutLeft,v=this.getAxesVals(0),c=0,s=0;switch(this.resizerPosition){case"right":r="xAxis",u="y",i="v",f="r",n+=this.subGraphTop0,t=this.resizerType=="samples"?this.width-(this.margin*2+this.resizerWidth+14):this.width-(this.margin+this.resizerWidth),e=this.height-(n+a+this["subGraphBottom"+h]);break;case"left":r="xAxis",u="y",i="v",f="l",n+=this.subGraphTop0,t=this.resizerType=="samples"&&this.graphOrientation=="horizontal"?this.margin*2:this.margin,e=this.height-(n+a+this["subGraphBottom"+h]);break;case"top":r="xAxis",u="x",i="h",f="t",n=this.resizerType=="samples"?this.margin*2+14:this.margin,t+=this.subGraphLeft0,o=this.width-(t+l+this["subGraphRight"+h]),s+=this.resizerWidth;break;case"bottom":r="xAxis",u="x",i="h",f="b",n=this.resizerType=="samples"&&this.graphOrientation=="vertical"?this.height-(this.margin*2+this.resizerWidth+14):this.width-(this.margin+this.resizerWidth),t+=this.subGraphLeft0,o=this.width-(t+l+this["subGraphRight"+h]),s+=this.resizerWidth}return i=="v"?[r,t+c,t+c+o,n+s,n+s+e,u,i,f,v,t+14,n,o,e]:[r,t+c,t+c+o,n+s,n+s+e,u,i,f,v,t,n,o,e]}},this.drawLayoutResizer=function(){if(this.resizerType){var n=this.getLayoutResizerDimensions();this.showAxesResizer(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],"",0,0,0),this.drawAxesResizerBackgroundData(n[9],n[10],n[11],n[12]),this.drawAxesResizerMasks()}},this.getLayoutMaxLegend=function(){var n,t;if(this.data.l.vars){if(n=0,this.data.l.comp)for(t=0;t<this.data.l.comp.length;t++)n=Math.max(n,this.data.l.comp[t].length);return n}return this.varIndices.length},this.setLayoutLeft=function(){var n=0;return this.graphOrientation!="vertical"&&this.segregateSamplesBy&&this.segregateVariablesBy?(this.set1DVarSmpLabelFont(),n=this.fontSize+this.margin*4+this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.getSmpOverlaysLength()):this.graphOrientation!="vertical"&&this.segregateVariablesBy?(this.set1DVarSmpLabelFont(),n=this.margin*2+this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.getSmpOverlaysLength()):(this.segregateSamplesBy||this.segregateVariablesBy)&&this.graphOrientation=="vertical"?n=this.fontSize+this.margin*2:this.graphType=="Candlestick"&&this.graphOrientation!="vertical"?(this.setTimeAxis(),this.set1DVarSmpLabelFont(),n=this.getSampleLabelLength()+this.getSmpOverlaysLength()):this.graphType=="Pie"&&(n=this.margin*2+this.measureText("XX",this.smpLabelFont)),n+this.addLayoutResizer("left")},this.setLayoutRight=function(){var n=0,t;return this.graphType=="Pie"&&this.showLegend&&this.legendPosition=="right"?(t=this.getPieLegendDimensions(),n=t[0]):this.graphType.match(/Scatter/)&&(this.showLegend||this.showIndicators)&&(this.xAxis&&this.yAxis&&this.setDataColorShapeSize(),this.setLegendDimensions(),n=this.legendWidth),n+this.addLayoutResizer("right")},this.setLayoutTop=function(){var n=0;return((this.segregateSamplesBy||this.segregateVariablesBy)&&this.graphOrientation!="vertical"||this.segregateSamplesBy&&this.segregateVariablesBy||this.graphType=="Pie")&&(n=this.fontSize+this.margin*2),n+this.addLayoutResizer("top")},this.setLayoutBottom=function(){var n=0,t;return this.graphType=="Pie"&&this.showLegend&&this.legendPosition=="bottom"?(t=this.getPieLegendDimensions(),n=t[1]):this.segregateSamplesBy&&this.segregateVariablesBy?n=this.getLegendHeight():this.segregateVariablesBy&&this.graphOrientation=="vertical"?(this.set1DVarSmpLabelFont(),n=this.margin*2+this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.getSmpOverlaysLength()):this.graphType=="Candlestick"&&this.graphOrientation=="vertical"?(this.setTimeAxis(),this.set1DVarSmpLabelFont(),n=this.getSampleLabelLength()+this.getSmpOverlaysLength()):this.graphType.match(/Scatter/)&&(this.showLegend||this.showIndicators)&&(this.xAxis&&this.yAxis&&this.setDataColorShapeSize(),this.setLegendDimensions(),n=this.legendHeight),n+this.addLayoutResizer("bottom")},this.drawLayoutSampleOverlays=function(n){var t=this.smpIndices;this.smpIndices=n,this.set1DVarSmpLabelFont(),this.smpIndices=t,this.showSampleNames=!0,this.showOverlays=!0,this.draw1DYLayout()},this.drawLayoutVariableLegend=function(){this.showLegend=!0,this.graphType=="Pie"?this.drawPieLegend():this.draw1DLegend(),this.showLegend=!1},this.setLayoutDimensions=function(){this.offsetX=0,this.offsetY=0,this.layoutLeft=this.setLayoutLeft(),this.layoutRight=this.setLayoutRight(),this.layoutTop=this.setLayoutTop(),this.layoutBottom=this.setLayoutBottom()},this.drawLabelsLayout=function(){var t=0,i=0,a=0,y=0,h=this.width-(this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight),c=this.height-(this.marginTop+this.layoutTop+this.layoutBottom+this.marginBottom),e,u,r,n,s;if(this.resizerType&&(this.resizerPosition=="top"?(i=this.resizerType=="samples"?this.margin*2+this.resizerWidth+14:this.margin+this.resizerWidth,y=i):this.resizerPosition=="left"&&(t=this.resizerType=="samples"?this.margin*2+this.resizerWidth+14:this.margin+this.resizerWidth,a=t)),this.segregateSamplesBy&&this.segregateVariablesBy){for(i+=this.fontSize+this.margin*4,t=this.marginLeft+this.layoutLeft,e=0;e<this.data.l.vars.length;e++)n=e*this.data.l.smps.length,r=h*this["subGraphWeight"+n][0],t+=r/2,this.drawText(this.data.l.name[n][0],t,i,this.font,this.foreground,"center","middle"),t+=r/2;for(t=a+this.fontSize+this.margin*4,i=this.marginTop+this.layoutTop,n=0;n<this.data.l.smps.length;n++)u=c*this["subGraphWeight"+n][1],i+=u/2,this.drawText(this.data.l.name[n][1],t,i,this.font,this.foreground,"center","middle",-Math.PI/2),i+=u/2}else if((this.segregateSamplesBy||this.segregateVariablesBy)&&this.graphOrientation=="vertical"&&this.data.l.name)for(t+=this.fontSize+this.margin*4,i+=this.marginTop+this.layoutTop,n=0;n<this.data.l.name.length;n++)u=c*this["subGraphWeight"+n],i+=u/2,this.drawText(this.data.l.name[n],t,i,this.font,this.foreground,"center","middle",-Math.PI/2),i+=u/2;else if((this.segregateSamplesBy||this.segregateVariablesBy)&&this.graphOrientation=="horizontal"&&this.data.l.name)for(i+=this.fontSize+this.margin*4,t+=this.marginLeft+this.layoutLeft,n=0;n<this.data.l.name.length;n++)r=h*this["subGraphWeight"+n],t+=r/2,this.drawText(this.data.l.name[n],t,i,this.font,this.foreground,"center","middle"),t+=r/2;else if(this.graphType=="Pie"&&(this.showPieGrid||this.showPieSampleLabel)){var u,r,f=0,v=this.getFontPt(this.font),l=this.marginTop+this.layoutTop,o=this.marginLeft+this.layoutLeft;for(n=0;n<this.layoutRows;n++){for(u=c*this["subGraphWeight"+f][1],t=this.marginLeft+this.layoutLeft-this.margin,l+=u,this.showPieGrid&&this.drawText(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"][n],t,l+v/2-u/2,this.font,this.foreground,"right","middle"),s=0;s<this.layoutCols;s++){if(this.xAxis.length<=f)break;r=h*this["subGraphWeight"+f][0],o+=r,i=this.marginTop+this.layoutTop-this.margin,n==0&&this.showPieGrid&&this.drawText(s+1,o+v/2-r/2,i,this.font,this.foreground,"center","bottom"),this.showPieSampleLabel&&this.drawText(this.xAxis[f],o-r/1.1,l-u/5,this.legendFont,this.foreground,"center","middle"),f++}o=this.marginLeft+this.layoutLeft}}},this.setLayoutGraphAttributes=function(){for(var n=0,r,t,f,u,i=0;i<this.layoutRows;i++)for(r=0;r<this.layoutCols;r++)t="subGraphType"+n,this[t]||(this[t]=this.data.l.type&&this.data.l.type[n]?this.data.l.type[n]:this.graphType),f="subSummaryType"+n,this[f]=this[t]=="Boxplot"||this.summaryType=="iqr"?"iqr":this.summaryType=="median"?"median":this.summaryType=="sum"?"sum":this[t]=="Correlation"?"cor":this[t]=="Candlestick"?this.graphOrientation=="vertical"&&i>0||this.graphOrientation=="horizontal"&&r==0?"volume":"candle":"mean",u="subTransformType"+n,this[u]||(this[u]=this.data.l.transform&&this.data.l.transform[n]?this.data.l.transform[n]:this.subTransformType),n++},this.setLayoutWeights=function(){var r,u,t,i,n;if(this.data.l.weight)if(r=0,u=0,this.allVsAll){for(n=0;n<this.layoutRows;n++)t="subGraphWeight"+n,i=this[t]?this[t]:this.data.l.weight[n],r+=i;for(n=0;n<this.data.l.weight.length;n++)t="subGraphWeight"+n,i=this[t]?this[t]:this.data.l.weight[n],this.data.l.weight[n]=i/r,this[t]=this.data.l.weight[n]}else if(this.data.l.vars&&this.data.l.smps){for(n=0;n<this.data.l.weight.length;n++)t="subGraphWeight"+n,i=this[t]?this[t]:this.data.l.weight[n],r+=i[0],u+=i[1];for(n=0;n<this.data.l.weight.length;n++)t="subGraphWeight"+n,i=this[t]?this[t]:this.data.l.weight[n],this.data.l.weight[n][0]=i[0]/r*this.data.l.smps.length,this.data.l.weight[n][1]=i[1]/u*this.data.l.vars.length,this[t]=this.data.l.weight[n]}else if(this.graphType=="Pie")for(n=0;n<this.data.l.comp.length;n++)t="subGraphWeight"+n,this[t]=this.data.l.weight[n];else{for(n=0;n<this.data.l.weight.length;n++)t="subGraphWeight"+n,i=this[t]?this[t]:this.data.l.weight[n],r+=i;for(n=0;n<this.data.l.weight.length;n++)t="subGraphWeight"+n,i=this[t]?this[t]:this.data.l.weight[n],this.data.l.weight[n]=i/r,this[t]=this.data.l.weight[n]}else if(this.data.l.comp)for(this.data.l.weight=[],n=0;n<this.data.l.comp.length;n++)t="subGraphWeight"+n,this.data.l.weight[n]=this.data.l.comp.length,this[t]=this.data.l.weight[n];else alert("Wuz going on dude? This aint't gonna work!")},this.setMinimumLayoutAxisFonts=function(){for(var n=0,t=Number.MAX_VALUE,r,u,f,e,i=0;i<this.layoutRows;i++)for(r=0;r<this.layoutCols;r++)u=this.data.l.desc&&this.data.l.desc[n]?this.data.l.desc[n]:"NA",e=this.graphOrientation=="vertical"?this.height*this["subGraphWeight"+n]:this.width*this["subGraphWeight"+n],this.setAxisFont(u,e),f=this.getFontPt(this.axisTitleFont),f<t&&(t=f,this.minLayoutAxis=t,this.minLayoutAxisTitle=u),n++},this.getLayoutSummaryTypes=function(){for(var r=0,u={},f=[],i,n,t=0;t<this.layoutRows;t++)for(i=0;i<this.layoutCols;i++)n="subSummaryType"+r,u.hasOwnProperty(this[n])||(f.push(this[n]),u[this[n]]=!0),r++;return f},this.validateLayoutSummaryGrouping=function(){var n,t;if(this.isGroupedData)for(n=this.getLayoutSummaryTypes(),t=0;t<n.length;t++)if(!this.isValidPlotData(n[t])){this.groupSamples(this.groupingFactors,n);break}},this.resetLayout=function(){delete this.data.l,delete this.layoutParams,this.offsetX=0,this.offsetY=0,this.layoutValidN=!1,this.layoutValidR=!1,this.layoutValidC=!1,this.layoutComb=!1,this.layout="1X1"},this.drawLayoutCompartments=function(n){var u=[],a=0,p=this.varIndices,v=this.smpIndices,g=this.showSampleNames,nt=this.showOverlays,w=this.showLegend,tt=this.showIndicators,b=this.getObjectArray(p),k=this.getObjectArray(v),o=!1,s=["left","right","top","bottom","x","y","width","height","weight","offsetX","offsetY","varIndices","smpIndices","grpIndices","graphType","summaryType","transformType","varIndicesStart","smpIndicesStart","minData","maxData","xAxisMin","xAxisMax","xAxis2Min","xAxis2Max","yAxisMin","yAxisMax","zAxisMin","zAxisMax","xAxisAbsMin","xAxisAbsMax","xAxis2AbsMin","xAxis2AbsMax","yAxisAbsMin","yAxisAbsMax","zAxisAbsMin","zAxisAbsMax","xAxisUnit","xAxis2Unit","yAxisUnit","zAxisUnit","setMin","setMax","setMin2","setMax2","setMinX","setMaxX","setMinY","setMaxY","setMinZ","setMaxZ"],y=["graphType","transformType","varIndicesStart","smpIndicesStart","setMin","setMax","setMin2","setMax2","setMinX","setMaxX","setMinY","setMaxY","setMinZ","setMaxZ"],c,e,h,t,r,l,it,d,f,i;if(this.layoutComb){if(this.graphType.match(/Scatter/)||(this.layoutMaxVarLegend=this.getLayoutMaxLegend()),this.graphType.match(/Scatter/)?(this.xAxis=this.data.y.smps,this.yAxis=this.data.y.smps,this.initAxes(!0)):this.initAxes(!1,!0),this.setLayoutDimensions(),e=this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight,h=this.marginTop+this.layoutTop+this.layoutBottom+this.marginBottom,this.graphType.match(/Scatter/)&&this.draw2DLegend(),this.layoutParams&&this.layoutValidN>-1&&(c=this.layoutParams,c[this.layoutValidN]))for(r=0;r<s.length;r++)c[this.layoutValidN][s[r]]=this[s[r]];for(this.offsetX=this.layoutLeft,this.offsetY=this.layoutTop,this.layoutMaxVarLegendLabel=this.data.l.vars?this.maxVarNameStr:this.maxSmpNameStr,this.layoutParams=[],this.graphType.match(/Scatter/)||(this.data.l.vars&&this.data.l.smps?(this.layoutRows=this.data.l.smps.length,this.layoutCols=this.data.l.vars.length,this.layoutMaxSamples=this.smpIndices.length*this.layoutCols/this.layoutRows,this.legendPosition="bottom"):(a=Math.max(this.layoutRows,this.layoutCols),this.graphType!="Pie"&&(this.graphOrientation=="vertical"?(this.layoutRows=a,this.layoutCols=1,this.legendPosition="right"):(this.layoutRows=1,this.layoutCols=a,this.legendPosition="bottom")))),this.setLayoutWeights(),this.setMinimumLayoutAxisFonts(),this.setLayoutGraphAttributes(),this.validateLayoutSummaryGrouping(),t=0,r=0;r<this.layoutRows;r++){for(l=0;l<this.layoutCols;l++){if(this.layoutCurrent=t,this.graphType=="Pie"&&this.data.l.smps.length<=t)break;if(c)for(i=0;i<y.length;i++)this[y[i]]=c[t][y[i]];if(this.weight=this["subGraphWeight"+t],this.graphType=this["subGraphType"+t],this.summaryType=this["subSummaryType"+t],this.transformType=this["subTransformType"+t],this["subTransformType"+t]&&(this.isTransformedData=!0),this.data.l.log&&this.data.l.log[t]&&(this.isLogData=this.data.l.log[t]),this.graphType.match(/Scatter/))this.data.l.smps[t].xAxis&&this.data.l.smps[t].yAxis?(this.xAxis=this.data.l.smps[t].xAxis,this.yAxis=this.data.l.smps[t].yAxis,this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis)):(this.xAxis=!1,this.yAxis=!1,this.xAxisIndices=!1,this.yAxisIndices=!1),this.layoutWidth=(this.width-e)*this["subGraphWeight"+t],this.layoutHeight=(this.height-h)*this["subGraphWeight"+t],this.varIndices=this.data.l.comp[t],this.graphType.match(/Scatter/)&&this.layoutAdjust&&this.xAxis&&this.yAxis?(this.initAxes(!0),this.layoutAxis=3):this.graphType.match(/Scatter/)&&(this.layoutAxis=l==0?2:0,this.layoutAxis=r==this.layoutRows&&this.layoutAxis?3:r==this.layoutRows?1:0),this.showLegend=!1,this.showIndicators=!1;else{if(this.data.l.vars&&this.data.l.smps?(o=this.graphOrientation=="vertical"?!0:!1,this.showLegend=!1):this.graphType=="Pie"?(o=!1,this.showLegend=!1):o=this.data.l.smps?!0:!1,this.showSampleNames=o,this.showOverlays=o,this.xAxisTitle=this.data.l.desc&&this.data.l.desc[t]?this.data.l.desc[t]:!1,this.data.l.vars&&this.data.l.smps){for(this.layoutHeight=(this.height-h)*this["subGraphWeight"+t][1],this.layoutWidth=(this.width-e)*this["subGraphWeight"+t][0],u=[],i=0;i<this.data.l.comp[t][0].length;i++)b.hasOwnProperty(this.data.l.comp[t][0][i])&&u.push(this.data.l.comp[t][0][i]);for(this.varIndices=u,u=[],i=0;i<this.data.l.comp[t][1].length;i++)k.hasOwnProperty(this.data.l.comp[t][1][i])&&u.push(this.data.l.comp[t][1][i]);this.smpIndices=u}else if(this.graphType=="Pie"?(this.layoutWidth=(this.width-e)*this["subGraphWeight"+t][0],this.layoutHeight=(this.height-h)*this["subGraphWeight"+t][1]):this.graphOrientation=="vertical"?(this.layoutHeight=(this.height-h)*this["subGraphWeight"+t],this.layoutWidth=this.width-e):(this.layoutWidth=(this.width-e)*this["subGraphWeight"+t],this.layoutHeight=this.height-h),u=[],this.data.l.vars){for(i=0;i<this.data.l.comp[t].length;i++)b.hasOwnProperty(this.data.l.comp[t][i])&&u.push(this.data.l.comp[t][i]);this.varIndices=u}else{for(i=0;i<this.data.l.comp[t].length;i++)k.hasOwnProperty(this.data.l.comp[t][i])&&u.push(this.data.l.comp[t][i]);this.smpIndices=u}this.layoutAdjust&&(this.layoutAxis=3,this.initAxes(!0))}for(n.call(this),this["subGraphTop"+t]=this.top,this["subGraphBottom"+t]=this.bottom,this["subGraphRight"+t]=this.right,this["subGraphLeft"+t]=this.left,this["subGraphX"+t]=this.x,this["subGraphY"+t]=this.y,it=["rect",this.marginLeft+this.offsetX+this.left,this.marginTop+this.offsetY+this.top,this.marginLeft+this.offsetX+this.left+this.x,this.marginTop+this.offsetY+this.top+this.y],this.graphType.match(/Scatter/)?r==l&&(d=this.scaleTextToFont(this.maxSmpNameStr,this.maxTextSize,(this.width-e)*.8/this.layoutCols),this.drawText(this.data.y.smps[r],this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+this.y/2,d,this.foreground,"center","middle")):o?this.data.l.vars&&this.data.l.smps&&t>=this.data.l.vars.length*(this.data.l.smps.length-1)&&this.drawLayoutVariableLegend():this.data.l.vars&&this.data.l.smps?(this.graphOrientation!="vertical"&&t%this.data.l.vars.length==0&&this.drawLayoutSampleOverlays(v),t>=this.data.l.vars.length*(this.data.l.smps.length-1)&&this.drawLayoutVariableLegend()):this.graphType!="Pie"?(this.graphOrientation=="vertical"&&t+1==a||this.graphOrientation!="vertical"&&t==0)&&this.drawLayoutSampleOverlays(v):this.graphType=="Pie"&&t==0&&w&&this.drawLayoutVariableLegend(),f={},i=0;i<s.length;i++)f[s[i]]=this[s[i]];f.width=this.layoutWidth,f.height=this.layoutHeight,f.subGraphType=this.graphType,f.subSummaryType=this.SummaryType,f.subTransformType=this.transformType,this.layoutParams.push(f),this.graphType.match(/Scatter/)||this.data.l.vars&&this.data.l.smps?this.offsetX+=this.layoutWidth:this.graphOrientation=="vertical"?this.offsetY+=this.layoutHeight:this.offsetX+=this.layoutWidth,t++}(this.graphType.match(/Scatter|Pie/)||this.data.l.vars&&this.data.l.smps)&&(this.offsetX=this.layoutLeft,this.offsetY+=this.layoutHeight)}this.drawLabelsLayout(),this.drawLayoutResizer(),this.varIndices=p,this.smpIndices=v,this.showSampleNames=g,this.showOverlays=nt,this.showLegend=w,this.showIndicators=tt}},this.initializeLayout=function(){this.isValidLayout()},this.initializeLayout()},CanvasXpress.prototype.initViewport=function(n){this.setViewport=function(){var i=this.$("container-"+this.target),v=this.toolbarPermanent&&this.canvas.height>400?20:this.toolbarPermanent&&this.canvas.height<=400?13:0,t,o,r,u,f,y;if(!i){t=this.$(this.target),t.className="CanvasXpress",i=this.$cX("div",{id:"container-"+this.target,className:"CanvasXpressContainer"}),n&&(i.style.display="none");var s=this.$cX("div",{id:"north-container-"+this.target,className:"CanvasXpressContainer"},{width:t.width+14+"px",height:v+7+"px",clear:"left"}),p=this.$cX("div",{id:"north-handler-"+this.target,className:"CanvasXpressHandler",state:"open",open:"url('"+this.imageDir+"tbottom.png')",close:"url('"+this.imageDir+"ttop.png')",skipWidth:!0},{width:t.width+14+"px",height:"7px",display:"none",backgroundImage:"url('"+this.imageDir+"ttop.png')"}),w=this.$cX("div",{id:"north-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:t.width+14+"px",height:v+"px"}),e=this.$cX("div",{id:"middle-container-"+this.target,className:"CanvasXpressContainer"},{width:t.width+14+"px",height:t.height+"px",clear:"left"});this.isIE&&this.useFlashIE&&this.browserVersion<9&&(e.style.zIndex=-1);var h=this.$cX("div",{id:"west-container-"+this.target,className:"CanvasXpressContainer"},{width:"7px",height:t.height+"px"}),b=this.$cX("div",{id:"west-handler-"+this.target,className:"CanvasXpressHandler",state:"open",open:"url('"+this.imageDir+"tright.png')",close:"url('"+this.imageDir+"tleft.png')",skipHeight:!0},{width:"7px",height:t.height+"px",display:"none",backgroundImage:"url('"+this.imageDir+"tleft.png')"}),k=this.$cX("div",{id:"west-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:"0px",height:t.height+"px"}),c=this.$cX("div",{id:"center-wrapper-"+this.target,className:"CanvasXpressWrapper"}),l=this.$cX("div",{id:"east-container-"+this.target,className:"CanvasXpressContainer"},{width:"7px",height:t.height+"px"}),d=this.$cX("div",{id:"east-handler-"+this.target,className:"CanvasXpressHandler",state:"open",open:"url('"+this.imageDir+"tright.png')",close:"url('"+this.imageDir+"tleft.png')",skipHeight:!0},{width:"7px",height:t.height+"px",display:"none",backgroundImage:"url('"+this.imageDir+"tleft.png')"}),g=this.$cX("div",{id:"east-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:"0px",height:t.height+"px"}),a=this.$cX("div",{id:"south-container-"+this.target,className:"CanvasXpressContainer"},{width:t.width+14+"px",height:"7px",clear:"left"}),nt=this.$cX("div",{id:"south-handler-"+this.target,className:"CanvasXpressHandler",open:"url('"+this.imageDir+"tbottom.png')",close:"url('"+this.imageDir+"ttop.png')",skipWidth:!0},{width:t.width+14+"px",height:"7px",display:"none",backgroundImage:"url('"+this.imageDir+"ttop.png')"}),tt=this.$cX("div",{id:"south-wrapper-"+this.target,className:"CanvasXpressWrapper",state:"open"},{width:t.width+14+"px",height:"0px"});if(s.appendChild(p),s.appendChild(w),h.appendChild(k),h.appendChild(b),l.appendChild(d),l.appendChild(g),a.appendChild(nt),a.appendChild(tt),e.appendChild(h),e.appendChild(c),e.appendChild(l),i.appendChild(s),i.appendChild(e),i.appendChild(a),this.isVideo){if(o=this.$(this.target+"-cX-Video"),!o)for(o=this.$cX("video",{id:this.target+"-cX-Video",autoplay:!1,controls:this.videoControls,loop:this.videoLoop,preload:this.videoPreload,poster:this.videoPoster,dataSet:this.videoData,width:this.canvas.width,height:this.canvas.height,className:this.videoClassName}),r=[],u=this.backgroundVideo,u&&!u.propertyIsEnumerable("length")&&typeof u=="object"&&typeof u.length=="number"?r=u:r.push(this.backgroundVideo),f=0;f<r.length;f++)y=this.$cX("source",{src:r[f],type:r[f].match(/mp4$/)?"video/mp4":r[f].match(/webm$/)?"video/webm":"video/ogv"}),o.appendChild(y);t.parentNode.insertBefore(i,t),c.appendChild(t.parentNode.appendChild(t)),t.parentNode.insertBefore(o,t)}else t.parentNode.insertBefore(i,t),c.appendChild(t.parentNode.appendChild(t));this.addRemoveViewportListeners("addEvtListener")}},this.addRemoveViewportListeners=function(n){this.addRemoveEvtListener(n,this.$("north-handler-"+this.target),"click",this.clickViewport,!1),this.addRemoveEvtListener(n,this.$("west-handler-"+this.target),"click",this.clickViewport,!1),this.addRemoveEvtListener(n,this.$("east-handler-"+this.target),"click",this.clickViewport,!1),this.addRemoveEvtListener(n,this.$("south-handler-"+this.target),"click",this.clickViewport,!1)},this.clickViewport=function(n){return function(t,i){t||(t=window.event),i||(i=n.getTargetEvent(t));var f,e,o=i.parentNode,u=i.nextSibling||i.previousSibling,r=n.$(this.remoteParentId+"-canvasXpressRemoteWindow"),v=n.$("west-handler-"+n.target),a=n.$("north-container-"+n.target),h=n.$("south-container-"+n.target),s=n.$("middle-container-"+n.target),c=n.$("east-container-"+n.target),l=n.$("west-container-"+n.target);return o&&u&&v&&a&&h&&s&&c&&l&&(i.state=="closed"?(i.state="open",i.style.backgroundImage=i.close,r&&(f=i.lastRemoteWidth,e=i.lastRemoteHeight+7,n.resizeMove(r,0,0,i.lastRemoteWidth,i.lastRemoteHeight)),i.id.match(/north|south/)?(n.resizeMove(o,0,0,i.lastWidth,i.lastHeight+7),n.resizeMove(u,0,0,i.lastWidth,i.lastHeight)):(n.resizeMove(s,0,0,i.lastWidth+s.clientWidth,n.canvas.height),n.resizeMove(o,0,0,i.lastWidth+7,n.canvas.height),n.resizeMove(u,0,0,i.lastWidth,n.canvas.height)),setTimeout(function(){u.style.overflow="visible"},1e3)):(u.style.overflow="hidden",i.state="closed",i.lastLeft=parseInt(u.style.left),i.lastTop=parseInt(u.style.top),i.lastWidth=parseInt(u.style.width),i.lastHeight=parseInt(u.style.height),i.lastRemoteWidth=r?parseInt(r.clientWidth):0,i.lastRemoteHeight=r?parseInt(r.clientHeight):0,i.style.backgroundImage=i.open,i.id.match(/north|south/)?(f=parseInt(l.clientWidth)+n.canvas.width+parseInt(c.clientWidth),e=n.canvas.height+14,r&&n.resizeMove(r,0,0,f,e),n.resizeMove(u,0,0,f,0),n.resizeMove(o,0,0,f,7)):(e=parseInt(a.clientHeight)+n.canvas.height+parseInt(h.clientHeight),i.id.match(/west/)?(f=Math.max(parseInt(h.clientHeight),parseInt(c.clientWidth)+n.canvas.width+7),r&&n.resizeMove(r,0,0,f+48,e+54),n.resizeMove(u,0,0,0,n.canvas.height),n.resizeMove(o,0,0,7,n.canvas.height),n.resizeMove(s,0,0,parseInt(c.clientWidth)+n.canvas.width+7,n.canvas.height)):(f=Math.max(parseInt(h.clientHeight),parseInt(l.clientWidth)+n.canvas.width+7),r&&n.resizeMove(r,0,0,f+48,e+54),n.resizeMove(u,0,0,0,n.canvas.height),n.resizeMove(o,0,0,7,n.canvas.height),n.resizeMove(s,0,0,parseInt(l.clientWidth)+n.canvas.width+7,n.canvas.height)))),r&&setTimeout(function(){n.resizeExtContainer(f+48,e+54)},500)),!1}}(this),this.resizeViewportNorth=function(){var n=this.$("west-container-"+this.target),t=this.$("east-container-"+this.target),r=this.$("north-container-"+this.target),i=this.$("north-handler-"+this.target),u=this.$("north-wrapper-"+this.target),f=this.toolbarPermanent&&this.canvas.height>400?"20px":this.toolbarPermanent&&this.canvas.height<=400?"13px":0;n&&t&&r&&i&&u&&(i.style.display=="block"&&i.state=="open"?(r.style.width=parseInt(n.style.width)+this.canvas.width+parseInt(t.style.width)+"px",u.style.width=parseInt(n.style.width)+this.canvas.width+parseInt(t.style.width)+"px"):(r.style.width=parseInt(n.style.width)+this.canvas.width+parseInt(t.style.width)+"px",u.style.width=parseInt(n.style.width)+this.canvas.width+parseInt(t.style.width)+"px",r.style.height=f+7+"px",u.style.height=f+"px"),i.style.left=parseInt(n.style.width)+"px",i.style.width=this.canvas.width+"px")},this.resizeViewportWest=function(){var r=this.$(this.target+"-cX-Configurator"),n=this.$("west-container-"+this.target),t=this.$("west-handler-"+this.target),i=this.$("west-wrapper-"+this.target);n&&t&&i&&(t.style.display=="block"&&t.state=="open"?(n.style.width=this.configuratorWidth+7+22+"px",i.style.width=this.configuratorWidth+22+"px",n.style.height=this.canvas.height+"px",i.style.height=this.canvas.height+"px"):(n.style.width="7px",i.style.width="0px"),t.style.height=this.canvas.height+"px")},this.resizeViewportEast=function(){var r=this.$(this.target+"-cX-DataFilter"),n=this.$("east-container-"+this.target),t=this.$("east-handler-"+this.target),i=this.$("east-wrapper-"+this.target);n&&t&&i&&(t.style.display=="block"&&t.state=="open"?(n.style.width=this.dataFilterWidth+7+6+"px",i.style.width=this.dataFilterWidth+6+"px",n.style.height=this.canvas.height+"px",i.style.height=this.canvas.height+"px"):(n.style.width="7px",i.style.width="0px"),t.style.height=this.canvas.height+"px")},this.resizeViewportSouth=function(n){var u=this.$(this.target+"-cX-DataTable"),e=this.$("west-handler-"+this.target),f=this.$("west-container-"+this.target),o=this.$("east-container-"+this.target),t=this.$("south-container-"+this.target),i=this.$("south-handler-"+this.target),r=this.$("south-wrapper-"+this.target),s;u&&e&&f&&o&&t&&i&&r&&(s=e&&e.style.display=="none"?7:0,i.style.display=="block"&&i.state=="open"||n?(t.style.height=parseInt(u.style.height)+7+2+"px",r.style.height=parseInt(u.style.height)+2+"px",t.style.width=parseInt(u.style.width)+2+s+"px",r.style.width=t.style.width):(t.style.width=parseInt(f.style.width)+this.canvas.width+parseInt(o.style.width)+"px",r.style.width=parseInt(f.style.width)+this.canvas.width+parseInt(o.style.width)+"px",t.style.height="7px",r.style.height="0px"),i.style.left=parseInt(f.style.width)+"px",i.style.width=this.canvas.width+"px")},this.resizeViewport=function(n){var t,i,e;if(n){if(t=this.getTargetEvent(n),t.className=="CanvasXpressHandler")return;if(this.Ext)for(i=0;i<CanvasXpress.references.length;i++)CanvasXpress.references[i].resizeViewport();if(t.className&&t.className.match(/x-tab-strip-text/))return}var r=this.$("middle-container-"+this.target),u=this.$("east-container-"+this.target),f=this.$("west-container-"+this.target);r&&u&&f&&(this.resizeViewportWest(),this.resizeViewportEast(),this.resizeViewportNorth(),this.resizeViewportSouth(),e=parseInt(f.style.width)+this.canvas.width+parseInt(u.style.width)+1,r.style.width=e+2+"px",r.style.height=this.canvas.height+2+"px")},this.hideViewport=function(){var n,t,i;this.configuratorLastState&&this.configuratorLastState=="docked"&&(n=this.$("west-handler-"+this.target),n&&n.state=="open"&&this.clickViewport(!1,n)),this.dataFilterLastState&&this.dataFilterLastState=="docked"&&(t=this.$("east-handler-"+this.target),t&&t.state=="open"&&this.clickViewport(!1,t)),this.dataTableLastState&&this.dataTableLastState=="docked"&&(i=this.$("south-handler-"+this.target),i&&i.state=="open"&&this.clickViewport(!1,i))},this.resetViewportOverflow=function(n){if(n){var t=this.$(n+"-wrapper-"+this.target);t&&(t.style.overflow="visible")}},this.initializeViewport=function(){this.setViewport()},this.initializeViewport()},CanvasXpress.prototype.initMenuLinks=function(){this.addLinkDiv=function(){if(this.$(this.target+"-cX-Link")){this.resetLinkDiv();return}var n=this.$cX("div",{id:this.target+"-cX-Link",className:"CanvasXpressLink"},{zIndex:10002,display:"none"}),i=this.$cX("ul",{id:this.target+"-cX-Link-Content",className:"CanvasXpressList"}),t=this.$("north-wrapper-"+this.target);t&&(n.appendChild(i),t.appendChild(n))},this.showLinkDiv=function(n,t){var u=this.$(this.target+"-cX-Link-Content"),k=this.$("west-container-"+this.target),o=!1,e,a,v,r,h;if(u&&(this.resetLinkDiv(),e=this.adjustedCoordinates(n),e)){for(a=e.x+k.offsetWidth,v=e.y,r=0;r<t.length;r++){var f=t[r].url,y=t[r].name,p=t[r].title,w=t[r].icon,i=t[r].source,s=t[r].params;if(f)o=!0;else if(i&&this.data.links&&this.data.links[i]&&(f=this.data.links[i].url,o=!0,s))for(h in s)f=f.replace("$"+h+"$",s[h]);var c=this.$cX("li",{className:"CanvasXpressListItem"}),b=p?p:this.data.links&&i&&this.data.links[i]&&this.data.links[i].title?this.data.links[i].title:"",l=this.$cX("a",{className:"CanvasXpressListItemA",href:f,alt:b,title:b,target:"_blank"}),d=this.$cX("img",{className:"CanvasXpressListIcon",src:w?w:this.data.links&&i&&this.data.links[i]&&this.data.links[i].icon?this.data.links[i].icon:this.getPixelImage()}),g=this.$cX("span",{className:"CanvasXpressListItemText",innerHTML:y?y:this.data.links&&i&&this.data.links[i]&&this.data.links[i].name?this.data.links[i].name:r});l.appendChild(d),l.appendChild(g),c.appendChild(l),this.addRemoveLinkListeners("addEvtListener",c),u.appendChild(c)}u.parentNode.style.left=a+"px",u.parentNode.style.top=v+"px",u.parentNode.style.display=o?"block":"none"}},this.addRemoveLinkListeners=function(n,t){t&&(this.addRemoveEvtListener(n,t,"click",this.clickLink,!1),this.addRemoveEvtListener(n,t,"mouseover",this.mouseoverLink,!1),this.addRemoveEvtListener(n,t,"mouseout",this.mouseoutLink,!1))},this.clickLink=function(n){return function(t){return t||(t=window.event),n.resetLinkDiv(),!1}}(this),this.mouseoverLink=function(n){return function(t){t||(t=window.event);var i=n.getMenuItemComp(t);return i[0].className="CanvasXpressListItemActive",i[1].className="CanvasXpressListItemAActive",!1}}(this),this.mouseoutLink=function(n){return function(t){t||(t=window.event);var i=n.getMenuItemComp(t);return i[0].className="CanvasXpressListItem",i[1].className="CanvasXpressListItemA",!1}}(this),this.resetLinkDiv=function(){var n=this.$(this.target+"-cX-Link-Content");if(n&&n.childNodes){while(n.childNodes.length>0)this.addRemoveLinkListeners("removeEvtListener",n.childNodes[0]),n.removeChild(n.childNodes[0]);n.parentNode.style.display="none"}},this.addMenu=function(n,t,i){var u,o=this.$("north-wrapper-"+this.target),s=this.$("west-container-"+this.target),h,e,f,r;if(this.resetLinkDiv(),o&&s)for(t?(id=this.newId("-cX-Menu-"),u=this.$cX("div",{id:id,className:"CanvasXpressMenu",par:i},{left:"0px",top:"0px",zIndex:this.menuIndex++,display:"none"})):(this.removeMenus(),t=this.setMenu(),h=this.getTargetEvent(n),e=this.adjustedCoordinates(n,h),x=e.x+s.offsetWidth,y=e.y,id=this.newId("-cX-Menu-"),u=this.$cX("div",{id:id,className:"CanvasXpressMenu"},{left:x+"px",top:y+"px",zIndex:this.menuIndex++})),f=this.$cX("ul",{id:this.newId("-cX-List-"),className:"CanvasXpressList"}),u.appendChild(f),o.appendChild(u),r=0;r<t.length;r++)t[r][0]=="-"?this.addMenuItemSep(f):this.addMenuItem(t[r],f);return id},this.addMenuItemSep=function(n){var t=this.$cX("li",{id:this.newId("-cX-List-Item-Sep-"),className:"CanvasXpressListItemSep"}),i=this.$cX("span",{id:this.newId("-cX-List-Item-Text-Sep-"),className:"CanvasXpressListItemTextSep",innerHTML:"&nbsp;"});t.appendChild(i),n.appendChild(t)},this.addMenuItem=function(n,t){var u=this.newId("-cX-List-Item-"),r=this.$cX("li",{id:u,className:"CanvasXpressListItem",click:n[2],params:n[3]||[]}),i,f;n[5]?(f=this.addMenu(!1,n[5],u),i=this.$cX("a",{id:this.newId("-cX-List-Item-A-"),className:"CanvasXpressListItemAArrow",hidefocus:"true",unselectable:"on",href:"#",menu:f})):i=this.$cX("a",{id:this.newId("-cX-List-Item-A-"),className:"CanvasXpressListItemA",hidefocus:"true",unselectable:"on",href:"#"});var e=this.$cX("img",{id:this.newId("-cX-List-Icon-"),className:"CanvasXpressListIcon",src:this.imageDir+(n[1]||"canvasXpress.gif")}),o=this.$cX("span",{id:this.newId("-cX-List-Item-Text-"),className:"CanvasXpressListItemText",innerHTML:n[0]||""}),s=this.$cX("span",{className:"CanvasXpressListItemTextShort",innerHTML:n[4]||""});i.appendChild(e),i.appendChild(o),i.appendChild(s),r.appendChild(i),t.appendChild(r),this.addRemoveItemListeners("addEvtListener",r)},this.addRemoveItemListeners=function(n,t){if(!t)return this.removeMenus();this[n](t,"click",this.clickMenuItem,!1),this[n](t,"mouseover",this.mouseoverMenuItem,!1),this[n](t,"mouseout",this.mouseoutMenuItem,!1)},this.clickMenuItem=function(n){return function(t){t||(t=window.event);var i=n.getMenuItemComp(t);return n[i[0].click].apply(n,i[0].params),n.removeMenus(),n.cancelEvent(),!1}}(this),this.mouseoverMenuItem=function(n){return function(t){var i,r,u;t||(t=window.event),i=n.getMenuItemComp(t),i[0].className="CanvasXpressListItemActive",n.subMenuOn&&n.subMenuOn.par!=i[0].id&&(r=n.$(n.subMenuOn.par),n.hideMenu([r,r.childNodes[0]],n.subMenuOn)),i[1].menu?(r=n.$(i[1].menu),u=i[0].parentNode.parentNode,r.style.left=u.offsetLeft+u.offsetWidth-5+"px",r.style.top=u.offsetTop+i[1].offsetTop+"px",r.style.display="block",i[1].className="CanvasXpressListItemAArrowActive"):i[1].className="CanvasXpressListItemAActive"}}(this),this.mouseoutMenuItem=function(n){return function(t){var f,s,e,h,i,l,a,o,r,u,c;if(t||(t=window.event),i=n.adjustedCoordinates(t),i)if(l=n.$("north-container-"+n.target),a=n.$("west-container-"+n.target),i.x+=a.offsetWidth,i.y+=l.offsetHeight,o=n.getMenuItemComp(t),o[1].menu){if(r=n.$(o[1].menu),f=r.offsetLeft,e=r.offsetTop,s=f+r.offsetWidth,h=e+r.offsetHeight,i.x>=f&&i.x<=s&&i.y>=e&&i.y<=h){n.subMenuOn=r;return}n.hideMenu(o,r)}else u=o[0].parentNode.parentNode,c=u.par?n.$(u.par):!1,f=u.offsetLeft+3,e=u.offsetTop+3,s=f+u.offsetWidth-6,h=e+u.offsetHeight-6,c&&(i.x<=f||i.x>=s||i.y<=e||i.y>=h)&&n.hideMenu([c,c.childNodes[0]],u),n.hideMenu(o,r)}}(this),this.getMenuItemComp=function(n){var t=this.getTargetEvent(n),i;return t.tagName.match(/img|span/i)?(i=t.parentNode,t=i.parentNode):t.tagName.match(/a/i)?(i=t,t=i.parentNode):i=t.getElementsByTagName("a")[0],[t,i]},this.hideMenu=function(n,t){n&&(n[1].className=n[1].menu?"CanvasXpressListItemAArrow":"CanvasXpressListItemA",n[0].className="CanvasXpressListItem"),t&&(t.style.display="none"),this.subMenuOn=!1},this.removeMenus=function(n){var i=[],o,u,t,f,e,r;if(n)i.push(this.$(this.target+"-cX-Menu-"+n));else{if(o=this.$("north-wrapper-"+this.target),o)for(u=o.getElementsByTagName("div"),t=0;t<u.length;t++)u[t].className=="CanvasXpressMenu"&&i.unshift(this.$(u[t].id));this.menuIndex=1e4}if(i.length>0)for(t=0;t<i.length;t++){for(f=i[t],e=f.getElementsByTagName("li"),r=0;r<e.length;r++)e[r].className!="CanvasXpressListItemSep"&&this.addRemoveItemListeners("removeEvtListener",e[r]);f.parentNode.removeChild(f)}},this.setMenu=function(){var f,t,i,u,r,n;for(this.menu={},f=["Bar","Line","Area","AreaLine","BarLine","Boxplot","Dotplot","Heatmap","Stacked","StackedLine","StackedPercent","StackedPercentLine","Candlestick","Pie","Correlation","Circular","Scatter2D","ScatterBubble2D","Scatter3D","Scatter2D","Venn","Network","Genome"],n=0;n<f.length;n++)this.menu[this.validGraphTypes[n]]=[];for(this.graphType=="Network"&&(t=[],t.push(["Clockwise","rotate_clockwise.png","arrowMove",[34]]),t.push(["Clockwise - Animate","rotate_clockwise_cont.png","arrowMove",[39,!0]]),t.push(["Anticlockwise","rotate_anticlockwise.png","arrowMove",[33]]),t.push(["Anticlockwise - Animate","rotate_anticlockwise_cont.png","arrowMove",[37,!0]]),i=[],i.push(["Top","align_top.png","alignDistributeSelectedNodes",[!1,84]]),i.push(["Right","align_right.png","alignDistributeSelectedNodes",[!1,82]]),i.push(["Bottom","align_bottom.png","alignDistributeSelectedNodes",[!1,66]]),i.push(["Left","align_left.png","alignDistributeSelectedNodes",[!1,76]]),u=[],u.push(["Vertically","distribute_vertical.png","alignDistributeSelectedNodes",[!1,86]]),u.push(["Horozontally","distribute_horizontal.png","alignDistributeSelectedNodes",[!1,72]]),r=[],r.push(["Send to back","move_back.png","orderNodes",["sendNodeToBack"]]),r.push(["Send backward","move_backwards.png","orderNodes",["sendNodeBackward"]]),r.push(["Bring to front","move_front.png","orderNodes",["bringNodeToFront"]]),r.push(["Bring forward","move_forwards.png","orderNodes",["bringNodeForward"]]),this.isSelectNodes?(this.menu.Network.push(["Align","align_bottom.png",!1,!1,!1,i]),this.menu.Network.push(["Distribute","distribute_vertical.png",!1,!1,!1,u]),this.menu.Network.push(["Rotate","rotate_anticlockwise.png",!1,!1,!1,t]),this.menu.Network.push(["Order","move_front.png",!1,!1,!1,r]),this.menu.Network.push(["-"]),this.menu.Network.push(["Show conections","connections.png","showHideSelectedDataPoint",[!1,36],"Ctrl + Home"]),this.menu.Network.push(["-"]),this.menu.Network.push(["Show hidden nodes","show_selected.png","showHideSelectedDataPoint",[!1,45],"Ctrl + Insert"]),this.menu.Network.push(["Hide nodes","hide_selected.png","showHideSelectedDataPoint",[!1,46],"Ctrl + Delete"]),this.menu.Network.push(["-"]),this.menu.Network.push(["Undo","undo.png","alignDistributeSelectedNodes",[!1,90],"Ctrl + z"]),this.menu.Network.push(["Redo","redo.png","alignDistributeSelectedNodes",[!1,90,!0],"Ctrl + y"]),this.menu.Network.push(["-"])):this.menu.Network.push(["Rotate","rotate_anticlockwise.png",!1,!1,!1,t])),n=0;n<f.length;n++)this.menu[this.validGraphTypes[n]].push(["Reset","refresh.png","masterReset",[],"ESC"]),this.menu[this.validGraphTypes[n]].push(["Print","disk.png","print",[],"Ctrl + P"]);return this.menu[this.graphType]},this.resetMenuLinks=function(){this.resetLinkDiv(),this.removeMenus()},this.initializeMenuLinks=function(){this.disableEvents||this.addLinkDiv()},this.initializeMenuLinks()},CanvasXpress.prototype.initToolbarTooltip=function(){this.addToolbarDiv=function(){var i;if(!this.$(this.target+"-cX-Toolbar")){var n=this.canvas.height>400?"16px":"8px",t=this.$cX("div",{id:this.target+"-cX-Toolbar"},{position:"absolute",overflow:this.toolbarPermanent?"visible":"hidden",width:this.width+"px",height:"0px",left:"7px",top:this.toolbarPermanent?"0px":"12px",zIndex:9e3}),u=this.$cX("img",{src:this.getPixelImage()+"?"+(new Date).getDayYear()+":"+this.userId}),f=this.$cX("img",{id:this.target+"-cX-ToolbarHelp",className:"CanvasXpressToolbarImage",src:this.imageDir+"help1.png",alt:"Help",title:"Help"},{width:n,height:n}),e=this.$cX("img",{id:this.target+"-cX-ToolbarSave",className:"CanvasXpressToolbarImage",src:this.imageDir+"disk.png",alt:"Save as png",title:"Save as png"},{width:n,height:n}),o=this.$cX("img",{id:this.target+"-cX-ToolbarLayout",className:"CanvasXpressToolbarImage",src:this.appLayout?this.imageDir+"configure_hide.png":this.isLayoutConfigurator?this.imageDir+"configure_show.png":this.imageDir+"configure_simple_show.png",alt:this.appLayout?"Basic layout":"Application layout",title:this.appLayout?"Basic layout":"Application layout"},{width:n,height:n,display:this.disableDataFilters||this.disableDataTable||this.disableConfigurator?"none":"block"}),s=this.$cX("img",{id:this.target+"-cX-ToolbarFilter",className:"CanvasXpressToolbarImage",src:this.imageDir+"funnel.png",alt:"Filter data",title:"Filter data"},{width:n,height:n,display:this.disableDataFilters?"none":"block"}),r=this.$cX("img",{id:this.target+"-cX-ToolbarData",className:"CanvasXpressToolbarImage",src:this.imageDir+"table.png",alt:"Show data",title:"Show data"},{width:n,height:n,display:this.disableDataTable?"none":"block"});(this.isVML||this.disableConfigurator||this.isIE&&this.browserVersion<9)&&(r.style.marginRight="4px");var h=this.$cX("img",{id:this.target+"-cX-ToolbarConfigurator",className:"CanvasXpressToolbarImage",src:this.imageDir+"cog.png",alt:"Configure plot",title:"Configure plot"},{width:n,height:n,marginRight:"4px",display:this.isVML||this.disableConfigurator||this.isIE&&this.browserVersion<9?"none":"block"}),i=this.$cX("div",{id:this.target+"-cX-ToolbarHelpDescription",className:"CanvasXpressToolbarHelp draggable"},{cursor:"move",display:"none",padding:"10px",position:"absolute"}),c=this.$cX("img",{id:this.target+"-cX-ToolbarHelpClose",className:"CanvasXpressToolbarHelp",src:this.imageDir+"cancel1.png",alt:"Close",title:"Close"});i.appendChild(document.createTextNode("Help")),i.appendChild(c),i.appendChild(this.$cX("br")),this.addHelp(i),t.appendChild(u),t.appendChild(h),t.appendChild(r),t.appendChild(s),t.appendChild(o),t.appendChild(e),t.appendChild(f),t.appendChild(i),i=this.$("north-wrapper-"+this.target),i&&(i.appendChild(t),this.addRemoveToolbarListeners("addEvtListener"))}},this.addRemoveToolbarListeners=function(n){this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarHelp"),"click",this.clickHelp,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarSave"),"click",this.print,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarLayout"),"click",this.clickLayout,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarFilter"),"click",this.clickDataFilters,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarData"),"click",this.clickDataTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarConfigurator"),"click",this.clickGraphConfigurator,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarHelpClose"),"click",this.closeHelp,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-ToolbarHelpDescription"),"mousedown",this.registerMousemove,!1)},this.clickHelp=function(n){return function(t){t||(t=window.event);var r=n.$(n.target+"-cX-Toolbar"),i=n.$(n.target+"-cX-ToolbarHelpDescription");return r&&i&&(r.style.overflow="visible",i.style.display="block",i.style.left=(t.layerX||t.x)-400+"px",i.style.top=(t.layerY||t.y)+"px"),!1}}(this),this.closeHelp=function(n){return function(t){t||(t=window.event);var i=n.$(n.target+"-cX-Toolbar"),r=n.$(n.target+"-cX-ToolbarHelpDescription");return i&&r&&(r.style.display="none",setTimeout(function(){i.style.overflow=n.toolbarPermanent?"visible":"hidden"},300)),!1}}(this),this.clickLayout=function(n){return function(t){var i,r;return t||(t=window.event),i=t.target||t.srcElement,n.appLayout=n.appLayout?!1:!0,i.src=n.appLayout?n.imageDir+"configure_hide.png":n.imageDir+"configure_show.png",i.alt=n.appLayout?"Basic layout":"Application layout",i.title=n.appLayout?"Basic layout":"Application layout",n.appLayout?(r=n.isLayoutConfigurator?500:1,n.isLayoutConfigurator&&(n.addConfigurator(),n.selectConfig(!1,!0),(!n.configuratorLastState||n.configuratorLastState&&n.configuratorLastState!="docked")&&n.clickDockUndockConfigurator()),setTimeout(function(){n.showDataFilter(),(!n.dataFilterLastState||n.dataFilterLastState&&n.dataFilterLastState!="docked")&&(n.moveDataFilter(),n.activeAccordion||setTimeout(function(){n.graphType=="Genome"?n.activateAccordion(!1,n.$(n.target+"-cX-DataFilterGenomeHeader")):n.graphType=="Network"?n.activateAccordion(!1,n.$(n.target+"-cX-DataFilterNodeHeader")):n.activateAccordion(!1,n.$(n.target+"-cX-DataFilterVariableHeader"))},500)),setTimeout(function(){n.updateDataTable(),(!n.dataTableLastState||n.dataTableLastState&&n.dataTableLastState!="docked")&&n.moveDataTableDiv("dock"),setTimeout(function(){var t=n.$("middle-container-"+n.target);n.dataTableTarget=n.$(n.target+"-cX-DataTable"),n.updateDataTableResizerDiv(!1,parseInt(t.style.width)-4,parseInt(n.dataTableTarget.style.height)),n.endDataTableResizerDiv(),n.hideToolbar()},500)},500)},r)):(n.isLayoutConfigurator&&n.closeConfigurator(),setTimeout(function(){n.activeAccordion&&n.activateAccordion(!1,n.activeAccordion.previousSibling),n.hideDataFilter(),setTimeout(function(){n.hideTable(),n.hideToolbar()},500)},500)),!1}}(this),this.clickDataTable=function(n){return function(t){return t||(t=window.event),n.updateDataTable(),!1}}(this),this.clickDataFilters=function(n){return function(t){return t||(t=window.event),n.showDataFilter(),!1}}(this),this.clickGraphConfigurator=function(n){return function(t){return t||(t=window.event),n.addConfigurator(),!1}}(this),this.addHelp=function(n){var t=this.$cX("div",!1,{width:"400px"}),u,f,e,r,o,i,s,h,c,l,a,v,y,p,w;t.appendChild(this.$cX("br")),i=this.$cX("img",{src:this.imageDir+"help1.png"}),t.appendChild(i),t.appendChild(document.createTextNode(" Show this help")),t.appendChild(this.$cX("br")),u=this.$cX("img",{src:this.imageDir+"disk.png"}),t.appendChild(u),t.appendChild(document.createTextNode(" Save")),t.appendChild(this.$cX("br")),f=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Save the image as a 'png' file (in this toolbar) or save the data as an excel file (in the data table widget)."}),t.appendChild(f),r=this.$cX("img",{src:this.imageDir+"funnel.png"}),t.appendChild(r),t.appendChild(document.createTextNode(" Filters")),t.appendChild(this.$cX("br")),e=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Widget used to filter the data and metadata. Metadata will be automatically assigned as text, numeric or date."}),t.appendChild(e),r=this.$cX("img",{src:this.imageDir+"table.png"}),t.appendChild(r),t.appendChild(document.createTextNode(" Show data")),t.appendChild(this.$cX("br")),o=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Show the data used for this visualization in an HTML table."}),t.appendChild(o),i=this.$cX("img",{src:this.imageDir+"cog.png"}),t.appendChild(i),t.appendChild(document.createTextNode(" Show the configurator")),t.appendChild(this.$cX("br")),s=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"This widget allows you to customize this graph. You may enter the name of the property you wish to customize in the text box (which filters as you type) or browse through a number of categories.<br>You will find a short description for the property you select along with its category and links to other relevant properties.<br>You will also see the current value for the seleced property along with a link to an additional widget to help you specifying the new value."}),t.appendChild(s),h=this.$cX("img",{src:this.imageDir+"lightbulb.png"}),t.appendChild(h),t.appendChild(document.createTextNode(" Show or hide advanced customizations")),t.appendChild(this.$cX("br")),c=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Displayed in the configurator widget."}),t.appendChild(c),l=this.$cX("img",{src:this.imageDir+"find.png"}),t.appendChild(l),t.appendChild(document.createTextNode(" Search by customizable categories")),t.appendChild(this.$cX("br")),a=this.$cX("p",{className:"CanvasXpressToolbarHelp",innerHTML:"Displayed in the configurator widget to facilitate searching for customizable property."}),t.appendChild(a),v=this.$cX("img",{src:this.imageDir+"pin.png"}),t.appendChild(v),t.appendChild(document.createTextNode(" Dock widget to the side")),t.appendChild(this.$cX("br")),y=this.$cX("img",{src:this.imageDir+"unpin.png"}),t.appendChild(y),t.appendChild(document.createTextNode(" Undock widget from the side")),t.appendChild(this.$cX("br")),p=this.$cX("img",{src:this.imageDir+"cancel1.png"}),t.appendChild(p),t.appendChild(document.createTextNode(" Close widget")),t.appendChild(this.$cX("br")),t.appendChild(this.$cX("br")),w=this.$cX("a",{href:"http://canvasxpress.org",target:"_blank",innerHTML:"canvasXpress"}),t.appendChild(document.createTextNode("Additional documentation at ")),t.appendChild(w),t.appendChild(this.$cX("br")),n.appendChild(t)},this.showToolbar=function(n){var t,i,r,u;this.toolbarPermanent||(t=this.$(this.target+"-cX-Toolbar"),i=this.$("west-container-"+this.target),t&&parseInt(t.style.height)==0&&i&&(r=this,u=parseInt(i.style.width),this.resizeMove(t,0,12,this.width+u,20,250),n&&setTimeout(function(){r.hideToolbar()},5e3)))},this.hideToolbar=function(){var n,t,i;this.toolbarPermanent||(n=this.$(this.target+"-cX-Toolbar"),t=this.$("west-container-"+this.target),n&&parseInt(n.style.height)==20&&t&&(i=parseInt(t.style.width),this.resizeMove(n,0,12,this.width+i,0)))},this.isToolbar=function(n){var r,t,i;n||(n=window.event),r=this.adjustedCoordinates(n),r&&(t=r.x,i=r.y,i>0&&i<24&&t>0&&t<this.width?this.showToolbar():i>24&&i<this.height&&t>0&&t<this.width&&this.hideToolbar())},this.addTooltipDiv=function(n,t,i){var e=0,r=this.target+"-cX-TooltipDiv"+e,u=this.$(this.target+"-cX-Info"),o;for(u&&u.style.display!="none"&&(t=parseInt(u.style.left),i=parseInt(u.style.top)),o=this.$(r);o;)e++,r=this.target+"-cX-TooltipDiv"+e,o=this.$(r);var f=this.$cX("div",{id:r,className:"CanvasXpressTooltip draggable"},{left:t+"px",top:i+"px",zIndex:29010}),s=this.$cX("img",{id:r+"Close",className:"CanvasXpressTooltip",src:this.imageDir+"cancel1.png",alt:"Close",title:"Close"}),h=this.$cX("div",{id:r+"HTML",innerHTML:n||""},{clear:"both"});return f.appendChild(s),f.appendChild(h),document.body.appendChild(f),this.resetInfoSpan(),f},this.addRemoveTooltipDivsListeners=function(n,t){this.addRemoveEvtListener(n,t,"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(n,t,"touchstart",this.registerMousemove,!1),this.addRemoveEvtListener(n,t.firstChild,"click",this.closeTooltipDiv,!1)},this.closeTooltipDiv=function(n){return function(t){var r,i;return t||(t=window.event),r=t.target||t.srcElement,r&&(i=r.parentNode,n.addRemoveTooltipDivsListeners("removeEvtListener",i),i.parentNode.removeChild(i)),!1}}(this),this.showTooltipDiv=function(n,t){var i=this.adjustedCoordinates(n);if(i){var r=i.x,u=n?i.y:i.y+25,f=this.addTooltipDiv(t,r,u);this.addRemoveTooltipDivsListeners("addEvtListener",f)}},this.resetTooltipDivs=function(){for(var t=0,i=this.target+"-cX-TooltipDiv"+t,n=this.$(i);n;)this.addRemoveTooltipDivsListeners("removeEvtListener",n),n.parentNode.removeChild(n),t++,i=this.target+"-cX-TooltipDiv"+t,n=this.$(i)},this.addInfoSpan=function(){if(this.$(this.target+"-cX-Info")){this.resetInfoSpan();return}var n=this.$cX("span",{id:this.target+"-cX-Info",className:"CanvasXpressTooltip"},{display:"none",zIndex:29010});document.body.appendChild(n)},this.resetInfoSpan=function(n,t){var i=this.$(this.target+"-cX-Info"),r;i&&(r=(new Date).getTime()-this.infoStartTime,(r>this.infoTimeIn||t)&&(i.style.left="0px",i.style.top="0px",i.style.display="none",i.innerHTML=""))},this.showInfoSpan=function(n,t){var h,i,f,r,u,e,o,s,c;this.draggingOn||this.remoteUpdating||(h=(new Date).getTime()-this.infoStartTime,i=this.$(this.target+"-cX-Info"),i&&t&&t!=""&&h>this.infoTimeIn&&(f=this.adjustedCoordinates(n,i),f&&(r=f.x,u=n?f.y:f.y+25,isNaN(t)||(t=t.toString()),t.match(/\w/)&&(i.innerHTML=t,i.style.left=r+10+"px",i.style.top=u-20+"px",i.style.display="inline",i.style.zIndex=parseInt(i.style.zIndex),e=parseInt(i.clientWidth),o=parseInt(i.clientHeight),e<window.innerWidth&&e>window.innerWidth+window.pageXOffset-r&&e+20<r-window.pageXOffset&&(i.style.left=r-(e+20)+"px",i.style.left=r-(parseInt(i.clientWidth)+20)+"px"),o<window.innerHeight&&o>window.innerHeight+window.pageYOffset-u&&o-15<u-window.pageYOffset&&(i.style.top=u-(o-15)+"px",i.style.top=u-(parseInt(i.clientHeight)-15)+"px"),this.infoStartTime=(new Date).getTime(),s=this,c=function(){this.update=function(){var t=(new Date).getTime();t-s.infoStartTime>s.infoTimeOut&&(s.resetInfoSpan(),clearInterval(n))};var n=setInterval(this.update,100)},c.call()))))},this.initializeToolbarTooltip=function(){this.disableEvents||(this.disableToolbar||this.addToolbarDiv(),this.addInfoSpan())},this.initializeToolbarTooltip()},CanvasXpress.prototype.initConfigurator=function(){this.addConfigurator=function(n){return function(t,i,r,u){var f,y,o,h,v;if(t||(t=window.event),f=n.$(n.target+"-cX-Configurator"),f&&(n.activeTarget&&(n.activeTarget.style.zIndex=1e4),n.activeTarget=f,n.activeTarget.style.zIndex=10001,n.configuratorLastState&&n.configuratorLastState=="docked")){y=n.$("west-handler-"+n.target),n.clickViewport(t,y);return}if(o="Search property or function",!n.isVML&&!n.disableConfigurator&&(!this.isIE||!(this.browserVersion<9))){if(n.configuringOn=!0,i)if(n.isArray(i)&&(i=i[0]),n.graphType=="Network")if(n.configuringNetwork=i,n.data.nodes.length>i)o="Configure "+(n.data.nodes[i].label||n.data.nodes[i].name||n.data.nodes[i].id);else{var p=n.data.edges[i-n.data.nodes.length],s=n.data.nodes[n.data.nodeIndices[p.id1]],w=n.data.nodes[n.data.nodeIndices[p.id2]];o="Configure "+(s.label||s.name||s.id)+" - "+(w.label||s.name||w.id)}else n.graphType=="Genome"&&(n.configuringGenome=i,o="Configure track "+i);if(h=r!=null&&u!=null?{x:r,y:u}:n.adjustedCoordinates(t),h){r=n.applicationLook||n.configuratorLastState=="docked"?0:h.x,u=n.applicationLook||n.configuratorLastState=="docked"?0:h.y;var f=n.$cX("div",{id:n.target+"-cX-Configurator",className:n.applicationLook?"CanvasXpressConfigurator fixed":"CanvasXpressConfigurator draggable"},{cursor:"move",left:r+"px",top:u+"px",padding:"10px",position:"absolute",zIndex:10001}),e=n.$cX("div",{id:n.target+"-cX-ConfiguratorKeyText"},{display:"block",marginBottom:"5px",width:n.configuratorWidth+"px"}),k=n.$cX("span",{id:n.target+"-cX-ConfiguratorKeyTextSpan",className:"CanvasXpressConfigurator",innerHTML:o}),d=n.$cX("img",{id:n.target+"-cX-ConfiguratorKeyAdvanced",className:"CanvasXpressConfigurator",src:n.showAdvancedConfiguration?n.imageDir+"lightbulb.png":n.imageDir+"lightbulb_off.png",alt:n.showAdvancedConfiguration?"Show basic configuaration properties":"Show advanced configuaration properties",title:n.showAdvancedConfiguration?"Show basic configuaration properties":"Show advanced configuaration properties"}),g=n.$cX("img",{id:n.target+"-cX-ConfiguratorKeySearch",className:"CanvasXpressConfigurator",src:n.imageDir+"find.png",alt:"Browse properties by category",title:"Browse properties by category"}),nt=n.$cX("img",{id:n.target+"-cX-ConfiguratorKeyDock",className:"CanvasXpressConfigurator",src:n.applicationLook?n.imageDir+"unpin.png":n.imageDir+"pin.png",alt:n.applicationLook?"Undock":"Dock",title:n.applicationLook?"Undock":"Dock",state:n.applicationLook?"docked":"free"}),tt=n.$cX("img",{id:n.target+"-cX-ConfiguratorKeyClose",className:"CanvasXpressConfigurator",src:n.imageDir+"cancel1.png",alt:"Close",title:"Close"}),b=n.$cX("input",{id:n.target+"-cX-ConfiguratorKey",className:"CanvasXpressConfigurator",type:"text"},{display:"block",width:n.configuratorWidth+"px"}),it=n.$cX("select",{id:n.target+"-cX-ConfiguratorCategories",className:"CanvasXpressConfigurator",size:5},{display:"none",width:n.configuratorWidth+"px"}),rt=n.$cX("div",{id:n.target+"-cX-ConfiguratorSugestionsText",innerHTML:"Select property"},{display:"none",margin:"5px 0px 5px 0px",width:n.configuratorWidth+"px"}),ut=n.$cX("select",{id:n.target+"-cX-ConfiguratorSugestions",className:"CanvasXpressConfigurator",size:n.mobileApp?5:10},{display:"none",width:n.configuratorWidth+"px"}),ft=n.$cX("div",{id:n.target+"-cX-ConfiguratorSugestionsDescription"},{display:"none",margin:"5px 0px 5px 0px",width:n.configuratorWidth+"px",minHeight:"56px",overflow:"auto"}),et=n.$cX("div",{id:n.target+"-cX-ConfiguratorValueText",innerHTML:"Current value"},{display:"none",margin:"5px 0px 5px 0px",width:n.configuratorWidth+"px"}),ot=n.$cX("div",{id:n.target+"-cX-ConfiguratorSeeAlso"},{display:"none",width:n.configuratorWidth+"px",minHeight:"20px",overflow:"auto"}),st=n.$cX("input",{id:n.target+"-cX-ConfiguratorValue",className:"CanvasXpressConfigurator",type:"text"},{display:"none",width:n.configuratorWidth+"px"}),ht=n.$cX("input",{id:n.target+"-cX-ConfiguratorApply",value:"Apply",type:"button"},{display:"none",cssFloat:"left",borderRadius:"5px",width:n.configuratorWidth/2+"px"}),ct=n.$cX("input",{id:n.target+"-cX-ConfiguratorButton",value:"Draw",type:"button"},{display:"none",cssFloat:"left",borderRadius:"5px",width:n.configuratorWidth/2+"px"}),lt=n.$cX("img",{id:n.target+"-cX-ConfiguratorOptionsClose",className:"CanvasXpressConfigurator",src:n.imageDir+"cancel1.png",alt:"Close",title:"Close"}),c=n.$cX("div",{id:n.target+"-cX-ConfiguratorOptions",className:"CanvasXpressConfigurator draggable"},{cursor:"move",display:"none",padding:"10px",position:"absolute"}),at=n.$cX("div",{id:n.target+"-cX-ConfiguratorColorCurrent",className:"CanvasXpressConfiguratorColor"},{width:"181px",height:"16px",cssFloat:"left",cursor:"default"}),vt=n.$cX("img",{id:n.target+"-cX-ConfiguratorColorClose",className:"CanvasXpressConfigurator",src:n.imageDir+"cancel1.png",alt:"Close",title:"Close"}),l=n.$cX("div",{id:n.target+"-cX-ConfiguratorColor",className:"CanvasXpressConfigurator draggable"},{width:"204px",cursor:"move",display:"none",padding:"10px",position:"absolute"}),a=n.$cX("div",{id:n.target+"-cX-ConfiguratorFilter",className:"CanvasXpressConfiguratorFilter draggable",innerHTML:'Build filter ("+" to set "-" to remove)'},{cursor:"move",display:"none",padding:"10px",position:"absolute"}),yt=n.$cX("img",{id:n.target+"-cX-ConfiguratorFilterClose",className:"CanvasXpressConfigurator",src:n.imageDir+"cancel1.png",alt:"Close",title:"Close"});e.appendChild(k),e.appendChild(tt),e.appendChild(nt),e.appendChild(d),e.appendChild(g),c.appendChild(document.createTextNode("Select option ...")),c.appendChild(lt),c.appendChild(n.$cX("br")),l.appendChild(at),l.appendChild(vt),l.appendChild(n.$cX("br")),a.appendChild(yt),a.appendChild(n.$cX("br")),f.appendChild(e),f.appendChild(b),f.appendChild(it),f.appendChild(rt),f.appendChild(ut),f.appendChild(ft),f.appendChild(ot),f.appendChild(et),f.appendChild(st),f.appendChild(ht),f.appendChild(ct),f.appendChild(c),f.appendChild(l),f.appendChild(a),v=n.$("west-wrapper-"+n.target),v&&(v.appendChild(f),n.activeTarget&&(n.activeTarget.style.zIndex=1e4),n.activeTarget=f,n.addRemoveConfiguratorListeners("addEvtListener"),(n.configuringNetwork||n.configuringGenome)&&n.selectConfig(!1,!0),setTimeout(function(){b.focus()},300))}}}}(this),this.addRemoveConfiguratorListeners=function(n){var r=this.$(this.target+"-cX-Configurator"),t=this.$(this.target+"-cX-ConfiguratorCategories"),i=this.$(this.target+"-cX-ConfiguratorSugestions"),u=this.$(this.target+"-cX-ConfiguratorApply"),f=this.$(this.target+"-cX-ConfiguratorButton"),e=this.$(this.target+"-cX-ConfiguratorKeyClose"),o=this.$(this.target+"-cX-ConfiguratorKeyDock"),s=this.$(this.target+"-cX-ConfiguratorKeyAdvanced"),h=this.$(this.target+"-cX-ConfiguratorKeySearch"),c=this.$(this.target+"-cX-ConfiguratorOptions"),l=this.$(this.target+"-cX-ConfiguratorOptionsClose"),a=this.$(this.target+"-cX-ConfiguratorColor"),v=this.$(this.target+"-cX-ConfiguratorColorClose"),y=this.$(this.target+"-cX-ConfiguratorFilter"),p=this.$(this.target+"-cX-ConfiguratorFilterClose");r&&t&&i&&f&&u&&e&&o&&s&&h&&c&&l&&a&&v&&y&&p&&(this[n](r,"mousedown",this.registerMousemove,!1),this[n](t,"change",this.changeCategory,!1),this[n](t,"click",this.changeCategory,!1),this[n](i,"change",this.clickSuggestions,!1),this[n](i,"click",this.clickSuggestions,!1),this[n](u,"click",this.clickApplyConfigurator,!1),this[n](f,"click",this.clickConfigurator,!1),this[n](h,"click",this.clickSearch,!1),this[n](s,"click",this.clickAdvanced,!1),this[n](o,"click",this.clickDockUndockConfigurator,!1),this[n](e,"click",this.closeConfigurator,!1),this[n](c,"mousedown",this.registerMousemove,!1),this[n](l,"click",this.closePropertyOptions,!1),this[n](a,"mousedown",this.registerMousemove,!1),this[n](v,"click",this.closePropertyColor,!1),this[n](y,"mousedown",this.registerMousemove,!1),this[n](p,"click",this.closePropertyFilter,!1))},this.getConfigurableProperties=function(){var t,n,r,i;if(this.configuringNetwork)return this.data.nodes.length>this.configuringNetwork?this.getNodeConfigurableProperties(this.configuringNetwork):this.getEdgeConfigurableProperties(this.configuringNetwork-this.data.nodes.length);if(this.configuringGenome){if(!isNaN(this.configuringGenome)||this.configuringGenome.match(/:/))return this.featureConfigurableProperties;if(this.configuringGenome.match(/track/))return this.trackConfigurableProperties;this.configuringGenome=!1}t=[];for(n in CanvasXpress.doc.P)r=CanvasXpress.doc.P[n].M,i=CanvasXpress.doc.P[n].U,CanvasXpress.doc.M[r].U?CanvasXpress.doc.M[r].U.hasOwnProperty(this.graphType)&&(this.showAdvancedConfiguration?t.push(n):CanvasXpress.doc.P[n].A||t.push(n)):this.showAdvancedConfiguration?i?i.hasOwnProperty(this.graphType)&&t.push(n):t.push(n):CanvasXpress.doc.P[n].A||i&&(i.hasOwnProperty(this.graphType)?t.push(n):t.push(n));return t},this.getConfigurableObjectDoc=function(n){return this.configuringNetwork?this.data.nodes.length>this.configuringNetwork?CanvasXpress.doc.N[n]?CanvasXpress.doc.N[n]:!1:CanvasXpress.doc.E[n]?CanvasXpress.doc.E[n]:!1:this.configuringGenome?!isNaN(this.configuringGenome)||this.configuringGenome.match(/:/)?CanvasXpress.doc.F[n]?CanvasXpress.doc.F[n]:!1:this.configuringGenome.match(/track/)?CanvasXpress.doc.G[n]?CanvasXpress.doc.G[n]:!1:(this.configuringGenome=!1,CanvasXpress.doc.P[n]?CanvasXpress.doc.P[n]:!1):CanvasXpress.doc.P[n]?CanvasXpress.doc.P[n]:!1},this.selectConfig=function(n,t){var o=this.$(this.target+"-cX-ConfiguratorKey"),s=this.$(this.target+"-cX-ConfiguratorSugestionsText"),f=this.$(this.target+"-cX-ConfiguratorSugestions"),h=this.$(this.target+"-cX-ConfiguratorSugestionsDescription"),c=this.$(this.target+"-cX-ConfiguratorValueText"),l=this.$(this.target+"-cX-ConfiguratorSeeAlso"),e=this.$(this.target+"-cX-ConfiguratorValue"),p=this.$(this.target+"-cX-ConfiguratorApply"),w=this.$(this.target+"-cX-ConfiguratorButton"),a=this.$(this.target+"-cX-ConfiguratorValueHREF"),v=document.activeElement,u=this.getConfigurableProperties(),r=[],y,i;if(this.getKeyCode(n)==13){if(this.resetOptionColorFilters(),this.editingDescriptionOn)this.submitEditPropertyDescription();else if(f&&e&&e.value){for(y=!1,i=0;i<u.length;i++)if(f.value==u[i]){y=!0;break}y?this.clickConfigurator(n,f,e):this.resetConfigurator()}}else{if(v.id.match(/canvasXpressConfiguratorFilterValue/))return;if(o&&v.id==o.id||t){for(this.resetOptionColorFilters(),this.resetEditPropertyDescription(),i=0;i<u.length;i++)u[i].toLowerCase().indexOf(o.value.toLowerCase())>=0&&r.push(u[i]);if(r.length>0&&s&&f&&h&&c&&l&&e&&w&&p){if(this.resetSugestions(),this.configuringNetwork||this.configuringGenome)for(r.sort(),i=0;i<r.length;i++){u=this.$cX("option",{text:r[i],value:r[i]});try{f.add(u,null)}catch(b){f.add(u)}}else for(r.sort(function(n,t){return CanvasXpress.doc.P[n].M>CanvasXpress.doc.P[t].M?1:CanvasXpress.doc.P[t].M>CanvasXpress.doc.P[n].M?-1:n>t?1:t>n?-1:0}),i=0;i<r.length;i++){u=this.$cX("option",{text:CanvasXpress.doc.P[r[i]].M?CanvasXpress.doc.P[r[i]].M+" : "+r[i]:"NA : "+r[i],value:r[i]});try{f.add(u,null)}catch(b){f.add(u)}}f.options[0].selected=!0,this.setConfiguratorPropertyValue(f,h,c,l,e),s.innerHTML="Select property ("+r.length+")",s.style.display="block",f.style.display="block",h.style.display="block",c.style.display="block",l.style.display="block",e.style.display="block",w.style.display="block",p.style.display="block"}else o.value=o.value.slice(0,o.value.length-1)}else e&&v.id==e.id?(this.resetOptionColorFilters(),this.resetEditPropertyDescription(),a&&a.innerHTML=="color"&&(a.style.color=e.value?this.rgbToHex(this.validateColor(e.value.replace(/[\'\"]/g,""))):this.foreground)):this.remoteService&&(this.resetOptionColorFilters(),this.selectDataSet(n))}return!1},this.clickSearch=function(n){return function(t){var i,s;t||(t=window.event),n.configuringNetwork=!1,n.configuringGenome=!1,n.resetEditOptionColorFilters();var o=n.$(n.target+"-cX-ConfiguratorKeyTextSpan"),f=n.$(n.target+"-cX-ConfiguratorKey"),e=n.$(n.target+"-cX-ConfiguratorCategories"),h=n.$(n.target+"-cX-ConfiguratorSugestionsText"),c=n.$(n.target+"-cX-ConfiguratorSugestions"),l=n.$(n.target+"-cX-ConfiguratorSugestionsDescription"),a=n.$(n.target+"-cX-ConfiguratorValueText"),v=n.$(n.target+"-cX-ConfiguratorSeeAlso"),y=n.$(n.target+"-cX-ConfiguratorValue"),p=n.$(n.target+"-cX-ConfiguratorButton"),w=n.$(n.target+"-cX-ConfiguratorApply"),b=n.$(n.target+"-cX-ConfiguratorOptions"),k=n.$(n.target+"-cX-ConfiguratorColor"),d=n.$(n.target+"-cX-ConfiguratorFilter"),r=n.getKeys(CanvasXpress.doc.M).sort(),u=[];if(f&&f.style.display=="none")o&&(o.innerText="Search property or function"),e&&(e.style.display="none"),f.value="",f.style.display="block";else{if(o)for(i=0;i<r.length;i++)CanvasXpress.doc.M[r[i]].U?CanvasXpress.doc.M[r[i]].U.hasOwnProperty(n.graphType)&&(n.showAdvancedConfiguration?u.push(r[i]):CanvasXpress.doc.M[r[i]].B&&u.push(r[i])):n.showAdvancedConfiguration?u.push(r[i]):CanvasXpress.doc.M[r[i]].B&&u.push(r[i]),o.innerText="Select category ("+u.length+")";if(f&&(f.style.display="none"),e){for(n.resetCategories(),i=0;i<u.length;i++){s=n.$cX("option",{text:u[i],value:u[i]});try{e.add(s,null)}catch(g){e.add(s)}}e.style.display="block"}}return h&&c&&l&&a&&v&&y&&p&&w&&b&&k&&d&&(h.style.display="none",c.style.display="none",l.style.display="none",a.style.display="none",v.style.display="none",y.style.display="none",p.style.display="none",w.style.display="none",b.style.display="none",k.style.dysplay="none",d.style.dysplay="none"),!1}}(this),this.clickDockUndockConfigurator=function(n){return function(t,i){var h,c;t||(t=window.event);var r=n.$(n.target+"-cX-Configurator"),u=n.$(n.target+"-cX-ConfiguratorKeyDock"),f=n.$("middle-container-"+n.target),e=n.$("west-container-"+n.target),o=n.$("west-handler-"+n.target),s=n.$("east-container-"+n.target);return r&&u&&f&&e&&o&&s&&(u.state!="free"||i?(n.configuringOn="free",r.className="CanvasXpressConfigurator draggable",r.style.cursor="move",u.src=n.imageDir+"pin.png",u.alt="Dock",u.title="Dock",u.state="free",n.configuratorLastState="free",n.resizeMove(e,0,0,7,n.canvas.height,500,function(){f.style.width=7+n.canvas.width+s.clientWidth}),n.resizeViewportWest(),o.style.display="none",setTimeout(function(){r.style.height=""},500)):(h=parseInt(r.style.padding)*2+2,c=r.clientHeight-h,n.configuringOn="docked",n.resizeViewportWest(),r.className="CanvasXpressConfigurator fixed",r.style.cursor="default",u.src=n.imageDir+"unpin.png",u.alt="Undock",u.title="Undock",u.state="docked",n.configuratorLastState="docked",f.style.width=r.clientWidth+7+n.canvas.width+s.clientWidth+2,n.resizeMove(e,0,0,r.clientWidth+7,n.canvas.height,500,null),n.resizeMove(r,0,0,n.configuratorWidth,n.canvas.height-h,500,null),o.style.display="block",setTimeout(function(){n.resizeViewportWest()},500))),!1}}(this),this.clickAdvanced=function(n){return function(t){t||(t=window.event);var r=n.$(n.target+"-cX-ConfiguratorKey"),i=n.$(n.target+"-cX-ConfiguratorKeyAdvanced");return i&&(n.showAdvancedConfiguration?(n.showAdvancedConfiguration=!1,i.src=n.imageDir+"lightbulb_off.png",i.alt="Show advanced configuaration properties",i.title="Show advanced configuaration properties"):(n.showAdvancedConfiguration=!0,i.src=n.imageDir+"lightbulb.png",i.alt="Show basic configuaration properties",i.title="Show basic configuaration properties"),r&&r.style.display=="none"?(r.value="",r.style.display="block",n.clickSearch()):(n.resetEditOptionColorFilters(),n.resetEditPropertyDescription(),n.resetPropertySeeAlsoLinks(),n.selectConfig(!1,!0))),!1}}(this),this.closeConfigurator=function(n){return function(t){return t||(t=window.event),n.resetViewportOverflow("west"),n.clickDockUndockConfigurator(t,!0),n.resetConfigurator(),!1}}(this),this.changeCategory=function(n){return function(t,i){var u,f,a;t||(t=window.event),n.resetEditOptionColorFilters();var e=n.$(n.target+"-cX-ConfiguratorCategories"),o=n.$(n.target+"-cX-ConfiguratorSugestionsText"),r=n.$(n.target+"-cX-ConfiguratorSugestions"),s=n.$(n.target+"-cX-ConfiguratorSugestionsDescription"),h=n.$(n.target+"-cX-ConfiguratorValueText"),c=n.$(n.target+"-cX-ConfiguratorSeeAlso"),l=n.$(n.target+"-cX-ConfiguratorValue"),k=n.$(n.target+"-cX-ConfiguratorApply"),v=n.$(n.target+"-cX-ConfiguratorButton"),y=n.$(n.target+"-cX-ConfiguratorOptions"),p=n.$(n.target+"-cX-ConfiguratorColor"),w=n.$(n.target+"-cX-ConfiguratorFilter"),b=CanvasXpress.doc.M;if(e&&e.value&&o&&r&&s&&h&&c&&l&&v&&y&&p&&w){for(u=n.showAdvancedConfiguration?b[e.value].P.sort():b[e.value].B.sort(),n.resetSugestions(),f=0;f<u.length;f++){a=n.$cX("option",{text:u[f],value:u[f]});try{r.add(a,null)}catch(d){r.add(a)}}r.options[i||0].selected=!0,o.innerHTML="Select property ("+u.length+")",n.setConfiguratorPropertyValue(r,s,h,c,l),o.style.display="block",r.style.display="block",s.style.display="block",h.style.display="block",c.style.display="block",l.style.display="block",k.style.display="block",v.style.display="block",y.style.display="none",p.style.display="none",w.style.display="none"}return!1}}(this),this.resetCategories=function(){var n=this.$(this.target+"-cX-ConfiguratorCategories");if(n){if(n.hasChildNodes())while(n.childNodes.length>=1)n.removeChild(n.firstChild);n.style.display="none"}},this.clickSuggestions=function(n){return function(t){return t||(t=window.event),n.resetEditOptionColorFilters(),n.setConfiguratorPropertyValue(),!1}}(this),this.setConfiguratorPropertyValue=function(n,t,i,r,u){var f,s,o,e;n||(n=this.$(this.target+"-cX-ConfiguratorSugestions")),t||(t=this.$(this.target+"-cX-ConfiguratorSugestionsDescription")),i||(i=this.$(this.target+"-cX-ConfiguratorValueText")),r||(r=this.$(this.target+"-cX-ConfiguratorSeeAlso")),u||(u=this.$(this.target+"-cX-ConfiguratorValue")),s=this.$(this.target+"-cX-ConfiguratorOptions"),o=this.getConfigurableObjectDoc(n.value),u.value="",u.style.readonly=!1,this.configuringNetwork?typeof this[n.value]=="function"?(u.style.disabled="disabled",u.style.readonly=!1):f=this.configuringNetwork<this.data.nodes.length?this.data.nodes[this.configuringNetwork][n.value]:this.data.edges[this.configuringNetwork-this.data.nodes.length][n.value]:this.configuringGenome?(e=this.subtracksInfo,isNaN(this.configuringGenome)?this.configuringGenome.match(/:/)?(f=parseInt(this.configuringGenome.split(":")[1]),f=this.data.tracks[e[f].track].data[e[f].index][n.value]):(f=parseInt(this.configuringGenome.replace("track-","")),f=this.data.tracks[e[f].track][n.value]):f=this.data.tracks[e[this.configuringGenome].track].data[e[this.configuringGenome].index][n.value]):typeof this[n.value]=="function"?(i.innerHTML="Current&nbsp;value&nbsp;[&nbsp;<i>function<\/i>&nbsp;]&nbsp;"+this[n.value].length+"&nbsp;parameter(s)",this[n.value].length==0&&(u.style.disabled="disabled",u.style.readonly=!1)):f=this[n.value],u.value=f?JSON.stringify(f):"",this.addPropertyDescription(t,o,n.value),this.addPropertySeeAlsoLinks(r,o),this.addPropertyOptions(i,s,o,n.value,f)},this.resetSugestions=function(){var n=this.$(this.target+"-cX-ConfiguratorSugestions");if(n){if(n.hasChildNodes())while(n.childNodes.length>=1)n.removeChild(n.firstChild);n.style.display="none"}},this.addPropertyDescription=function(n,t,i){var f=t&&t.C?t.C:"",e=t&&t.M?t.M:"";this.resetPropertyDescription(n);var u=this.$cX("img",{id:this.target+"-cX-ConfiguratorSugestionsDescriptionEdit",src:this.imageDir+"pencil.png",alt:"Edit description",title:"Edit description"},{cursor:"default",margin:"2px",width:"10px",height:"10px"}),o=this.$cX("i",{innerHTML:i}),s=this.$cX("span",{id:this.target+"-cX-ConfiguratorSugestionsDescriptionEditSpan",className:"CanvasXpressConfigurator",prop:i,innerHTML:" : "+f}),h=this.$cX("i",{innerHTML:e}),r=this.$cX("span",!1,{className:"CanvasXpressConfigurator"});r.appendChild(document.createTextNode("Description [ ")),r.appendChild(h),r.appendChild(document.createTextNode(" ]")),n.appendChild(r),n.appendChild(this.$cX("br")),n.appendChild(o),n.appendChild(s),n.appendChild(u),this.addEvtListener(u,"click",this.clickEditPropertyDescription,!1)},this.resetPropertyDescription=function(n,t){if(n||(n=this.$(this.target+"-cX-ConfiguratorSugestionsDescription")),t||(t=this.$(this.target+"-cX-ConfiguratorSugestionsDescriptionEdit")),n&&t)for(this.removeEvtListener(t,"click",this.clickEditPropertyDescription,!1);n.childNodes.length>0;){var i=n.childNodes[0];n.removeChild(i)}},this.clickEditPropertyDescription=function(n){return function(t){var r;t||(t=window.event),n.resetPropertyColor(),n.resetPropertyFilter();var e=n.$(n.target+"-cX-Configurator"),u=n.$(n.target+"-cX-ConfiguratorSugestions"),f=n.$(n.target+"-cX-ConfiguratorSugestionsDescriptionEditSpan"),o=n.$(n.target+"-cX-ConfiguratorOptions");if(e&&u&&f&&o&&(o.style.display="none",r=n.adjustedCoordinates(t,u),r)){n.editingDescriptionOn=!0;var c=r.x,l=r.y,i=n.$cX("div",{id:n.target+"-cX-ConfiguratorEditForm",className:"CanvasXpressConfigurator draggable"},{cursor:"move",left:c+"px",top:l+"px",padding:"10px",position:"absolute",width:n.configuratorWidth*.8+"px"}),s=n.$cX("img",{id:n.target+"-cX-ConfiguratorEditFormClose",className:"CanvasXpressConfigurator",src:n.imageDir+"cancel1.png",alt:"Close",title:"Close"}),a=n.$cX("textarea",{id:n.target+"-cX-ConfiguratorEditFormValue",className:"CanvasXpressConfigurator",value:f.prop+f.innerHTML,rows:10},{width:"100%",maxWidth:n.configuratorWidth*.8+"px"}),h=n.$cX("input",{id:n.target+"-cX-ConfiguratorEditFormButton",value:"Submit",type:"button"},{width:"100%",borderRadius:"5px",maxWidth:n.configuratorWidth*.8+"px"});i.appendChild(document.createTextNode("Editing "+u.value)),i.appendChild(s),i.appendChild(n.$cX("br")),i.appendChild(a),i.appendChild(h),n.addEvtListener(s,"click",n.closeEditPropertyDescription,!1),n.addEvtListener(h,"click",n.submitEditPropertyDescription,!1),e.appendChild(i)}}}(this),this.submitEditPropertyDescription=function(n){return function(t){t||(t=window.event);var r=n.$(n.target+"-cX-ConfiguratorSugestions"),i=n.$(n.target+"-cX-ConfiguratorEditFormValue"),u=n.$(n.target+"-cX-ConfiguratorSugestionsDescriptionEditSpan");r&&i&&u&&(i.value=i.value.replace(/\n/g,""),CanvasXpress.doc.P[r.value].C=i.value,u.innerHTML=i.value,alert("New description for:\n - "+r.value+" -\nwas submitted and may apppear\nin new versions of CanvasXpress\nThank you for your contribution")),n.resetEditPropertyDescription()}}(this),this.closeEditPropertyDescription=function(n){return function(t){t||(t=window.event),n.resetEditPropertyDescription()}}(this),this.resetEditPropertyDescription=function(){var n=this.$(this.target+"-cX-ConfiguratorEditForm"),t=this.$(this.target+"-cX-ConfiguratorEditFormClose"),i=this.$(this.target+"-cX-ConfiguratorEditFormButton");n&&t&&i&&(this.addEvtListener(t,"click",this.closeEditPropertyDescription,!1),this.addEvtListener(i,"click",this.submitEditPropertyDescription,!1),n.parentNode.removeChild(n)),this.editingDescriptionOn=!1},this.addPropertySeeAlsoLinks=function(n,t){var r,i,u;if(this.resetPropertySeeAlsoLinks(n),r=this.$cX("span",!1,{className:"CanvasXpressConfigurator"}),r.appendChild(document.createTextNode("See Also: ")),n.appendChild(r),t&&t.S)for(i=0;i<t.S.length;i++)u=this.$cX("a",{href:"javascript:void(0)",innerHTML:t.S[i]}),this.addEvtListener(u,"click",this.clickPropertySeeAlsoLinks,!1),n.appendChild(u),i<t.S.length-1&&n.appendChild(document.createTextNode(", "))},this.clickPropertySeeAlsoLinks=function(n){return function(t){var f,e;t||(t=window.event);var o=n.$(n.target+"-cX-ConfiguratorKey"),r=n.$(n.target+"-cX-ConfiguratorCategories"),s=n.$(n.target+"-cX-ConfiguratorSugestions"),u=t.target||t.srcElement;if(r&&r.style.display=="block"){for(f=CanvasXpress.doc.P[u.innerHTML],e=CanvasXpress.doc.M[f.M].P.sort(),r.value=f.M,i=0;i<e.length;i++)if(e[i]==u.innerHTML)return n.changeCategory(t,i),!1;n.changeCategory(t)}else o&&(o.value=u.innerHTML,n.selectConfig(t,!0));return!1}}(this),this.resetPropertySeeAlsoLinks=function(n){if(n||(n=this.$(this.target+"-cX-ConfiguratorSeeAlso")),n&&n.childNodes)while(n.childNodes.length>0){var t=n.childNodes[0];t.nodeName.toLowerCase()=="a"&&this.removeEvtListener(t,"click",this.clickPropertySeeAlsoLinks,!1),n.removeChild(t)}},this.addPropertyOptions=function(n,t,i,r,u){var h,c,s,a,o,r,f,l,e;if(this.resetPropertyOptions(n,t),h=this.$cX("span",!1,{className:"CanvasXpressConfigurator"}),c=this.$cX("i"),h.appendChild(document.createTextNode("Current value")),i&&i.T&&(i.T=="option"||i.T=="array"||i.T=="boolean")){if(s=this.$cX("div",{id:this.target+"-cX-ConfiguratorOptionsContainer",className:"CanvasXpressConfiguratorOptions"}),e=this.$cX("a",{href:"javascript:void(0)",innerHTML:i.T}),this.addEvtListener(e,"click",this.clickPropertyOptions,!1),h.appendChild(document.createTextNode(" [")),c.appendChild(e),h.appendChild(document.createTextNode(" ")),h.appendChild(c),h.appendChild(document.createTextNode(" ]")),i.T=="array")if(f=i.X?this[i.X]():i.O?i.O:[],a=this.getObjectArray(u),f.length>0)for(o=0;o<f.length;o++)r=this.$cX("input",{type:"checkbox",value:f[o],checked:a.hasOwnProperty(f[o])?!0:!1},{marginLeft:"0px"}),this.addEvtListener(r,"change",this.updatePropertyValue,!1),s.appendChild(document.createTextNode(o+1+". ")),s.appendChild(r),s.appendChild(document.createTextNode(f[o])),s.appendChild(this.$cX("br"));else s.appendChild(this.$cX("br")),s.appendChild(document.createTextNode("This array is user defined")),s.appendChild(this.$cX("br"));else for(f=i.T=="boolean"?["true","false"]:i.X?this[i.X]():i.O?i.O:[],i.X&&i.O&&(f=f.concat(i.O)),o=0;o<f.length;o++)r=this.$cX("a",{href:"javascript:void(0)",innerHTML:f[o]},{padding:"2px"}),this.addEvtListener(r,"click",this.updatePropertyValue,!1),s.appendChild(document.createTextNode(o+1+". ")),s.appendChild(r),s.appendChild(this.$cX("br"));t.appendChild(s)}else i&&i.T&&(h.appendChild(document.createTextNode(" [")),i.T=="color"?(this.configuringNetwork?f=this.configuringNetwork<this.data.nodes.length?this.data.nodes[this.configuringNetwork][r]:this.data.edges[this.configuringNetwork-this.data.nodes.length][r]:this.configuringGenome?(l=this.subtracksInfo,isNaN(this.configuringGenome)?this.configuringGenome.match(/:/)?(f=parseInt(this.configuringGenome.split(":")[1]),f=this.data.tracks[l[f].track].data[l[f].index]):(f=parseInt(this.configuringGenome.replace("track-","")),f=this.data.tracks[l[f].track]):f=this.data.tracks[l[this.configuringGenome].track].data[l[this.configuringGenome].index]):f=this[r],e=this.$cX("a",{id:this.target+"-cX-ConfiguratorValueHREF",href:"javascript:void(0)",innerHTML:i.T},{color:f?this.rgbToHex(this.validateColor(f)):this.foreground}),this.addEvtListener(e,"click",this.addPropertyColor,!1),c.appendChild(e)):i&&i.T=="filter"?(e=this.$cX("a",{id:this.target+"-cX-ConfiguratorValueFilter",href:"javascript:void(0)",innerHTML:i.T,name:r}),e.opts=i.X?this[i.X]():i.O?i.O:[],e.opts.unshift(""),this.addEvtListener(e,"click",this.addPropertyFilter,!1),c.appendChild(e)):c.appendChild(document.createTextNode(i.T)),h.appendChild(document.createTextNode(" ")),h.appendChild(c),h.appendChild(document.createTextNode(" ]")));n.appendChild(h)},this.clickPropertyOptions=function(n){return function(t){t||(t=window.event),n.resetEditPropertyDescription();var i=n.$(n.target+"-cX-ConfiguratorOptions");return i&&(i.style.display="block",i.style.left=t.layerX+"px",i.style.top=t.layerY+"px"),!1}}(this),this.closePropertyOptions=function(n){return function(t){t||(t=window.event),n.handleHideDiv(n.target+"-cX-ConfiguratorOptions")}}(this),this.resetPropertyOptions=function(n,t,i){var u,r;if(n||(n=this.$(this.target+"-cX-ConfiguratorValueText")),t||(t=this.$(this.target+"-cX-ConfiguratorOptions")),n&&n.childNodes&&!i)while(n.childNodes.length>0)r=n.childNodes[0],r.nodeName.toLowerCase()=="a"&&this.removeEvtListener(r,"click",this.clickPropertyOptions,!1),n.removeChild(r);if(t){if(u=this.$(this.target+"-cX-ConfiguratorOptionsContainer"),u){while(u.childNodes.length>0)r=u.childNodes[0],r.nodeName.toLowerCase()=="a"?this.removeEvtListener(r,"click",this.updatePropertyValue,!1):r.nodeName.toLowerCase()=="input"&&r.type=="checkbox"&&this.removeEvtListener(r,"change",this.updatePropertyValue,!1),u.removeChild(r);t.removeChild(u)}t.style.display="none"}},this.addPropertyFilter=function(n){return function(t){t||(t=window.event),n.resetEditPropertyDescription();var r=t.target||t.srcElement,i=n.$(n.target+"-cX-ConfiguratorFilter");n.addAllPropertyFilters(r.name,r.opts),i.style.display="block",i.opts=r.opts,i.style.left=t.layerX+"px",i.style.top=t.layerY+"px"}}(this),this.addAllPropertyFilters=function(n,t){for(var r=this.$(this.target+"-cX-ConfiguratorFilter"),i=0;i<this[n].length;i++)this.insertPropertyFilterRow(r,i,n,t);this.insertPropertyFilterRow(r,this[n].length,n,t)},this.insertPropertyFilterRow=function(n,t,i,r){var s,h,u,e,y,l,a,v,o,p,w;if(n||(n=this.$(this.target+"-cX-ConfiguratorFilter")),n){var o=this.configuratorWidth*.25,f=this.$cX("div",{id:this.target+"-cX-ConfiguratorFilterContainer"+t},{width:this.configuratorWidth*1.05+"px"}),c=this.$cX("select",{id:this.target+"-cX-ConfiguratorFilterSelect"+t,className:"CanvasXpressConfiguratorFilter",param:i,idx:t},{marginRight:"2px",marginLeft:"1px",width:o+"px"});for(r||(r=n.opts),r.sort(),u=0;u<r.length;u++){e=this.$cX("option",{text:r[u],value:r[u]});try{c.add(e,null)}catch(b){c.add(e)}this[i][t]&&r[u]==this[i][t]&&(e.selected=!0)}for(this.addEvtListener(c,"change",this.unsetPropertyFilterRow,!1),s=this.$cX("select",{id:this.target+"-cX-ConfiguratorFilterOp"+t,className:"CanvasXpressConfiguratorFilter",param:i,idx:t},{marginRight:"2px",width:o+"px"}),h=this.getOperators(),u=0;u<h.length;u++){e=this.$cX("option",{text:h[u],value:h[u]});try{s.add(e,null)}catch(b){s.add(e)}this[i+"Op"][t]&&h[u]==this[i+"Op"][t]&&(e.selected=!0)}this.addEvtListener(s,"change",this.unsetPropertyFilterRow,!1),y=this.$cX("img",{src:this.imageDir+"case_sensitive.png"},{width:"10px"}),l=this.$cX("input",{id:this.target+"-cX-ConfiguratorFilterCase"+t,type:"checkbox",param:i,idx:t,alt:"Check for case sensitive",title:"Check for case sensitive"},{width:"10px"}),this[i+"Case"][t]&&(l.checked=!0),this.addEvtListener(l,"change",this.unsetPropertyFilterRow,!1),a=this.$cX("input",{id:this.target+"-cX-ConfiguratorFilterValue"+t,param:i,idx:t,type:"text"},{width:o+"px"}),this[i+"Value"][t]&&(a.value=this[i+"Value"][t]),this.addEvtListener(a,"change",this.unsetPropertyFilterRow,!1),v=this.$cX("img",{id:this.target+"-cX-ConfiguratorFilterMinus"+t,src:this.imageDir+"minus.png",alt:"Remove Filter",title:"Remove Filter",param:i,idx:t},{padding:"9px 2px 2px 2px",cssFloat:"left",cursor:"default",width:"10px"}),this.addEvtListener(v,"click",this.removePropertyFilterRow,!1),o=this.$cX("img",{id:this.target+"-cX-ConfiguratorFilterPlus"+t,src:this.imageDir+"add1.png",alt:"Set Filter",title:"Set Filter",param:i,idx:t},{padding:"7px 2px 2px 2px",cssFloat:"right",cursor:"default",width:"10px"}),this.addEvtListener(o,"click",this.addPropertyFilterRow,!1),p=this.$cX("img",{id:this.target+"-cX-ConfiguratorFilterCheck"+t,src:this.imageDir+"accept.png",alt:"Filter added",title:"Filter added"},{padding:"7px 2px 2px 2px",cssFloat:"right",cursor:"default",width:"10px",display:this[i][t]?"block":"none"}),w=this.$cX("div",{id:this.target+"-cX-ConfiguratorFilterCheckEmpty"+t},{cssFloat:"right",cursor:"default",width:"10px",display:this[i][t]?"none":"block"}),f.appendChild(v),f.appendChild(c),f.appendChild(s),f.appendChild(y),f.appendChild(l),f.appendChild(a),f.appendChild(w),f.appendChild(p),f.appendChild(o),n.appendChild(f)}},this.addPropertyFilterRow=function(n){return function(t){t||(t=window.event);var e=t.target||t.srcElement,u=e.parentNode,i=e.param,r=e.idx,h=n.$(n.target+"-cX-ConfiguratorValue"),c=n.$(n.target+"-cX-ConfiguratorFilterCheck"+r),l=n.$(n.target+"-cX-ConfiguratorFilterCheckEmpty"+r);if(u&&i&&r!=null&&h&&c&&l){var o=u.childNodes[1].value,f=u.childNodes[2].value,a=u.childNodes[4].checked,s=u.childNodes[5].value;o!=""&&(f!=""&&s!=""||f.match("null"))&&(n[i].length>0&&n[i][r]!=null?(n[i][r]=o,n[i+"Op"][r]=f,n[i+"Value"][r]=s,n[i+"Case"][r]=a):(n[i].push(o),n[i+"Op"].push(f),n[i+"Value"].push(s),n[i+"Case"].push(a),n.insertPropertyFilterRow(!1,r+1,i)),h.value='["'+n[i].join('", "')+'"]',c.style.display="block",l.style.display="none")}}}(this),this.removePropertyFilterRow=function(n){return function(t){t||(t=window.event);var r=t.target||t.srcElement,u=r.parentNode,o=u.parentNode,i=r.param,f=r.idx,e=n.$(n.target+"-cX-ConfiguratorValue");u&&i&&f!=null&&e&&(n.resetFilters(i,f),n.resetPropertyFilter(!0),n.addAllPropertyFilters(i,o.opts),e.value=n[i].length>0?'["'+n[i].join('", "')+'"]':"[]")}}(this),this.unsetPropertyFilterRow=function(n){return function(t){var u;t||(t=window.event);var f=[],e=t.target||t.srcElement,i=e.param,r=e.idx;if(i&&r!=null&&n[i].length>0&&n[i][r]){for(n[i][r]=!1,n[i+"Op"][r]=!1,n[i+"Value"][r]=!1,n[i+"Case"][r]=!1,u=0;u<n[i].length;u++)u!=r&&f.push(n[i][u]);var o=n.$(n.target+"-cX-ConfiguratorFilterCheck"+r),s=n.$(n.target+"-cX-ConfiguratorFilterCheckEmpty"+r),h=n.$(n.target+"-cX-ConfiguratorValue");o&&s&&h&&(o.style.display="none",s.style.display="block",h.value=f.length>0?'["'+f.join('", "')+'"]':"[]")}}}(this),this.closePropertyFilter=function(n){return function(t){t||(t=window.event),n.handleHideDiv(n.target+"-cX-ConfiguratorFilter"),n.resetPropertyFilter()}}(this),this.resetPropertyFilter=function(n){var t=this.$(this.target+"-cX-ConfiguratorFilter"),i;if(t){if(t&&t.childNodes)while(t.childNodes.length>3)i=t.childNodes[3],this.removeEvtListener(i.childNodes[0],"click",this.removePropertyFilterRow,!1),this.removeEvtListener(i.childNodes[1],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[2],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[4],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[5],"change",this.unsetPropertyFilterRow,!1),this.removeEvtListener(i.childNodes[8],"click",this.addPropertyFilterRow,!1),t.removeChild(t.childNodes[3]);n||(t.style.display="none")}},this.addPropertyColor=function(n){return function(t){var i,u,s,r,o,h,c;if(t||(t=window.event),n.resetEditPropertyDescription(),i=n.$(n.target+"-cX-ConfiguratorColor"),u=n.$(n.target+"-cX-ConfiguratorValue"),i&&u){s=u.value?n.rgbToHex(n.validateColor(u.value.replace(/[\'\"]/g,""))):n.foreground,n.colorRGBfromString(s);var l=Math.round(n.colorHSV[0]*30),a=Math.round((1-n.colorHSV[1])*100),v=Math.round((1-n.colorHSV[2])*100),f=n.$cX("div",{id:n.target+"-cX-ConfiguratorColorContainer"},{width:"210px",height:"101px",marginTop:"7px"}),e=n.$cX("div",{id:n.target+"-cX-ConfiguratorColorPalette",className:"CanvasXpressConfiguratorColor"},{position:"relative",left:"0px",top:"0px",width:"181px",height:"101px",backgroundImage:"url('"+n.imageDir+"color.png')",backgroundRepeat:"no-repeat",cursor:"crosshair"}),y=n.$cX("div",{id:n.target+"-cX-ConfiguratorColorPaletteCurrent"},{position:"relative",left:l-7+"px",top:a-7+"px",width:"195px",height:"115px",cursor:"crosshair",backgroundImage:"url('"+n.imageDir+"cross.gif')",backgroundRepeat:"no-repeat"});for(e.appendChild(y),r=n.$cX("div",{id:n.target+"-cX-ConfiguratorColorSaturation",className:"CanvasXpressConfiguratorColor"},{position:"relative",left:"188px",top:"-102px",width:"15px",height:"100px",border:"1px solid "+n.skinBorderColor,cursor:"crosshair"}),o=0;o<100;o+=4)h=n.$cX("div",!1,{height:"4px",position:"relative",left:"0px",cursor:"crosshair"}),r.appendChild(h);c=n.$cX("div",{id:n.target+"-cX-ConfiguratorColorSaturationCurrent"},{position:"relative",left:"0px",top:v-108+"px",width:"29px",height:"115px",cursor:"crosshair",backgroundImage:"url('"+n.imageDir+"cross.gif')",backgroundRepeat:"no-repeat",overflow:"hidden"}),r.appendChild(c),f.appendChild(e),f.appendChild(r),i.appendChild(f),n.colorizeSaturationColorDiv(),n.addEvtListener(e,"mousedown",n.registerPalette,!1),n.addEvtListener(r,"mousedown",n.registerSaturation,!1),i.style.display="block",i.style.left=t.layerX+"px",i.style.top=t.layerY+"px"}return!1}}(this),this.registerPalette=function(n){return function(t){if(t||(t=window.event),n.changingColorOn="palette",n.colorHSV[2]==0){n.colorFromHsv(null,null,1);var i=n.$(n.target+"-cX-ConfiguratorColorSaturationCurrent");i&&(i.style.top="-108px")}return n.updateColorValue(t),n.colorizeSaturationColorDiv(),!1}}(this),this.registerSaturation=function(n){return function(t){return t||(t=window.event),n.changingColorOn="saturation",n.updateColorValue(t),!1}}(this),this.updateColorValue=function(n){var u,r,f,e,o,t,i;this.changingColorOn&&(this.changingColorOn=="palette"?(u=this.$(this.target+"-cX-ConfiguratorColorPalette"),r=this.$(this.target+"-cX-ConfiguratorColorPaletteCurrent"),u&&r&&(t=this.adjustedCoordinates(n,u),t&&(f=Math.min(Math.max(0,t.x),181),i=Math.min(Math.max(0,t.y),101),r.style.left=f-7+"px",r.style.top=i-7+"px",this.colorFromHsv(f/30,1-i/100,null),this.colorizeSaturationColorDiv()))):(e=this.$(this.target+"-cX-ConfiguratorColorSaturation"),o=this.$(this.target+"-cX-ConfiguratorColorSaturationCurrent"),e&&o&&(t=this.adjustedCoordinates(n,e),t&&(i=Math.min(Math.max(0,t.y),101),o.style.top=i-108+"px",this.colorFromHsv(null,null,1-i/100)))))},this.colorFromHsv=function(n,t,i){n!=null&&(this.colorHSV[0]=Math.min(Math.max(0,n),6)),t!=null&&(this.colorHSV[1]=Math.min(Math.max(0,t),1)),i!=null&&(this.colorHSV[2]=Math.min(Math.max(0,i),1)),this.colorRGB=this.hsvFromRgb(this.colorHSV[0],this.colorHSV[1],this.colorHSV[2]),this.colorizeCurrentColorDiv()},this.hsvFromRgb=function(n,t,i){if(n==null)return[i,i,i];var f=Math.floor(n),e=f%2?n-f:1-(n-f),r=i*(1-t),u=i*(1-t*e);switch(f){case 0:return[i,u,r];case 1:return[u,i,r];case 2:return[r,i,u];case 3:return[r,u,i];case 4:return[u,r,i];case 5:return[i,r,u]}},this.colorFromRgb=function(n,t,i){if(this.colorRGB){n!=null&&(this.colorRGB[0]=Math.min(Math.max(0,n),1)),t!=null&&(this.colorRGB[1]=Math.min(Math.max(0,t),1)),i!=null&&(this.colorRGB[2]=Math.min(Math.max(0,i),1));var r=this.rgbFromHsv(this.colorRGB[0],this.colorRGB[1],this.colorRGB[2]);r[0]!=null&&(this.colorHSV[0]=r[0]),r[2]!=0&&(this.colorHSV[1]=r[1]),this.colorHSV[2]=r[2],this.colorizeCurrentColorDiv()}},this.rgbFromHsv=function(n,t,i){var f=Math.min(Math.min(n,t),i),u=Math.max(Math.max(n,t),i),r=u-f,e;return r==0?[null,0,u]:(e=n==f?3+(i-t)/r:t==f?5+(n-i)/r:1+(t-n)/r,[e==6?0:e,r/u,u])},this.colorRGBToString=function(){if(this.colorRGB)return(256|Math.round(255*this.colorRGB[0])).toString(16).substr(1)+(256|Math.round(255*this.colorRGB[1])).toString(16).substr(1)+(256|Math.round(255*this.colorRGB[2])).toString(16).substr(1)},this.colorRGBfromString=function(n){var t=n.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return t?(t[1].length===6?this.colorFromRgb(parseInt(t[1].substr(0,2),16)/255,parseInt(t[1].substr(2,2),16)/255,parseInt(t[1].substr(4,2),16)/255):this.colorFromRgb(parseInt(t[1].charAt(0)+t[1].charAt(0),16)/255,parseInt(t[1].charAt(1)+t[1].charAt(1),16)/255,parseInt(t[1].charAt(2)+t[1].charAt(2),16)/255),!0):!1},this.colorizeCurrentColorDiv=function(){var t=this.$(this.target+"-cX-ConfiguratorColorCurrent"),r=this.$(this.target+"-cX-ConfiguratorValue"),u=this.$(this.target+"-cX-ConfiguratorValueHREF"),n,i;t&&r&&u&&(n=this.colorRGBToString(),i=this.hexToRgb("#"+n),t.style.backgroundColor="#"+n,t.innerHTML="&nbsp;&nbsp;"+i,r.value='"'+i+'"',u.style.color="#"+n)},this.colorizeSaturationColorDiv=function(){var u=function(n,t,i,r,u){return"rgb("+n*(1-r/u)*100+"%,"+t*(1-r/u)*100+"%,"+i*(1-r/u)*100+"%)"},r=this.$(this.target+"-cX-ConfiguratorColorSaturation"),i,n,t;if(r&&this.colorHSV&&(i=r.childNodes,n=this.hsvFromRgb(this.colorHSV[0],this.colorHSV[1],1),n))for(t=0;t<i.length-1;t++)i[t].style.backgroundColor=u(n[0],n[1],n[2],t,i.length-1)},this.endColorChange=function(){this.changingColorOn=!1},this.closePropertyColor=function(n){return function(t){t||(t=window.event),n.handleHideDiv(n.target+"-cX-ConfiguratorColor"),n.resetPropertyColor()}}(this),this.resetPropertyColor=function(){var n=this.$(this.target+"-cX-ConfiguratorColor"),t=this.$(this.target+"-cX-ConfiguratorColorPalette"),i=this.$(this.target+"-cX-ConfiguratorColorSaturation");if(n&&t&&i){if(n&&n.childNodes){while(n.childNodes.length>3)n.removeChild(n.childNodes[3]);this.removeEvtListener(t,"mousedown",this.registerPalette,!1),this.removeEvtListener(i,"mousedown",this.registerSaturation,!1)}n.style.display="none"}},this.updatePropertyValue=function(n){return function(t){var r,u,e;t||(t=window.event),n.resetEditPropertyDescription();var f=n.$(n.target+"-cX-ConfiguratorValue"),o=n.$(n.target+"-cX-ConfiguratorOptions"),i=t.target||t.srcElement;if(i.nodeName.toLowerCase()=="input"){for(r=[],u=0;u<i.parentNode.childNodes.length;u++)e=i.parentNode.childNodes[u],e.checked&&r.push(e.value);f.value=r.length>0?'["'+r.join('", "')+'"]':"[]"}else f&&o&&(f.value=i.innerHTML=="true"?i.innerHTML:i.innerHTML=="false"?i.innerHTML:i.innerHTML=="null"?i.innerHTML:'"'+i.innerHTML+'"',o.style.display="none");return!1}}(this),this.clickApplyConfigurator=function(n){return function(t){return n.clickConfigurator(t,!1,!1,!0)}}(this),this.clickConfigurator=function(n){return function(t,i,r,u){var e,f,u,o;if(t||(t=window.event),i||(i=n.$(n.target+"-cX-ConfiguratorSugestions")),r||(r=n.$(n.target+"-cX-ConfiguratorValue")),i&&r){if(n.configuringNetwork)n.configuringNetwork<n.data.nodes.length?typeof n[i.value]=="function"?n[i.value](n.data.nodes[n.configuringNetwork]):n.data.nodes[n.configuringNetwork][i.value]=JSON.parse(r.value):typeof n[i.value]=="function"?n[i.value](n.data.edges[n.configuringNetwork-n.data.nodes.length]):n.data.edges[n.configuringNetwork-n.data.nodes.length][i.value]=JSON.parse(r.value);else if(n.configuringGenome)e=n.subtracksInfo,isNaN(n.configuringGenome)?n.configuringGenome.match(/:/)?(f=parseInt(n.configuringGenome.split(":")[1]),n.data.tracks[e[f].track].data[e[f].index][i.value]=JSON.parse(r.value)):(f=parseInt(n.configuringGenome.replace("track-","")),n.data.tracks[f][i.value]=JSON.parse(r.value)):n.data.tracks[e[n.configuringGenome].track].data[e[n.configuringGenome].index][i.value]=JSON.parse(r.value);else{if(typeof n[i.value]=="function")return n[i.value].length>0&&r&&r.value?(u=JSON.parse(r.value),n[i.value](u)):n[i.value](),n.resetConfigurator(),!1;n[i.value]=JSON.parse(r.value),n.userConfig[i.value]=n[i.value]}u||n.resetConfigurator(),o=i.value.match(/filter(.+)By/),o&&(n.reset(),n.filterData()),n.draw()}return!1}}(this),this.handleHideDiv=function(n){var t=this.$(n);return t&&(t.style.display="none"),!1},this.resetOptionColorFilters=function(){this.resetPropertyOptions(!1,!1,!0),this.resetPropertyColor(),this.resetPropertyFilter()},this.resetEditOptionColorFilters=function(){this.resetEditPropertyDescription(),this.resetPropertyOptions(!1,!1,!0),this.resetPropertyFilter()},this.resetConfigurator=function(){this.configuringOn&&this.configuringOn!="docked"&&(this.resetEditOptionColorFilters(),this.resetPropertyDescription(),this.resetPropertySeeAlsoLinks(),this.editingDescriptionOn=!1,this.configuratorLastState=!1,this.configuringOn=!1,this.configuringNetwork=!1,this.configuringGenome=!1,this.addRemoveConfiguratorListeners("removeEvtListener"),this.removeTarget(this.target+"-cX-Configurator"))}},CanvasXpress.prototype.initAcknowlegments=function(){this.addAcknowledgementDiv=function(){var n,t,i,r;if(this.$(this.target+"canvasXpressAcknowledgementDiv")){this.setAcknowledgementVisibility();return}n=document.createElement("div"),n.id=this.target+"canvasXpressAcknowledgementDiv",n.style.display=this.acknowledgment?"block":"none",n.style.width=this.width+"px",n.style.cssFloat="left",n.style.position="relative",n.style.zIndex=9999,this.setAcknowledgementPosition(n),t=document.createElement("img"),t.src=this.imageDir+this.acknowledgementIcon,t.style.margin="2px",t.alt="Graphs powered by canvasXpress",t.title="Graphs powered by canvasXpress",t.style.cssFloat="right",i=document.createElement("a"),i.href="http://canvasxpress.org",i.target="_blank",i.style.cssFloat="right",i.appendChild(t),n.appendChild(i),r=this.$("south-wrapper-"+this.target),r&&r.appendChild(n)},this.resizeAcknowledgementDiv=function(){var n=this.$(this.target+"canvasXpressAcknowledgementDiv");n&&(n.style.width=this.width+"px")},this.setAcknowledgementVisibility=function(){var n=this.$(this.target+"canvasXpressAcknowledgementDiv");n&&(n.style.display=this.acknowledgment?"block":"none",this.setAcknowledgementPosition(n))},this.setAcknowledgementPosition=function(n){n&&(this.acknowledgementIconPosition=="inside"?(n.style.top=this.citation?(this.citationFontSize*this.citationScaleFontFactor+36)*-1+"px":"-31px",n.style.right="3px"):(n.style.top="0px",n.style.right="0px"))},this.addAcknowledgementDiv()},CanvasXpress.prototype.initCodeInfo=function(){this.addInfoCodeDiv=function(){var n,t,i,r;this.$(this.target+"canvasXpressCode")||(n=document.createElement("div"),n.id=this.target+"canvasXpressInfoDiv",n.style.display="none",n.style.fontFamily="arial,tahoma,sans-serif",n.style.fontSize="small",t=document.createElement("div"),t.id=this.target+"canvasXpressCode",t.style.display="none",t.style.fontFamily="arial,tahoma,sans-serif",t.style.fontSize="small",i=this.$("north-wrapper-"+this.target),r=this.$("south-wrapper-"+this.target),i&&i.appendChild(n),r&&r.appendChild(t))},this.clearCodeDiv=function(){var n=this.$(this.target+"canvasXpressCode"),t,i;if(n&&(t=n.childNodes,t))for(i=0;i<t.length;i++)n.removeChild(t[i]);n.style.display="none"},this.updateCodeDiv=function(){var i=this.$(this.target+"canvasXpressCode"),n=this.cloneObject(this.data),r=this.codeType=="pretty"?this.prettyJSON(n):JSON.stringify(n),u=this.codeType=="pretty"?this.prettyJSON(this.userConfig):JSON.stringify(this.userConfig),t;i&&(this.clearCodeDiv(),t="",this.codeType=="tab"?(n=document.createElement("span"),t=this.target+"\t"+r+"\t"+u+"\n"):this.codeType=="compact"?(n=document.createElement("span"),t='new CanvasXpress("'+this.target+'", '+r+", "+u+")\n"):(n=document.createElement("pre"),t='new CanvasXpress("'+this.target+'", '+r+", "+u+")\n"),n.style.clear="both",n.innerHTML=t,i.appendChild(n),i.style.display="block")},this.updateInfoDiv=function(n){var t=this.$(this.target+"canvasXpressInfoDiv");t&&n&&(t.innerHTML=n)},this.showDiv=function(n){var t=this.$(this.target+"canvasXpress"+n);t&&(t.style.display="block")},this.hideDiv=function(n){var t=this.$(this.target+"canvasXpress"+n);t&&(t.style.display="none")},this.showCodeDiv=function(){this.showDiv("Code")},this.hideCodeDiv=function(){this.hideDiv("Code")},this.showInfoDiv=function(){this.showDiv("InfoDiv")},this.hideInfoDiv=function(){this.hideDiv("InfoDiv")},this.initializeCodeInfo=function(){this.addInfoCodeDiv()},this.initializeCodeInfo()},CanvasXpress.prototype.initDataFilter=function(){this.addDataFilterDiv=function(){var r,u,f,e;if(!this.$(this.target+"-cX-DataFilter")){var v=this.dataFilterLastX!=null?parseInt(this.dataFilterLastX):-this.canvas.width*.5,y=this.dataFilterLastY!=null?parseInt(this.dataFilterLastY):this.canvas.height*.5,p=this.graphType=="Genome"?60:81;this.dataFilterHeight=this.canvas.height-p,this.activeAccordion=null;var i=this.$cX("div",{id:this.target+"-cX-DataFilter",className:this.applicationLook?"CanvasXpressDataFilter fixed":"CanvasXpressDataFilter draggable-container"},{top:y+"px",left:v+"px",display:"none",zIndex:1e4}),t=this.$cX("div",{id:this.target+"-cX-DataFilterToolbar",className:this.applicationLook?"CanvasXpressDataFilterToolbar fixed":"CanvasXpressDataFilterToolbar draggable"},{width:this.dataFilterWidth+"px"}),w=this.$cX("span",{innerHTML:"Filters",className:"CanvasXpressDataFilterToolbarText"}),o=this.$cX("img",{id:this.target+"-cX-DataFilterKeyFlash",className:"CanvasXpressDataFilterToolbarImage",src:this.filterFlashingOn?this.imageDir+"lightbulb.png":this.imageDir+"lightbulb_off.png",alt:this.filterFlashingOn?"Turn off Flashing":"Turn on Flashing",title:this.filterFlashingOn?"Turn off Flashing":"Turn on Flashing"},{display:this.graphType=="Network"?"block":"none"});this.isIE&&(o.style.marginTop="-10px"),r=this.$cX("img",{id:this.target+"-cX-DataFilterKeyReset",className:"CanvasXpressDataFilterToolbarImage",src:this.imageDir+"funnel_cross.png",alt:"Reset filters",title:"Reset filters"}),this.isIE&&(r.style.marginTop="-10px"),u=this.$cX("img",{id:this.target+"-cX-DataFilterKeyDock",className:"CanvasXpressDataFilterToolbarImage",src:this.applicationLook?this.imageDir+"unpin.png":this.imageDir+"pin.png",alt:this.applicationLook?"Undock":"Dock",title:this.applicationLook?"Undock":"Dock",state:this.applicationLook?"docked":"free"}),this.isIE&&(u.style.marginTop="-10px"),f=this.$cX("img",{id:this.target+"-cX-DataFilterKeyClose",className:"CanvasXpressDataFilterToolbarImage",src:this.imageDir+"cancel1.png",alt:"Close",title:"Close"}),this.isIE&&(f.style.marginTop="-10px");var n=this.$cX("div",{id:this.target+"-cX-DataFilterContainer",className:"CanvasXpressDataFilterContainer"},{width:this.dataFilterWidth+"px"}),s=this.$cX("div",{id:this.target+"-cX-DataFilterVariableHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType.match(/Genome|Network/)?"none":"block"}),b=this.$cX("div",{id:this.target+"-cX-DataFilterVariableContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),k=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Variables",className:"CanvasXpressDataFilterText"}),h=this.$cX("div",{id:this.target+"-cX-DataFilterSampleHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType.match(/Genome|Network/)?"none":"block"}),d=this.$cX("div",{id:this.target+"-cX-DataFilterSampleContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),g=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Samples",className:"CanvasXpressDataFilterText"}),c=this.$cX("div",{id:this.target+"-cX-DataFilterNodeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType=="Network"?"block":"none"}),nt=this.$cX("div",{id:this.target+"-cX-DataFilterNodeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),tt=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nodes",className:"CanvasXpressDataFilterText"}),l=this.$cX("div",{id:this.target+"-cX-DataFilterEdgeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType=="Network"?"block":"none"}),it=this.$cX("div",{id:this.target+"-cX-DataFilterEdgeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),rt=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edges",className:"CanvasXpressDataFilterText"}),a=this.$cX("div",{id:this.target+"-cX-DataFilterGenomeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType=="Genome"?"block":"none"}),ut=this.$cX("div",{id:this.target+"-cX-DataFilterGenomeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),ft=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Features",className:"CanvasXpressDataFilterText"});t.appendChild(w),t.appendChild(f),t.appendChild(u),t.appendChild(r),t.appendChild(o),s.appendChild(k),h.appendChild(g),c.appendChild(tt),l.appendChild(rt),a.appendChild(ft),n.appendChild(s),n.appendChild(b),n.appendChild(h),n.appendChild(d),n.appendChild(c),n.appendChild(nt),n.appendChild(l),n.appendChild(it),n.appendChild(a),n.appendChild(ut),i.appendChild(t),i.appendChild(n),e=this.$("east-wrapper-"+this.target),e&&(e.appendChild(i),this.addRemoveDataFilterListeners("addEvtListener"))}},this.addRemoveDataFilterListeners=function(n){var t=this.$(this.target+"-cX-DataFilterToolbar"),i=this.$(this.target+"-cX-DataFilterKeyFlash"),r=this.$(this.target+"-cX-DataFilterKeyReset"),u=this.$(this.target+"-cX-DataFilterKeyDock"),f=this.$(this.target+"-cX-DataFilterKeyClose"),e=this.$(this.target+"-cX-DataFilterVariableHeader"),o=this.$(this.target+"-cX-DataFilterSampleHeader"),s=this.$(this.target+"-cX-DataFilterNodeHeader"),h=this.$(this.target+"-cX-DataFilterEdgeHeader"),c=this.$(this.target+"-cX-DataFilterGenomeHeader");t&&i&&r&&u&&f&&e&&o&&s&&h&&c&&(this[n](t,"mousedown",this.registerMousemove,!1),this[n](i,"click",this.flashDataFilter,!1),this[n](r,"click",this.resetDataFilter,!1),this[n](u,"click",this.dockUndockDataFilter,!1),this[n](f,"click",this.hideDataFilter,!1),this[n](e,"click",this.activateAccordion,!1),this[n](o,"click",this.activateAccordion,!1),this[n](s,"click",this.activateAccordion,!1),this[n](h,"click",this.activateAccordion,!1),this[n](c,"click",this.activateAccordion,!1))},this.flashDataFilter=function(n){return function(t){t||(t=window.event);var i=n.getTargetEvent(t);return n.filterFlashingOn?(n.filterFlashingOn=!1,i.src=n.imageDir+"lightbulb_off.png",i.alt="Turn on Flashing",i.title="Turn on Flashing"):(n.filterFlashingOn=!0,i.src=n.imageDir+"lightbulb.png",i.alt="Turn off Flashing",i.title="Turn off Flashing"),!1}}(this),this.activateAccordion=function(n){return function(t,i){var r,u;return t||(t=window.event),r=n,i||(i=n.getTargetEvent(t)),i&&(i.tagName.toLowerCase()=="span"&&(i=i.parentNode),i.className="CanvasXpressDataFilterHeadActive",i.firstChild.className="CanvasXpressDataFilterTextActive",u=i.nextSibling,u&&setTimeout(function(){if(r.activeAccordion&&u.id==r.activeAccordion.id&&(u=!1),r.transitionAccordion((new Date).getTime(),250,u,r.activeAccordion),r.activeAccordion){var n=r.activeAccordion.previousSibling;n.className="CanvasXpressDataFilterHead",n.firstChild.className="CanvasXpressDataFilterText"}r.activeAccordion=u},33)),!1}}(this),this.resizeDataFilterForScroller=function(n){var r=this.$(this.target+"-cX-DataFilter"),u=this.$(this.target+"-cX-DataFilterToolbar"),f=this.$(this.target+"-cX-DataFilterContainer"),e=this.$(this.target+"-cX-DataFilterVariableHeader"),o=this.$(this.target+"-cX-DataFilterVariableContent"),s=this.$(this.target+"-cX-DataFilterSampleHeader"),h=this.$(this.target+"-cX-DataFilterSampleContent"),c=this.$(this.target+"-cX-DataFilterNodeHeader"),l=this.$(this.target+"-cX-DataFilterNodeContent"),a=this.$(this.target+"-cX-DataFilterEdgeHeader"),v=this.$(this.target+"-cX-DataFilterEdgeContent"),y=this.$(this.target+"-cX-DataFilterGenomeHeader"),p=this.$(this.target+"-cX-DataFilterGenomeContent"),i,t;if(r&&u&&f&&e&&o&&s&&h&&c&&l&&a&&v&&y&&p)for(this.dataFilterScroller==n?!0:!1,i=[r,u,f,e,o,s,h,c,l,a,v,y,p],t=0;t<i.length;t++)i[t].style.width=n?parseInt(i[t].style.width)+18+"px":parseInt(i[t].style.width)-18+"px"},this.moveDataFilter=function(n){var o,t=this.$(this.target+"-cX-DataFilter"),u=this.$(this.target+"-cX-DataFilterToolbar"),i=this.$(this.target+"-cX-DataFilterKeyDock"),f=this.$(this.remoteParentId+"-canvasXpressRemoteWindow"),p=this.$("north-container-"+this.target),e=this.$("south-container-"+this.target),h=this.$("west-container-"+this.target),c=this.$("middle-container-"+this.target),l=this.$("east-container-"+this.target),a=this.$("east-handler-"+this.target),v=this.$("east-wrapper-"+this.target),s=this,y,r;t&&u&&i&&p&&e&&h&&c&&l&&a&&v&&(y=u.clientWidth-this.dataFilterWidth+2,o=parseInt(p.clientHeight)+this.canvas.height+parseInt(e.clientHeight),i.state!="free"||n?(u.className="CanvasXpressDataFilterToolbar draggable",i.src=this.imageDir+"pin.png",i.alt="Dock",i.title="Dock",i.state="free",this.dataFilterLastState="free",n&&(delete this.dataFilterLastState,this.dataFilterLastX=null,this.dataFilterLastY=null,this.fade(t,500,function(){s.resetFade(t),t.style.display="none",t.style.width=s.dataFilterWidth+"px",t.style.height=s.canvas.height+"px"})),a.style.display="none",r=parseInt(h.style.width)+this.canvas.width,f&&this.resizeMove(f,0,0,Math.max(r+7,parseInt(e.clientWidth))+48,o+54),this.resizeMove(c,0,0,r+7,this.canvas.height),this.resizeMove(l,0,0,7,this.canvas.height),this.resizeMove(v,0,0,0,this.canvas.height),n||this.resizeMove(t,0,0,0,this.canvas.height)):(u.className="CanvasXpressDataFilterToolbar fixed",i.src=this.imageDir+"unpin.png",i.alt="Undock",i.title="Undock",i.state="docked",this.dataFilterLastState="docked",this.dataFilterLastX=t.style.left,this.dataFilterLastY=t.style.top,a.style.display="block",r=parseInt(h.style.width)+this.canvas.width+u.clientWidth+7+2,f&&this.resizeMove(f,0,0,Math.max(r,parseInt(e.clientWidth))+48,o+54),this.resizeMove(c,0,0,r,this.canvas.height),this.resizeMove(l,0,0,this.dataFilterWidth+y+7,this.canvas.height),this.resizeMove(v,0,0,this.dataFilterWidth+y,this.canvas.height),this.resizeMove(t,0,0,this.dataFilterWidth,this.canvas.height)),f&&setTimeout(function(){s.resizeExtContainer(Math.max(r+7,parseInt(e.clientWidth))+48,o+54)},500))},this.updateDataFilter=function(){var i=this,f=function(n,t,r,u,f){i[n].push(f!=null?u+":::"+f:u),i[n+"Op"].push({min:">=",max:"<=",like:"like"}[r]),i[n+"Case"].push(!1),r=="like"?i[n+"Value"].push("^"+i.toDoFilter[t][u][r].join("$|^")+"$"):i[n+"Value"].push(i.toDoFilter[t][u][r])},s,n,t,r,u,o,e;if(this.filteringStringOn||this.filteringNumericOn){this.resetFilters(),s=!1;for(n in this.toDoFilter)for(t in this.toDoFilter[n])for(r in this.toDoFilter[n][t])u=this.toDoFilter[n][t].ref,r!="ref"&&(n=="sample"?f("filterSmpBy",n,r,t,u):n=="variable"?f("filterVarBy",n,r,t,u):n=="node"?f("filterNodeBy",n,r,t,u):n=="edge"?f("filterEdgeBy",n,r,t,u):n=="feature"&&f("filterFeatureBy",n,r,t,u));if(this.reset(),this.filterData(),this.graphType=="Network"&&this.filterFlashingOn){for(o=[],e=0;e<this.data.nodes.length;e++)this.data.nodes[e].hide||o.push(this.data.nodes[e].id);this.flashNode(o,!1,5)}else this.draw()}},this.showDataFilter=function(n){return function(t){var i,f,r,u;return t||(t=window.event),i=n.$(n.target+"-cX-DataFilter"),i&&(n.dataFilterLastState&&n.dataFilterLastState=="docked"&&(f=n.$("east-handler-"+n.target),n.clickViewport(t,f)),i.style.left=="0px"&&i.style.top=="0px"&&(r=n.$("west-container-"+n.target),u=n.$("middle-container-"+n.target),r&&u&&(u.style.width=parseInt(r.clientWidth)+n.canvas.width+n.dataFilterWidth+7+"px")),n.activeTarget&&(n.activeTarget.style.zIndex=1e4),n.activeTarget=i,i.style.display="block",n.loadDataFilter(),i.style.zIndex=10001),!1}}(this),this.removeGenericDataFilterListenersOrReset=function(n){var e=[],i=[],h,c,l,a,v,u,f,k,t,y,s;switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Area":case"AreaLine":case"Dotplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Boxplot":case"Correlation":case"Pie":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Candlestick":case"Circular":h=this.$(this.target+"-cX-DataFilterSampleContent"),c=this.$(this.target+"-cX-DataFilterVariableContent"),h&&c&&(e.push(h,c),i.push(this.getSampleData(!0)),i.push(this.getVariableData(!0)));break;case"Venn":return;case"Network":l=this.$(this.target+"-cX-DataFilterNodeContent"),a=this.$(this.target+"-cX-DataFilterEdgeContent"),l&&a&&(e.push(l,a),i.push(this.getNodeData(!0)),i.push(this.getEdgeData(!0)));break;case"Genome":v=this.$(this.target+"-cX-DataFilterGenomeContent"),v&&(e.push(v),i.push(this.getFeatureData(!0)))}for(u=0;u<i.length;u++){var nt=e[u],b=i[u],o=this.getKeys(b);for(o.sort(),f=0;f<o.length;f++)if(k=b[o[f]].t,t=o[f].replace(/\W/g,"_"),k=="string")y=this.$(this.target+":"+t+":cX-DataFilterInput"),s=this.$(this.target+":"+t+":cX-DataFilterScroll"),s&&y&&(n?(y.value="",this.resetSelectStringFilter(s)):this.addRemoveNumericDataFilterListeners("removeEvtListener",s));else{var p=this.$(this.target+":"+t+":cX-DataFilterMin"),d=this.$(this.target+":"+t+":cX-DataFilterMinLabel"),r=this.$(this.target+":"+t+":cX-DataFilterRange"),w=this.$(this.target+":"+t+":cX-DataFilterMax"),g=this.$(this.target+":"+t+":cX-DataFilterMaxLabel");p&&d&&r&&w&&g&&(n?(p.style.left="0px",d.innerHTML=this.bestFormatNumber(r.min,r.decis),r.style.left="0px",r.style.width=this.dataFilterWidth-42+"px",w.style.left="0px",g.innerHTML=this.bestFormatNumber(r.max,r.decis)):this.addRemoveNumericDataFilterListeners("removeEvtListener",p,w))}}},this.loadDataFilter=function(){this.toDoFilter||(this.toDoFilter={});switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Area":case"AreaLine":case"Dotplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Boxplot":case"Correlation":case"Pie":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Candlestick":case"Circular":return this.loadDataFilterSmpVar();case"Venn":return;case"Network":return this.loadDataFilterNetwork();case"Genome":return this.loadDataFilterGenome()}},this.loadDataFilterGeneric=function(n,t,i){var u=this.getKeys(i),r;for(u.sort(),t.loaded||(t.loaded={}),r=0;r<u.length;r++){var f=this.getKeys(i[u[r]].o),o=i[u[r]].t,e=i[u[r]].r;o=="string"?t.loaded[u[r]]||(t.appendChild(this.createStringFilter(n,u[r],f,e)),t.loaded[u[r]]=!0):t.loaded[u[r]]||(t.appendChild(this.createNumericFilter(n,u[r],f,e)),t.loaded[u[r]]=!0)}},this.loadDataFilterSmpVar=function(){var n=this.$(this.target+"-cX-DataFilterSampleContent"),t=this.$(this.target+"-cX-DataFilterVariableContent");n&&t&&(this.loadDataFilterGeneric("sample",n,this.getSampleData(!0)),this.loadDataFilterGeneric("variable",t,this.getVariableData(!0)))},this.loadDataFilterNetwork=function(){var n=this.$(this.target+"-cX-DataFilterNodeContent"),t=this.$(this.target+"-cX-DataFilterEdgeContent");n&&t&&(this.loadDataFilterGeneric("node",n,this.getNodeData(!0)),this.loadDataFilterGeneric("edge",t,this.getEdgeData(!0)))},this.loadDataFilterGenome=function(){var n=this.$(this.target+"-cX-DataFilterGenomeContent");n&&this.loadDataFilterGeneric("feature",n,this.getFeatureData(!0))},this.createNumericFilter=function(n,t,i,r){var l=function(n){var t=1e6;return((n*t-parseInt(n)*t)/t).toString().replace(/\./,"").length-1};i.sort(function(n,t){return n-t});var u=t.replace(/\W/g,"_"),f=this.$cX("div",{id:this.target+":"+u+":cX-DataFilterContainer",className:"CanvasXpressDataFilterContainerHoverable"}),a=this.$cX("div",{innerHTML:t},{width:this.dataFilterWidth-12+"px",margin:"5px"}),o=this.$cX("div",!1,{width:this.dataFilterWidth-12+"px",height:"14px",margin:"2px"}),s=this.$cX("div",{id:this.target+":"+u+":cX-DataFilterRange",className:"CanvasXpressDataFilterContainerRange",min:parseFloat(i[0]),max:parseFloat(i[i.length-1]),range:i[i.length-1]-i[0],units:(i[i.length-1]-i[0])/(this.dataFilterWidth-42),decis:l(i[i.length-1]-i[0]),filter:n,ref:r,uvalue:t},{width:this.dataFilterWidth-42+"px"}),v=this.$cX("div",{id:this.target+":"+u+":cX-DataFilterMinLabel",innerHTML:this.bestFormatNumber(i[0],s.decis)},{marginLeft:"2px",cssFloat:"left"}),y=this.$cX("div",{id:this.target+":"+u+":cX-DataFilterMaxLabel",innerHTML:this.bestFormatNumber(i[i.length-1],s.decis)},{marginRight:"2px",cssFloat:"right"}),e=this.$cX("div",{className:"CanvasXpressDataFilterContainerNumeric"},{width:this.dataFilterWidth-14+"px"}),h=this.$cX("div",{id:this.target+":"+u+":cX-DataFilterMin",className:"CanvasXpressDataFilterContainerMin"},{left:"0px"}),c=this.$cX("div",{id:this.target+":"+u+":cX-DataFilterMax",className:"CanvasXpressDataFilterContainerMax"},{left:"0px"});return o.appendChild(v),o.appendChild(y),e.appendChild(h),e.appendChild(s),e.appendChild(c),f.appendChild(a),f.appendChild(o),f.appendChild(e),this.addRemoveNumericDataFilterListeners("addEvtListener",h,c),f},this.addRemoveNumericDataFilterListeners=function(n,t,i){n&&t&&i&&(this[n](t,"mousedown",this.mousedownNumericFilter,!1),this[n](i,"mousedown",this.mousedownNumericFilter,!1))},this.mousedownNumericFilter=function(n){return function(t){t||(t=window.event);var i=n.getTargetEvent(t);return i&&(n.filteringNumericOn=i,n.xMouseDown=t.clientX,n.yMouseDown=t.clientY),!1}}(this),this.updateNumericFilter=function(n){var u,y,s,c,t,e,o,v,h,f;if(this.filteringNumericOn&&(this.cancelEvent(n),u=this.filteringNumericOn,u.id.match(/cX-DataFilterMin/)?(y=!0,s=u.id,c=u.id.replace("cX-DataFilterMin","cX-DataFilterMax"),t=u.id.replace("cX-DataFilterMin","cX-DataFilterRange"),e=u.id.replace("cX-DataFilterMin","cX-DataFilterMinLabel"),o=u.id.replace("cX-DataFilterMin","cX-DataFilterMaxLabel")):(y=!1,c=u.id,s=u.id.replace("cX-DataFilterMax","cX-DataFilterMin"),t=u.id.replace("cX-DataFilterMax","cX-DataFilterRange"),e=u.id.replace("cX-DataFilterMax","cX-DataFilterMinLabel"),o=u.id.replace("cX-DataFilterMax","cX-DataFilterMaxLabel")),s=this.$(s),c=this.$(c),t=this.$(t),e=this.$(e),o=this.$(o),s&&c&&t&&e&&o)){var a=n.clientX-this.xMouseDown,l=this.dataFilterWidth-42,r=y?parseInt(t.style.width)-a:parseInt(t.style.width)+a,i=parseInt(s.style.left)+a,p=this.absoluteCoordinates(s),w=this.absoluteCoordinates(c);y?(i>0&&r>0?(this.xMouseDown=n.clientX,i=Math.max(0,Math.min(l,i)),r=Math.max(0,Math.min(l,r))):i>0?(i-=a,r=w.x-p.x-14):(r+=i,i=0),v=Math.min(t.units*i+t.min,parseFloat(o.innerHTML)),s.style.left=i+"px",t.style.left=i+"px",t.style.width=r+"px",c.style.left=i+"px",e.innerHTML=this.bestFormatNumber(v,t.decis)):(v=Math.max(Math.min(t.units*(i+r)+t.min,t.max),parseFloat(e.innerHTML)),i+r<=l&&r>=0?(this.xMouseDown=n.clientX,i=Math.max(0,Math.min(l,i)),r=Math.max(0,Math.min(l-i,r))):i+r>l&&(i-=a,r=l-i),t.style.width=r+"px",o.innerHTML=this.bestFormatNumber(v,t.decis)),h=t.uvalue,f=t.filter,e.innerHTML!=t.min.toString()||o.innerHTML!=t.max.toString()?(this.toDoFilter[f]||(this.toDoFilter[f]={}),this.toDoFilter[f][h]||(this.toDoFilter[f][h]={}),e.innerHTML!=t.min.toString()&&(this.toDoFilter[f][h].min=parseFloat(e.innerHTML)),o.innerHTML!=t.max.toString()&&(this.toDoFilter[f][h].max=parseFloat(o.innerHTML)),t.ref!=null&&(this.toDoFilter[f][h].ref=t.ref)):this.toDoFilter[f]&&this.toDoFilter[f][h]&&delete this.toDoFilter[f][h],this.updateDataFilter()}return!1},this.endNumericFilter=function(){this.filteringNumericOn&&(this.filteringNumericOn=!1)},this.createStringFilter=function(n,t,i,r){var u,c,l;i.sort(),i.unshift("(All) "+i.length+" values"),i.push("");var f=t.replace(/\W/g,"_"),e=this.$cX("div",{id:this.target+":"+f+":cX-DataFilterContainer",className:"CanvasXpressDataFilterContainerHoverable"}),a=this.$cX("div",{innerHTML:t},{width:"98%",margin:"5px"}),v=this.$cX("input",{id:this.target+":"+f+":cX-DataFilterInput",type:"text"},{cursor:"default",width:"98%",marginLeft:"3px"}),o=this.$cX("div",{id:this.target+":"+f+":cX-DataFilterMask",className:"CanvasXpressDataFilterContainerMask"},{width:"96%",height:"80px"}),s=this.$cX("div",{id:this.target+":"+f+":cX-DataFilterScroll",filter:n,uvalue:t,values:i,selected:{0:!0},ref:r,skey:f,last:0},{width:"96%",height:(i.length+1)*16+"px"}),h=this.$cX("div",{id:this.target+":"+f+":cX-DataFilterOptions"},{width:"110%",margin:"2px",position:"relative"});for(u=0;u<Math.min(5,i.length);u++)c=i[u].length>30?i[u].substr(0,30)+" ...":i[u],l=this.$cX("div",{id:this.target+":"+f+":cX-DataFilterItem-"+u,className:u==0?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem",innerHTML:c,alt:i[u],title:i[u],index:u}),h.appendChild(l);return s.appendChild(h),o.appendChild(s),e.appendChild(a),e.appendChild(v),e.appendChild(o),this.addRemoveStringDataFilterListeners("addEvtListener",o),e},this.addRemoveStringDataFilterListeners=function(n,t){n&&t&&(this[n](t,"scroll",this.scrollStringFilter,!1),this[n](t,"mousedown",this.registerStringFilter,!1),this[n](t,"mouseup",this.endStringFilter,!1))},this.scrollStringFilter=function(n){return function(t,i){var r,e,i;t||(t=window.event),i||(i=this);var u=i.firstChild,s=u.firstChild,o=u.skey,f=Math.max(0,Math.min(Math.floor(i.scrollTop/16),u.values.length-5));for(s.style.top=i.scrollTop+"px",r=0;r<Math.min(5,u.values.length);r++)e=n.$(n.target+":"+o+":cX-DataFilterItem-"+r),e&&(i=u.values[f+r].length>30?u.values[f+r].substr(0,30)+" ...":u.values[f+r],e.className=u.selected[f+r]?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem",e.innerHTML=i,e.alt=u.values[f+r],e.title=u.values[f+r],e.index=f+r);return n.filteringStringOn&&n.updateSelectStringFilter(!1,n.$(n.target+":"+o+":cX-DataFilterItem-4"),!0),!1}}(this),this.registerStringFilter=function(n){return function(t){t||(t=window.event);var i=n.getTargetEvent(t);return i.id.match(/cX-DataFilterMask/)||(n.$(i.parentNode.id.replace("cX-DataFilterOptions","cX-DataFilterInput")).value="",n.updateSelectStringFilter(!1,i,t.shiftKey,t.ctrlKey),n.filteringStringOn=i),!1}}(this),this.endStringFilter=function(n){return function(t,i){var o;if(t||(t=window.event),!i&&n.filteringStringOn&&(i=n.filteringStringOn.parentNode.parentNode),i){var f=i.selected,r=i.filter,u=i.uvalue,e=i.ref,s=i.values;if(f[0])n.toDoFilter[r]&&n.toDoFilter[r][u]&&delete n.toDoFilter[r][u];else{n.toDoFilter[r]||(n.toDoFilter[r]={}),n.toDoFilter[r][u]||(n.toDoFilter[r][u]={like:[]}),n.toDoFilter[r][u].like=[];for(o in f)n.toDoFilter[r][u].like.push(s[o]);e!=null&&(n.toDoFilter[r][u].ref=e)}return n.filteringStringOn=!0,n.updateDataFilter(),n.filteringStringOn=!1,!1}}}(this),this.updateStringFilter=function(n){var t=this.getTargetEvent(n),i=this.filteringStringOn?this.filteringStringOn.id.replace(/-\d$/,""):"";t.id.match(i)&&this.updateSelectStringFilter(!1,t,!0)},this.updateSelectStringFilter=function(n,t,i,r){var l,e,u;if(n)if(l=this.$(n),e=this.$(n.replace("cX-DataFilterInput","cX-DataFilterScroll")),l.value){var o=0,h=e.firstChild,v=h.childNodes[0].index,c=null,f=0;for(e.selected={},u=1;u<e.values.length-1;u++)e.values[u].toLowerCase().match(l.value.toLowerCase())&&(c||(c=u,f=u*16),e.selected[u]=!0,o++);o+2==e.values.length&&(e.selected={0:!0},c=0),c!=null&&(e.parentNode.scrollTop=f,this.scrollStringFilter(!1,e.parentNode)),this.endStringFilter(!1,e)}else this.resetSelectStringFilter(e),this.endStringFilter(!1,e);else if(t){var s=t.index,h=t.parentNode,f=t.parentNode.parentNode,a=f.last,y=f.selected,p=f.values,v=h.childNodes[0].index,o=0;if(f.selected={},f.selected[s]=!0,i)if(s>a)for(u=a;u<=s;u++)f.selected[u]=!0,o++;else for(u=s;u<=a;u++)f.selected[u]=!0,o++;else if(r){f.last=s;for(u in y)f.selected[u]=!0,o++}else f.last=s;for(o>0&&delete f.selected[0],delete f.selected[p.length-1],u=0;u<h.childNodes.length;u++)h.childNodes[u].className=f.selected[u+v]?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem"}},this.resetSelectStringFilter=function(n){if(n){n.selected={0:!0};var t=n.parentNode;t.scrollTop=0,this.scrollStringFilter(!1,t)}},this.hideDataFilter=function(n){return function(t){return t||(t=window.event),n.moveDataFilter(!0),!1}}(this),this.dockUndockDataFilter=function(n){return function(t){t||(t=window.event);var i=n.$(n.target+"-cX-DataFilter");return i&&n.moveDataFilter(),!1}}(this),this.resizeDataFilter=function(){var n=this.graphType=="Genome"?60:81;this.dataFilterHeight=this.canvas.height-n,this.activeAccordion&&(this.activeAccordion.style.height=this.dataFilterHeight+"px")},this.resetDataFilter=function(n){return function(t,i,r){if(n.resetFilters(),n.toDoFilter={},n.reset(),r){var u=n.$(n.target+"-cX-DataFilter");u&&(n.removeGenericDataFilterListenersOrReset(),u.parentNode.removeChild(u),n.addDataFilterDiv())}else n.removeGenericDataFilterListenersOrReset(!0);return i||n.draw(),!1}}(this),this.initializeDataFilterEvents=function(){this.addDataFilterDiv()},this.initializeDataFilterEvents()},CanvasXpress.prototype.initDataTable=function(){this.addDataTableDiv=function(n,t){var u,k,l,y,a,p,tt,w,it,rt,b;if(!this.$(this.target+"-cX-DataTable")){u=this,k=function(n,t,i){var r=u.$cX(t==0||i==0?"th":"td",{id:u.target+"-cX-DataTableCell."+t+"."+i,className:t==0||i==0?"CanvasXpressTableCellHead":"CanvasXpressTableCell"},{width:u.colWidth+"px",height:u.rowHeight+"px"});n.appendChild(r)},t||this.setDataTableDimensions(n);var i=20,f=44,ut=this.dataTableLastX!=null?parseInt(this.dataTableLastX):this.canvas.width*.1,ft=this.dataTableLastY!=null?parseInt(this.dataTableLastY):-this.canvas.height*.9,e=this.dataTableLastWidth||this.dataTableColsWidth+i,h=this.dataTableLastHeight||this.dataTableRowsHeight+f,o=(this.colWidth+8)*3+6,c=(this.rowHeight+4)*3+8,v=this.$cX("div",{id:this.target+"-cX-DataTable",className:"CanvasXpressDataTable draggable-container"},{top:ft+"px",left:ut+"px",width:e+"px",height:h+"px",minWidth:o+i+"px",minHeight:c+f+20+"px",zIndex:1e4,display:"none"}),r=this.$cX("div",{id:this.target+"-cX-DataTableToolbar",className:"CanvasXpressDataTableToolbar draggable"},{width:e+"px",minWidth:o+i+"px"}),et=this.$cX("img",{id:this.target+"-cX-DataTableSaveImage",className:"CanvasXpressDataTableToolbarImage",src:this.imageDir+"disk.png",alt:"Save data",title:"Save data"}),ot=this.$cX("img",{id:this.target+"-cX-DataTableTransposeImage",className:"CanvasXpressDataTableToolbarImage",src:this.imageDir+"transpose.png",alt:"Transpose data",title:"Transpose data"}),st=this.$cX("img",{id:this.target+"-cX-DataTableNetworkImage",className:"CanvasXpressDataTableToolbarImage",src:this.networkShowDataTable=="nodes"?this.imageDir+"edges.png":this.imageDir+"nodes.png",alt:this.networkShowDataTable=="nodes"?"Show edge data":"Show node data",title:this.networkShowDataTable=="nodes"?"Show edge data":"Show node data"},{display:this.graphType=="Network"?"block":"none"}),ht=this.$cX("img",{id:this.target+"-cX-DataTableDockImage",className:"CanvasXpressDataTableToolbarImage",src:this.dataTableLastState&&this.dataTableLastState=="docked"?this.imageDir+"unpin.png":this.imageDir+"pin.png",alt:this.dataTableLastState&&this.dataTableLastState=="docked"?"Undock":"Dock",title:this.dataTableLastState&&this.dataTableLastState=="docked"?"Undock":"Dock"}),ct=this.$cX("img",{id:this.target+"-cX-DataTableCloseImage",className:"CanvasXpressDataTableToolbarImage",src:this.imageDir+"cancel1.png",alt:"Close table",title:"Close table"}),s=this.$cX("div",{id:this.target+"-cX-DataTableContainer",className:"CanvasXpressDataTableContainer"},{width:e+"px",height:h-20+"px",minWidth:o+i+"px",minHeight:c+f+"px"}),d=this.$cX("div",{id:this.target+"-cX-DataTableTableMask",className:"CanvasXpressDataTableMask"},{width:e-i+"px",height:h-f+"px",minWidth:o+"px",minHeight:c+20+"px"}),g=this.$cX("table",{id:this.target+"-cX-DataTableTable",className:"CanvasXpressDataTable"}),nt=this.$cX("tbody");for(l=0;l<this.maxRows;l++){for(y=this.$cX("tr"),a=0;a<this.maxCols;a++)k(y,l,a);nt.appendChild(y)}p=this.$cX("div",{id:this.target+"-cX-DataTableVer",className:"CanvasXpressDataTableVertical"},{height:h-f+"px",minHeight:c+20+"px"}),tt=this.$cX("img",{id:this.target+"-cX-DataTableVerImage",src:this.getPixelImage(),width:1,height:this.dataTableTotalHeight}),p.appendChild(tt),w=this.$cX("div",{id:this.target+"-cX-DataTableHor",className:"CanvasXpressDataTableHorizontal"},{width:e-i+"px",minWidth:o+"px"}),it=this.$cX("img",{id:this.target+"-cX-DataTableHorImage",src:this.getPixelImage(),width:this.dataTableTotalWidth,height:1}),w.appendChild(it),rt=this.$cX("div",{id:this.target+"-cX-DataTableResizer",className:"CanvasXpressDataTableResizer resizable"}),r.appendChild(ct),r.appendChild(ht),r.appendChild(ot),r.appendChild(et),r.appendChild(st),g.appendChild(nt),d.appendChild(g),s.appendChild(d),s.appendChild(p),s.appendChild(w),s.appendChild(rt),v.appendChild(r),v.appendChild(s),b=this.$("south-wrapper-"+this.target),b&&(b.appendChild(v),this.addRemoveDataTableListeners("addEvtListener"))}},this.addRemoveDataTableListeners=function(n,t){var u,f,i,r;for(this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableHor"),"scroll",this.scrollTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableVer"),"scroll",this.scrollTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableToolbar"),"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableSaveImage"),"click",this.saveTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableNetworkImage"),"click",this.networkUpdateTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableTransposeImage"),"click",this.transposeDataTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableDockImage"),"click",this.dockUndockTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCloseImage"),"click",this.hideTable,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableResizer"),"mousedown",this.mousedownDataTableResizer,!1),u=t?t[0]:this.maxRows,f=t?t[1]:this.maxCols,i=0;i<f;i++)this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell.0."+i),"click",this.clickDataTableHeader,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell.0."+i),"mousemove",this.mousemoveDataTableHeader,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell.0."+i),"mousedown",this.mousedownDataTableHeader,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell.0."+i),"mouseover",this.mouseoverDataTableHeader,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell.0."+i),"mouseout",this.mouseoutDataTableHeader,!1);for(i=0;i<u;i++)this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell."+i+".0"),"mouseover",this.mouseoverDataTableHeader,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell."+i+".0"),"mouseout",this.mouseoutDataTableHeader,!1);for(i=1;i<u;i++)for(r=1;r<f;r++)this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell."+i+"."+r),"mouseover",this.mouseoverDataTableCell,!1),this.addRemoveEvtListener(n,this.$(this.target+"-cX-DataTableCell."+i+"."+r),"mouseout",this.mouseoutDataTableCell,!1)},this.scrollTable=function(n){return function(t){var u,f;t||(t=window.event);var e=n.$(n.target+"-cX-DataTable"),i=n.$(n.target+"-cX-DataTableVer"),r=n.$(n.target+"-cX-DataTableHor");return e&&i&&r&&!n.resizingDataTableOn&&(u=Math.ceil(r.scrollLeft/(r.scrollWidth/n.totalCols)),f=Math.ceil(i.scrollTop/(i.scrollHeight/n.totalRows)),n.dataTableLastScrollLeft=r.scrollLeft,n.dataTableLastScrollTop=i.scrollTop,n.dataTableLastScrollWidth=r.scrollWidth,n.dataTableLastScrollHeight=i.scrollHeight,(u!=n.startCol||f!=n.startRow)&&(n.startCol=u,n.startRow=f,n.updateDataTable(!1,!1,!1,!0))),!1}}(this),this.saveTable=function(n){return function(t){var i;t||(t=window.event);var r=n.maxCols,u=n.maxRows,f=n.startCol,e=n.startRow;return n.maxCols=n.totalCols,n.maxRows=n.totalRows,n.startCol=0,n.startRow=0,i=n.updateDataTable(!1,!1,!0),n.exportToExcel(i),n.maxCols=r,n.maxRows=u,n.startCol=f,n.startRow=e,!1}}(this),this.dockUndockTable=function(n){return function(t){t||(t=window.event);var r=n.dataTableLastState&&n.dataTableLastState=="docked"?"undock":"dock",i=n.getTargetEvent(t);return r=="dock"?(i.src=n.imageDir+"unpin.png",i.alt="Undock",i.title="Undock"):(i.src=n.imageDir+"pin.png",i.alt="Dock",i.title="Dock"),n.moveDataTableDiv(r),!1}}(this),this.transposeDataTable=function(n){return function(t){return t||(t=window.event),n.dataTableTransposed=n.dataTableTransposed?!1:!0,n.sortDataTableHead=!1,n.updateDataTable(!1,!0,!1,!1,!0),n.resizeDataTable(),!1}}(this),this.minimizeTable=function(n){return function(t){return t||(t=window.event),n.moveDataTableDiv("min"),!1}}(this),this.maximizeTable=function(n){return function(t){return t||(t=window.event),n.moveDataTableDiv("max"),!1}}(this),this.hideTable=function(n){return function(t){t||(t=window.event);var i=n.$(n.target+"-cX-DataTable");return i&&(n.showDataTable=!1,n.moveDataTableDiv("hide"),setTimeout(function(){n.hideUnhideDataTable(!0),n.resetFade(i),n.resetDataTable(!0)},500)),!1}}(this),this.networkUpdateTable=function(n){return function(t){t||(t=window.event);var i=n.getTargetEvent(t);return n.networkShowDataTable=n.networkShowDataTable=="nodes"?"edges":"nodes",n.updateDataTable(!1,!0,!1,!0),!1}}(this),this.mousedownDataTableResizer=function(n){return function(t){var r,i;return t||(t=window.event),r=t.target||t.srcElement,n.hasClass(r,"resizable")&&(i=n.$(n.target+"-cX-DataTable"),i&&(n.dataTableTarget=i,n.xMouseDown=t.clientX,n.yMouseDown=t.clientY,n.dataTableWidth=parseInt(n.dataTableTarget.style.width),n.dataTableHeight=parseInt(n.dataTableTarget.style.height),n.resizingDataTableOn=!0)),!1}}(this),this.mousemoveDataTableHeader=function(n){return function(t){var f,e,c;t||(t=window.event);var i=n.resizingDataTableColumnOn?n.dataTableColumnTarget:n.getTargetEvent(t),r=n.adjustedCoordinates(t,i),s=n.$(n.target+"-cX-DataTableHorImage");if(r&&s)if(n.resizingDataTableColumnOn){var l=n.dataTableColumnTarget.id.split("."),o=parseInt(l[2]),h=r.x-n.xMouseDown,u=Math.max(n.colWidth,(n.dataTableColumnWidth[n.startCol+o]||n.colWidth)+h);for(n.dataTableColumnTarget.firstChild.style.width=u+"px",s.width+=h,f=n.startRow;f<n.startRow+n.totalRows;f++)e=n.$(n.target+"-cX-DataTableCell."+f+"."+o),e&&(e.style.width=u+"px",e.firstChild.style.width=u+"px");n.dataTableColumnWidth[n.startCol+o]=u,n.xMouseDown=r.x,n.yMouseDown=r.y,document.body.style.cursor="ew-resize"}else c=i.offsetLeft+i.clientWidth-r.x,i.style.cursor=c<5&&i.nodeName.toLowerCase()=="th"?"ew-resize":"default";return!1}}(this),this.mousedownDataTableHeader=function(n){return function(t){var i,r,u;return t||(t=window.event),i=t.target||t.srcElement,r=n.adjustedCoordinates(t,i),r&&(u=i.offsetLeft+i.clientWidth-r.x,u<5&&i.nodeName.toLowerCase()=="th"&&(n.dataTableColumnTarget=i,n.xMouseDown=r.x,n.yMouseDown=r.y,n.resizingDataTableColumnOn=!0,document.body.style.cursor="ew-resize")),!1}}(this),this.clickDataTableHeader=function(n){return function(t){var i,u,r;return t||(t=window.event),i=n.getTargetEvent(t),u=n.target+"-cX-DataTableCell.0.0",i.tagName.match(/th/i)&&(i=i.firstChild),i.className=i.className=="CanvasXpressTableCellSortDesc"?"CanvasXpressTableCellSortAsc":"CanvasXpressTableCellSortDesc",n.sortDataTableHead&&n.sortDataTableHead.id!=i.id&&(r=n.$(n.sortDataTableHead.id),r&&(i.parentNode.id==u&&(n.sortDataTableHead.id=n.target+"-cX-DataTableCellContent.0.0"),r.className="CanvasXpressTableCell")),n.sortDataTableHead=i,n.sortDataTable(),!1}}(this),this.mouseoverDataTableHeader=function(){return function(n){return n||(n=window.event),this.className="CanvasXpressTableCellHeadActive",!1}}(this),this.mouseoutDataTableHeader=function(){return function(n){return n||(n=window.event),this.className="CanvasXpressTableCellHead",!1}}(this),this.mouseoverDataTableCell=function(){return function(n){return n||(n=window.event),this.className="CanvasXpressTableCellActive",!1}}(this),this.mouseoutDataTableCell=function(){return function(n){return n||(n=window.event),this.className="CanvasXpressTableCell",!1}}(this),this.setDataTableDimensions=function(n,t){var r=0,u=0,s=0,l=!1,a=function(){for(var t=0;t<n.w.grps.length;t++)s+=n.w.grps[t].length;return s},e,o,f,h,c,i;if(n||(n=this.data),e=0,n.x)for(i in n.x)e++;if(o=0,n.z)for(i in n.z)o++;for(f=this.getDataTableDimensions(),(f[0]!=this.maxRows||f[1]!=this.maxCols)&&(this.initialMaxRows=this.maxRows,this.initialMaxCols=this.maxCols),this.graphType=="Network"?(h=this.getAllNetworkAttributes(n),r=this.dataTableTransposed?1+n[this.networkShowDataTable].length:1+h[1],u=this.dataTableTransposed?1+h[1]:1+n[this.networkShowDataTable].length):this.graphType=="Genome"?(r=1,u=1):this.graphType=="Venn"?(c=this.getVennCompartments(n),r=this.dataTableTransposed?1+c[1]:2,u=this.dataTableTransposed?2:1+c[1]):this.graphType=="Correlation"?(r=this.correlationAxis=="samples"?1+n.y.smps.length:1+n.y.vars.length,u=r):this.graphType=="Candlestick"?n.y?(r=this.dataTableTransposed?1+n.y.smps.length*n.y.vars.length:6,u=this.dataTableTransposed?6:1+n.y.smps.length*n.y.vars.length):n.market&&(r=this.dataTableTransposed?1+n.market.smps.length*n.market.vars.length:6,u=this.dataTableTransposed?6:1+n.market.smps.length*n.market.vars.length):n.y&&n.y.vars&&n.y.smps?(r=this.dataTableTransposed?1+o+n.y.smps.length:1+e+n.y.vars.length,u=this.dataTableTransposed?1+e+n.y.vars.length:1+o+n.y.smps.length):n.w&&n.w.vars&&n.w.grps&&(s=a(),r=this.dataTableTransposed?1+o+s:1+e+n.w.vars.length,u=this.dataTableTransposed?1+e+n.w.vars.length:1+o+s),this.maxRows>r&&(this.initialMaxRows=this.maxRows,this.maxRows=r),this.maxCols>u&&(this.initialMaxCols=this.maxCols,this.maxCols=u),this.totalRows==null||this.totalCols==null?(this.totalRows=r,this.totalCols=u):t||r!=this.totalRows||u!=this.totalCols||f[0]!=this.maxRows||f[1]!=this.maxCols||f[2]!=this.rowHeight||f[3]!=this.colWidth?(this.totalRows=r,this.totalCols=u,l=!0):(this.totalRows=r,this.totalCols=u,this.showDataTable&&this.hideUnhideDataTable()),this.dataTableTotalHeight=10,i=0;i<this.totalRows;i++)this.dataTableTotalHeight+=this.setDataTableRowHeight(i);for(this.dataTableTotalHeight+=this.totalRows*4,this.dataTableTotalWidth=10,i=0;i<this.totalCols;i++)this.dataTableTotalWidth+=this.setDataTableColumnWidth(i);for(this.dataTableTotalWidth+=this.totalCols*8,this.dataTableRowsHeight=10,i=this.startRow;i<this.startRow+this.maxRows;i++)this.dataTableRowsHeight+=this.setDataTableRowHeight(i);for(this.dataTableRowsHeight+=this.maxRows*4,this.dataTableColsWidth=10,i=this.startCol;i<this.startCol+this.maxCols;i++)this.dataTableColsWidth+=this.setDataTableColumnWidth(i);this.dataTableColsWidth+=this.maxCols*8,l&&this.resetDataTable(!0,f)},this.setDataTableColumnWidth=function(n,t){return this.dataTableColumnWidth[n]?t&&(this.dataTableColumnWidth[n]=Math.max(t,this.colWidth)):this.dataTableColumnWidth[n]=this.colWidth,this.dataTableColumnWidth[n]},this.setDataTableRowHeight=function(n,t){return this.dataTableRowHeight[n]?t&&(this.dataTableRowHeight[n]=Math.max(t,this.rowHeight)):this.dataTableRowHeight[n]=this.rowHeight,this.dataTableRowHeight[n]},this.getAllNetworkAttributes=function(){var n=this.getNetworkData(this.networkShowDataTable,!0),t=this.getKeys(n).length;return[n,t]},this.getVennCompartments=function(n){var t={},i=0,r;if(n.venn&&n.venn.data)for(r in n.venn.data)t[r]=1,i++;return[t,i]},this.getDataTableDimensions=function(){var i=0,r=0,u=0,f=0,e=this.$(this.target+"-cX-DataTableTable"),n=this.$(this.target+"-cX-DataTableCell.0.0"),t;return e&&(t=e.childNodes[0].rows,t&&(i=t.length,r=t[0].cells.length,u=n&&n.firstChild&&n.firstChild.style?parseInt(n.firstChild.style.height):0,f=n&&n.firstChild&&n.firstChild.style?parseInt(n.firstChild.style.width):0)),[i,r,u,f]},this.resetDataTable=function(n,t){this.addRemoveDataTableListeners("removeEvtListener",t),this.removeTarget(this.target+"-cX-DataTable"),this.addDataTableDiv(!1,n)},this.hideUnhideDataTable=function(n){this.initialMaxRows&&(this.maxRows=this.initialMaxRows),this.initialMaxCols&&(this.maxCols=this.initialMaxCols);var t=this.$(this.target+"-cX-DataTable");t&&(t.style.display=n==!0?"none":"block")},this.resizeDataTable=function(){var t=this.$(this.target+"-cX-DataTableContainer"),i=this.$(this.target+"-cX-DataTableVer"),r=this.$(this.target+"-cX-DataTableHor"),u,f,n;if(t&&i&&r){for(u=0,this.maxCols=0,n=this.startCol;n<this.totalCols;n++)if(u+=this.dataTableColumnWidth[n]+8,parseInt(t.style.width)<u){this.maxCols++;break}else this.maxCols++;if(u<parseInt(t.style.width)&&this.startCol>0)for(n=this.startCol;n>=0;n--)if(u+this.dataTableColumnWidth[n]+8<parseInt(t.style.width))u+=this.dataTableColumnWidth[n]+8,this.maxCols++,this.startCol--;else break;for(parseInt(t.style.width)>this.dataTableTotalWidth&&(this.maxCols=this.totalCols-this.startCol),this.maxCols=Math.max(3,Math.min(this.maxCols,this.totalCols-this.startCol)),f=0,this.maxRows=0,n=this.startRow;n<this.totalRows;n++)if(f+=this.dataTableRowHeight[n]+4,parseInt(t.style.height)<f){this.maxRows++;break}else this.maxRows++;if(f<parseInt(t.style.height)&&this.startRow>0)for(n=this.startRow;n>=0;n--)if(f+this.dataTableRowHeight[n]+4<parseInt(t.style.height))f+=this.dataTableRowHeight[n]+4,this.maxRows++,this.startRow--;else break;parseInt(t.style.height)>this.dataTableTotalHeight&&(this.totalRows=this.totalRows-this.startRow),this.maxRows=Math.max(3,Math.min(this.maxRows,this.totalRows-this.startRow)),this.updateDataTable(!1,!0,!1,!0),i=this.$(this.target+"-cX-DataTableVer"),r=this.$(this.target+"-cX-DataTableHor"),i&&r&&(this.isIE||(i.scrollHeight=this.dataTableLastScrollHeight),i.scrollTop=this.dataTableLastScrollTop?this.dataTableLastScrollTop:i.scrollTop,this.isIE||(r.scrollWidth=this.dataTableLastScrollWidth),r.scrollLeft=this.dataTableLastScrollLeft?this.dataTableLastScrollLeft:r.scrollLeft),this.dataTableLastState=="docked"&&this.resizeViewportSouth(!0)}},this.sortDataTable=function(){if(this.sortDir=this.sortDataTableHead.className=="CanvasXpressTableCellSortDesc"?"descending":"ascending",this.graphType=="Network")if(this.dataTableTransposed){if(this.sortDataTableHead.type=="cxb"){this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1;return}this.sortNetworkIndices(this.sortDataTableHead.innerHTML)}else{this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1;return}else{if(this.graphType=="Genome"){this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1;return}if(this.graphType=="Venn"){this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1;return}if(this.graphType=="Correlation")this.correlationAxis=="samples"?this.sortDataTableHead.type=="cxb"?this.sortSamples():(this.sortSamples(!1,!1,this.sortDataTableHead.innerHTML,"cor",!0),this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1):this.sortDataTableHead.type=="cxb"?this.sortVariables():(this.sortVariables(!1,!1,this.sortDataTableHead.innerHTML,"cor",!0),this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1);else{if(this.graphType=="Candlestick"){this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1;return}this.data.y.vars&&this.data.y.smps&&(this.dataTableTransposed?this.sortDataTableHead.type=="cxx"?this.sortSamplesByCategory([this.sortDataTableHead.innerHTML]):this.sortDataTableHead.type=="cxv"?this.sortSamplesByVariable(this.sortDataTableHead.innerHTML):this.sortDataTableHead.type=="cxb"&&this.sortSamples():this.sortDataTableHead.type=="cxz"?this.sortVariablesByCategory([this.sortDataTableHead.innerHTML]):this.sortDataTableHead.type=="cxs"?this.sortVariablesBySample(this.sortDataTableHead.innerHTML):this.sortDataTableHead.type=="cxb"&&this.sortVariables())}}this.updateDataTable(!1,!0,!1,!1,!0)},this.updateDataTable=function(n,t,i,r,u){var v=0,h=0,y=0,c=0,l=[],a=[],o=[],s=[],w=n?!1:!0,ut=function(n,t,i,r){var f,u,e;if(t.hasOwnProperty(n))return t[n]!=null?t[n]:"";if(i[0][n]&&i[0][n].hasOwnProperty("r")){for(f=i[0][n].r,u=0;u<r[f].length;u++)if(e=r[f][u],t.hasOwnProperty(e))t=t[e];else return"";if(t.hasOwnProperty(n))return t[n]!=null?t[n]:""}return""},it,k,p,g,b,nt,tt,f,e;if(this.dataTableLastState&&this.dataTableLastState=="docked"&&r&&(this.dataTableLastX=this.configuringOn&&this.configuringOn=="docked"?0:7,this.dataTableLastY=0),n){if(this.isGroupedData){for(f=this.getVariableIndices(n.w.vars),it=[],e=0;e<n.w.grps.length;e++)it=it.concat(n.w.grps[e]);this.isGroupedData=!1,n=this.extractDataObject(it,f),this.isGroupedData=!0}}else n=this.data;if(i||this.setDataTableDimensions(n,t),this.graphType=="Network")if(p=this.getAllNetworkAttributes(n),o.push(""),s.push("cxb"),this.dataTableTransposed){for(f in p[0])h<this.maxCols&&c>=this.startCol&&(o.push(f),s.push("cxx"),h++),c++;for(l.push(o),a.push(s),f=0;f<n[this.networkShowDataTable].length;f++){if(v<this.maxRows&&y>=this.startRow){h=0,c=0,o=[f+1],s=["cxz"];for(e in p[0])h<this.maxCols&&c>=this.startCol&&(k=ut(e,n[this.networkShowDataTable][f],p,this[this.networkShowDataTable+"Properties"]),o.push(k),s.push("cxy"),h++),c++;l.push(o),a.push(s),v++}y++}}else{for(f=0;f<n[this.networkShowDataTable].length;f++)h<this.maxCols&&c>=this.startCol&&(o.push(f+1),s.push("cxz"),h++),c++;l.push(o),a.push(s);for(f in p[0]){if(v<this.maxRows&&y>=this.startRow){for(h=0,c=0,o=[f],s=["cxx"],e=0;e<n[this.networkShowDataTable].length;e++)h<this.maxCols&&c>=this.startCol&&(k=ut(f,n[this.networkShowDataTable][e],p,this[this.networkShowDataTable+"Properties"]),o.push(k),s.push("cxy"),h++),c++;l.push(o),a.push(s),v++}y++}}else if(this.graphType=="Genome")l=[["Not implemented"]],a=[["cxb"]];else if(this.graphType=="Venn")if(k=this.getVennCompartments(n),o.push(""),s.push("cxb"),this.dataTableTransposed){o.push("No"),s.push("cxz"),l.push(o),a.push(s);for(f in k[0])v<this.maxRows&&y>=this.startRow&&(h=0,c=0,o=[f],s=["cxx"],h<this.maxCols&&c>=this.startCol&&(o.push(n.venn.data[f]),s.push("cxy"),h++),c++,l.push(o),a.push(s),v++),y++}else{for(f in k[0])h<this.maxCols&&c>=this.startCol&&(o.push(f),s.push("cxx"),h++),c++;if(l.push(o),a.push(s),v<this.maxRows&&y>=this.startRow){h=0,c=0,o=["No"],s=["cxz"];for(f in k[0])h<this.maxCols&&c>=this.startCol&&(o.push(n.venn.data[f]),s.push("cxy"),h++),c++;l.push(o),a.push(s)}}else if(this.graphType=="Correlation"){var d=this.correlationAxis=="samples"?n.y.smps:n.y.vars,rt=this.correlationAxis=="samples"?this.smpIndices:this.varIndices,ft=this.correlationAxis=="samples"?"cxs":"cxv";for(o.push(""),s.push("cxb"),f=0;f<d.length;f++)h<this.maxCols&&c>=this.startCol&&(o.push(w?d[rt[f]]:d[f]),s.push(ft),h++),c++;for(l.push(o),a.push(s),f=0;f<d.length;f++){if(v<this.maxRows&&y>=this.startRow){for(h=0,c=0,o=[w?d[rt[f]]:d[f]],s=[ft],e=0;e<d.length;e++)h<this.maxCols&&c>=this.startCol&&(n.y.cor?o.push(w?n.y.cor[rt[f]][rt[e]]:n.y.cor[f][e]):o.push(f==e?1:n.y.data),s.push("cxy"),h++),c++;l.push(o),a.push(s),v++}y++}}else if(this.graphType=="Candlestick")if(p=["open","low","high","close","volume"],o.push(""),s.push("cxb"),this.dataTableTransposed){for(f=0;f<n.y.vars.length;f++)for(e=0;e<p.length;e++)h<this.maxCols&&c>=this.startCol&&(g=n.y.vars.length>1?n.y.vars[f]+":"+p[e]:p[e],o.push(g),s.push("cxv"),h++),c++;for(l.push(o),a.push(s),f=0;f<n.y.smps.length;f++){if(v<this.maxRows&&y>=this.startRow){for(h=0,c=0,o=[n.y.smps[f]],s=["cxs"],e=0;e<n.y.vars.length;e++)for(b=0;b<p.length;b++)h<this.maxCols&&c>=this.startCol&&(o.push(n.y[p[b]][e][f]!=null?n.y[p[b]][e][f]:n.y[p[b]][f]),s.push("cxy"),h++),c++;l.push(o),a.push(s),v++}y++}}else{for(f=0;f<n.y.smps.length;f++)h<this.maxCols&&c>=this.startCol&&(o.push(n.y.smps[f]),s.push("cxs"),h++),c++;for(l.push(o),a.push(s),f=0;f<n.y.vars.length;f++)for(e=0;e<p.length;e++){if(v<this.maxRows&&y>=this.startRow){for(h=0,c=0,g=n.y.vars.length>1?n.y.vars[f]+":"+p[e]:p[e],o=[g],s=["cxv"],b=0;b<n.y.smps.length;b++)h<this.maxCols&&c>=this.startCol&&(o.push(n.y[p[e]][f][b]!=null?n.y[p[e]][f][b]:n.y[p[e]][b]),s.push("cxy"),h++),c++;l.push(o),a.push(s),v++}y++}}else if(n.y.vars&&n.y.smps)if(nt=w?this.varIndices.length:n.y.vars.length,tt=w?this.smpIndices.length:n.y.smps.length,o.push(""),s.push("cxb"),this.dataTableTransposed){if(n.x)for(f in n.x)h<this.maxCols&&c>=this.startCol&&(o.push(f),s.push("cxx"),h++),c++;for(f=0;f<nt;f++)h<this.maxCols&&c>=this.startCol&&(o.push(w?n.y.vars[this.varIndices[f]]:n.y.vars[f]),s.push("cxv"),h++),c++;if(l.push(o),a.push(s),n.z)for(f in n.z){if(v<this.maxRows&&y>=this.startRow){if(h=0,c=0,o=[f],s=["cxz"],n.x)for(e in n.x)h<this.maxCols&&c>=this.startCol&&(o.push(""),s.push("cxb"),h++),c++;for(e=0;e<nt;e++)h<this.maxCols&&c>=this.startCol&&(o.push(w?n.z[f][this.varIndices[e]]:n.z[f][e]),s.push("cxz"),h++),c++;l.push(o),a.push(s),v++}y++}for(f=0;f<tt;f++){if(v<this.maxRows&&y>=this.startRow){if(h=0,c=0,o=[w?n.y.smps[this.smpIndices[f]]:n.y.smps[f]],s=["cxs"],n.x)for(e in n.x)h<this.maxCols&&c>=this.startCol&&(o.push(w?n.x[e][this.smpIndices[f]]:n.x[e][f]),s.push("cxx"),h++),c++;for(e=0;e<nt;e++)h<this.maxCols&&c>=this.startCol&&(w?o.push(n.y.data[this.varIndices[e]][this.smpIndices[f]]!=null?n.y.data[this.varIndices[e]][this.smpIndices[f]]:n.y.data[this.smpIndices[f]]):o.push(n.y.data[e][f]!=null?n.y.data[e][f]:n.y.data[f]),s.push("cxy"),h++),c++;l.push(o),a.push(s),v++}y++}}else{if(n.z)for(f in n.z)h<this.maxCols&&c>=this.startCol&&(o.push(f),s.push("cxz"),h++),c++;for(f=0;f<tt;f++)h<this.maxCols&&c>=this.startCol&&(o.push(w?n.y.smps[this.smpIndices[f]]:n.y.smps[f]),s.push("cxs"),h++),c++;if(l.push(o),a.push(s),n.x)for(f in n.x){if(v<this.maxRows&&y>=this.startRow){if(h=0,c=0,o=[f],s=["cxx"],n.z)for(e in n.z)h<this.maxCols&&c>=this.startCol&&(o.push(""),s.push("cxb"),h++),c++;for(e=0;e<tt;e++)h<this.maxCols&&c>=this.startCol&&(o.push(w?n.x[f][this.smpIndices[e]]:n.x[f][e]),s.push("cxx"),h++),c++;l.push(o),a.push(s),v++}y++}for(f=0;f<nt;f++){if(v<this.maxRows&&y>=this.startRow){if(h=0,c=0,o=[w?n.y.vars[this.varIndices[f]]:n.y.vars[f]],s=["cxv"],n.z)for(e in n.z)h<this.maxCols&&c>=this.startCol&&(o.push(w?n.z[e][this.varIndices[f]]:n.z[e][f]),s.push("cxz"),h++),c++;for(e=0;e<tt;e++)h<this.maxCols&&c>=this.startCol&&(w?o.push(n.y.data[this.varIndices[f]][this.smpIndices[e]]!=null?n.y.data[this.varIndices[f]][this.smpIndices[e]]:n.y.data[this.smpIndices[e]]):o.push(n.y.data[f][e]!=null?n.y.data[f][e]:n.y.data[e]),s.push("cxy"),h++),c++;l.push(o),a.push(s),v++}y++}}if(i)return l;this.loadDataTableValues(l,a,r,u)},this.loadDataTableValues=function(n,t,i,r){var c=this.$(this.target+"-cX-DataTable"),o,u,s,e,y;if(c){for(o=this.startRow,u=0;u<n.length;u++){for(s=this.startCol,e=0;e<n[u].length+this.startCol;e++){var p=this.target+"-cX-DataTableCell."+u+"."+e,w=this.target+"-cX-DataTableCellContent."+o+"."+s,f=this.$(p);if(f){if(f.hasChildNodes())while(f.childNodes.length>=1)f.removeChild(f.firstChild);var l=n[u][e]!=null?n[u][e]:"",b=t[u][e]!=null?t[u][e]:"",h=this.$cX("div",{id:w,className:"CanvasXpressTableCell ",innerHTML:l,title:l,alt:l,type:b});u!=0?(h.style.height=this.setDataTableRowHeight(o)+"px",f.style.height=this.setDataTableRowHeight(o)+"px"):(h.style.height=this.setDataTableRowHeight(0)+"px",f.style.height=this.setDataTableRowHeight(0)+"px"),e!=0?(h.style.width=this.setDataTableColumnWidth(s)+"px",f.style.width=this.setDataTableColumnWidth(s)+"px"):(h.style.width=this.setDataTableColumnWidth(0)+"px",f.style.width=this.setDataTableColumnWidth(0)+"px"),f.appendChild(h),s++}}o++}if(this.activeTarget&&(this.activeTarget.style.zIndex=1e4),this.sortDataTableHead){var a=this.$(this.sortDataTableHead.id),v=this.$(this.target+"-cX-DataTableCell.0.0").firstChild,k=this.target+"-cX-DataTableCellContent.0.0";a&&(a.className=this.sortDataTableHead.className),v&&(v.className=this.sortDataTableHead.id==k?this.sortDataTableHead.className:"CanvasXpressTableCell")}if(this.activeTarget=c,c.style.display="block",c.style.zIndex=10001,this.dataTableLastState&&this.dataTableLastState=="docked"&&!i&&!r){y=this.$("south-handler-"+this.target),this.clickViewport(!1,y);return}}},this.moveDataTableDiv=function(n){var t=this.$(this.target+"-cX-DataTable");if(t){var c,i,r,u=this.$(this.remoteParentId+"-canvasXpressRemoteWindow"),a=this.$("west-handler-"+this.target),l=this.$("north-container-"+this.target),f=this.$("west-container-"+this.target),e=this.$("east-container-"+this.target),o=this.$("south-container-"+this.target),s=this.$("south-handler-"+this.target),h=this.$("south-wrapper-"+this.target),v=this;if(a&&f&&e&&o&&s&&h){if(n&&n=="dock")this.dataTableLastState="docked",this.dataTableLastHeight=t.clientHeight,this.dataTableLastX=t.offsetLeft,this.dataTableLastY=t.offsetTop,s.style.display="block",c=a.style.display=="none"?7:0,i=Math.max(t.clientWidth+c,parseInt(f.style.width)+parseInt(e.style.width)+this.canvas.width)+2,r=parseInt(l.style.height)+this.canvas.height+t.clientHeight+7+2,u&&this.resizeMove(u,0,0,i+48,r+54),this.resizeMove(o,0,0,i,t.clientHeight+7+2),this.resizeMove(h,0,0,i,t.clientHeight+2),this.resizeMove(t,c,0,t.clientWidth,t.clientHeight);else if(n&&n=="hide")delete this.dataTableLastState,delete this.dataTableLastX,delete this.dataTableLastY,s.style.display="none",i=parseInt(f.style.width)+parseInt(e.style.width)+this.canvas.width,r=parseInt(l.style.height)+this.canvas.height+7,u&&this.resizeMove(u,0,0,i+48,r+54),this.fade(t),this.resizeMove(h,0,0,i,0),this.resizeMove(o,0,0,i,7);else if(n&&(n=="max"||n=="release"||n=="undock"))this.dataTableLastState="free",s.style.display="none",i=parseInt(f.style.width)+parseInt(e.style.width)+this.canvas.width,r=parseInt(l.style.height)+this.canvas.height+7,u&&this.resizeMove(u,0,0,i+48,r+54),(n=="max"||n=="undock")&&this.resizeMove(t,parseInt(this.dataTableLastX),parseInt(this.dataTableLastY),t.clientWidth,parseInt(this.dataTableLastHeight)||this.dataTableRowsHeight+42),this.resizeMove(h,0,0,i,0),this.resizeMove(o,0,0,i,7);else{this.dataTableLastX=t.offsetLeft,this.dataTableLastY=t.offsetTop;return}u&&setTimeout(function(){v.resizeExtContainer(i+48,r+54)},500)}}},this.updateDataTableResizerDiv=function(n,t,i){if(n||(n=window.event),n&&(t==null||i==null)&&(t=Math.abs(this.dataTableWidth)-(this.xMouseDown-n.clientX),i=Math.abs(this.dataTableHeight)-(this.yMouseDown-n.clientY)),this.dataTableTarget&&this.dataTableTarget.style){var s=this.$(this.target+"-cX-DataTable"),r=this.$(this.target+"-cX-DataTableContainer"),u=this.$(this.target+"-cX-DataTableTableMask"),f=this.$(this.target+"-cX-DataTableVer"),e=this.$(this.target+"-cX-DataTableHor"),o=this.$(this.target+"-cX-DataTableToolbar");s&&r&&u&&f&&e&&o&&(this.dataTableTarget.style.width=this.isIE?Math.max(0,t)+"px":t+"px",r.style.width=this.isIE?Math.max(0,t)+"px":t+"px",u.style.width=this.isIE?Math.max(0,t-20)+"px":t-20+"px",e.style.width=this.isIE?Math.max(0,t-20)+"px":t-20+"px",o.style.width=this.isIE?Math.max(0,t)+"px":t+"px",this.dataTableTarget.style.height=this.isIE?Math.max(0,i)+"px":i+"px",r.style.height=this.isIE?Math.max(0,i-20)+"px":i-20+"px",u.style.height=this.isIE?Math.max(0,i-44)+"px":i-44+"px",f.style.height=this.isIE?Math.max(0,i-44)+"px":i-44+"px",this.dataTableLastWidth=t,this.dataTableLastHeight=i)}},this.endDataTableResizerDiv=function(){this.dataTableTarget!=null&&(this.resizeDataTable(),this.xMouseDown=null,this.yMouseDown=null,this.dataTableWidth=null,this.dataTableHeight=null,this.dataTableTarget=!1,this.resizingDataTableOn=!1)},this.endDataTableColumnResize=function(){this.xMouseDown=null,this.yMouseDown=null,this.resizingDataTableColumnOn=!1,this.dataTableColumnTarget=!1,document.body.style.cursor="default"},this.initializeDataTableEvents=function(){this.addDataTableDiv()},this.initializeDataTableEvents()},CanvasXpress.prototype.initCanvasResizerEvents=function(){this.addCanvasResizerDiv=function(n){if(n){if(document.getElementById("canvasXpressCanvasResize"))return}else if(document.getElementById(this.target+"canvasXpressCanvasResize"))return;var t=document.createElement("div");if(t.id=n?"canvasXpressCanvasResize":this.target+"canvasXpressCanvasResize",t.style.left="0px",t.style.top="0px",t.style.width="0.5px",t.style.height="0.5px",n&&(t.style.opacity=.5,t.style.filter="alpha(opacity = 50)",t.style.backgroundColor=this.resizerBackgroundColor),t.style.position="absolute",t.style.display="none",t.style.zIndex=100001,n)return document.body.appendChild(t),t;this.canvas.parentNode.appendChild(t)},this.isCanvasResize=function(n){var t,r,i;if(this.resizable&&(n||(n=window.event),t=this.adjustedCoordinates(n),t))return r=t.x,i=t.y,r>this.width-18&&i>this.height-18?(this.resizeCanvasCursorShow="se-resize",!0):r>this.width-18&&i>20?(this.resizeCanvasCursorShow="e-resize",!0):i>this.height-18?(this.resizeCanvasCursorShow="s-resize",!0):(this.resizeCanvasCursorShow=!1,!1)},this.updateCanvasResizerCursor=function(n){var t,i,u,r;this.resizable&&(n||(n=window.event),t=document.getElementById(this.target),t&&(i=this.adjustedCoordinates(n),i&&(u=i.x,r=i.y,u>this.width-18&&r>this.height-18?(t.style.cursor="se-resize",this.resizeCanvasCursorShow="se-resize"):u>this.width-18&&r>20?(t.style.cursor="e-resize",this.resizeCanvasCursorShow="e-resize"):r>this.height-18?(t.style.cursor="s-resize",this.resizeCanvasCursorShow="s-resize"):this.movingOn||(t.style.cursor="default",this.resizeCanvasCursorShow=!1))))},this.updateCanvasResizer=function(n){if(this.resizingCanvasOn&&this.resizeCanvasCursorShow){document.body.style.cursor=this.resizeCanvasCursorShow;var r=document.getElementById(this.target+"canvasXpressCanvasResize"),t=document.getElementById("canvasXpressCanvasResize"),i=this.adjustedCoordinates(n),u=this.relativeCoordinates(this.canvas);r&&i&&u&&(this.resizeCanvasCursorShow=="se-resize"?(w=i.x,h=i.y):this.resizeCanvasCursorShow=="e-resize"?(w=i.x,h=this.height):this.resizeCanvasCursorShow=="s-resize"&&(w=this.width,h=i.y),t||(t=this.addCanvasResizerDiv(!0)),this.preventSelection(),dx=i.x-this.canvas.width,dy=i.y-this.canvas.height,r.style.width=w+"px",r.style.height=h+"px",r.style.display="block",t.style.left=u.x+"px",t.style.top=u.y+"px",t.style.width=w+"px",t.style.height=h+"px",t.style.display="block",CanvasXpress.resizing=!0)}},this.endCanvasResizer=function(){var u,f;if(this.resizingCanvasOn){var t=document.getElementById(this.target),n=document.getElementById(this.target+"canvasXpressCanvasResize"),i=document.getElementById("canvasXpressCanvasResize"),s=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBuffer"),e=this.$("west-container-"+this.target),r=this.$("middle-container-"+this.target),o=this.$("east-container-"+this.target);t&&n&&i&&(this.tmpHeight=!1,this.tmpWidth=!1,u=parseInt(n.style.width),f=parseInt(n.style.height),r.style.width=parseInt(e.style.width)+parseInt(n.style.width)+parseInt(o.style.width)+"px",r.style.height=n.style.height,this.resetAxesResizer(),this.draw(u,f),this.resizeAcknowledgementDiv(),n.style.width="0.5px",n.style.height="0.5px",n.style.display="none",t.style.cursor="default",this.updateRemoteNavigationWindow(),document.body.removeChild(i),this.resizeCanvasCursorShow=!1,this.resizingCanvasOn=!1,CanvasXpress.resizing=!1)}},this.initializeCanvasResizerEvents=function(){this.disableEvents||this.addCanvasResizerDiv()},this.initializeCanvasResizerEvents()},CanvasXpress.prototype.initAxisResizerEvents=function(){this.addAxesResizeDiv=function(){var i,t;if(!document.getElementById(this.target+"canvasXpressAxesResize")){var u=["Previous","Next","Current","Middle","Min","Max","Close"],r=9001,n=document.createElement("div");for(n.id=this.target+"canvasXpressAxesResize",this.resizerTransparency&&(n.style.opacity=.85,n.style.filter="alpha(opacity = 85)"),n.style.position="absolute",n.style.display="none",n.style.zIndex=r,i=0;i<u.length;i++)r++,t=document.createElement("div"),t.id=this.target+"canvasXpressAxesResize"+u[i],this.resizerTransparency&&(t.style.opacity=.85,t.style.filter="alpha(opacity = 85)"),t.style.position="absolute",t.style.zIndex=r,n.appendChild(t);this.canvas.parentNode.appendChild(n)}},this.clickAxesResizeClose=function(n){return function(t){t||(t=window.event),n.stopEvent(t),n.resetAxesResizer(t),n.resetFlags(t)}}(this),this.mousemoveActiveAxesResize=function(n){return function(t){t||(t=window.event),n.activateDeactivateAxesResizer(t)}}(this),this.mousedownAxesResize=function(n){return function(t){return t||(t=window.event),n.cancelEvent(t),n.registerAxesResizer(t),!1}}(this),this.mousemoveAxesResize=function(n){return function(t){return t||(t=window.event),n.cancelEvent(t),n.updateAxesResizer(t),!1}}(this),this.addRemoveAxesResizerListeners=function(n){var i=document.getElementById(this.target+"canvasXpressAxesResize"),f=document.getElementById(this.target+"canvasXpressAxesResizeMin"),e=document.getElementById(this.target+"canvasXpressAxesResizeMax"),o=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),s=document.getElementById(this.target+"canvasXpressAxesResizeCurrent"),u=document.getElementById(this.target+"canvasXpressAxesResizeClose"),r=[i,f,e,o,s],t;for(i&&(this[n](i,"mousemove",this.mousemoveActiveAxesResize,!1),this[n](i,"mouseout",this.mousemoveActiveAxesResize,!1)),u&&this[n](u,"click",this.clickAxesResizeClose,!1),t=0;t<r.length;t++)r[t]&&this[n](r[t],"mousedown",this.mousedownAxesResize,!1)},this.showAxesResizer=function(n,t,i,r,u,f,e,o,s,h,c,l,a){if(!this.axesResizerShow){var v=document.getElementById(this.target+"canvasXpressAxesResize"),y=document.getElementById(this.target+"canvasXpressAxesResizeClose");v&&y&&(this.updateResizerEventData(null,null,n,t,i,r,u,f,e,o,s,h,c,l,a),this.refreshAxesResizer(),v.style.display="block",this.resizerType&&this.layoutValid&&(y.style.display="none"),this.addRemoveAxesResizerListeners("addEvtListener"),this.layoutValid&&(this.layoutValidR=l,this.layoutValidC=a,this.layoutValidN=c),this.axesResizerShow=!0)}},this.refreshAxesResizer=function(){if(this.resizerEventData){var f=document.getElementById(this.target+"canvasXpressAxesResize"),u=document.getElementById(this.target+"canvasXpressAxesResizeMin"),t=document.getElementById(this.target+"canvasXpressAxesResizeMax"),e=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),i=document.getElementById(this.target+"canvasXpressAxesResizeCurrent"),o=document.getElementById(this.target+"canvasXpressAxesResizeClose"),s=document.getElementById(this.target+"canvasXpressAxesResizePrevious"),h=document.getElementById(this.target+"canvasXpressAxesResizeNext");if(f&&u&&t&&i&&o&&s&&h){var c=this.resizerEventData.areas.org[1]-this.resizerEventData.areas.org[0],a=this.resizerEventData.areas.org[3]-this.resizerEventData.areas.org[2],n=14,r=9,v=parseInt(r/2);this.resizerEventData.pos=="h"?(l=this.resizerEventData.l.match(/^t/)?"top":"bottom",f.style.left=this.resizerEventData.areas.org[0]-v+"px",f.style.top=this.resizerEventData.areas.org[2]+"px",f.style.width=c+r-1+"px",f.style.height=n+"px",f.style.backgroundImage="url('"+this.imageDir+"scroller_empty_hor_"+l+".png')",f.style.backgroundRepeat="repeat-x",s.style.left="0px",s.style.top="0px",s.style.width=r+"px",s.style.height=n+"px",s.style.backgroundImage="url('"+this.imageDir+"prev_"+l+".png')",u.style.left=this.resizerEventData.areas.min[0]+"px",u.style.top="0px",u.style.width=r+"px",u.style.height=n+"px",u.style.cursor="e-resize",u.style.backgroundImage="url('"+this.imageDir+"handle_left_"+l+".png')",i.style.left=this.resizerEventData.areas.cur[0]+"px",i.style.top="0px",i.style.width=this.resizerEventData.areas.cur[1]+"px",i.style.height=n+"px",i.style.cursor="move",i.style.backgroundImage="url('"+this.imageDir+"scroller_body_hor_"+l+".png')",i.style.backgroundRepeat="repeat-x",t.style.left=this.resizerEventData.areas.max[0]+"px",t.style.top="0px",t.style.width=r+"px",t.style.height=n+"px",t.style.cursor="e-resize",t.style.backgroundImage="url('"+this.imageDir+"handle_right_"+l+".png')",t.style.backgroundRepeat="no-repeat",e.style.left=this.resizerEventData.areas.min[0]+(this.resizerEventData.areas.cur[1]-1)/2+"px",e.style.top="0px",e.style.width="8px",e.style.height=n+"px",e.style.cursor="move",e.style.backgroundImage="url('"+this.imageDir+"scroller_handle_hor_"+l+".png')",h.style.left=c-1+"px",h.style.top="0px",h.style.width=r+"px",h.style.height=n+"px",h.style.backgroundImage="url('"+this.imageDir+"next_"+l+".png')",o.style.left=c+r+"px",o.style.top="0px",o.style.width=r+"px",o.style.height=n+"px",o.style.backgroundImage="url('"+this.imageDir+"close.png')"):(l=this.resizerEventData.l.match(/^l/)?"left":"right",f.style.left=this.resizerEventData.areas.org[0]+"px",f.style.top=this.resizerEventData.areas.org[2]-v+"px",f.style.width=n+"px",f.style.height=a+r+"px",f.style.backgroundImage="url('"+this.imageDir+"scroller_empty_ver_"+l+".png')",f.style.backgroundRepeat="repeat-y",s.style.left="0px",s.style.top=a+"px",s.style.width=n+"px",s.style.height=r+"px",s.style.backgroundImage="url('"+this.imageDir+"prev_"+l+".png')",u.style.left="0px",u.style.top=this.resizerEventData.areas.min[2]+"px",u.style.width=n+"px",u.style.height=r+"px",u.style.cursor="n-resize",u.style.backgroundImage="url('"+this.imageDir+"handle_bottom_"+l+".png')",u.style.backgroundRepeat="no-repeat",i.style.left="0px",i.style.top=this.resizerEventData.areas.cur[2]+"px",i.style.width=n+"px",i.style.height=this.resizerEventData.areas.cur[3]+"px",i.style.cursor="move",i.style.backgroundImage="url('"+this.imageDir+"scroller_body_ver_"+l+".png')",i.style.backgroundRepeat="repeat-y",t.style.left="0px",t.style.top=this.resizerEventData.areas.max[2]+"px",t.style.width=n+"px",t.style.height=r+"px",t.style.cursor="n-resize",t.style.backgroundImage="url('"+this.imageDir+"handle_top_"+l+".png')",t.style.backgroundRepeat="no-repeat",e.style.left="0px",e.style.top=this.resizerEventData.areas.max[2]+this.resizerEventData.areas.cur[3]/2+"px",e.style.width=n+"px",e.style.height=n+"px",e.style.cursor="move",e.style.backgroundImage="url('"+this.imageDir+"scroller_handle_ver_"+l+".png')",e.style.backgroundRepeat="no-repeat",h.style.left="0px",h.style.top="0px",h.style.width=n+"px",h.style.height=r+"px",h.style.backgroundImage="url('"+this.imageDir+"next_"+l+".png')",o.style.left=n+1+"px",o.style.top=-r+"px",o.style.width=r+"px",o.style.height=n+"px",o.style.backgroundImage="url('"+this.imageDir+"close.png')"),this.drawAxesResizerMasks()}}},this.updateResizerEventData=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var kt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt;i=i?i:this.resizerEventData.axis,r=r?r:this.resizerEventData.areas.org[0],u=u?u:this.resizerEventData.areas.org[1],f=f?f:this.resizerEventData.areas.org[2],e=e?e:this.resizerEventData.areas.org[3],o=o?o:this.resizerEventData.dim,s=s?s:this.resizerEventData.pos,h=h?h:this.resizerEventData.l,c=c?c:this.resizerEventData.vals,l=l?l:this.resizerEventData.set?this.resizerEventData.set:"",a=a?a:this.resizerEventData.c,v=v?v:this.resizerEventData.i,y=y?y:this.resizerEventData.j;var p=c.graphType,gt=u-r,nt=e-f;kt=p=="Heatmap"?o=="y"?this.isGroupedData?this.data.w.smps.length:this.data.y?this.data.y.smps.length:0:this.data.y?this.data.y.vars.length:0:this.isGroupedData?this.data.w.smps.length-1:this.data.y?this.data.y.smps.length-1:0;var d=this.resizerType=="samples"||p=="Heatmap"?0:c[i+"AbsMin"],tt=this.resizerType=="samples"||p=="Heatmap"?kt:c[i+"AbsMax"],dt=s=="h"?gt:nt,wt=dt/(tt-d);(n==null||isNaN(n))&&(this.resizerType=="samples"?n=this.isGroupedData?this.grpIndices[0]:this.smpIndices[0]:(n=p=="Heatmap"?o=="y"?Math.max(0,c.smpIndicesStart):Math.max(0,c.varIndicesStart):p.match(/Scatter/)?c["setMin"+o.toUpperCase()]:p=="BarLine"&&h.match(/b|r/)?c.setMin2:c.setMin,(n==null||isNaN(n))&&(n=d))),n=Math.max(n,d),(t==null||isNaN(t))&&(this.resizerType=="samples"?t=this.isGroupedData?this.grpIndices[this.grpIndices.length-1]:this.smpIndices[this.smpIndices.length-1]:(t=p=="Heatmap"?(o=="x"?c.varIndices.length:this.isGroupedData?c.grpIndices.length:c.smpIndices.length)+n:p.match(/Scatter/)?c["setMax"+o.toUpperCase()]:p=="BarLine"&&h.match(/b|r/)?c.setMax2:c.setMax,(t==null||isNaN(t))&&(t=tt))),t=Math.min(t,tt);var w=(n-d)*wt,g=(t-d)*wt,b=14,k=9,bt=parseInt(k/2);s=="h"?(it=parseInt(w),rt=k,ut=0,ft=b,ct=parseInt(w+bt+1),lt=parseInt(g-(w+1)),at=0,vt=b,et=parseInt(g-1),ot=k,st=0,ht=b,yt=u+(k-1),pt=e):(it=0,rt=b,ut=this.resizerType=="samples"||p=="Heatmap"?parseInt(g):parseInt(nt-(w+1)),ft=k,ct=0,lt=b,at=this.resizerType=="samples"||p=="Heatmap"?parseInt(w+bt):parseInt(nt-g+bt),vt=parseInt(g-w),et=0,ot=b,st=this.resizerType=="samples"||p=="Heatmap"?parseInt(w+1):parseInt(nt-g),ht=k,yt=u,pt=e+(k-1)),this.resizerEventData={g:p,axis:i,dim:o,pos:s,l:h,vals:c,min:d,max:tt,smin:n,smax:t,len:dt,unit:wt,width:b,set:l,c:a,i:v,j:y,areas:{org:[r,u,f,e],lim:[r,yt,f,pt],min:[it,rt,ut,ft],max:[et,ot,st,ht],cur:[ct,lt,at,vt]}}},this.updateAxesResizer=function(n){var t,h,u,f;if(this.axesResizingOn&&(n||(n=window.event),t=this.resizerEventData.areas,h=this.adjustedCoordinates(n),h)){var a,r,i,s,y=this.xMouseDown-h.x,p=this.yMouseDown-h.y,k,d,e=null,o=null,c=8,g=parseInt(c/2);if(this.resizerEventData.g=="Heatmap"?(this.resizerEventData.dim=="y"?(a=this.isGroupedData?this.data.w.smps.length:this.data.y?this.data.y.smps.length:0,i=this.resizerEventData.lastMax!=null?this.resizerEventData.lastMax:this.resizerEventData.smax!=null?this.resizerEventData.smax:this.isGroupedData?this.data.w.smps.length:this.data.y.smps.length):(a=this.data.y?this.data.y.vars.length:0,i=this.resizerEventData.lastMax!=null?this.resizerEventData.lastMax:this.resizerEventData.smax!=null?this.resizerEventData.smax:this.data.y.vars.length),r=this.resizerEventData.lastMin!=null?this.resizerEventData.lastMin:this.resizerEventData.smin!=null?this.resizerEventData.smin:0,s=this.resizerEventData.pos=="h"?(t.org[1]-t.org[0])/a:(t.org[3]-t.org[2])/a):(a=this.isGroupedData?this.data.w.smps.length-1:this.data.y?this.data.y.smps.length-1:0,r=this.resizerEventData.lastMin!=null?this.resizerEventData.lastMin:this.resizerEventData.smin!=null?this.resizerEventData.smin:0,i=this.resizerEventData.lastMax!=null?this.resizerEventData.lastMax:this.resizerEventData.smax!=null?this.resizerEventData.smax:this.isGroupedData?this.data.w.smps.length-1:this.data.y.smps.length-1,s=this.resizerEventData.pos=="h"?(t.org[1]-t.org[0])/a:(t.org[3]-t.org[2])/a),this.resizerEventData.active=="min")k=y>t.min[0]?this.xMouseDown-t.min[0]:y<t.min[0]+t.min[1]-t.max[0]?this.xMouseDown-(t.min[0]+t.min[1]-t.max[0]):h.x,d=p>t.min[2]-(t.max[2]+t.max[3])?this.yMouseDown-(t.min[2]-(t.max[2]+t.max[3])):p<t.lim[2]+t.min[2]+t.min[3]-t.lim[3]?t.lim[3]-(t.lim[2]+t.min[2]+t.min[3])+this.yMouseDown:h.y;else if(this.resizerEventData.active=="max")k=y>t.max[0]-(t.min[0]+t.min[1])?this.xMouseDown-(t.max[0]-(t.min[0]+t.min[1])):y<t.lim[0]+t.max[0]+t.max[1]-t.lim[1]?t.lim[1]-(t.lim[0]+t.max[0]+t.max[1])+this.xMouseDown:h.x,d=p>t.max[2]?this.yMouseDown-t.max[2]:p<t.lim[2]+t.max[2]+t.max[3]-(t.lim[2]+t.min[2])?t.lim[2]+t.min[2]-(t.lim[2]+t.max[2]+t.max[3])+this.yMouseDown:h.y;else if(this.resizerEventData.active=="cur")k=y>t.min[0]?this.xMouseDown-t.min[0]:y<t.lim[0]+t.max[0]+t.max[1]-t.lim[1]?t.lim[1]-(t.lim[0]+t.max[0]+t.max[1])+this.xMouseDown:h.x,d=p>t.max[2]?this.yMouseDown-t.max[2]:p<t.lim[2]+t.min[2]+t.min[3]-t.lim[3]?t.lim[3]-(t.lim[2]+t.min[2]+t.min[3])+this.yMouseDown:h.y;else return;u=k-this.xMouseDown,f=d-this.yMouseDown,(this.resizerType=="samples"||this.resizerEventData.g=="Heatmap")&&(u-=u%s,f-=f%s);var nt=u/this.resizerEventData.unit,tt=f/this.resizerEventData.unit,w=document.getElementById(this.target+"canvasXpressAxesResizeMin"),b=document.getElementById(this.target+"canvasXpressAxesResizeMax"),v=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),l=document.getElementById(this.target+"canvasXpressAxesResizeCurrent");w&&b&&v&&l&&(this.resizerEventData.active=="min"?(this.resizerEventData.pos=="h"?(w.style.left=t.min[0]+u+"px",v.style.left=t.min[0]+u+(t.cur[1]-u)/2+"px",l.style.left=t.min[0]+u+g+1+"px",l.style.width=t.cur[1]-u+"px",r=parseInt((t.min[0]+c+u)/s),e=this.resizerType=="samples"?dateFormat(this.data.y.smps[r],this.timeFormat):this.resizerEventData.g=="Heatmap"?this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]]:this.formatNumber(this.resizerEventData.smin+nt)):(w.style.top=t.min[2]+f+"px",v.style.top=t.min[2]+f-(t.cur[3]+f)/2+"px",l.style.height=t.cur[3]+f+"px",i=parseInt((t.min[2]+c+f)/s),e=this.resizerType=="samples"?dateFormat(this.data.y.smps[i],this.timeFormat):this.resizerEventData.g=="Heatmap"?this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[i]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[i]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[i]]:this.formatNumber(this.resizerEventData.smin-tt)),this.showInfoSpan(n,e)):this.resizerEventData.active=="max"?(this.resizerEventData.pos=="h"?(b.style.left=t.max[0]+u+"px",v.style.left=t.min[0]+u+(t.cur[1]-u)/2+"px",l.style.width=t.cur[1]+u+"px",i=parseInt((t.max[0]+c+u)/s),o=this.resizerType=="samples"?dateFormat(this.data.y.smps[i],this.timeFormat):this.resizerEventData.g=="Heatmap"?this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[i]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[i]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[i]]:this.formatNumber(this.resizerEventData.smax+nt)):(b.style.top=t.max[2]+f+"px",v.style.top=t.max[2]+f+(t.cur[3]-f)/2+"px",l.style.top=t.max[2]+f+g+"px",l.style.height=t.cur[3]-f+"px",r=parseInt((t.max[2]+c+f)/s),o=this.resizerType=="samples"?dateFormat(this.data.y.smps[r],this.timeFormat):this.resizerEventData.g=="Heatmap"?this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]]:this.formatNumber(this.resizerEventData.smax-tt)),this.showInfoSpan(n,o)):this.resizerEventData.active=="cur"&&(this.resizerEventData.pos=="h"?(w.style.left=t.min[0]+u+"px",v.style.left=t.min[0]+u+t.cur[1]/2+"px",b.style.left=t.max[0]+u+"px",l.style.left=t.min[0]+u+g+1+"px",r=parseInt((t.min[0]+c+u)/s),i=parseInt((t.max[0]+c+u)/s),this.resizerType=="samples"?(e=dateFormat(this.data.y.smps[r],this.timeFormat),o=dateFormat(this.data.y.smps[i],this.timeFormat)):this.resizerEventData.g=="Heatmap"?(e=this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]],o=this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[i]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[i]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[i]]):(e=this.formatNumber(this.resizerEventData.smin+nt),o=this.formatNumber(this.resizerEventData.smax+nt)),this.showInfoSpan(n,e+"--"+o)):(w.style.top=t.min[2]+f+"px",v.style.top=t.max[2]+f+t.cur[3]/2+"px",b.style.top=t.max[2]+f+"px",l.style.top=t.max[2]+f+g+"px",i=parseInt((t.min[2]+c+f)/s),r=parseInt((t.max[2]+c+f)/s),this.resizerType=="samples"?(e=dateFormat(this.data.y.smps[i],this.timeFormat),o=dateFormat(this.data.y.smps[r],this.timeFormat),this.showInfoSpan(n,o+"--"+e)):this.resizerEventData.g=="Heatmap"?(e=this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[i]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[i]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[i]],o=this.resizerEventData.dim=="x"?this.data.y.vars[this.resizerEventData.vals.varIndices[r]]:this.isGroupedData?this.data.w.smps[this.resizerEventData.vals.grpIndices[r]]:this.data.y.smps[this.resizerEventData.vals.smpIndices[r]],this.showInfoSpan(n,o+"--"+e)):(e=this.formatNumber(this.resizerEventData.smin-tt),o=this.formatNumber(this.resizerEventData.smax-tt),this.showInfoSpan(n,e+"--"+o)))),this.resizerEventData.lastMin=this.resizerType=="samples"||this.resizerEventData.g=="Heatmap"?r:e,this.resizerEventData.lastMax=this.resizerType=="samples"||this.resizerEventData.g=="Heatmap"?i:o,this.resizerDraw&&this.drawAxesResizerUpdate())}},this.drawAxesResizerUpdate=function(n){var i=this.resizerEventData.lastMin!=null?parseFloat(this.resizerEventData.lastMin):parseFloat(this.resizerEventData.smin),u=this.resizerEventData.lastMax!=null?parseFloat(this.resizerEventData.lastMax):parseFloat(this.resizerEventData.smax),r=this.resizerEventData.c||0,s,e,t;if(this.resizerType=="samples"){var h=this.isGroupedData?this.data.w.smps.length-1:this.data.y.smps.length-1,o=[],f=[];for(t=0;t<i;t++)f.push(!0);for(t=i;t<=u;t++)o.push(t),f.push(!1);for(t=u+1;t<h;t++)f.push(!0);this.isGroupedData?(this.grpIndices=o,this.hiddenGrps=f):(this.smpIndices=o,this.hiddenSmps=f)}else if(this.resizerEventData.g=="Heatmap")if(this.startingVarIndices&&this.startingSmpIndices||this.setOriginalIndices(r),s=this.startingVarIndices[r],e=this.startingSmpIndices[r],this.resizerEventData.dim=="y")if(this.isGroupedData)if(this.layoutComb){for(this.layoutParams[r].grpIndices=[],t=i;t<u;t++)this.layoutParams[r].grpIndices.push(e[t]);this.layoutParams[r].smpIndicesStart=i}else{for(this.grpIndices=[],t=i;t<u;t++)this.grpIndices.push(e[t]);this.smpIndicesStart=i}else if(this.layoutComb){for(this.layoutParams[r].smpIndices=[],t=i;t<u;t++)this.layoutParams[r].smpIndices.push(e[t]);this.layoutParams[r].smpIndicesStart=i}else{for(this.smpIndices=[],t=i;t<u;t++)this.smpIndices.push(e[t]);this.smpIndicesStart=i}else if(this.layoutComb){for(this.layoutParams[r].varIndices=[],t=i;t<u;t++)this.layoutParams[r].varIndices.push(s[t]);this.layoutParams[r].varIndicesStart=i}else{for(this.varIndices=[],t=i;t<u;t++)this.varIndices.push(s[t]);this.varIndicesStart=i}else this.resizerEventData.lastMin&&(this["setMin"+this.resizerEventData.set]=i),this.resizerEventData.lastMax&&(this["setMax"+this.resizerEventData.set]=u);n&&this.updateResizerEventData(i,u),this.draw()},this.drawAxesResizerBackgroundData=function(n,t,i,r){var f,u;if(this.resizerType&&this.resizerDataIndex>-1){this.setAllSamplesVisible();var s,h,l,a,v=this.graphType=="Candlestick"?"close":!1,c=[],e=[],o=[];for(u=0;u<this.smpIndices.length;u++)c.push(this.getDataAtPos(this.resizerDataIndex,u,v));if(f=this.range(c),this.resizerPosition.match(/top|bottom/)){for(s=i/(this.smpIndices.length-1),h=r/((f[1]-f[0])*1.2),l=(f[1]-f[0])*.1*h,a=t+r,e.push(n),o.push(a),u=0;u<c.length;u++)e.push(n),o.push(a-((c[u]-f[0])*h+l)),n+=s;n-=s,e.push(n),o.push(a)}else{for(s=r/(this.smpIndices.length-1),h=i/((f[1]-f[0])*1.2),l=(f[1]-f[0])*.1*h,e.push(n),o.push(t),u=0;u<c.length;u++)e.push(n+(c[u]-f[0])*h+l),o.push(t),t+=s;t-=s,e.push(n),o.push(t)}this.drawShape("polygon",e,o,!1,!1,this.resizerBackgroundColorCurrent,this.resizerBackgroundColorOutlineCurrent,"closed")}},this.drawAxesResizerMasks=function(){if(this.resizerType){var n,t,r,u,i=this.resizerEventData.areas,f=this.isGroupedData?this.data.w.grps.length-1:this.data.y.smps.length-1,e=this.resizerEventData.pos=="h"?(i.org[1]-i.org[0])/f:(i.org[3]-i.org[2])/f;this.resizerEventData.pos=="h"?(this.resizerEventData.smin>0&&(n=i.org[0]-1,t=i.org[2]-this.resizerWidth,r=e*this.resizerEventData.smin,u=this.resizerWidth,this.rectangle(n,t,r,u,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",n,t,n+r+1,t,this.foreground),this.drawLine("line",n+r,t,n+r,t+u,this.foreground)),this.resizerEventData.smax<f&&(n=i.org[0]+i.max[0]+1,t=i.org[2]-this.resizerWidth,r=e*(f-this.resizerEventData.smax)+1,u=this.resizerWidth,this.rectangle(n,t,r,u,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",n-1,t,n+r+2,t,this.foreground),this.drawLine("line",n-1,t,n-1,t+u,this.foreground)),n=i.org[0]+i.max[0],t=i.org[2]-1,r=i.org[0]+e*this.resizerEventData.smin,this.drawLine("line",n,t,r,t,this.foreground)):(this.resizerEventData.smin>0&&(n=i.org[0]+14,t=i.org[2],r=this.resizerWidth,u=e*this.resizerEventData.smin,this.rectangle(n,t,r,u,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",n,t+u,n+r,t+u,this.foreground),this.drawLine("line",n+r,t,n+r,t+u,this.foreground)),this.resizerEventData.smax<f&&(n=i.org[0]+14,t=i.org[2]+i.min[2],r=this.resizerWidth,u=(f-this.resizerEventData.smax)*e,this.rectangle(n,t,r,u,this.resizerBackgroundColor,this.resizerBackgroundColor),this.drawLine("line",n,t,n+r,t,this.foreground),this.drawLine("line",n+r,t,n+r,t+u,this.foreground)),n=i.org[0]+14,t=i.org[2]+i.min[2],u=i.org[2]+e*this.resizerEventData.smin,this.drawLine("line",n,t,n,u,this.foreground))}},this.registerAxesResizer=function(n){var u;if(n||(n=window.event),u=this.adjustedCoordinates(n),u){var i=u.x,r=u.y,t=this.resizerEventData.areas,f=t.lim[1]-t.lim[0],e=t.lim[3]-t.lim[2],o=f>e?"h":"v";i>=t.min[0]+t.lim[0]&&i<=t.min[0]+t.min[1]+t.lim[0]&&r>=t.min[2]+t.lim[2]&&r<=t.min[2]+t.min[3]+t.lim[2]?(this.resizerEventData.active="min",this.axesResizingOn=!0):i>=t.max[0]+t.lim[0]&&i<=t.max[0]+t.max[1]+t.lim[0]&&r>=t.max[2]+t.lim[2]&&r<=t.max[2]+t.max[3]+t.lim[2]?(this.resizerEventData.active="max",this.axesResizingOn=!0):i>=t.cur[0]+t.lim[0]&&i<=t.cur[0]+t.cur[1]+t.lim[0]&&r>=t.cur[2]+t.lim[2]&&r<=t.cur[2]+t.cur[3]+t.lim[2]?(this.resizerEventData.active="cur",this.axesResizingOn=!0):o=="h"?i>=t.lim[0]&&i<t.min[0]+t.lim[0]?(this.resizerEventData.active="prev",this.axesResizingOn=!0):i>t.lim[0]+t.max[0]+t.max[1]&&i<=t.lim[1]-5&&(this.resizerEventData.active="next",this.axesResizingOn=!0):r>=t.lim[2]+t.min[2]+t.min[3]&&r<=t.lim[2]+t.lim[3]?(this.resizerEventData.active="prev",this.axesResizingOn=!0):r>=t.lim[2]&&r<=t.lim[2]+t.max[2]&&(this.resizerEventData.active="next",this.axesResizingOn=!0),this.xMouseDown=i,this.yMouseDown=r}},this.activateDeactivateAxesResizer=function(n){var e,r,u,i;if(n||(n=window.event),e=this.adjustedCoordinates(n),e){var f,o=e.x,s=e.y,t=this.resizerEventData.areas,h=t.lim[1]-t.lim[0],c=t.lim[3]-t.lim[2],l=h>c?"h":"v";return l=="h"?o>=t.lim[0]&&o<=t.lim[0]+t.min[0]?f="prev":o>=t.lim[0]+t.max[0]+t.max[1]&&o<=t.lim[1]-5&&(f="next"):s>=t.lim[2]+t.min[2]+t.min[3]&&s<=t.lim[2]+t.lim[3]?f="prev":s>=t.lim[2]&&s<=t.lim[2]+t.max[2]&&(f="next"),r=document.getElementById(this.target+"canvasXpressAxesResizePrevious"),u=document.getElementById(this.target+"canvasXpressAxesResizeNext"),r&&u&&(f=="prev"?(i=r.style.backgroundImage,n.type.match(/mouseout|touchcancel/i)?i.match(/_active.png/)&&(r.style.backgroundImage=i.replace("_active.png",".png")):i.match(/_active.png/)||(r.style.backgroundImage=i.replace(".png","_active.png"))):f=="next"?(i=u.style.backgroundImage,n.type.match(/mouseout|touchcancel/i)?i.match(/_active.png/)&&(u.style.backgroundImage=i.replace("_active.png",".png")):i.match(/_active.png/)||(u.style.backgroundImage=i.replace(".png","_active.png"))):(i=r.style.backgroundImage,i.match(/_active.png/)&&(r.style.backgroundImage=i.replace("_active.png",".png")),i=u.style.backgroundImage,i.match(/_active.png/)&&(u.style.backgroundImage=i.replace("_active.png",".png")))),!1}},this.moveAxesResizer=function(){var t=this.resizerEventData.smin,i=this.resizerEventData.smax,n=this.resizerType=="samples"||this.resizerEventData.g=="Heatmap"?1:(i-t)/10;(this.resizerType=="samples"||this.resizerEventData.g=="Heatmap")&&this.resizerEventData.pos=="v"?this.resizerEventData.active=="prev"?t+n<this.resizerEventData.min?(n=t-this.resizerEventData.min,this.resizerEventData.lastMin=this.resizerEventData.min,this.resizerEventData.lastMax=i+n):(this.resizerEventData.lastMin=t+n,this.resizerEventData.lastMax=i+n):i-n>this.resizerEventData.max?(n=this.resizerEventData.max-i,this.resizerEventData.lastMin=t-n,this.resizerEventData.lastMax=this.resizerEventData.max):(this.resizerEventData.lastMin=t-n,this.resizerEventData.lastMax=i-n):this.resizerEventData.active=="prev"?t-n<this.resizerEventData.min?(n=t-this.resizerEventData.min,this.resizerEventData.lastMin=this.resizerEventData.min,this.resizerEventData.lastMax=i-n):(this.resizerEventData.lastMin=t-n,this.resizerEventData.lastMax=i-n):i+n>this.resizerEventData.max?(n=this.resizerEventData.max-i,this.resizerEventData.lastMin=t+n,this.resizerEventData.lastMax=this.resizerEventData.max):(this.resizerEventData.lastMin=t+n,this.resizerEventData.lastMax=i+n);var r=this.resizerEventData.areas,f=document.getElementById(this.target+"canvasXpressAxesResizeMin"),e=document.getElementById(this.target+"canvasXpressAxesResizeMax"),o=document.getElementById(this.target+"canvasXpressAxesResizeMiddle"),s=document.getElementById(this.target+"canvasXpressAxesResizeCurrent"),h=parseInt(4),u=n*this.resizerEventData.unit;(this.resizerEventData.pos=="h"&&this.resizerEventData.active=="prev"||this.resizerEventData.pos=="v"&&this.resizerEventData.active=="next")&&(u*=-1),this.resizerEventData.pos=="h"?(f.style.left=r.min[0]+u+1+"px",o.style.left=r.min[0]+u+r.cur[1]/2+"px",e.style.left=r.max[0]+u+"px",s.style.left=r.min[0]+u+h+1+"px"):(f.style.top=r.min[2]+u+1+"px",o.style.top=r.max[2]+u+r.cur[3]/2+"px",e.style.top=r.max[2]+u+"px",s.style.top=r.max[2]+u+h+1+"px")},this.getAxesVals=function(n){var i=["minData","maxData","xAxisMin","xAxisMax","xAxis2Min","xAxis2Max","yAxisMin","yAxisMax","zAxisMin","zAxisMax","xAxisUnit","xAxis2Unit","yAxisUnit","zAxisUnit","setMin","setMax","setMin2","setMax2","setMinX","setMaxX","setMinY","setMaxY","setMinZ","setMaxZ","xAxisAbsMin","xAxisAbsMax","xAxis2AbsMin","xAxis2AbsMax","yAxisAbsMin","yAxisAbsMax","zAxisAbsMin","zAxisAbsMax","graphType","x","y","varIndices","smpIndices","grpIndices","varIndicesStart","smpIndicesStart"],r={},t;if(this.layoutComb)for(t=0;t<i.length;t++)r[i[t]]=this.layoutParams[n][i[t]];else for(t=0;t<i.length;t++)r[i[t]]=this[i[t]];return r},this.isAxis=function(n){var a,e,o,l,t,i;if(n||(n=window.event),this.resizerType&&this.layoutValid)return!1;if(a=this.adjustedCoordinates(n),a){var u=a.x,f=a.y,r=0,s=this.margin*1,h=this.margin*2,c=18;for(e=0;e<this.layoutRows;e++)for(o=0;o<this.layoutCols;o++){if(l=this.layoutComb?this.layoutParams[r].graphType:this.graphType,l.match(/Network|Pie|Venn|Stacked|Area|Correlation|Circular/))return!1;if(t=this.getBoundsXY(r),l.match(/Scatter/)){if(u>=t[0]&&u<=t[1]&&f>=t[3]&&f<=t[3]+c)return i=this.getAxesVals(r),this.showAxesResizer("xAxis",t[0],t[1],t[3]+s,t[3]+this.getAxisFont(i.x)+h,"x","h","b",i,"X",r,e,o),!0;if(u>=t[0]-c&&u<=t[0]&&f>=t[2]&&f<=t[3])return i=this.getAxesVals(r),this.showAxesResizer("yAxis",t[0]-(this.getAxisFont(i.y)+h),t[0]-s,t[2],t[3],"y","v","l",i,"Y",r,e,o),!0}else if(l.match(/Heatmap/)){if(u>=t[0]-c&&u<=t[0]&&f>=t[2]&&f<=t[3])return i=this.getAxesVals(r),this.showAxesResizer("xAxis",t[0]-(this.getAxisFont(i.y)+h),t[0]-s,t[2],t[3],"y","v","l",i,"",r,e,o),!0;if(u>=t[1]&&u<=t[1]+c&&f>=t[2]&&f<=t[3])return i=this.getAxesVals(r),this.showAxesResizer("xAxis",t[1]+s,t[1]+this.getAxisFont(i.y)+h,t[2],t[3],"y","v","r",i,"",r,e,o),!0;if(u>=t[0]&&u<=t[1]&&f>=t[2]-c&&f<=t[2])return i=this.getAxesVals(r),this.showAxesResizer("xAxis",t[0],t[1],t[2]-(this.getAxisFont(i.x)+h),t[2]-s,"x","h","t",i,"",r,e,o),!0;if(u>=t[0]&&u<=t[1]&&f>=t[3]&&f<=t[3]+c)return i=this.getAxesVals(r),this.showAxesResizer("xAxis",t[0],t[1],t[3]+s,t[3]+this.getAxisFont(i.x)+h,"x","h","b",i,"",r,e,o),!0}else if(this.graphOrientation=="vertical"){if(u>=t[0]-c&&u<=t[0]&&f>=t[2]&&f<=t[3])return i=this.getAxesVals(r),this.showAxesResizer("xAxis",t[0]-(this.getAxisFont(i.y)+h),t[0]-s,t[2],t[3],"y","v","l",i,"",r,e,o),!0;if(u>=t[1]&&u<=t[1]+c&&f>=t[2]&&f<=t[3])return i=this.getAxesVals(r),l=="BarLine"?this.showAxesResizer("xAxis2",t[1]+s,t[1]+this.getAxisFont(i.y)+h,t[2],t[3],"y","v","r",i,"2",r,e,o):this.showAxesResizer("xAxis",t[1]+s,t[1]+this.getAxisFont(i.y)+h,t[2],t[3],"y","v","r",i,"",r,e,o),!0}else{if(u>=t[0]&&u<=t[1]&&f>=t[2]-c&&f<=t[2])return i=this.getAxesVals(r),this.showAxesResizer("xAxis",t[0],t[1],t[2]-(this.getAxisFont(i.x)+h),t[2]-s,"x","h","t",i,"",r,e,o),!0;if(u>=t[0]&&u<=t[1]&&f>=t[3]&&f<=t[3]+c)return i=this.getAxesVals(r),l=="BarLine"?this.showAxesResizer("xAxis2",t[0],t[1],t[3]+s,t[3]+this.getAxisFont(i.x)+h,"x","h","b",i,"2",r,e,o):this.showAxesResizer("xAxis",t[0],t[1],t[3]+s,t[3]+this.getAxisFont(i.x)+h,"x","h","b",i,"",r,e,o),!0}r++}}return!1},this.endAxesResizer=function(n){this.axesResizingOn?(this.resetInfoSpan(n),(this.resizerEventData.active=="prev"||this.resizerEventData.active=="next")&&this.moveAxesResizer(n),this.drawAxesResizerUpdate(!0),this.axesResizingOn=!1):this.resizerType&&(this.updateResizerEventData(),this.refreshAxesResizer())},this.resetAxesResizer=function(n){if(this.axesResizerShow){var t=document.getElementById(this.target+"canvasXpressAxesResize");t&&(this.addRemoveAxesResizerListeners("removeEvtListener"),t.style.display="none",this.resizerEventData={},this.resetInfoSpan(n),this.axesResizerShow=!1)}},this.initializeAxisResizerEvents=function(){this.disableEvents||this.addAxesResizeDiv()},this.initializeAxisResizerEvents()},CanvasXpress.prototype.initDraggingEvents=function(){this.addDragDiv=function(){if(!this.$(this.target+"-cX-Drag")){var n=this.$cX("div",{id:this.target+"-cX-Drag",className:"CanvasXpressDrag"},{width:"0.5px",height:"0.5px",zIndex:9e3});this.canvas.parentNode.appendChild(n)}},this.registerDragNetwork=function(n){var r,o,s,u=this.isEvent(n,!0),c=this.getTargetEvent(n),i=u[1],t,e,h,f;if(i&&i.match(/-legend-/)?this.moveLegend=i.match(/-legend-Nodes/)?"Nodes":i.match(/-legend-Edges/)?"Edges":i.match(/-legend-Decorations/)?"Decorations":i.split(/-legend-/)[1]:(i&&i.match(/-lab$/)?(n.shiftKey&&(o=!0),r=u[0][0]):i&&i.match(/-dec$/)?n.shiftKey?(r=u[0][0],s=!0):(this.resetDrag(n),this.resetFlags(n)):r=u?u[0][0]:"NaN",!isNaN(r)&&r<this.data.nodes.length&&(c.style.cursor="move",this.moveNode=!0,this.moveNodeIndex=r,o?this.moveNodeLab=!0:s&&(this.moveNodeDec=!0),t=this.data.nodes[this.moveNodeIndex],this.moveNodeW=t.width?t.width:t.size?this.nodeSize*t.size:this.nodeSize,this.moveNodeH=t.height?t.height:t.size?this.nodeSize*t.size:this.nodeSize,this.moveNodeLab?(this.moveNodeX=t.labelX!=null?t.labelX-(this.xMouseDown/this.scaleFactor-this.offsetX):0,this.moveNodeY=t.labelY!=null?t.labelY-(this.yMouseDown/this.scaleFactor-this.offsetY):0):this.moveNodeDec?(this.moveNodeX=t.decorationsX?t.decorationsX-(this.xMouseDown/this.scaleFactor-this.offsetX):0,this.moveNodeY=t.decorationsY?t.decorationsY-(this.yMouseDown/this.scaleFactor-this.offsetY):0):this.is3DNetwork?(this.moveNodeX=t.x3d-(this.xMouseDown/this.scaleFactor-this.offsetX),this.moveNodeY=t.y3d-(this.yMouseDown/this.scaleFactor-this.offsetY)):(this.moveNodeX=t.x-(this.xMouseDown/this.scaleFactor-this.offsetX),this.moveNodeY=t.y-(this.yMouseDown/this.scaleFactor-this.offsetY)))),this.networkStack.length<1||this.networkStack.length-1!=this.networkStackIndex){for(e=this.cloneObject(this.networkStack),h=this.networkStackIndex,this.clearNetworkStack(),f=0;f<h;f++)this.networkStack.push(this.cloneObject(e[f]));this.addToNetworkStack(),e=!1}},this.registerDragGenome=function(n){var t=this.isEvent(n,!0);this.moveGenome=t&&isNaN(t[0][0])?t[0][0]:!1},this.registerDrag=function(n){var l,o,h,c,f,t,e,i;if(n||(n=window.event),this.isCanvasResize(n))this.resizingCanvasOn=!0,this.hideViewport();else{if(!n)return!1;if(this.touches||(this.touches=[]),l=this.getTargetEvent(n),o=this.adjustedCoordinates(n),o){CanvasXpress.current=l.id;var r=o.x,u=o.y,s=0;for(h=0;h<this.layoutRows;h++)for(c=0;c<this.layoutCols;c++){if(f=this.layoutComb?this.layoutParams[s].graphType:this.graphType,t=this.getBoundsXY(s),f.match(/Correlation|Pie|Venn|Stacked|Area/))if(this.mobileApp){if(r>=t[0]&&r<=t[1]&&u>=t[2]&&u<=t[3]||this.moveGenome)return this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=r,this.yMouseDown=u,this.touches.push([r,u,(new Date).getTime()]),!1}else return!1;else f=="Genome"&&this.registerDragGenome(n);if(r>=t[0]&&r<=t[1]&&u>=t[2]&&u<=t[3]||this.moveGenome)return this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=r,this.yMouseDown=u,this.touches.push([r,u,(new Date).getTime()]),i=this.$(this.target+"-cX-Drag"),f=="Network"&&this.registerDragNetwork(n),i.style.left=(f.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation!="vertical"||n.shiftKey)&&(f.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation=="vertical"||!n.shiftKey)?this.xMouseDown+"px":t[0]+"px",i.style.top=(f.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation=="vertical"||n.shiftKey)&&(f.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation!="vertical"||!n.shiftKey)&&f!="Genome"?this.yMouseDown+"px":t[2]+"px",this.layoutValid&&(this.layoutValidR=h,this.layoutValidC=c,this.layoutValidN=s),!1;if(r>=t[4]&&r<=t[5]&&u>=t[6]&&u<=t[7]&&(e=this.isEvent(n),e))return this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=r,this.yMouseDown=u,this.touches.push([r,u,(new Date).getTime()]),i=this.$(this.target+"-cX-Drag"),e[0].match("Smp")?(this.moveSmp=e[0],f.match(/Heatmap/)||this.graphOrientation=="horizontal"?(i.style.left=t[4]+"px",i.style.width=t[5]-t[4]+"px",i.style.height="3px"):(i.style.width="3px",i.style.top=t[6]+"px",i.style.height=t[7]-t[6]+"px")):e[0].match("Var")&&(this.moveVar=e[0],i.style.width="3px",i.style.top=t[6]+"px",i.style.height=t[7]-t[6]+"px"),!1;s++}return!1}}},this.updateDragScatter3D=function(n,t,i,r,u){if(!this.mobileApp||!this.touches||!(this.touches.length>1)){var f=this,o=this.mobileApp?100:1,e=function(){clearTimeout(e);var i=f.xMouseDown,r=f.yMouseDown,o=n,s=t,c=f.lineLength(i,r,o,s),h=f.layoutComb?f.layoutParams[u].x:f.x,l=f.layoutComb?f.layoutParams[u].y:f.y,a=(o-i)*f.rotationSensitivity/h,v=(s-r)*f.rotationSensitivity/l,y=c*f.rotationSensitivity/h;f.xRotate-=a,f.yRotate+=v,f.zRotate-=y,f.draw(),f.skipClick=!0};setTimeout(e,o)}},this.updateDragNetwork=function(n,t,i){var v,y,o,l,s,p;if(!this.mobileApp||!this.touches||!(this.touches.length>1)){this.movingOn=!0;var h=t,c=i,r,u,f,o,s,e,w=this.getTargetEvent(n),a={};if(this.moveNode||this.moveLegend){if(this.moveLegend)this.moveLegend=="Nodes"?(u=this.data.legend.pos.nodes.x-(h/this.scaleFactor-this.offsetX),f=this.data.legend.pos.nodes.y-(c/this.scaleFactor-this.offsetY),this.data.legend.pos.nodes.x-=u,this.data.legend.pos.nodes.y-=f):this.moveLegend=="Edges"?(u=this.data.legend.pos.edges.x-(h/this.scaleFactor-this.offsetX),f=this.data.legend.pos.edges.y-(c/this.scaleFactor-this.offsetY),this.data.legend.pos.edges.x-=u,this.data.legend.pos.edges.y-=f):this.moveLegend=="Decorations"?(u=this.data.legend.pos.decorations.x-(h/this.scaleFactor-this.offsetX),f=this.data.legend.pos.decorations.y-(c/this.scaleFactor-this.offsetY),this.data.legend.pos.decorations.x-=u,this.data.legend.pos.decorations.y-=f):(o=parseInt(this.moveLegend.replace("Text","")),u=this.data.legend.text[o].x-(h/this.scaleFactor-this.offsetX),f=this.data.legend.text[o].y-(c/this.scaleFactor-this.offsetY),this.data.legend.text[o].x-=u,this.data.legend.text[o].y-=f);else if(this.data.nodes[this.moveNodeIndex])if(r=this.data.nodes[this.moveNodeIndex],this.is3DNetwork?(u=r.x3d-(h/this.scaleFactor-this.offsetX)-this.moveNodeX,f=r.y3d-(c/this.scaleFactor-this.offsetY)-this.moveNodeY):(u=r.x-(h/this.scaleFactor-this.offsetX)-this.moveNodeX,f=r.y-(c/this.scaleFactor-this.offsetY)-this.moveNodeY),this.moveNodeLab)u=r.labelX!=null?r.labelX-(h/this.scaleFactor-this.offsetX)-this.moveNodeX:u,f=r.labelY!=null?r.labelY-(c/this.scaleFactor-this.offsetY)-this.moveNodeY:f,this.modifyXYNodeLab(r.id,u,f);else if(this.moveNodeDec)u=r.decorationsX?r.decorationsX-(h/this.scaleFactor-this.offsetX)-this.moveNodeX:u,f=r.decorationsY?r.decorationsY-(c/this.scaleFactor-this.offsetY)-this.moveNodeY:f,this.modifyXYNodeDec(r.id,u,f);else if(n.shiftKey&&!n.ctrlKey){v=this.moveNodeW-u+(t-this.xMouseDown)/this.scaleFactor,y=this.moveNodeH-f+(i-this.yMouseDown)/this.scaleFactor,this.modifyNodeSize(r.id,Math.abs(v),Math.abs(y));for(o in this.selectNode)o!=r.id&&this.modifyNodeSize(o,v,y)}else if(e=this.findParentNodes(r.id),this.networkLayoutType!="radial"&&(this.moveParentsWithChildren&&!n.shiftKey&&!n.ctrlKey||!this.moveParentsWithChildren&&n.shiftKey&&n.ctrlKey)&&e&&(r=this.data.nodes[this.data.nodeIndices[e[0]]]),this.modifyXYNode(r.id,u,f),this.selectNode){if(a[r.id]=!0,e=this.findChildrenNodeIndices(r.id),e)for(s=0;s<e.length;s++)a[this.data.nodes[e[s]].id]=!0;for(o in this.selectNode)if(!a.hasOwnProperty(o)&&(l=this.data.nodes[this.data.nodeIndices[o]],e=this.findParentNodes(l.id),this.networkLayoutType!="radial"&&(this.moveParentsWithChildren&&!n.shiftKey&&!n.ctrlKey||!this.moveParentsWithChildren&&n.shiftKey&&n.ctrlKey)&&e&&(l=this.data.nodes[this.data.nodeIndices[e[0]]]),this.modifyXYNode(l.id,u,f),a[l.id]=!0,e=this.findChildrenNodeIndices(l.id),e))for(s=0;s<e.length;s++)a[this.data.nodes[e[s]].id]=!0}}else this.panningX=(t-this.xMouseDown)/this.scaleFactor,this.panningY=(i-this.yMouseDown)/this.scaleFactor;this.skipClick=u!=null||f!=null?!0:!1,this.draw(!1,!1,!1,!0),this.is3DNetwork&&r&&(this.moveNodeIndex=this.data.nodeIndices[r.id]),p=this.$(w.id),p&&(p.style.cursor=n.shiftKey?"se-resize":"move")}},this.updateDragGenome=function(n,t,i){var r;this.mobileApp&&this.touches&&this.touches.length>1||(this.moveGenome?(this.movingOn=!0,r=this.$(this.target+"-cX-Drag"),r.style.left="0px",r.style.width=this.width+"px",r.style.top=i+"px",r.style.height="3px"):(r=(t-this.xMouseDown)/this.xAxisUnit,this.setMin==null&&(this.setMin=this.xAxisMin),this.setMax==null&&(this.setMax=this.xAxisMax),this.setMin-=r,this.setMax-=r,this.draw(),this.xMouseDown=t))},this.updateDrag=function(n){var o,l,i,t;if(this.draggingOn){if(n||(n=window.event),o=this.adjustedCoordinates(n),this.resetOn){this.resetOn=!1,this.stopEvent(n);return}if(o){this.touchEvent="drag";var r=o.x,u=o.y,s=this.layoutValidR,h=this.layoutValidC,f=this.layoutValidN||0,e=this.layoutComb?this.layoutParams[f].graphType:this.graphType,y=this.layoutComb?this.layoutParams[f].varIndices:this.varIndices,c;if(c=this.isGroupedData?this.layoutComb?this.layoutParams[f].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[f].smpIndices:this.smpIndices,e.match(/Correlation|Pie|Venn|Stacked|Area/))return this.mobileApp&&(this.movingOn=!0,this.resetOn=!1),!1;if(e=="Scatter3D"&&!n.shiftKey||this.is3DPlot)this.updateDragScatter3D(r,u,s,h,f);else if(e!="Network"||!this.moveNode&&!this.moveLegend&&(n.ctrlKey||n.shiftKey||n.altKey))if(e=="Genome"&&(this.moveGenome||!n.shiftKey))this.updateDragGenome(n,r,u,s,h,f);else if(this.moveVar||this.moveSmp)i=this.getBoundsXY(f),t=this.$(this.target+"-cX-Drag"),this.skipClick=!0,r>=i[4]&&r<=i[5]&&u>=i[6]&&u<=i[7]&&(this.moveSmp?e.match(/Heatmap/)||this.graphOrientation=="horizontal"?t.style.top=u+"px":t.style.left=r+"px":t.style.left=r+"px");else{if(this.mobileApp&&this.touches&&this.touches.length>1)return;if(l=this.varIndicesStart>0||this.smpIndicesStart>0?!0:this.varIndicesStart==0&&this.startingVarIndices&&this.startingVarIndices[f]?this.varIndicesStart+y.length<this.startingVarIndices[f].length?!0:!1:this.smpIndicesStart==0&&this.startingSmpIndices&&this.startingSmpIndices[f]?this.smpIndicesStart+c.length<this.startingSmpIndices[f].length?!0:!1:!1,e.match(/Heatmap|Bar|Line|Dotplot|Boxplot/)&&l){this.panningOn=!0;var a=Math.abs(this.xMouseDown-r),v=Math.abs(this.yMouseDown-u),t=!1;return a>v?a>this.x/10&&(t=this.xMouseDown>r?39:37,this.xMouseDown=r,this.yMouseDown=u):v>this.y/10&&(t=this.yMouseDown>u?40:38,this.xMouseDown=r,this.yMouseDown=u),t&&this.handlePanning(n,t),this.movingOn=!0,this.resetOn=!1,!1}i=this.getBoundsXY(f),t=this.$(this.target+"-cX-Drag"),this.skipClick=!0,(e.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation!="vertical"||n.shiftKey)&&(e.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation=="vertical"||!n.shiftKey)?r>this.xMouseDown?t.style.width=r>i[1]?i[1]-this.xMouseDown+"px":r-this.xMouseDown+"px":r<i[0]?(t.style.left=i[0]+"px",t.style.width=this.xMouseDown-i[0]+"px"):(t.style.left=r+"px",t.style.width=this.xMouseDown-r+"px"):t.style.width=i[1]-i[0]+"px",(e.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation=="vertical"||n.shiftKey)&&(e.match(/Scatter|Heatmap|Network|Genome|Circular/)||this.graphOrientation!="vertical"||!n.shiftKey)&&e!="Genome"?u>this.yMouseDown?t.style.height=u>i[3]?i[3]-this.yMouseDown+"px":u-this.yMouseDown+"px":u<i[2]?(t.style.top=i[2]+"px",t.style.height=this.yMouseDown-i[2]+"px"):(t.style.top=u+"px",t.style.height=this.yMouseDown-u+"px"):t.style.height=i[3]-i[2]+"px"}else this.updateDragNetwork(n,r,u,s,h,f)}this.movingOn=!0,this.resetOn=!1}},this.endDrag=function(n){var h,a,v,p,y,c,d,r,l,t,w,f;if(this.draggingOn){if(h=this.layoutComb?this.layoutParams[this.layoutValidN].graphType:this.graphType,h.match(/Correlation|Pie|Venn|Stacked|Area|Circular/))return!1;if(n||(n=window.event),a=this.$(this.target),a&&(a.style.cursor="default",v=this.getTargetEvent(n),v&&v.style&&(v.style.cursor="default")),this.panningGlobalX+=this.panningX,this.panningGlobalY+=this.panningY,this.panningX=0,this.panningY=0,h=="Scatter3D"&&!n.shiftKey||this.is3DPlot)this.resetDrag(n);else if(h=="Network"&&(this.moveNode||this.moveLegend))a&&(this.isSelectNodes&&this.movingOn&&(this.resetSelectedNodes(),this.draw()),this.userEvents.enddragnode&&this.movingOn?(this.moveLegend?p={legend:this.moveLegend}:(y=this.moveNodeIndex,c=this.findChildrenNodeIndices(this.data.nodes[y].id),c?c.push(y):c=[y],p=this.extractDataObject(c)),this.resetDrag(n),this.userEvents.enddragnode.call(this,p)):this.resetDrag(n),this.addToNetworkStack());else if(h=="Genome"&&(this.moveGenome||!n.shiftKey)){if(this.movingOn&&this.moveGenome&&(t=this.adjustedCoordinates(n),d=[],t&&(f=t.y,f!=this.yMouseDown))){var i=this.moveGenome.replace("track-","").split(":"),u=parseInt(i[0]),e=i.length>1?parseInt(i[1]):null;for(r=0;r<this.subtracksInfo.length;r++)if(this.subtracksInfo[r]){var g=this.subtracksInfo[r].start,o=this.subtracksInfo[r].track,s=this.subtracksInfo[r].index;if(g>f){u!=o&&u!=o-1?(o>u&&o--,l=this.data.tracks.splice(u,1)[0],this.data.tracks.splice(o,0,l),this.draw()):e!=null&&(u==o-1&&(s=this.subtracksInfo[r-1].index,s++),e=this.subtracksInfo[e].index,e!=s&&(s>e&&s--,l=this.data.tracks[u].data.splice(e,1)[0],this.data.tracks[u].data.splice(s,0,l),this.draw()));break}}}this.resetDrag(n)}else if(this.movingOn&&!this.panningOn){if(t=this.adjustedCoordinates(n),t&&(w=t.x,f=t.y,w!=this.xMouseDown||f!=this.yMouseDown)){var i=this.$(this.target+"-cX-Drag"),b=parseInt(i.style.left),k=parseInt(i.style.top),nt=b+parseInt(i.style.width),tt=k+parseInt(i.style.height);this.handleDragEvent(n,b,k,nt,tt),this.resetDrag(n)}}else this.resetDrag(n)}else this.resetDrag(n)},this.validateMinMax=function(n,t){return isNaN(n)||isNaN(t)?!1:n>t?!1:!0},this.handleDragEventNetwork=function(n,t,i,r,u){for(var h={},o=[],e=[],c=[],l=[],s={},f=0;f<this.dataEvent.length;f++){var a=this.dataEvent[f][0],v=this.dataEvent[f][1],y=this.dataEvent[f][2];this.isObjectInsideArea(v,y,t,i,r,u)&&a<this.data.nodes.length&&(h[a]=1)}for(f=0;f<this.data.nodes.length;f++)h[f]?(e.push(this.data.nodes[f].id),c.push(f)):o.push(this.data.nodes[f].id);if(o.length<this.data.nodes.length&&(n.shiftKey?(this.setSelectNodes(e),this.isSelectNodes=e.length,this.draw(),this.draggingOn=!1,this.showInfoSpan(n,"While mouse-over nodes:<br>1. Press Shift and drag mouse to resize nodes<br>2. Drag mouse to move nodes")):(this.resetZoomPan(),this.hideUnhideNodes(o,!0),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor),this.draw(!1,!1,!1,!0)),this.showDataTableOnSelect))if(this.networkShowDataTable=="edges"){for(f=0;f<e.length;f++)s[e[f]]=1;for(f=0;f<this.data.edges.length;f++)(s[this.data.edges[f].id1]||s[this.data.edges[f].id2])&&l.push(this.data.nodes.length+f);this.updateDataTable(this.extractDataObject(l))}else this.updateDataTable(this.extractDataObject(c))},this.setOriginalIndices=function(n,t,i,r){var u;if(t||(t=this.layoutComb?this.layoutParams[n].varIndices:this.varIndices),i||(i=this.isGroupedData?this.layoutComb?this.layoutParams[n].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[n].smpIndices:this.smpIndices),r&&(this.startingVarIndices=[],this.startingSmpIndices=[]),this.startingVarIndices||(this.startingVarIndices=[]),this.startingSmpIndices||(this.startingSmpIndices=[]),!this.startingVarIndices[n])for(this.startingVarIndices[n]=[],u=0;u<t.length;u++)this.startingVarIndices[n][u]=t[u];if(!this.startingSmpIndices[n])for(this.startingSmpIndices[n]=[],u=0;u<i.length;u++)this.startingSmpIndices[n][u]=i[u]},this.handleDragEventHeatmap=function(n,t,i,r,u){var c=[],l=[],s,h,e,o,f,a;for(this.resetAxesResizer(),h=this.layoutComb?this.layoutParams[n].varIndices:this.varIndices,s=this.isGroupedData?this.layoutComb?this.layoutParams[n].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[n].smpIndices:this.smpIndices,this.setOriginalIndices(n,h,s),this.layoutComb?(this.varIndicesStart=this.layoutParams[n].varIndicesStart<0?0:this.layoutParams[n].varIndicesStart,this.smpIndicesStart=this.layoutParams[n].smpIndicesStart<0?0:this.layoutParams[n].smpIndicesStart):(this.varIndicesStart=this.varIndicesStart<0?0:this.varIndicesStart,this.smpIndicesStart=this.smpIndicesStart<0?0:this.smpIndicesStart),this.varIndices=[],this.isGroupedData?this.grpIndices=[]:this.smpIndices=[],f=0;f<this.dataEvent.length;f++)e=this.dataEvent[f][0],o=this.dataEvent[f][2],(t<o[0]||t<o[2])&&r>o[0]&&(i<o[1]||i<o[3])&&u>o[1]&&(c[e[0]]||(this.varIndices.push(e[0]),c[e[0]]=1),l[e[1]]||(this.isGroupedData?this.grpIndices.push(e[1]):this.smpIndices.push(e[1]),l[e[1]]=1));for(f=0;f<h.length;f++)h[f]==this.varIndices[0]&&(this.varIndicesStart+=f);for(f=0;f<s.length;f++)this.isGroupedData?s[f]==this.grpIndices[0]&&(this.smpIndicesStart+=f):s[f]==this.smpIndices[0]&&(this.smpIndicesStart+=f);this.draw(),this.showDataTableOnSelect&&(a=this.extractDataObject(this.smpIndices,this.varIndices),this.updateDataTable(a)),this.skipClick=!1},this.handleDragEventScatter=function(n,t,i,r,u,f,e){var h,c,s,a,v,y,o;if(this.selectDataPoint=[],h={v:{},s:{}},c=0,n.shiftKey){for(s=0;s<this.dataEvent.length;s++){var l=this.dataEvent[s][0],d=this.dataEvent[s][1],g=this.dataEvent[s][2];if(this.isObjectInsideArea(d,g,r,u,f,e)){for(this.addRemoveToSelectedDataPoints(t,l),h.v[l.shift()]=1,a=0;a<l.length;a++)h.s[l[a]]=1;c++}}if(c>0&&(this.isSelectDataPoints=c,this.draw(),this.showDataTableOnSelect)){v=[],y=[];for(s in h.v)v.push(parseInt(s));for(s in h.s)y.push(parseInt(s));v.sort(function(n,t){return n-t}),y.sort(function(n,t){return n-t}),o=this.extractDataObject(y,v),this.updateDataTable(o)}}else{var o=this.layoutComb?this.layoutParams[i]:this,p=o.xAxisMin+(r-(this.marginLeft+o.offsetX+o.left))/o.xAxisUnit,w=o.xAxisMin+(f-(this.marginLeft+o.offsetX+o.left))/o.xAxisUnit,b=o.yAxisMax-(u-(this.marginTop+o.offsetY+o.top))/o.yAxisUnit,k=o.yAxisMax-(e-(this.marginTop+o.offsetY+o.top))/o.yAxisUnit;this.validateMinMax(p,w)&&this.validateMinMax(k,b)&&(this.setMinX=p,this.setMaxX=w,this.setMaxY=b,this.setMinY=k,this.draw())}},this.handleDragEventGenome=function(n,t,i,r){var u=this.layoutComb?this.layoutParams[n]:this,f=u.xAxisMin+(t-(this.marginLeft+u.offsetX+u.left))/u.xAxisUnit,e=u.xAxisMin+(r-(this.marginLeft+u.offsetX+u.left))/u.xAxisUnit;this.validateMinMax(f,e)&&(this.setMin=f,this.setMax=e,this.draw())},this.handleDragEventOneDimension=function(n,t,i,r,u,f,e,o){var v,a,l,b,c,k,tt,s,h;if(this.moveVar){if(a=this.moveVar.split("-")[1],this.showVarDendrogram&&this.varDendrogram)return alert("Ooops. Cannot change order when showing the dendrogram"),!1;for(v=this.layoutComb?this.layoutParams[i].varIndices:this.varIndices,s=0;s<v.length;s++)if(v[s]==a){c=s;break}for(a=v.splice(c,1),this.varInfo.splice(c,1),k=[],c=v.length,s=0;s<v.length;s++)if(this.varInfo[s]>r){c=s;break}v.splice(c,0,a[0]),this.draw(),this.skipClick=!1}else if(this.moveSmp){if(a=this.moveSmp.split("-")[1],b=this.isGroupedData?this.grpIndices:this.smpIndices,this.isGroupedData)l=this.layoutComb?this.layoutParams[i].grpIndices:this.grpIndices;else if(l=this.layoutComb?this.layoutParams[i].smpIndices:this.smpIndices,this.showSmpDendrogram&&this.smpDendrogram)return alert("Ooops. Cannot change order when showing the dendrogram"),!1;for(s=0;s<l.length;s++)if(l[s]==a){c=s;break}for(a=l.splice(c,1),this.smpInfo.splice(c,1),k=[],c=l.length,tt=t.match(/Heatmap/)||this.graphOrientation=="horizontal"?u:r,s=0;s<l.length;s++)if(this.smpInfo[s]>tt){c=s;break}l.splice(c,0,a[0]),this.draw(),this.skipClick=!1}else if(n.shiftKey||o){var it={},d=[],l,v=this.layoutComb?this.layoutParams[i].varIndices:this.varIndices,b=this.isGroupedData?this.grpIndices:this.smpIndices,rt=!1;for(l=this.isGroupedData?this.layoutComb?this.layoutParams[i].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[i].smpIndices:this.smpIndices,this.setOriginalIndices(i,v,l),s=0;s<this.dataEvent.length;s++){var ot=this.dataEvent[s][0],st=this.dataEvent[s][1],ht=this.dataEvent[s][2];this.isObjectInsideArea(st,ht,r,u,f,e)&&(it[ot[1]]=!0)}for(s=0;s<b.length;s++)it.hasOwnProperty(b[s])&&(d.push(b[s]),rt||(this.smpIndicesStart=s,rt=!0));this.setSamplesVisible(d,!0),this.draw(),this.showDataTableOnSelect&&(h=this.extractDataObject(d,this.varIndices),this.updateDataTable(h))}else{var h=this.layoutComb?this.layoutParams[i]:this,w=t=="Candlestick"&&i>0&&this.showVolume,ut=this.layoutComb&&this.layoutCurrent!=i,y=w&&ut?h.xAxis2Min:h.xAxisMin,p=w&&ut?h.xAxis2Max:h.xAxisMax,g=this.marginLeft+h.offsetX+h.left,ft=g+h.x,nt=this.marginTop+h.offsetY+h.top,et=nt+h.y;this.graphOrientation=="vertical"?(y=w?y+(et-e)/h.xAxis2Unit:y+(et-e)/h.xAxisUnit,p=w?p-(u-nt)/h.xAxis2Unit:p-(u-nt)/h.xAxisUnit):(y=w?y+(r-g)/h.xAxis2Unit:y+(r-g)/h.xAxisUnit,p=w?p-(ft-f)/h.xAxis2Unit:p-(ft-f)/h.xAxisUnit),this.validateMinMax(y,p)&&(w?(this.setMin2=y,this.setMax2=p):(this.setMin=y,this.setMax=p),this.draw())}},this.handleDragEvent=function(n,t,i,r,u){var e=this.layoutComb?this.layoutValidN:0,f=this.layoutComb?this.layoutParams[e].graphType:this.graphType;f=="Network"?this.handleDragEventNetwork(n,t,i,r,u):f!="Heatmap"||this.moveVar||this.moveSmp?f.match(/Scatter/)?this.handleDragEventScatter(n,f,e,t,i,r,u):f=="Genome"?this.handleDragEventGenome(e,t,i,r,u):this.handleDragEventOneDimension(n,f,e,t,i,r,u):this.handleDragEventHeatmap(e,t,i,r,u)},this.resetDrag=function(){var n=this.$(this.target+"-cX-Drag");n&&(n.style.left="0px",n.style.top="0px",n.style.width="0px",n.style.height="0px")},this.initializeDraggingEvents=function(){this.disableEvents||this.addDragDiv()},this.initializeDraggingEvents()},CanvasXpress.prototype.initKeyEvents=function(){this.getKeyCode=function(n){if(n)return n.charCode&&n.keyCode==0?n.charCode:n.keyCode},this.registerKey=function(n){n||(n=window.event);var i=this.getTargetEvent(n),t=this.getKeyCode(n);if(this.eventKeys||n.ctrlKey&&n.altKey&&t==107)if(t==27){if(this.animationOn)return this.animationOn=!1,!1;this.masterReset(n)}else{if(this.configuringOn)return;t==16&&this.helpKeyEvents?n.ctrlKey&&n.altKey?this.showCtrlShiftAltShorts():n.ctrlKey?this.showCtrlShiftShorts():n.altKey?this.showShiftAltShorts():this.showShiftShorts():t==17&&this.helpKeyEvents?n.shiftKey&&n.altKey?this.showCtrlShiftAltShorts():n.shiftKey?this.showCtrlShiftShorts():n.altKey?this.showCtrlAltShorts():this.showCtrlShorts():(t==18||t==224)&&this.helpKeyEvents?n.ctrlKey&&n.shiftKey?this.showCtrlShiftAltShorts():n.ctrlKey?this.showCtrlAltShorts():n.shiftKey?this.showShiftAltShorts():this.showAltShorts():n.ctrlKey&&n.shiftKey?(t>=33&&t<=40?this.arrowMove(t,!0):t!=80||this.keyOn?t!=88||this.keyOn?t!=90||this.graphType!="Network"||this.keyOn||(this.keyOn=!0,this.alignDistributeSelectedNodes(n,t)):(this.keyOn=!0,this.clearNetworkStack()):(this.keyOn=!0,this.print()),document.defaultAction=!0):n.ctrlKey&&n.altKey?(t!=80||this.keyOn||(this.keyOn=!0,this.print()),document.defaultAction=!0):n.shiftKey&&n.altKey?(t>=50&&t<90&&!this.keyOn&&(this.keyOn=!0,this.setGraphType(t)),document.defaultAction=!0):n.ctrlKey?(t>=33&&t<=40?t==36&&this.isSelectDataPoints&&this.graphType=="Scatter3D"?this.showHideSelectedDataPoint(n,t):t==36&&this.isSelectNodes&&this.graphType=="Network"?this.showHideSelectedDataPoint(n,t):this.arrowMove(t):t!=45&&t!=46||this.keyOn?t>=48&&t<58&&!this.keyOn?(this.keyOn=!0,this.setLayout(t-48)):t>=65&&t<=90&&(t!=80||this.keyOn||(this.keyOn=!0,this.print()),this.graphType!="Network"||this.keyOn||(this.keyOn=!0,this.alignDistributeSelectedNodes(n,t))):(this.keyOn=!0,this.showHideSelectedDataPoint(n,t)),document.defaultAction=!0):t==107||t==109||t==61||t==187||t==189?this.eventPlusMinusKeys&&!/input|textarea|select/i.test(i.tagName)&&(t==109||t==189?this.handleWheelEvent(n,-1):this.handleWheelEvent(n,1)):t>=33&&t<=40?this.eventArrowKeys&&!/input|textarea|select/i.test(i.tagName)&&this.handlePanning(n,t):n.shiftKey?document.defaultAction=!0:n.altKey&&(document.defaultAction=!0)}},this.handlePanning=function(n,t){var l,o,h,i,u,c,f,r;if(this.graphType=="Network")this.cancelEvent(n),l=Math.abs(this.x*this.panningStep),o=Math.abs(this.y*this.panningStep),t==33?this.panningY-=o*5:t==34?this.panningY+=o*5:t==35?(this.panningX=l*20,this.panningY=o*20):t==36?(this.panningX=0,this.panningY=0):t==37?this.panningX-=l:t==38?this.panningY-=o:t==39?this.panningX+=l:t==40&&(this.panningY+=o),this.draw(!1,!1,!1,!0);else if(this.graphType=="Genome")h=this.genomeResolution=="high"?1:this.xAxisRange*this.panningStep,this.setMin==null&&(this.setMin=this.xAxisMin),this.setMax==null&&(this.setMax=this.xAxisMax),this.cancelEvent(n),t==37||t==38?(this.setMin-=h,this.setMax-=h):t==39||t==40?(this.setMin+=h,this.setMax+=h):t==33?(this.setMin+=this.xAxisRange*.95,this.setMax+=this.xAxisRange*.95):t==34?(this.setMin-=this.xAxisRange*.95,this.setMax-=this.xAxisRange*.95):t==35?this.setMax=null:t==36&&(this.setMin=null),this.draw();else if(this.graphType=="Heatmap"){if(this.cancelEvent(n),this.resetAxesResizer(n),i=this.layoutComb?this.layoutValidN:0,c=this.layoutComb?this.layoutParams[i].varIndices:this.varIndices,u=this.isGroupedData?this.layoutComb?this.layoutParams[i].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[i].smpIndices:this.smpIndices,this.setOriginalIndices(t,c,u),t==35)return!1;if(t==36)this.varIndicesStart=-1,this.smpIndicesStart=-1,this.varIndices=this.startingVarIndices[i],this.isGroupedData?this.grpIndices=this.startingSmpIndices[i]:this.smpIndices=this.startingSmpIndices[i],this.draw();else if(t==37)this.varIndicesStart>0&&(this.varIndices.unshift(this.startingVarIndices[i][this.varIndicesStart-1]),this.varIndices.pop(),this.varIndicesStart--,this.draw());else if(t==38||t==33){var f=t==33?5:1,e=!1,s=this.isGroupedData?this.grpIndices:this.smpIndices;for(r=0;r<f;r++)this.smpIndicesStart>0&&(s.unshift(this.startingSmpIndices[i][this.smpIndicesStart-1]),s.pop(),this.smpIndicesStart--,e=!0);e&&this.draw()}else if(t==39)this.varIndicesStart>-1&&this.varIndicesStart+c.length<this.startingVarIndices[i].length&&(this.varIndices.push(this.startingVarIndices[i][this.varIndicesStart+this.varIndices.length]),this.varIndices.shift(),this.varIndicesStart++,this.draw());else if(t==40||t==34){var f=t==34?5:1,e=!1,s=this.isGroupedData?this.grpIndices:this.smpIndices;for(r=0;r<f;r++)this.smpIndicesStart>-1&&this.smpIndicesStart+u.length<this.startingSmpIndices[i].length&&(s.push(this.startingSmpIndices[i][this.smpIndicesStart+s.length]),s.shift(),this.smpIndicesStart++,e=!0);e&&this.draw()}}else if(this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked/)){this.cancelEvent(n),this.resetAxesResizer(n);var i=this.layoutComb?this.layoutValidN:0,u,e=!1,c=this.layoutComb?this.layoutParams[i].varIndices:this.varIndices;if(u=this.isGroupedData?this.layoutComb?this.layoutParams[i].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[i].smpIndices:this.smpIndices,this.setOriginalIndices(i,c,u),t==35||t==36)return!1;if(t==37||t==38||t==33)for(f=t==33?5:1,r=0;r<f;r++)this.smpIndicesStart>0&&(this.smpIndicesStart--,u.unshift(this.startingSmpIndices[i][this.smpIndicesStart]),u.pop(),e=!0);else if(t==39||t==40||t==34)for(f=t==34?5:1,r=0;r<f;r++)this.smpIndicesStart+u.length<this.startingSmpIndices[i].length&&(u.push(this.startingSmpIndices[i][this.smpIndicesStart+u.length]),u.shift(),this.smpIndicesStart++,e=!0);e&&this.draw()}return!1},this.showCtrlShiftAltShorts=function(){var n="<table class=shorts>";n+="<tr><th colspan=2>Ctrl + Shift + Alt<\/th><\/tr>",n+="<tr><td class=k>&nbsp;<\/td><td class=d>&nbsp;<\/td><\/tr>",n+="<\/table>",this.showInfoSpan(!1,n)},this.showCtrlShiftShorts=function(){var n="<table class=shorts>";n+="<tr><th colspan=2>Shift + Ctrl<\/th><\/tr>",this.graphType=="Network"?this.is3DNetwork?(n+="<tr><td class=k>&rarr;<\/td><td class=d>Rotate clockwise "+this.rotationStep*1+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>&larr;<\/td><td class=d>Rotate anti-clockwise "+this.rotationStep*1+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>&darr;<\/td><td class=d>Rotate forward "+this.rotationStep*1+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>&uarr;<\/td><td class=d>Rotate backward "+this.rotationStep*1+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>PgUp<\/td><td class=d>Rotate anti-clockwise and backward "+this.rotationStep*3+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>PgDn<\/td><td class=d>Rotate clockwise and forward "+this.rotationStep*3+"&deg; continuously<\/td><\/tr>"):(n+="<tr><td class=k>&rarr; or &darr;<\/td><td class=d>Rotate clockwise "+this.rotationStep*1+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>&larr; or &uarr;<\/td><td class=d>Rotate anti-clockwise "+this.rotationStep*1+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>PgUp<\/td><td class=d>Rotate anti-clockwise "+this.rotationStep*3+"&deg; continuously<\/td><\/tr>",n+="<tr><td class=k>PgDn<\/td><td class=d>Rotate clockwise "+this.rotationStep*3+"&deg; continuously<\/td><\/tr>"):this.graphType=="Scatter2D"||this.graphType=="ScatterBubble2D"?this.type2D=="XYZ"?this.xAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update samples in X, Y and Z axes continuously (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update samples in X, Y and Z axes continuously (2x)<\/td><\/tr>"):this.type2D=="XY"?this.zAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update sample in Z axis continuously (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update sample in Z axis continuously (2x)<\/td><\/tr>"):this.type2D=="X"?this.yAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update samples in Y and Z axes continuously (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update samples in Y and Z axes continuously (2x)<\/td><\/tr>"):this.xAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update samples in X and Z axes continuously (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update samples in X and Z axes continuously (2x)<\/td><\/tr>"):this.graphType=="Scatter3D"&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Rotate continuously<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Rotate continuously<\/td><\/tr>"),n+="<tr><td class=k>P<\/td><td class=d>Print<\/td><\/tr>",n+="<\/table>",this.showInfoSpan(!1,n)},this.showCtrlAltShorts=function(){var n="<table class=shorts>";n+="<tr><th colspan=2>Ctrl + Alt<\/th><\/tr>",n+="<tr><td class=k>P<\/td><td class=d>Print<\/td><\/tr>",n+="<\/table>",this.showInfoSpan(!1,n)},this.showShiftAltShorts=function(){var n="<table class=shorts>";n+="<tr><th colspan=2>Shift + Alt<\/th><\/tr>",n+="<tr><td class=k>2<\/td><td class=d>Scatter2D<\/td><\/tr>",n+="<tr><td class=k>3<\/td><td class=d>Scatter3D<\/td><\/tr>",n+="<tr><td class=k>4<\/td><td class=d>ScatterBubble2D<\/td><\/tr>",n+="<tr><td class=k>A<\/td><td class=d>Area<\/td><\/tr>",n+="<tr><td class=k>B<\/td><td class=d>Bar<\/td><\/tr>",n+="<tr><td class=k>C<\/td><td class=d>BarLine<\/td><\/tr>",n+="<tr><td class=k>D<\/td><td class=d>Dotplot<\/td><\/tr>",n+="<tr><td class=k>G<\/td><td class=d>Genome<\/td><\/tr>",n+="<tr><td class=k>H<\/td><td class=d>Heatmap<\/td><\/tr>",n+="<tr><td class=k>I<\/td><td class=d>Boxplot<\/td><\/tr>",n+="<tr><td class=k>L<\/td><td class=d>Line<\/td><\/tr>",n+="<tr><td class=k>M<\/td><td class=d>Candlestick<\/td><\/tr>",n+="<tr><td class=k>N<\/td><td class=d>Network<\/td><\/tr>",n+="<tr><td class=k>P<\/td><td class=d>Pie<\/td><\/tr>",n+="<tr><td class=k>R<\/td><td class=d>Circular<\/td><\/tr>",n+="<tr><td class=k>S<\/td><td class=d>Stacked<\/td><\/tr>",n+="<tr><td class=k>T<\/td><td class=d>StackedPercent<\/td><\/tr>",n+="<tr><td class=k>U<\/td><td class=d>StackedLine<\/td><\/tr>",n+="<tr><td class=k>W<\/td><td class=d>StackedPercentLine<\/td><\/tr>",n+="<tr><td class=k>V<\/td><td class=d>Venn<\/td><\/tr>",n+="<tr><td class=k>X<\/td><td class=d>Correlation<\/td><\/tr>",n+="<\/table>",this.showInfoSpan(!1,n)},this.showCtrlShorts=function(){var n="<table class=shorts>";n+="<tr><th colspan=2>Ctrl<\/th><\/tr>",this.graphType=="Network"?(this.is3DNetwork?(n+="<tr><td class=k>&rarr;<\/td><td class=d>Rotate clockwise "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>&larr;<\/td><td class=d>Rotate anti-clockwise "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>&darr;<\/td><td class=d>Rotate forward "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>&uarr;<\/td><td class=d>Rotate backward "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>PgUp<\/td><td class=d>Rotate anti-clockwise and backward "+this.rotationStep*3+"&deg;<\/td><\/tr>",n+="<tr><td class=k>PgDn<\/td><td class=d>Rotate clockwise and forward "+this.rotationStep*3+"&deg;<\/td><\/tr>"):(n+="<tr><td class=k>&rarr; or &darr;<\/td><td class=d>Rotate clockwise "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>&larr; or &uarr;<\/td><td class=d>Rotate anti-clockwise "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>PgUp<\/td><td class=d>Rotate anti-clockwise "+this.rotationStep*3+"&deg;<\/td><\/tr>",n+="<tr><td class=k>PgDn<\/td><td class=d>Rotate clockwise "+this.rotationStep*3+"&deg;<\/td><\/tr>"),n+="<tr><td class=k>click<\/td><td class=d>Select/Unselect node<\/td><\/tr>",this.isSelectNodes&&(n+="<tr><td class=k>Delete<\/td><td class=d>Hide selected nodes<\/td><\/tr>",n+="<tr><td class=k>Insert<\/td><td class=d>Show selected-hidden nodes<\/td><\/tr>",n+="<tr><td class=k>Home<\/td><td class=d>Show connected nodes to slected nodes<\/td><\/tr>",n+="<tr><td class=k>t<\/td><td class=d>Align top<\/td><\/tr>",n+="<tr><td class=k>r<\/td><td class=d>Align right<\/td><\/tr>",n+="<tr><td class=k>b<\/td><td class=d>Align bottom<\/td><\/tr>",n+="<tr><td class=k>l<\/td><td class=d>Align left<\/td><\/tr>",n+="<tr><td class=k>v<\/td><td class=d>Distribute verticaly<\/td><\/tr>",n+="<tr><td class=k>h<\/td><td class=d>Distribute Horizontaly<\/td><\/tr>",n+="<tr><td class=k>z<\/td><td class=d>Undo<\/td><\/tr>",n+="<tr><td class=k>y<\/td><td class=d>Redo<\/td><\/tr>")):this.graphType=="Scatter2D"||this.graphType=="ScatterBubble2D"?(this.type2D=="XYZ"?this.xAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update samples in X, Y and Z axes (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update samples in X, Y and Z axes (2x)<\/td><\/tr>"):this.type2D=="XY"?this.zAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update sample in Z axis (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update sample in Z axis (2x)<\/td><\/tr>"):this.type2D=="X"?this.yAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update samples in Y and Z axes (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update samples in Y and Z axes (2x)<\/td><\/tr>"):this.xAxis.length>1&&(n+="<tr><td class=k>&rarr; or &darr; or &larr; or &uarr;<\/td><td class=d>Update samples in X and Z axes (1x)<\/td><\/tr>",n+="<tr><td class=k>PgUp or PgDn<\/td><td class=d>Update samples in X and Z axes (2x)<\/td><\/tr>"),this.isSelectDataPoints&&(n+="<tr><td class=k>Delete<\/td><td class=d>Hide selected nodes<\/td><\/tr>",n+="<tr><td class=k>Insert<\/td><td class=d>Show selected-hidden nodes<\/td><\/tr>")):this.graphType=="Scatter3D"?(n+="<tr><td class=k>&rarr;<\/td><td class=d>Rotate clockwise "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>&larr;<\/td><td class=d>Rotate anti-clockwise "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>&darr;<\/td><td class=d>Rotate forward "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>&uarr;<\/td><td class=d>Rotate backward "+this.rotationStep*1+"&deg;<\/td><\/tr>",n+="<tr><td class=k>PgUp<\/td><td class=d>Rotate anti-clockwise and backward "+this.rotationStep*3+"&deg;<\/td><\/tr>",n+="<tr><td class=k>PgDn<\/td><td class=d>Rotate clockwise and forward "+this.rotationStep*3+"&deg;<\/td><\/tr>",n+="<tr><td class=k>click<\/td><td class=d>Select/Unselect data points<\/td><\/tr>",this.isSelectDataPoints&&(n+="<tr><td class=k>Delete<\/td><td class=d>Hide selected nodes<\/td><\/tr>",n+="<tr><td class=k>Insert<\/td><td class=d>Show selected-hidden nodes<\/td><\/tr>",n+="<tr><td class=k>Home<\/td><td class=d>Zoom to selected nodes<\/td><\/tr>")):this.isSegregable(),n+="<tr><td class=k>P<\/td><td class=d>Print<\/td><\/tr>",n+="<\/table>",this.showInfoSpan(!1,n)},this.showShiftShorts=function(){var n="<table class=shorts>";n+="<tr><th colspan=2>Shift<\/th><\/tr>",n+=this.isSegregable()?"<tr><td class=k>Click and Drag<\/td><td class=d>Select Samples<\/td><\/tr>":"<tr><td class=k>&nbsp;<\/td><td class=d>&nbsp;<\/td><\/tr>",n+="<\/table>",this.showInfoSpan(!1,n)},this.showAltShorts=function(){var n="<table class=shorts>";n+="<tr><th colspan=2>Alt<\/th><\/tr>",n+="<tr><td class=k>&nbsp;<\/td><td class=d>&nbsp;<\/td><\/tr>",n+="<\/table>",this.showInfoSpan(!1,n)},this.arrowMove=function(n,t){var f=this.graphType,r,u,i;this.is3DPlot&&(f="Scatter3D;");switch(f){case"Network":this.is3DNetwork?n==33?(this.xRotate+=this.rotationStep*3,this.yRotate-=this.rotationStep*3):n==34?(this.xRotate-=this.rotationStep*3,this.yRotate+=this.rotationStep*3):n==37?this.xRotate+=this.rotationStep:n==38?this.yRotate-=this.rotationStep:n==39?this.xRotate-=this.rotationStep:n==40&&(this.yRotate+=this.rotationStep):n==33?this.network2DRotate-=this.rotationStep*3:n==34?this.network2DRotate+=this.rotationStep*3:n==37||n==38?this.network2DRotate-=this.rotationStep:(n==39||n==40)&&(this.network2DRotate+=this.rotationStep);break;case"Scatter2D":case"ScatterBubble2D":if(this.type2D=="XYZ"?(r=["xAxisCurrent","yAxisCurrent","zAxisCurrent"],u=["xAxis","yAxis","zAxis"]):this.type2D=="XY"?(r=["zAxisCurrent"],u=["zAxis"]):this.type2D=="X"?(r=["yAxisCurrent","zAxisCurrent"],u=["yAxis","zAxis"]):(r=["xAxisCurrent","zAxisCurrent"],u=["xAxis","zAxis"]),n==33)for(i=0;i<r.length;i++)this[r[i]]+=2;else if(n==34)for(i=0;i<r.length;i++)this[r[i]]-=2;else if(n==35)for(i=0;i<r.length;i++)this[r[i]]=this[u[i]].length-1;else if(n==36)for(i=0;i<r.length;i++)this[r[i]]=0;else if(n==37||n==40)for(i=0;i<r.length;i++)this[r[i]]--;else if(n==38||n==39)for(i=0;i<r.length;i++)this[r[i]]++;this.xAxisCurrent=this.xAxisCurrent<0?this.xAxis.length-1:this.xAxisCurrent>this.xAxis.length-1?0:this.xAxisCurrent,this.yAxisCurrent=this.yAxisCurrent<0?this.xAxis.length-1:this.yAxisCurrent>this.yAxis.length-1?0:this.yAxisCurrent,this.zAxisCurrent=this.zAxisCurrent<0?this.xAxis.length-1:this.zAxisCurrent>this.zAxis.length-1?0:this.zAxisCurrent;break;case"Scatter3D":n==33?(this.xRotate+=this.rotationStep*3,this.yRotate-=this.rotationStep*3):n==34?(this.xRotate-=this.rotationStep*3,this.yRotate+=this.rotationStep*3):n==35?(this.xRotate=0,this.yRotate=0,this.zRotate=45):n==36?(this.xRotate=45,this.yRotate=0,this.zRotate=0):n==37?this.xRotate+=this.rotationStep:n==38?this.yRotate-=this.rotationStep:n==39?this.xRotate-=this.rotationStep:n==40&&(this.yRotate+=this.rotationStep)}t&&!this.animationOn?(this.animationOn=!0,this.animate(n)):this.draw(!1,!1,!1,!0)},this.animate=function(n){var t=this,i=function(){this.update=function(){t.animationOn||clearInterval(i),t.arrowMove(n);var r=t.graphType;t.is3DPlot&&(r="Scatter3D");switch(r){case"Network":this.is3DNetwork?n==33?(this.xRotate+=this.rotationStep*3,this.yRotate-=this.rotationStep*3):n==34?(this.xRotate-=this.rotationStep*3,this.yRotate+=this.rotationStep*3):n==37?this.xRotate-=this.rotationStep:n==38?this.yRotate-=this.rotationStep:n==39?this.xRotate+=this.rotationStep:n==40&&(this.yRotate+=this.rotationStep):n==33?this.network2DRotate+=this.rotationStep*3:n==34?this.network2DRotate-=this.rotationStep*3:n==37||n==38?this.network2DRotate-=this.rotationStep:(n==39||n==40)&&(this.network2DRotate+=this.rotationStep);break;case"Scatter2D":case"ScatterBubble2D":n!=37?t.graphType=="ScatterBubble2D"&&t.xAxisIndices.length>1&&t.xAxisIndices.length==t.yAxisIndices.length&&t.xAxisIndices.length==t.zAxisIndices.length?t.xAxisCurrent>=t.xAxis.length-1&&(t.xAxisCurrent=t.xAxis.length-1,t.yAxisCurrent=t.yAxis.length-1,t.zAxisCurrent=t.zAxis.length-1,n=37):t.xAxisIndices.length>1&&t.xAxisIndices.length==t.yAxisIndices.length?t.zAxisCurrent>=t.zAxis.length-1&&(t.zAxisCurrent=t.zAxis.length-1,n=37):t.xAxisIndices.length>t.yAxisIndices.length?(t.yAxisCurrent>=t.yAxis.length-1&&(t.yAxisCurrent=t.yAxis.length-1),t.zAxisCurrent>=t.zAxis.length-1&&(t.zAxisCurrent=t.zAxis.length-1),t.yAxisCurrent>=t.yAxis.length-1&&t.zAxisCurrent>=t.zAxis.length-1&&(n=37)):(t.xAxisCurrent>=t.xAxis.length-1&&(t.xAxisCurrent=t.xAxis.length-1),t.zAxisCurrent>=t.zAxis.length-1&&(t.zAxisCurrent=t.zAxis.length-1),t.xAxisCurrent>=t.xAxis.length-1&&t.zAxisCurrent>=t.zAxis.length-1&&(n=37)):n!=39&&(t.graphType=="ScatterBubble2D"&&t.xAxisIndices.length>1&&t.xAxisIndices.length==t.yAxisIndices.length&&t.xAxisIndices.length==t.zAxisIndices.length?t.xAxisCurrent<=0&&(t.xAxisCurrent=0,t.yAxisCurrent=0,t.zAxisCurrent=0,n=39):t.xAxisIndices.length>1&&t.xAxisIndices.length==t.yAxisIndices.length?t.zAxisCurrent<=0&&(t.zAxisCurrent=0,n=39):t.xAxisIndices.length>t.yAxisIndices.length?(t.yAxisCurrent<=0&&(t.yAxisCurrent=0),t.zAxisCurrent<=0&&(t.zAxisCurrent=0),t.yAxisCurrent<=0&&t.zAxisCurrent<=0&&(n=39)):(t.xAxisCurrent<=0&&(t.xAxisCurrent=0),t.zAxisCurrent<=0&&(t.zAxisCurrent=0),t.xAxisCurrent<=0&&t.zAxisCurrent<=0&&(n=39)));break;case"Scatter3D":t.xRotate<=0&&(n==39||n<37)?(t.xRotate=0,t.yRotate=0,n=40):t.xRotate>=90&&(n==37||n<37)?(t.xRotate=90,t.yRotate=90,n=38):t.yRotate<=0&&(n==38||n<37)?(t.yRotate=0,t.xRotate=90,n=39):t.yRotate>=90&&(n==40||n<37)&&(t.yRotate=90,t.xRotate=0,n=37)}};var i=setInterval(this.update,t.animationTime)};i.call()},this.setGraphType=function(n){var t;n==66?t="Bar":n==76?t="Line":n==65?t="Area":n==67?t="BarLine":n==73?t="Boxplot":n==68?t="Dotplot":n==72?t="Heatmap":n==83?t="Stacked":n==85?t="StackedLine":n==84?t="StackedPercent":n==87?t="StackedPercentLine":n==50?t="Scatter2D":n==52?t="ScatterBubble2D":n==51?t="Scatter3D":n==88?t="Correlation":n==86?t="Venn":n==80?t="Pie":n==78?t="Network":n==71?t="Genome":n==77?t="Candlestick":n==82&&(t="Circular"),t&&this.isValidGraphType(t)?(this.graphType=t,this.draw()):alert("Dude! You cannot plot this data in a "+t+" graph")},this.reset=function(){this.varIndicesStart=-1,this.smpIndicesStart=-1;switch(this.graphType){case"Area":case"AreaLine":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Heatmap":case"Correlation":case"Venn":case"Pie":case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"Candlestick":case"Circular":this.setAllVariablesVisible(),this.setAllSamplesVisible();break;case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":this.resetSelectedDataPoints(),this.setAllVariablesVisible(),this.setAllSamplesVisible();break;case"Network":this.resetSelectedNodes(),this.setAllNodesVisible(),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor);break;case"Genome":this.setAllFeaturesVisible()}},this.redraw=function(){this.setInitialConfig(),this.varIndicesStart=-1,this.smpIndicesStart=-1;switch(this.graphType){case"Area":case"AreaLine":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Correlation":case"Venn":case"Pie":case"Circular":return this.setAllVariablesVisible(),this.setAllSamplesVisible(),!0;case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"Genome":case"Candlestick":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.setMin=null,this.setMax=null,this.setMin2=null,this.setMax2=null,this.xRotate=45,this.yRotate=0;break;case"Scatter2D":case"ScatterBubble2D":this.resetSelectedDataPoints(),this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.setMinX=null,this.setMaxX=null,this.setMinY=null,this.setMaxY=null;break;case"Scatter3D":this.resetSelectedDataPoints(),this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.xRotate=45,this.yRotate=0;break;case"Heatmap":this.setAllVariablesVisible(),this.setAllSamplesVisible();break;case"Network":this.resetSelectedNodes(),this.setAllNodesVisible(),this.network2DRotate=0,this.randomNetwork&&(this.layoutDone=!1),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor)}return this.draw(),!0},this.resetZoomPan=function(){this.zoom=1,this.panningX=0,this.panningY=0,this.panningGlobalX=0,this.panningGlobalY=0,this.padX=this.x/2,this.padY=this.y/2,this.padZ=this.y/2},this.resetSelectedObjects=function(){(this.isSelectDataPoints||this.isSelectNodes)&&(this.resetSelectedDataPoints(),this.resetSelectedNodes(),this.redraw())},this.masterReset=function(n){this.resetTooltipDivs(),this.resetDrag(n),this.resetSelectedDataPoints(),this.resetSelectedNodes(),this.dataTableLastState&&this.dataTableLastState!="docked"&&this.hideUnhideDataTable(!0),this.resetConfigurator(),this.resetAxesResizer(n),this.resetFlags(n),this.resetZoomPan(),this.redraw()}},CanvasXpress.prototype.initSelectEvents=function(){this.showHideSelectedDataPoint=function(n,t){var r,c,l,a,i,h;n&&this.stopEvent(n);var v=this.layoutComb?this.layoutValidN:0,u=this.layoutComb?this.layoutParams[v].graphType:this.graphType,e=[];if(t==45||t==46){if(u=="Network"){r=[],c=t==45?!1:!0;for(l in this.selectNode)r.push(l);r.length>0&&this.hideUnhideNodes(r,c)}else if(u.match(/Scatter/)&&(t==45?(this.selectDataPoint=this.hideDataPoint,this.hideDataPoint=[]):t==46&&(this.hideDataPoint=this.selectDataPoint,this.selectDataPoint=[]),u=="Scatter3D")){for(a=this.xAxisIndex+":"+this.yAxisIndex+":"+this.zAxisIndex,i=0;i<this.data.y.vars.length;i++)this.isVisibleSelectedDataPoint(i,a)&&e.push(i);this.varIndices=e}this.draw()}else if(t==36)if(u=="Network"){var o={},s=[],r=this.data.nodes,f=this.data.edges;for(i=0;i<f.length;i++)(this.selectNode.hasOwnProperty(f[i].id1)||this.selectNode.hasOwnProperty(f[i].id2))&&(o[f[i].id1]=!0,o[f[i].id2]=!0);for(i=0;i<r.length;i++)(!o.hasOwnProperty(r[i].id)||r[i].hide)&&s.push(r[i].id);this.resetSelectedNodes(),s.length>0&&(this.hideUnhideNodes(s,!0),this.draw())}else if(u=="Scatter3D"&&this.isSelectDataPoints){for(i in this.selectDataPoint)h=parseInt(i),isNaN(h)||e.push(this.varIndices[h]);this.isSelectDataPoints=0,this.selectDataPoint=[],this.varIndices=e,this.draw()}},this.addRemoveToSelectedDataPoints=function(n,t){for(var e=this.broadcast?CanvasXpress.references:[this],i,o,f,r,u=0;u<e.length;u++)i=e[u],n||(o=i.layoutComb?i.layoutValidN:0,n=i.layoutComb?i.layoutParams[o].graphType:i.graphType),n=="Network"?(f=parseInt(t.join(", ")),f<i.data.nodes.length&&(r=i.data.nodes[f].id,i.selectNode.hasOwnProperty(r)?(i.isSelectNodes--,delete i.selectNode[r]):(i.isSelectNodes++,i.selectNode[r]=!0))):n.match(/Scatter/)&&(i.selectDataPoint[t[0]]||(i.selectDataPoint[t[0]]={}),r=n=="Scatter3D"?t[1]+":"+t[2]+":"+t[3]:t[1]+":"+t[2],i.selectDataPoint[t[0]].hasOwnProperty(r)?(i.isSelectDataPoints--,this.broadcastType=="var"?delete i.selectDataPoint[t[0]]:delete i.selectDataPoint[t[0]][r]):(i.isSelectDataPoints++,this.broadcastType=="var"?i.selectDataPoint[t[0]]=!0:i.selectDataPoint[t[0]][r]=!0)),this.userEvents.select&&(n=="Network"?this.userEvents.select.call(i,i.selectNode):this.userEvents.select.call(i,i.selectDataPoint))},this.resetSelectedDataPoints=function(){this.isSelectDataPoints&&(this.selectDataPoint=[],this.hideDataPoint=[],this.isSelectDataPoints=0)},this.resetSelectedNodes=function(){this.isSelectNodes&&(this.selectNode={},this.isSelectNodes=0)}},CanvasXpress.prototype.initDendrogramEvents=function(){this.modifyDendrogram=function(n){var e=n.t.t=="varDendrogram"?this.varIndicesStart:this.smpIndicesStart,i=n.t.t.replace("Dendrogram","s"),t=this[n.t.t].object,r=n.t.d+"-"+n.t.o,u=this.findDendrogramBranch(t,r),o=this.reverseDendrogramBranch(u),f=this.writeNewick(t,!0);this.data.t[i]=f,this.draw()},this.findDendrogramBranch=function(n,t,i){return(n.id==t&&(i=n),i)?i:(n.left&&(i=this.findDendrogramBranch(n.left,t,i)),n.right&&(i=this.findDendrogramBranch(n.right,t,i)),i)},this.reverseDendrogramBranch=function(n){if(n&&n.right&&n.left){n.right=this.reverseDendrogramBranch(n.right),n.left=this.reverseDendrogramBranch(n.left);var t=n.left;n.left=n.right,n.right=t,n.mid&&(n.mid=n.mid.reverse())}return n}},CanvasXpress.prototype.initCanvasEvents=function(){this.contextmenuCanvas=function(n){return function(t){if(t||(t=window.event),t){if(n.Ext&&n.Ext.contextmenu)return;n.cancelEvent(t);var i=n.getEventDataId(t);n.handleMouseEvents("contextmenu",t,i)}return!1}}(this),this.mousedownCanvas=function(n){return function(t){if(t||(t=window.event),(t&&t.which?t.which!=3:t.button!=2)&&(!n.configuringOn||n.configuratorLastState&&n.configuratorLastState=="docked")&&(n.touchEvent="hold",n.registerDrag(t),n.mobileApp)){var i=function(){clearTimeout(i),n.touches&&n.touches.length==1&&n.touchEvent=="hold"&&n.masterReset(t)};setTimeout(i,500)}return!1}}(this),this.clickCanvas=function(n){return function(t){t||(t=window.event),n.resetMenuLinks(),n.closeHelp(),n.clickBuffer=function(){if(!n.doubleClick){if(!n.configuringOn||n.configuratorLastState&&n.configuratorLastState=="docked"){if(!n.skipClick&&n.lastCanvasEvent!="drag")if(n.isHelp(t))n.stopEvent(t),n.showInfoSpan(t,'Modify "helpKeyEvents"<br>&nbsp;&nbsp;&nbsp;to show or hide help<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on key events"');else if(n.isAxis(t))n.stopEvent(t);else if(n.axesResizerShow&&!n.resizerType)n.stopEvent(t),n.resetAxesResizer(t);else if(n.mobileApp)n.stopEvent(t),n.addConfigurator(t);else{var i=n.getEventDataId(t);i?n.handleMouseEvents("click",t,i):n.resetSelectedObjects()}}else n.resetConfigurator();n.lastCanvasEvent="click"}},setTimeout(n.clickBuffer,250),setTimeout(function(){n.doubleClick=!1},500)}}(this),this.dblclickCanvas=function(n){return function(t){if(t||(t=window.event),n.doubleClick=!0,n.clickBuffer&&(clearTimeout(n.clickBuffer),n.clickBuffer=null),!n.skipClick){var i=n.getEventDataId(t);i?n.graphType=="Network"||n.graphType=="Genome"?n.addConfigurator(t,i):n.handleMouseEvents("dblclick",t,i):(n.cancelEvent(t),n.addConfigurator(t)),n.lastCanvasEvent="dblclick"}return!1}}(this),this.wheelCanvas=function(n){return function(t){t||(t=window.event);var i=0;t||(t=window.event),t.wheelDelta?(i=t.wheelDelta/120,window.opera&&(i=-i)):t.detail&&(i=-t.detail/3),i&&n.handleWheelEvent(t,i)}}(this),this.addRemoveCanvasListeners=function(n){this[n](this.canvas,"contextmenu",this.contextmenuCanvas,!1),this[n](this.canvas,"mousedown",this.mousedownCanvas,!1),this[n](this.canvas,"touchstart",this.mousedownCanvas,!1),this[n](this.canvas,"click",this.clickCanvas,!1),this[n](this.canvas,"dblclick",this.dblclickCanvas,!1),this[n](this.canvas,"mousewheel",this.wheelCanvas,!1)},this.isVersion=function(n){if(this.showVersion){var t=this.adjustedCoordinates(n);return t&&t.x>0&&t.x<=10&&t.y>0&&t.y<=10?!0:!1}},this.isHelp=function(n){var t=this.adjustedCoordinates(n);return t&&t.x>0&&t.x<=10&&t.y>0&&t.y<=10?!0:!1},this.handleWheelEvent=function(n,t,i){var k=this.getTargetEvent(n),d,g,r,y,p;if(/CanvasXpress/.test(k.className)&&(CanvasXpress.current=k.id),this.graphType=="Network"){if(this.cancelEvent(n),i||(i=this.adjustedCoordinates(n)),i){n.type=="keydown"&&(i.x=this.width/2,i.y=this.height/2);var c=this.scaleFactor*this.zoomStep,et=this.widthBounds/2-i.x/this.scaleFactor,ot=this.heightBounds/2-i.y/this.scaleFactor;this.scaleFactor=t>0?this.scaleFactor+c:this.scaleFactor-c,this.widthBounds=this.x/this.scaleFactor,this.heightBounds=this.y/this.scaleFactor,d=this.widthBounds/2-i.x/this.scaleFactor,g=this.heightBounds/2-i.y/this.scaleFactor,this.panningX=et-d,this.panningY=ot-g,this.networkFreeze||(c=this.zoom*this.zoomStep,this.zoom=t>0?this.zoom+c:this.zoom-c),this.draw(!1,!1,!1,!0),this.panningGlobalX+=this.panningX,this.panningGlobalY+=this.panningY}}else if(this.graphType=="Genome"){if(this.cancelEvent(n),this.xAxisUnit>100&&t>0)return;if(i||(i=this.adjustedCoordinates(n)),i){var l=(i.x-(this.marginLeft+this.left))/this.x,a=1-l,s=this.xAxisRange*this.zoomStep;t>0?(this.setMin=this.setMin!=null?this.setMin+s*l:this.xAxisMin+s*l,this.setMax=this.setMax!=null?this.setMax-s*a:this.xAxisMax-s*a):(this.setMin=this.setMin!=null?this.setMin-s*l:this.xAxisMin-s*l,this.setMax=this.setMax!=null?this.setMax+s*a:this.xAxisMax+s*a),this.draw()}}else if(this.graphType=="Heatmap"){this.cancelEvent(n),this.resetAxesResizer(n);var u=this.layoutComb?this.layoutValidN:0,f,o=this.layoutComb?this.layoutParams[u].varIndices:this.varIndices,st=this.isGroupedData?this.grpIndices:this.smpIndices;if(f=this.isGroupedData?this.layoutComb?this.layoutParams[u].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[u].smpIndices:this.smpIndices,this.setOriginalIndices(u,o,f),i||(i=this.adjustedCoordinates(n)),i){n.type=="keydown"&&(i.x=this.width/2,i.y=this.height/2),i.x-=this.marginLeft+this.left,i.y-=this.marginTop+this.top;var ht=Math.min(Math.max(i.x,0),this.x)/this.x,nt=Math.ceil(o.length/10)*2,w=Math.round(ht*nt),tt=nt-w,ct=Math.min(Math.max(i.y,0),this.y)/this.y,it=Math.ceil(f.length/10)*2,b=Math.round(ct*it),rt=it-b,e=!1;if(t>0){if(!this.zoomVariablesDisable&&o.length>3){for(this.varIndicesStart<0&&this.varIndicesStart++,r=0;r<w;r++)this.varIndices.shift(),this.varIndicesStart++;for(r=0;r<tt;r++)this.varIndices.pop();e=!0}if(!this.zoomSamplesDisable&&f.length>3){for(this.smpIndicesStart<0&&this.smpIndicesStart++,r=0;r<b;r++)this.smpIndices.shift(),this.smpIndicesStart++;for(r=0;r<rt;r++)this.smpIndices.pop();e=!0}}else{if(!this.zoomVariablesDisable){for(r=0;r<w;r++)this.varIndicesStart>=0&&this.varIndicesStart+o.length<this.startingVarIndices[u].length?(this.varIndices.push(this.startingVarIndices[u][this.varIndicesStart+o.length]),e=!0):this.varIndicesStart>0&&(this.varIndicesStart--,this.varIndices.unshift(this.startingVarIndices[u][this.varIndicesStart]),e=!0);for(r=0;r<tt;r++)this.varIndicesStart>0?(this.varIndicesStart--,this.varIndices.unshift(this.startingVarIndices[u][this.varIndicesStart]),e=!0):this.varIndicesStart>=0&&this.varIndicesStart+o.length<this.startingVarIndices[u].length&&(this.varIndices.push(this.startingVarIndices[u][this.varIndicesStart+o.length]),e=!0)}if(!this.zoomSamplesDisable){for(r=0;r<b;r++)this.smpIndicesStart>=0&&this.smpIndicesStart+f.length<this.startingSmpIndices[u].length?(this.smpIndices.push(this.startingSmpIndices[u][this.smpIndicesStart+f.length]),e=!0):this.smpIndicesStart>0&&(this.smpIndicesStart--,this.smpIndices.unshift(this.startingSmpIndices[u][this.smpIndicesStart]),e=!0);for(r=0;r<rt;r++)this.smpIndicesStart>0?(this.smpIndicesStart--,this.smpIndices.unshift(this.startingSmpIndices[u][this.smpIndicesStart]),e=!0):this.smpIndicesStart>=0&&this.smpIndicesStart+f.length<this.startingSmpIndices[u].length&&(this.smpIndices.push(this.startingSmpIndices[u][this.smpIndicesStart+f.length]),e=!0)}}e&&this.draw()}}else if(this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked|Circular/)&&!this.is3DPlot){this.cancelEvent(n),this.resetAxesResizer(n);var u=this.layoutComb?this.layoutValidN:0,f,o=this.layoutComb?this.layoutParams[u].varIndices:this.varIndices,st=this.isGroupedData?this.grpIndices:this.smpIndices;if(f=this.isGroupedData?this.layoutComb?this.layoutParams[u].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[u].smpIndices:this.smpIndices,this.setOriginalIndices(u,o,f),i||(i=this.adjustedCoordinates(n)),i){n.type=="keydown"&&(i.x=this.width/2,i.y=this.height/2),i.x-=this.marginLeft+this.left,i.y-=this.marginTop+this.top;var lt=this.graphOrientation=="vertical"?Math.min(Math.max(i.x,0),this.x)/this.x:Math.min(Math.max(i.y,0),this.y)/this.y,ut=Math.ceil(f.length/10)*2,v=Math.round(lt*ut),ft=ut-v,h=[];if(t>0){if(f.length>3){for(this.smpIndicesStart<0&&this.smpIndicesStart++,this.smpIndicesStart+=v,r=v;r<f.length-ft;r++)h.push(f[r]);this.setSamplesVisible(h,!0),this.draw()}}else if(this.startingSmpIndices[u].length>f.length){for(h=f,r=0;r<ft;r++)this.startingSmpIndices[u].length>this.smpIndicesStart+f.length?h.push(this.startingSmpIndices[u][this.smpIndicesStart+f.length]):this.smpIndicesStart>0&&(this.smpIndicesStart--,h.unshift(this.startingSmpIndices[u][this.smpIndicesStart]));for(r=0;r<v;r++)this.smpIndicesStart>0?(this.smpIndicesStart--,h.unshift(this.startingSmpIndices[u][this.smpIndicesStart])):this.startingSmpIndices[u].length>this.smpIndicesStart+f.length&&h.push(this.startingSmpIndices[u][this.smpIndicesStart+f.length]);this.setSamplesVisible(h,!0),this.draw()}}}else if(this.graphType=="Scatter3D"||this.is3DPlot){if(this.cancelEvent(n),i||(i=this.adjustedCoordinates(n)),i&&(i.x-=this.marginLeft+this.left,i.y-=this.marginTop+this.top,y=Math.min(Math.max(i.x,0),this.x)/this.x-.5,p=Math.min(Math.max(i.y,0),this.y)/this.y-.5),t>0){if(this.zoom>=4)return;this.zoom*=1.1,this.padX-=y*this.padX/4,this.padY-=p*this.padY/4}else{if(this.zoom<=.5)return;this.zoom*=.9,this.padX+=y*this.padX/4,this.padY+=p*this.padY/4}this.draw()}else if(this.graphType=="Scatter2D"||this.graphType=="ScatterBubble2D"){this.cancelEvent(n);return}return!1},this.setLayoutValidIndices=function(n){var i,r,u,t;if(this.layoutComb&&(i=this.adjustedCoordinates(n),i)){var e=i.x,o=i.y,f=0;for(r=0;r<this.layoutRows;r++)for(u=0;u<this.layoutCols;u++)t=this.getBoundsXY(f),e>=t[0]&&e<=t[1]&&o>=t[2]&&o<=t[3]&&this.layoutValid&&(this.layoutValidR=r,this.layoutValidC=u,this.layoutValidN=f),f++}},this.getNetworkEventDataId=function(n){var t=this.isEvent(n,!0),i=t[0],r=t[1];return i?r&&r.match(/-legend-/)?!1:i:!1},this.getEventDataId=function(n){return this.graphType=="Network"?this.getNetworkEventDataId(n):this.isEvent(n)},this.getEventAreaData=function(n){return this.extractDataObject(this.getEventDataId(n))},this.handleMouseEvents=function(n,t,i){if(i[0]==-1)this.showInfoSpan(t,"CanvasXpress ("+this.version+")");else{this.layoutComb&&!this.layoutValidN&&this.setLayoutValidIndices(t);var r=this.extractDataObject(i);this.userEvents[n]&&(typeof this.userEvents[n]=="object"&&this.userEvents[n].handler&&this.userEvents[n].scope?t.ctrlKey&&n=="click"?t.shiftKey&&n=="click"?alert(this.prettyJSON(r)):t.shiftKey&&n=="click"?(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(t)),this.draw()):(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(t)),this.draw()):t.shiftKey&&n=="click"&&this.graphType=="Network"&&this.networkLayoutType=="radial"?this.reRootRadialNetwork(this.getEventDataId(t)):t.shiftKey&&n=="click"||t.altKey&&n=="click"||this.userEvents[n].handler.apply(this.userEvents[n].scope,[r,t,this,i]):typeof this.userEvents[n]=="object"&&this.userEvents[n].handler?t.ctrlKey&&n=="click"?t.shiftKey&&n=="click"?alert(this.prettyJSON(r)):t.shiftKey&&n=="click"?(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(t)),this.draw()):(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(t)),this.draw()):t.shiftKey&&n=="click"&&this.graphType=="Network"&&this.networkLayoutType=="radial"?this.reRootRadialNetwork(this.getEventDataId(t)):t.shiftKey&&n=="click"||t.altKey&&n=="click"||this.userEvents[n].handler(r,t,this,i):t.ctrlKey&&n=="click"?t.shiftKey&&n=="click"?alert(this.prettyJSON(r)):t.shiftKey&&n=="click"?(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(t)),this.draw()):(this.addRemoveToSelectedDataPoints(!1,this.getEventDataId(t)),this.draw()):t.shiftKey&&n=="click"&&this.graphType=="Network"&&this.networkLayoutType=="radial"?this.reRootRadialNetwork(this.getEventDataId(t)):t.shiftKey&&n=="click"||t.altKey&&n=="click"||this.userEvents[n](r,t,this,i))}},this.formatCoords=function(n,t){var i=[],r;if(this.graphType!="Network")for(r=0;r<t.length;r++)r%2?i.push(sprintf("%.0f",(t[r]+this.translateY)*this.scaleY)):this.layoutValid&&n=="circle"&&r==2?i.push(sprintf("%.0f",t[r]*((this.scaleX+this.scaleY)/2))):i.push(sprintf("%.0f",(t[r]+this.translateX)*this.scaleX));else for(r=0;r<t.length;r++)i.push(sprintf("%.0f",parseInt(t[r])));if(n=="rect"){var u=Math.min(i[0],i[2]),f=Math.min(i[1],i[3]),e=Math.max(i[0],i[2]),o=Math.max(i[1],i[3]);i=[u,f,e,o]}return i.join(",")},this.addArea=function(n,t,i){if(n&&t){var r=n.shift();if(r&&n){switch(r){case"rect":n[0]-=this.outlineWidth,n[1]-=this.outlineWidth,n[2]+=this.outlineWidth*2,n[3]+=this.outlineWidth*2;break;case"circle":n[2]+=this.outlineWidth*2}this.dataEvent.push([t,r,n,i])}}},this.flash=function(n,t,i,r,u,f){var e=this.$cX("div",{id:this.target+"canvasXpressFlash"+(new Date).getTime()},{left:n-i/2+"px",top:t-r/2+"px",width:i+"px",height:r+"px",borderRadius:"999px",WebkitBorderRadius:"999px",MozBorderRadius:"999px",opacity:.6,filter:"alpha(opacity = 60)",position:"absolute",zIndex:1e5,display:"block",backgroundColor:u?u:this.resizerBackgroundColor});this.canvas.parentNode.appendChild(e),f||(f=3);var s=this,o=1,h=function(){this.update=function(){e.style.display=o%2?"none":"block",o>=f*2&&(s.canvas.parentNode.removeChild(e),clearInterval(n)),o++};var n=setInterval(this.update,300)};h.call()},this.initializeCanvasEvents=function(){this.disableEvents||this.addRemoveCanvasListeners("addEvtListener")},this.initializeCanvasEvents()},CanvasXpress.prototype.initCleanupEvents=function(){this.destroy=function(n){if(n){if(CanvasXpress.references.length==1&&CanvasXpress.references[0].target==n)return this.destroy();this.removeReference(n)}else{while(CanvasXpress.references.length>0)n=CanvasXpress.references[0],this.removeReference(n.target);CanvasXpress.cacheImages={},CanvasXpress.cacheText={},CanvasXpress.stack={},CanvasXpress.current=!1}},this.monitorReference=function(){for(var t=[],i,n=0;n<CanvasXpress.references.length;n++)i=this.$(CanvasXpress.references[n].target),i||t.push(CanvasXpress.references[n].target);for(n=0;n<t.length;n++)this.destroy(t[n])},this.removeReference=function(n,t){var u=CanvasXpress.references,i,r;for(CanvasXpress.references=[],i=0;i<u.length;i++)u[i].target!=n?CanvasXpress.references.push(u[i]):(r=u[i],r.resetTooltipDivs(),r.cleanEvtListeners(t),r.removeTarget("container-"+r.target))},this.cleanEvtListeners=function(){this.addRemoveLinkListeners("removeEvtListener"),this.addRemoveViewportListeners("removeEvtListener"),this.addRemoveToolbarListeners("removeEvtListener"),this.addRemoveItemListeners("removeEvtListener"),this.addRemoveConfiguratorListeners("removeEvtListener"),this.addRemoveDataTableListeners("removeEvtListener"),this.removeGenericDataFilterListenersOrReset(),this.addRemoveDataFilterListeners("removeEvtListener"),this.addRemoveCanvasListeners("removeEvtListener"),this.addRemoveAxesResizerListeners("removeEvtListener"),this.addRemoveNavigationTopListeners("removeEvtListener"),this.addRemoveNavigationLeftRightListeners("removeEvtListener"),this.removeEvtListener(document,"mousemove",this.mousemoveDoc,!1),this.removeEvtListener(document,"touchmove",this.mousemoveDoc,!1),this.removeEvtListener(document,"mouseup",this.mouseupDoc,!1),this.removeEvtListener(document,"touchend",this.mouseupDoc,!1),this.removeEvtListener(document,"keydown",this.keydownDoc,!1),this.removeEvtListener(document,"keyup",this.keyupDoc,!1),this.removeEvtListener(window,"resize",this.resizeWindow,!1)},this.initializeCleanupEvents=function(){if(this.destroyCanvasXpressZombies){var n=this,t=function(){this.monitor=function(){CanvasXpress.references.length<1&&clearInterval(t),n.monitorReference()};var t=setInterval(this.monitor,n.monitorCanvasXpressZombiesTime)};t.call()}},this.initializeCleanupEvents()},CanvasXpress.prototype.initEvents=function(){this.relativeCoordinates=function(n){for(var t={x:0,y:0};n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)t.x+=n.offsetLeft,t.y+=n.offsetTop,n=n.offsetParent;return t},this.absoluteCoordinates=function(n){for(var t={x:0,y:0};n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)t.x+=n.offsetLeft-n.scrollLeft,t.y+=n.offsetTop-n.scrollTop,n=n.offsetParent;return t},this.adjustedCoordinates=function(n,t){if((n||(n=window.event),t||(t=this.$(this.target)),!this.isIE||!this.useFlashIE||!(this.browserVersion<9)||window.event)&&t){var i={},f=t.parentNode.getClientRects(),e=n&&n.changedTouches?n.changedTouches[0]:!1;if(f&&f[0]){var r=f[0].left,u=f[0].top,o=n&&n.clientX?n.clientX:e?e.clientX:n&&n[0]?n[0]:r,s=n&&n.clientY?n.clientY:e?e.clientY:n&&n[1]?n[1]:u;i.x=document.body.scrollLeft>Math.abs(r)+o&&o>document.body.scrollLeft-r?Math.abs(r)+o:o-r,i.y=document.body.scrollTop>Math.abs(u)+s&&s>document.body.scrollTop-u?Math.abs(u)+s:s-u}else i.x=0,i.y=0;return i}},this.isObjectInsideArea=function(n,t,i,r,u,f){var h,c,e,o,s;switch(n){case"rect":h=(t[0]+t[2])/2,c=(t[1]+t[3])/2;break;case"circle":h=t[0],c=t[1];break;case"poly":for(e=[],o=[],s=0;s<t.length;s++)s%2?o.push(t[s]):e.push(t[s]);e.sort(function(n,t){return n-t}),o.sort(function(n,t){return n-t}),h=(e[0]+e[e.length-1])/2,c=(o[0]+o[o.length-1])/2}return this.isPointInsideArea("rect",h,c,[i,r,u,f])},this.isPointInsideArea=function(n,t,i,r){var s,u,o;switch(n){case"rect":return r[0]>r[2]&&(r[4]=r[0],r[0]=r[2],r[2]=r[4]),r[1]>r[3]&&(r[4]=r[1],r[1]=r[3],r[3]=r[4]),t>=r[0]&&t<=r[2]&&i>=r[1]&&i<=r[3]?!0:!1;case"circle":return s=r[2]/2,t>=r[0]-s&&t<=r[0]+s&&i>=r[1]-s&&i<=r[1]+s?!0:!1;case"poly":var e=[],f=[],h=!1;for(u=0;u<r.length;u++)u%2?f.push(r[u]):e.push(r[u]);for(f[0]<f[1]&&(f=f.reverse(),e=e.reverse()),u=0,o=e.length-1;u<e.length;o=u++)(f[u]<=i&&i<f[o]||f[o]<=i&&i<f[u])&&t<(e[o]-e[u])*(i-f[u])/(f[o]-f[u])+e[u]&&(h=!h);return h}},this.isEvent=function(n,t,i){var h=this.adjustedCoordinates(n),e,u;if(h&&(e=this.getTargetEvent(n),e&&e.id&&e.id.match(this.target))){var c=h.x,l=h.y,f=this.dataEvent,o=[];for(u=f.length-1;u>=0;u--){var s=f[u][0],a=f[u][1],v=f[u][2],r=f[u][3];if(this.isPointInsideArea(a,c,l,v))if(r&&(r=s[0]+r),i)r?o.push(r):o.push(s[0]);else return t?[s,r]:r?[r]:s}if(o.length>0)return o}return!1},this.getBoundsXY=function(n){var t=this.layoutComb?this.layoutParams[n]:this,i=this.graphType=="Network"?0:this.marginLeft+t.offsetX,r=this.graphType=="Network"?0:this.marginTop+t.offsetY;return[i+t.left,i+t.left+t.x,r+t.top,r+t.top+t.y,i,i+t.left+t.x+t.right,r,r+t.top+t.y+t.bottom]},this.extractDataObject=function(n,t){var o=this,l=this.layoutComb&&this.layoutValidN>-1?this.layoutParams[this.layoutValidN].graphType:this.graphType,e=[],f=[],rt=function(n){var r={},t,i;for(t in o.data.x)for(r[t]=[],i=0;i<n.length;i++)r[t].push(o.data.x[t][n[i]]);return r},p=function(n){var r={},t,i;for(t in o.data.z)for(r[t]=[],i=0;i<n.length;i++)r[t].push(o.data.z[t][n[i]]);return r},w=function(n){for(var i=[],t=0;t<n.length;t++)i.push(o.data.y.vars[n[t]]);return i},tt=function(n,t){for(var u=t?o.data.w.smps:o.data.y.smps,r=[],i=0;i<n.length;i++)r.push(u[n[i]]);return r},ut=function(n){for(var i=[],t=0;t<n.length;t++)i.push(o.data.w.grps[n[t]]);return i},b=function(n,t,i){var u=[],f,r;if(i||(i="data"),t)for(r=0;r<n.length;r++)for(u[r]=[],f=0;f<t.length;f++)u[r].push(o.data.y[i][n[r]][t[f]]);else for(r=0;r<n.length;r++)u.push(o.data.y[i][n[r]]);return u},d,v,it,c,g,i,h,nt,r,y,s,a,u;switch(l){case"Area":case"AreaLine":case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"Heatmap":case"Pie":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Candlestick":case"Circular":if(n&&n.length!=0&&n[0]!=null){if(isNaN(n[0])){if(n[0]&&n[0].match(/Dendrogram/))return i={t:{}},u=n[0].split("-"),i.t.d=parseInt(u[1]),i.t.o=parseInt(u[2]),i.t.t=u[3],i.objectType="Dendrogram",i;if(n[0]&&n[0].match(/Var/)){var u=n[0].split("-"),r=parseInt(u[1]),k=[r];return k=k.concat(this.smpIndices),i=this.extractDataObject(k),i.display=this.data.y.vars[r],i.objectType="Var",i}if(n[0]&&n[0].match(/Smp/)){var u=n[0].split("-"),r=parseInt(u[1]),i=this.extractDataObject([r],this.varIndices);return i.display=this.isGroupedData?this.data.w.smps[r]:this.data.y.smps[r],i.objectType="Smp",i}return}if(t)e=t,f=n;else for(e=[n[0]],f=[],r=1;r<n.length;r++)f.push(n[r]);l.match(/Scatter/)&&(this.colorBy&&this.getSampleIndices(this.colorBy)>-1&&f.push(this.getSampleIndices(this.colorBy)),this.shapeBy&&this.getSampleIndices(this.shapeBy)>-1&&f.push(this.getSampleIndices(this.shapeBy)),this.sizeBy&&this.getSampleIndices(this.sizeBy)>-1&&f.push(this.getSampleIndices(this.sizeBy)))}else return;if(l.match(/Area/))return{x:this.data.x,y:{vars:w(e),smps:this.data.y.smps,data:b(e)},z:p(e)};if(this.isGroupedData){i={x:{},w:{},z:p(e)},l=="Boxplot"&&f[1]!=null&&(i.y={data:this.data.y.data[e[0]][f[1]],vars:this.data.y.vars[f[1]],smps:this.data.y.smps[f[1]]});for(u in this.data.w)u=="smps"?i.w[u]=tt(f,!0):u=="grps"?i.w[u]=ut(f):u=="vars"?i.w[u]=w(e):this.data.w[u].length>e[0]&&this.data.w[u][e[0]].length>f[0]&&(i.w[u]=[],i.w[u].push(this.data.w[u][e[0]][f[0]]));for(u in this.data.x){for(c=[],r=0;r<i.w.grps[0].length;r++)c.push(this.data.x[u][i.w.grps[0][r]]);i.x[u]=c}}else if(i={x:rt(f),y:{vars:w(e),smps:tt(f)},z:p(e)},l=="Candlestick"){for(u in this.data.y)if(u&&u!="vars"&&u!="smps"&&u!="desc")for(i.y[u]=[],r=0;r<e.length;r++)for(i.y[u][r]=[],s=0;s<f.length;s++)i.y[u][r].push(this.data.y[u][e[r]][f[s]])}else if(i.y.data=b(e,f),this.isMultidimensionalHeatmap)for(d=["outline","shape","size"],r=0;r<d.length;r++)v=d[r]+"ByData",this.data.y[this[v]]&&(i.y[this[v]]=b(e,f,this[v]));return i;case"Correlation":if(n&&(!isNaN(n[0])||n[0].match(/^\d/)))it=this.isGroupedData?this.data.w.cor:this.data.y.cor;else return;if(this.correlationAxis=="samples"){i={x:{},y:{}};for(u in this.data.x){for(c=[],r=0;r<n.length;r++)c.push(this.data.x[u][n[r]]);i.x[u]=c}i.y.smps=[this.data.y.smps[n[0]],this.data.y.smps[n[1]]]}else{i={y:{},z:{}};for(u in this.data.y){for(g=[],r=0;r<n.length;r++)g.push(this.data.y[u][n[r]]);i.z[u]=g}i.y.vars=[this.data.y.vars[n[0]],this.data.y.vars[n[1]]]}return i.y.data=it[n[0]][n[1]],i;case"Venn":return i={venn:{data:{}}},i.venn.data[this.vennCompartments[n[0]]]=this.data.venn.data[this.vennCompartments[n[0]]],i;case"Network":if(i={},!n||n.length==0)return;if(isNaN(n[0]))n[0]=n[0].toString(),n[0].match(/legend/)&&(n[0].match(/Nodes/)?i={nodeLegend:this.data.legend.nodes}:n[0].match(/Edges/)?i={edgeLegend:this.data.legend.edges}:n[0].match(/Decorations/)?i={decorationLegend:this.data.legend.decorations}:(h=parseInt(n[0].replace("-1-legend-Text","")),i={textLegend:this.data.legend.text[h]}));else for(r=0;r<n.length;r++)n[r]>=this.data.nodes.length?(i.edges||(i.edges=[]),i.edges.push(this.data.edges[n[r]-this.data.nodes.length])):(i.nodes||(i.nodes=[]),i.nodes.push(this.data.nodes[n[r]]));return i;case"Genome":for(i=[],i[0]={data:[]},h=0,nt=isNaN(n[0])&&n[0].match(":")?n[0].match(/:(\d+)/)[1]:!1,r=0;r<this.data.tracks.length;r++){if(y=this.data.tracks[r].data.length,h+=y,isNaN(n[0])){if(n[0]=="track-"+r)return{name:this.data.tracks[r].name};if(n[0]=="track-"+r+":"+nt){a=parseInt(nt)-(h-y);for(u in this.data.tracks[r])u=="data"?i[0][u].push(this.data.tracks[r][u][a]):i[0][u]=this.data.tracks[r][u];return i}continue}if(n[n.length-1]<h){for(s=0;s<n.length;s++){a=n[s]-(h-y);for(u in this.data.tracks[r])u=="data"?i[0][u].push(this.data.tracks[r][u][a]):i[0][u]=this.data.tracks[r][u]}return i}}}},this.getSummaryDataObject=function(n){var i,e,o,u,f,t,l,s,r,h,c;if(n)switch(this.graphType){case"Bar":case"Line":case"Area":case"AreaLine":case"BarLine":case"Boxplot":case"Dotplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Circular":if(i="",n.display)return"<b>"+n.display+"<\/b><br>";if(this.isGroupedData&&n.w){if(i="<b>"+n.w.vars[0]+"<\/b><br>",this.summaryType=="mean")for(t=0;t<n.w.smps.length;t++)i+="<b>"+n.w.smps[t]+"<\/b>: "+n.w.mean[t]+"<br>";else if(this.summaryType=="median"||this.summaryType=="iqr")for(t=0;t<n.w.smps.length;t++)i+="<b>"+n.w.smps[t]+"<\/b>: "+n.w.median[t]+"<br>";else if(this.summaryType=="sum")for(t=0;t<n.w.smps.length;t++)i+="<b>"+n.w.smps[t]+"<\/b>: "+n.w.sum[t]+"<br>"}else if(n.y)for(i="<b>"+n.y.vars[0]+"<\/b><br>",t=0;t<n.y.smps.length;t++)if(this.isMultidimensionalHeatmap){for(e=[n.y.data[0][t]],o=["outline","shape","size"],u=0;u<o.length;u++)f=o[u]+"ByData",n.y[this[f]]&&n.y[this[f]][0][t]&&e.push(n.y[this[f]][0][t]);i+="<b>"+n.y.smps[t]+"<\/b>: "+e.join(", ")+"<br>"}else i+="<b>"+n.y.smps[t]+"<\/b>: "+n.y.data[0][t]+"<br>";else n.t&&(i="<b>"+n.t.t+"<\/b><br>Depth: "+n.t.d+"<br>");return i;case"Pie":for(r="<b>"+n.y.smps[0]+"<\/b><br>",t=0;t<n.y.vars.length;t++)l=sprintf("%."+this.pieSegmentPrecision+"f",n.y.data[t]/this.varPie.tot*100),r+="<b>"+n.y.vars[t]+"<\/b>: "+n.y.data[t]+" ("+l+"%)<br>";return r;case"Candlestick":return dateFormat(n.y.smps[0],this.timeFormat)+", "+n.y.close[0];case"Correlation":return this.correlationAxis=="samples"?n.y.smps[0]+" vs "+n.y.smps[1]:n.y.vars[0]+" vs "+n.y.vars[1];case"Venn":for(s in n.venn.data)return s+" = "+n.venn.data[s];case"Network":return n&&n.nodes?n.nodes[0]&&(r=n.nodes[0].hideTooltip?"":n.nodes[0].tooltip||n.nodes[0].name||n.nodes[0].label||n.nodes[0].id):n&&n.edges&&(h=this.nodes[n.edges[0].id1],c=this.nodes[n.edges[0].id2],r=(h.label||h.id)+" - "+(c.label||c.id),r=n.edges[0].hideTooltip?"":n.edges[0].tooltip||n.edges[0].name||n.edges[0].label||r),r;case"Genome":return n.name||n[0].data[0].id}else return""},this.setUserEvents=function(){var i,t,n;if(this.userEvents={},!this.disableEvents)for(i=this,this.events&&this.events.enddragnode&&(this.userEvents.enddragnode=this.events.enddragnode),this.events&&this.events.stackchange&&(this.userEvents.stackchange=this.events.stackchange),this.events&&this.events.select&&(this.userEvents.select=this.events.select),this.events&&this.events.enddraw&&(this.userEvents.enddraw=this.events.enddraw),this.userEvents.mouseout=this.events&&this.events.mouseout?this.events.mouseout:function(n,t,i){i.resetInfoSpan(t)},this.userEvents.contextmenu=this.events&&this.events.contextmenu?this.events.contextmenu:function(n,t,i,r){i.graphType=="Network"&&(n&&n.nodes&&n.nodes.length==1?i.selectNode&&!i.selectNode[n.nodes[0].id]&&i.addRemoveToSelectedDataPoints(!1,r):n&&n.edges&&n.edges.length==1),i.addMenu(t)},this.userEvents.click=this.events&&this.events.click?this.events.click:function(n,t,i){return n&&n.t?i.modifyDendrogram(n):n.nodes&&n.nodes.length==1&&n.nodes[0].links?i.showLinkDiv(t,n.nodes[0].links,n.nodes[0].label!=null?n.nodes[0].label:n.nodes[0].name?n.nodes[0].name:n.nodes[0].id):n.edges&&n.edges.length==1&&n.edges[0].links?i.showLinkDiv(t,n.edges[0].links,n.edges[0].label!=null?n.edges[0].label:n.edges[0].name?n.edges[0].name:n.edges[0].id1+"-"+n.edges[0].id2):i.updateDataTable(n),!1},this.userEvents.dblclick=this.events&&this.events.dblclick?this.events.dblclick:function(n){return n&&alert(i.prettyJSON(n)),!1},t=["mouseover","mousemove"],n=0;n<t.length;n++)this.userEvents[t[n]]=this.events&&this.events[t[n]]?this.events[t[n]]:function(n,t){var r=i.getSummaryDataObject(n);r&&r!=""&&i.showInfoSpan(t,r)}},this.resetFlags=function(n){this.resetOn=!0,this.animationOn=!1,this.draggingOn=!1,this.movingOn=!1,this.panningOn=!1,this.changingColorOn=!1,this.keyOn=!1,this.xMouseDown=!1,this.yMouseDown=!1,this.touches=!1,this.toucheEvent=!1,this.moveNode=!1,this.moveNodeIndex=!1,this.moveNodeLab=!1,this.moveNodeDec=!1,this.moveLegend=!1,this.moveNodeX=!1,this.moveNodeY=!1,this.moveNodeW=!1,this.moveNodeH=!1,this.moveGenome=!1,this.moveVar=!1,this.moveSmp=!1,n&&this.stopEvent(n),document.defaultAction=!0,document.body.style.cursor="default"},this.mousemoveDoc=function(n){return function(t){var i,u,r;return t||(t=window.event),i=n.getTargetEvent(t),i.className!="CanvasXpress"||CanvasXpress.resizing||(CanvasXpress.current=i.id),CanvasXpress.current&&CanvasXpress.current==n.target||CanvasXpress.resizing?(this.toolbarPermanent||n.isToolbar(t),n.isVersion(t)?(u=this.$(n.target),u.style.cursor="help",n.showInfoSpan([t.clientX,t.clientY+50],"CanvasXpress ("+n.version+")")):n.filteringNumericOn?(n.preventSelection(),n.updateNumericFilter(t)):n.filteringStringOn?(n.preventSelection(),n.updateStringFilter(t)):n.draggingTargetOn?(n.preventSelection(),n.updateMousemove(t)):n.resizingDataTableOn?(n.preventSelection(),n.updateDataTableResizerDiv(t)):n.axesResizingOn?(n.preventSelection(),n.mousemoveAxesResize(t)):n.resizingDataTableColumnOn?(n.preventSelection(),n.mousemoveDataTableHeader(t)):n.changingColorOn?(n.preventSelection(),n.updateColorValue(t)):(!n.configuringOn||n.configuratorLastState&&n.configuratorLastState=="docked")&&(n.draggingOn?(n.preventSelection(),n.cancelEvent(t),n.updateDrag(t),n.lastCanvasEvent="drag"):n.resizingCanvasOn&&n.resizeCanvasCursorShow?(n.preventSelection(),n.cancelEvent(t),n.updateCanvasResizer(t),n.lastCanvasEvent="resize"):n.mobileApp||(n.cancelEvent(t),n.updateCanvasResizerCursor(t)),r=n.graphType=="Genome"?n.isEvent(t,!1,!0):n.isEvent(t),r?i.className=="CanvasXpress"&&n.handleMouseEvents("mousemove",t,r):n.resetInfoSpan(t,!0))):n.cancelEvent(t),!1}}(this),this.registerMousemove=function(n){return function(t){t||(t=window.event);var i=t.target||t.srcElement;(t.button==1&&window.event!=null||t.button==0)&&n.hasClass(i,"draggable")&&(n.activeTarget&&(n.activeTarget.style.zIndex=1e4),n.draggableTarget=i.parentNode&&n.hasClass(i.parentNode,"draggable-container")?i.parentNode:i,n.activeTarget=n.draggableTarget,n.activeTarget.style.zIndex=10001,n.xMouseDown=t.clientX,n.yMouseDown=t.clientY,n.draggableXoffset=parseInt(n.draggableTarget.style.left)||0,n.draggableYoffset=parseInt(n.draggableTarget.style.top)||0,n.draggingTargetOn=!0)}}(this),this.updateMousemove=function(n){if(n||(n=window.event),this.draggableTarget&&this.draggableTarget.style){var t=this.draggableXoffset+n.clientX-this.xMouseDown,i=this.draggableYoffset+n.clientY-this.yMouseDown;this.draggableTarget.style.left=t+"px",this.draggableTarget.style.top=i+"px",this.draggableLastX=t,this.draggableLastY=i,this.draggableTarget.id==this.target+"-cX-DataTable"&&this.dataTableLastState=="docked"&&this.moveDataTableDiv("release")}},this.endMousemove=function(){this.draggableTarget!=null&&(this.moveDataTableDiv(),document.onselectstart=null,this.xMouseDown=null,this.yMouseDown=null,this.draggableXoffset=null,this.draggableYoffset=null,this.draggableTarget.ondragstart=null,this.draggableTarget=!1,this.draggingTargetOn=!1)},this.mouseupDoc=function(n){return function(t){t||(t=window.event),CanvasXpress.current&&CanvasXpress.current==n.target&&(n.draggingTargetOn?n.endMousemove(t):n.resizingDataTableOn?n.endDataTableResizerDiv(t):n.resizingDataTableColumnOn?n.endDataTableColumnResize(t):n.changingColorOn?n.endColorChange(t):(!n.configuringOn||n.configuratorLastState&&n.configuratorLastState=="docked")&&(n.stopEvent(t),n.endDrag(t),n.endCanvasResizer(t),n.endAxesResizer(t),n.endNumericFilter(t),n.endStringFilter(t),n.resetFlags(t)))}}(this),this.touchendDoc=function(n){return function(t){if(CanvasXpress.current&&CanvasXpress.current==n.target){if(!n.touchEvent||!n.mobileApp||!n.touches)return n.mouseupDoc(t);var f=n.layoutComb?n.layoutParams[n.layoutValidN].graphType:n.graphType,i=n,u=function(){var f;if(clearTimeout(u),i.touches.length>1){var n=i.touches[0],r=i.touches[1],e=Math.abs(r[0]-n[0]),o=Math.abs(r[1]-n[1]),v=Math.atan2(r[1]-n[1],r[0]-n[0])*180/Math.PI;i.touchEvent=e<20&&o<20?"dbltap":"pinch"}else if(i.touchEvent!="drag"){if(i.touchEvent=="dbltap"||i.touchEvent=="pinch")return!1;i.touchEvent="tap"}if(i.touchEvent=="pinch"&&i.touchesEnd.length>1){if(i.graphType.match(/Network|Genome|Heatmap|Bar|Line|Dotplot|Boxplot|Area|Stacked|Scatter3D|Circular/)){var s=i.euclidianDistance([i.touches[0][0],i.touches[1][0]],[i.touches[0][1],i.touches[1][1]]),h=i.euclidianDistance([i.touchesEnd[0][0],i.touchesEnd[1][0]],[i.touchesEnd[0][1],i.touchesEnd[1][1]]),c=(i.touchesEnd[0][0]+i.touchesEnd[1][0])/2,l=(i.touchesEnd[0][1]+i.touchesEnd[1][1])/2,a=i.zoomStep;i.zoomStep*=3,i.resetFlags(t),i.handleWheelEvent(t,h-s,{x:c,y:l}),i.zoomStep=a}return i.touchesEnd=!1,!1}if(i.touchEvent=="dbltap")return i.stopEvent(t),i.addConfigurator(t,!1,3,3),i.resetFlags(t),!1;if(i.touchEvent=="tap")return f=i.getEventDataId(t),f?i.handleMouseEvents("click",t,f):i.resetSelectedObjects(),i.resetFlags(t),!1;i.stopEvent(t),i.endDrag(t),i.endCanvasResizer(t),i.endAxesResizer(t),i.resetFlags(t)},r=n.adjustedCoordinates(t);r&&(n.touchesEnd||(n.touchesEnd=[]),n.touchesEnd.push([r.x,r.y,(new Date).getTime()]),setTimeout(u,250))}}}(this),this.keydownDoc=function(n){return function(t){t||(t=window.event),CanvasXpress.current&&CanvasXpress.current==n.target&&n.registerKey(t)}}(this),this.keyupDoc=function(n){return function(t){t||(t=window.event);var i=n.getTargetEvent(t);CanvasXpress.current&&CanvasXpress.current==n.target&&(n.keyOn=!1,i.id.match(/cX-DataFilterInput/)?n.updateSelectStringFilter(i.id):n.configuringOn?n.selectConfig(t):n.remoteService&&n.selectDataSet(t))}}(this),this.resizeWindow=function(n){return function(t){return t||(t=window.event),n.resizeImage&&n.resizeImage(!0),!1}}(this),this.initDocEvents=function(){this.addEvtListener(document,"mousemove",this.mousemoveDoc,!1),this.addEvtListener(document,"touchmove",this.mousemoveDoc,!1),this.addEvtListener(document,"mouseup",this.mouseupDoc,!1),this.addEvtListener(document,"touchend",this.touchendDoc,!1),this.addEvtListener(document,"keydown",this.keydownDoc,!1),this.addEvtListener(document,"keyup",this.keyupDoc,!1),this.addEvtListener(window,"resize",this.resizeWindow,!1)},this.initializeEvents=function(){this.setUserEvents(),this.initViewport(),this.initToolbarTooltip(),this.initMenuLinks(),this.initConfigurator(),this.initDataFilter(),this.initDataTable(),this.initDraggingEvents(),this.initCanvasResizerEvents(),this.initAxisResizerEvents(),this.initKeyEvents(),this.initSelectEvents(),this.initDendrogramEvents(),this.initCanvasEvents(),this.initAcknowlegments(),this.initCodeInfo(),this.initDocEvents(),this.initCleanupEvents()},this.initializeEvents()},CanvasXpress.prototype.initAnimation=function(){this.saveSnapshot=function(){var n=this.cloneVisualData(this.data);n&&this.snapshots.push(n)},this.playSnapshot=function(n,t,i){if(!(this.snapshots.length<1)){this.stopSnapshotPlay();var r=this;this.snapshotPlay={idx:0,time:n,task:setTimeout(function(){r.nextSnapshot(i)},0),callback:t,oldData:this.data},this.snapshotPaused=!1}},this.nextSnapshot=function(n){var t,i;this.snapshotPlay.idx>=this.snapshots.length&&(this.snapshotPlay.callback?this.snapshotPlay.callback.call(this,n):this.snapshotPlay.idx=0),this.snapshotPlay&&(t=this.snapshotPlay.time||this.snapshots[this.snapshotPlay.idx].time||50,this.loadData(this.snapshots[this.snapshotPlay.idx++],!0),i=this,this.snapshotPlay.task=setTimeout(function(){i.nextSnapshot(n)},t),this.snapshotPaused=!1)},this.stopSnapshotPlay=function(n){this.snapshotPlay&&(clearTimeout(this.snapshotPlay.task),this.loadData(this.snapshotPlay.oldData,n),delete this.snapshotPlay,this.snapshotPaused=!1)},this.clearSnapshot=function(){this.stopSnapshotPlay(!0),this.snapshots=[],this.snapshotPaused=!1},this.duplicateSnapshot=function(){if(!(this.snapshots.length<1)){var n=(this.snapshotPlay?this.snapshotPlay.idx:this.snapshots.length)-1,t=this.cloneVisualData(this.snapshots[n]);this.snapshotPlay?(this.snapshots.splice(n+1,0,t),this.snapshotPlay.idx++):this.snapshots.push(t)}},this.makeSnapshotPlay=function(){this.snapshotPlay?this.pauseSnapshot():this.snapshotPlay={idx:this.snapshots.length,oldData:this.data}},this.moveSnapshot=function(n){if(!(this.snapshots.length<1)){this.makeSnapshotPlay();var i=this.snapshotPlay.idx-1,t=i+n;t>=0&&t<=this.snapshots.length&&this.snapshots.splice(t,0,this.snapshots.splice(i,1)[0]),this.snapshotPlay.idx=t+1}},this.prevSnapshotOnce=function(){this.snapshots.length<2||(this.makeSnapshotPlay(),this.snapshotPlay.idx-=2,this.snapshotPlay.idx<0&&(this.snapshotPlay.idx=0),this.loadData(this.snapshots[this.snapshotPlay.idx++],!0),this.snapshotPaused=!0)},this.nextSnapshotOnce=function(){this.snapshotPlay&&(this.snapshotPlay.idx<this.snapshots.length&&this.loadData(this.snapshots[this.snapshotPlay.idx++],!0),this.snapshotPaused=!0)},this.hasNextSnapshot=function(){return this.snapshots.length>1&&this.snapshotPlay&&this.snapshotPaused&&this.snapshotPlay.idx<this.snapshots.length},this.hasPrevSnapshot=function(){return this.snapshots.length>1&&(!this.snapshotPlay||this.snapshotPlay.idx>1&&this.snapshotPaused)},this.updateSnapshot=function(){this.snapshotPlay&&(this.snapshots[this.snapshotPlay.idx-1]=this.cloneVisualData(this.data))},this.pauseSnapshot=function(){this.snapshotPlay&&(this.snapshotPlay.task&&clearTimeout(this.snapshotPlay.task),this.snapshotPaused=!0)},this.setSnapshotTime=function(n){n>0&&(this.snapshots[this.snapshotPlay.idx-1].time=n)},this.getSnapshotTime=function(){return this.snapshots[this.snapshotPlay.idx-1].time||50},this.assembleObj=function(n,t,i){var o=[],f,u,e,s,h,r;if(!t[i])return n[i];for(t[i].indices||(t[i].indices={}),f=0;f<n[i].length;f++)if(u=n[i][f],r=u.id||u.id1+"-"+u.id2,!t[i].deleted[r]){if(e=t[i].changed[r],e)for(s in e)u[s]=e[s];h=t[i].indices[r]!=null?t[i].indices[r]:i=="nodes"?n.nodeIndices[r]:n.edgeIndices[r],o[h]=u,t[i].indices[r]=h}for(r in t[i].added)o[t[i].indices[r]]=t[i].added[r];return o},this.assembleData=function(n,t){var i={};return i.nodes=this.assembleObj(n,t,"nodes"),i.nodeIndices=t.nodes&&t.nodes.indices?t.nodes.indices:n.nodeIndices,i.edges=this.assembleObj(n,t,"edges"),i.legend=t.legend||n.legend,i},this.loadData=function(n,t){var r,i,u;this.data=n;switch(this.graphType){case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":return!1;case"Network":for(this.data.type=="changedData"&&(this.data=this.assembleData(this.cloneObject(this.snapshotsBase),this.cloneObject(this.data))),this.edges=this.data.edges,r={},i=0;i<this.data.nodes.length;i++)u=this.data.nodes[i],r[u.id]=u;this.nodes=r}t&&this.draw(!1,!1,!0)},this.changedNodeData=function(n,t){var r={deleted:{},changed:{},added:{}},f,u,i;for(i in n.nodeIndices)if(f=t.nodeIndices[i],f==null)r.deleted[i]=1;else{var h=n.nodes[n.nodeIndices[i]],e=t.nodes[f],o={id:i},s=!1;for(u in e)this.isSameObject(e[u],h[u])||(o[u]=e[u],s=!0);s&&(r.changed[i]=o)}for(i in t.nodeIndices)n.nodeIndices[i]==null&&(r.added[i]=t.nodes[t.nodeIndices[i]]);return r.indices=this.changedIndices(n.nodeIndices,t.nodeIndices),r},this.getEdgeIndices=function(n){var r={},t,i;if(n.edges.length)for(t=0;t<n.edges.length;t++)i=n.edges[t],r[i.id1+"-"+i.id2]=t;return r},this.changedEdgeData=function(n,t){var r={deleted:{},changed:{},added:{}},u,f,e,i;n.edgeIndices||(n.edgeIndices=this.getEdgeIndices(n)),u=this.getEdgeIndices(t);for(i in n.edgeIndices)f=u[i],f==null?r.deleted[i]=1:(e=t.edges[f],this.isSameObject(n.edges[n.edgeIndices[i]],e)||(r.changed[i]=e));for(i in u)n.edgeIndices[i]==null&&(r.added[i]=t.edges[u[i]]);return r.indices=this.changedIndices(n.edgeIndices,u),r},this.changedIndices=function(n,t){var r={},i;for(i in t)(n[i]==null||n[i]!=t[i])&&(r[i]=t[i]);return r},this.getSnapshotChanged=function(n){var t=this.snapshotsBase;return{type:"changedData",nodes:this.changedNodeData(t,n),edges:this.changedEdgeData(t,n),legend:this.isSameObject(t.legend,n.legend)?null:n.legend}},this.cloneVisualData=function(n){var f,i,t;switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Dotplot":case"Scatter2D":case"ScatterBubble2D":case"Circular":return this.cloneObject(n);case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":return!1;case"Network":if(this.snapshotCopyChangeOnly)return this.snapshots.length?n.type=="changedData"?this.cloneObject(n):this.getSnapshotChanged(n):(this.snapshotsBase=this.cloneObject(n),{type:"changedData"});if(!this.snapshotNoCopyData)return this.cloneObject(n);if(f={nodes:[],edges:[]},n.nodes&&n.nodes.length)for(i=0;i<n.nodes.length;i++){var u={},e=n.nodes[i],r=["outline","width","height","pattern","rotate","color","shape","size","x","y","id","hideLabel","hideChildren","hideParent","label","labelX","labelY","labelSize","name","hide","anchor","parentNode","imagePath"];for(t=0;t<r.length;t++)u[r[t]]=e[r[t]];f.nodes.push(u)}if(n.edges&&n.edges.length)for(i=0;i<n.edges.length;i++){var u={},e=n.edges[i],r=["color","width","type","id1","id2","anchor"];for(t=0;t<r.length;t++)u[r[t]]=e[r[t]];f.edges.push(u)}return f}},this.isValidAnimation=function(){switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Dotplot":case"Scatter2D":case"ScatterBubble2D":return!0;case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":case"Network":case"Circular":return!1}},this.createAnimation=function(n){var e,u,i,t,r,f;switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Dotplot":case"Scatter2D":case"ScatterBubble2D":if(this.isAnimation=!0,e=this.cloneVisualData(this.data),n.match(/grow|spring|random/)&&this.data.y.data)for(u=this.animationCycles,i=0;i<u;i++){for(t=0;t<this.data.y.data.length;t++)for(r=0;r<this.data.y.data[t].length;r++)isNaN(this.data.y.data[t][r])||(f=this.data.y.data[t][r],this.data.y.data[t][r]=n=="grow"?f/u*i:n=="spring"?f/(u-1.5)*(i+1):f/u*Math.floor(Math.random()*i));this.saveSnapshot(),this.data=this.cloneVisualData(e)}this.data=e,this.saveSnapshot(),this.playSnapshot(this.animationTime,this.stopAnimation);break;case"Scatter3D":case"Area":case"AreaLine":case"Boxplot":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":case"Correlation":case"Venn":case"Pie":case"Genome":case"Network":case"Circular":return}},this.stopAnimation=function(){this.stopSnapshotPlay(),this.snapshots=[],this.isAnimation=!1},this.setSnapshotsData=function(n){this.snapshots=n.ss||n,this.snapshotsBase=n.base},this.getSnapshotsData=function(){return{base:this.snapshotsBase,ss:this.snapshots}},this.createDemoNetworkAnimation=function(n){for(var r=[],o={},u=[],i,s,e,c,t=0;t<n;t++)i=t+1,r.push({size:.5,x:Math.floor(Math.random()*n*5),y:Math.floor(Math.random()*n*5),outline:"rgb(255,255,255)",color:"rgb(255,0,0)",id:i,label:i,hideLabel:!0,labelSize:.7,name:"Node "+i,pattern:"closed",shape:"star"}),o[i]=t;s={nodes:r,nodeIndices:o,edges:[],edgeIndices:{}},u.push({type:"changedData"});var f=5,h=255/f,v=.5/f;for(e=0;e<10;e++)for(c=Math.floor(Math.random()*r.length),t=0;t<f;t++){var y=Math.floor(255-(t+1)*h),l=Math.floor((t+1)*h),p=[y,l,l],a={};a[r[c].id]={size:.5+v*(t+1),color:"rgb("+p.join(",")+")"},u.push({type:"changedData",nodes:{deleted:{},added:{},changed:a},time:5})}this.setSnapshotsData({base:s,ss:u})},this.createDemoNetworkAnimation1=function(){var u=[],i=10,f=200,n="ball",c={width:i,x:100,y:0,color:"rgb(0,255,0)",id:n,label:n,hideLabel:!0,labelSize:.7,name:n,pattern:"closed",shape:"sphere"},e,o,s,r,t,h;for(n="plank",e={width:200,height:5,x:100,y:f,color:"rgb(255,255,0)",id:n,label:n,hideLabel:!0,labelSize:.7,name:n,pattern:"closed",shape:"rectangle"},n="ref",o={width:10,x:80,y:0,color:"rgb(0,0,255)",id:n,label:n,hideLabel:!0,labelSize:.7,name:n,pattern:"closed",shape:"sphere"},s={nodes:[c,e,o],nodeIndices:{ball:0,plank:1,ref:2},edges:[],edgeIndices:{}},u.push({type:"changedData"}),r=1,t=0;t<f-i/2;t+=i/2,r+=.1)h=r*r,u.push({type:"changedData",nodes:{deleted:{},added:{},changed:{ball:{y:t,time:25*i>t?50-t*2/i:5}}},time:100/h});this.setSnapshotsData({base:s,ss:u})},this.fade=function(n,t,i,r){if(n)if(t||(t=1e3),n.fadeState==null&&(n.fadeState=n.style.opacity==null||n.style.opacity==""||n.style.opacity=="1"?2:-2),n.fadeState==1||n.fadeState==-1)n.fadeState=n.fadeState==1?-1:1,n.fadeleft=t-n.fadeleft;else{var u=this;n.fadeState=n.fadeState==2?-1:1,n.fadeleft=t,setTimeout(function(){u.animateFade((new Date).getTime(),n,i,r)},33)}},this.animateFade=function(n,t,i,r){var f=this,e=(new Date).getTime(),o=e-n,u;if(t.fadeleft<=o){t.style.opacity=t.fadeState==1?"1":"0",t.style.filter="alpha(opacity = "+(t.fadeState==1?"100":"0")+")",t.fadeState=t.fadeState==1?2:-2,i!=null&&i(),r&&setTimeout(function(){f.resetFade(t);for(var n=0;n<r.length;n++)delete t.style[r[n]]},500);return}t.fadeleft-=o,u=t.fadeleft/1e3,t.fadeState==1&&(u=1-u),t.style.opacity=u,t.style.filter="alpha(opacity = "+u*100+")",setTimeout(function(){f.animateFade(e,t,i)},33)},this.resetFade=function(n){n&&(n.style.opacity=1,n.style.filter="alpha(opacity = 100)",this.isIE||(delete n.fadeState,delete n.fadeleft))},this.resizeMove=function(n,t,i,r,u,f,e){var s,h,c,l;if(n){f||(f=500);var a=parseInt(n.style.left)||0,v=parseInt(n.style.top)||0,y=parseInt(n.style.width)||0,p=parseInt(n.style.height)||0,o=1;f>0&&(o=f/40),s=t-a,s!=0&&(s/=o),h=i-v,h!=0&&(h/=o),c=r-y,c!=0&&(c/=o),l=u-p,l!=0&&(l/=o),this.updateResizeMove(n,a,t,s,v,i,h,y,r,c,p,u,l,e)}},this.updateResizeMove=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){if(n){var y=this;if(t=this.stepResizeMove(t,i,r),u=this.stepResizeMove(u,f,e),o=this.stepResizeMove(o,s,h),c=this.stepResizeMove(c,l,a),n.style.left=Math.round(t)+"px",n.style.top=Math.round(u)+"px",n.style.width=Math.round(o)+"px",n.style.height=Math.round(c)+"px",t==i&&u==f&&c==l&&o==s){v!=null&&v();return}setTimeout(function(){y.updateResizeMove(n,t,i,r,u,f,e,o,s,h,c,l,a,v)},40)}},this.stepResizeMove=function(n,t,i){return i==0||n==t?t:(n+=i,i>0&&n>=t||i<0&&n<=t)?t:n},this.transitionAccordion=function(n,t,i,r){var o=this,f=(new Date).getTime(),e=f-n,u;if(t<=e){i&&(i.style.height=this.dataFilterHeight+"px"),r&&(r.style.height="0px",r.style.display="none"),i&&(i.clientWidth-i.scrollWidth?this.resizeDataFilterForScroller(!0):i.clientHeight<this.canvas.height&&this.dataFilterScroller&&this.resizeDataFilterForScroller());return}t-=e,u=Math.round(t/250*this.dataFilterHeight),i&&(i.style.display!="block"&&(i.style.display="block"),i.style.height=this.dataFilterHeight-u+"px"),r&&(r.style.height=u+"px"),setTimeout(function(){o.transitionAccordion(f,t,i,r)},33)}},CanvasXpress.prototype.initExample=function(){this.exampleRawData={x:{Tissue:["Kidney","Liver","Kidney","Liver","Kidney","Liver","Kidney","Liver"],Donor:["D1","D1","D1","D1","D2","D2","D2","D2"],Time:["1h","1h","2h","2h","1h","1h","2h","2h"]},z:{Symbol:["abc","def","ghi","jkl","mno","pqr"],Cat:["A","A","B","C","D","C"],Class:["A","A","A","A","A","B"]},y:{vars:["Gene1","Gene2","Gene3","Gene4","Gene5","Gene6"],smps:["Smp1","Smp2","Smp3","Smp4","Smp5","Smp6","Smp7","Smp8"],desc:["Intensity","Normalized Intensity"],data:[[10,12,3,4,100,73,42,64],[12,4,60,5,24,14,32,13],[7,12,20,13,49,52,42,92],[21,10,30,8,65,166,47,58],[15,14,100,5,34,30,82,51],[100,82,73,4,3,4,5,2]]},a:{xAxis:["Gene1","Gene2","Gene3"],xAxis2:["Gene4","Gene5","Gene6"]},t:{vars:"((Gene6:0.2,Gene3:0.3):0.2,((Gene1:0.25,(Gene4:0.15,Gene2:0.3):0.2):0.3,Gene5:0.7):0.1)",smps:"((Smp2:0.8,(Smp4:0.7,((Smp1:0.6,(Smp6:0.2,Smp5:0.1):0.2):0.15,(Smp8:0.15,Smp3:0.05):0.1):0.15):0.2):0.05,Smp7:0.9)"},d:{nlfit:[{param:[1,100,50,1,123e-9],label:"Fit Example",type:"reg"}]},l:{vars:[["Gene1","Gene2","Gene3","Gene4","Gene5"],["Gene6"]],weight:[.7,.3],type:["Bar","Line"],desc:["Intensity","Score"]},venn:{data:{A:340,B:562,C:620,D:592,AB:639,AC:456,AD:257,BC:915,BD:354,CD:143,ABC:552,ABD:578,ACD:298,BCD:613,ABCD:148},legend:{A:"List 1",B:"List 2",C:"List 3",D:"List 4"}},nodes:[{id:"Gene1",color:"rgb(255,0,0)",shape:"square",size:1},{id:"Gene2",color:"rgb(255,0,0)",shape:"square",size:1.8},{id:"Gene3",color:"rgb(255,0,0)",shape:"square",size:1.4},{id:"Gene4",color:"rgb(255,0,0)",shape:"square",size:1.2},{id:"Gene5",color:"rgb(255,0,0)",shape:"square",size:1.3},{id:"Gene6",color:"rgb(255,0,0)",shape:"square",size:1},{id:"Gene7",color:"rgb(255,0,0)",shape:"square",size:1},{id:"Gene8",color:"rgb(255,0,0)",shape:"square",size:1},{id:"SNP1",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP2",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP3",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP4",color:"rgb(0,255,0)",shape:"sphere",size:1.5},{id:"SNP5",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP6",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP7",color:"rgb(0,255,0)",shape:"sphere",size:1},{id:"SNP8",color:"rgb(0,255,0)",shape:"sphere",size:1.2},{id:"PH1",color:"rgb(0,255,255,0.5)",shape:"triangle",size:1,hideChildren:!1},{id:"PH2",color:"rgb(0,255,255,0.6)",shape:"triangle",size:1,parentNode:"PH1"},{id:"PH3",color:"rgb(0,255,255,0.7)",shape:"triangle",size:1,parentNode:"PH1"},{id:"PH4",color:"rgb(0,255,255,0.8)",shape:"triangle",size:1,parentNode:"PH3"}],edges:[{id1:"Gene1",id2:"Gene2",color:"rgb(51,102,255)",width:"1",type:"line"},{id1:"Gene2",id2:"Gene3",color:"rgb(51,102,255)",width:"1",type:"arrowHeadLine"},{id1:"Gene1",id2:"Gene4",color:"rgb(51,102,255)",width:"1",type:"arrowHeadLine"},{id1:"Gene3",id2:"Gene5",color:"rgb(51,102,255)",width:"1",type:"dashedArrowHeadLine"},{id1:"Gene6",id2:"Gene5",color:"rgb(51,102,255)",width:"1",type:"arrowHeadSquareTailLine"},{id1:"Gene7",id2:"Gene5",color:"rgb(153,153,255)",width:"1",type:"dottedArrowHeadLine"},{id1:"Gene8",id2:"Gene7",color:"rgb(51,102,255)",width:"1",type:"line"},{id1:"Gene4",id2:"Gene7",color:"rgb(51,102,255)",width:"1",type:"squareHeadArrowTailLine"},{id1:"Gene1",id2:"SNP2",color:"rgb(153,102,255)",width:"1",type:"bezierLine"},{id1:"SNP1",id2:"SNP4",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP5",id2:"Gene5",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP1",id2:"PH2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP1",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"PH4",id2:"SNP7",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"PH2",id2:"Gene5",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"PH1",id2:"Gene7",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"PH3",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP6",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP3",id2:"Gene4",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP4",id2:"Gene5",color:"rgb(51,102,152)",width:"1",type:"line"},{id1:"SNP5",id2:"Gene7",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP7",id2:"Gene5",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP8",id2:"Gene6",color:"rgb(153,102,255)",width:"1",type:"arrowHeadLine"},{id1:"SNP8",id2:"Gene2",color:"rgb(51,102,152)",width:"1",type:"line"}],legend:{nodes:[],edges:[]},tracks:[{name:"Affy Probes",type:"box",connect:!0,fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",data:[{id:"123456_at",dir:"right",data:[[10,20],[30,40],[50,60],[70,80],[90,100]]},{id:"234567_at",dir:"left",data:[[135,145],[155,165],[175,185],[195,205],[215,225]]},{id:"345678_at",dir:"right",data:[[300,310],[320,330],[340,350],[360,370],[380,390]]}]},{name:"Sanger Sequencing",subtype:"DNA",type:"sequence",data:[{id:"Reference Sequence",fill:"rgb(51,255,255)",outline:"rgb(0,0,0)",dir:"right",offset:1,sequence:"TACGTACGTACGTACGTACGTACGTACGT",translate:[-1,2]},{id:"R1-0000-1234",fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",dir:"right",offset:1,gaps:[[4,2],[8,1]],sequence:"TACGCGTAGTACGT",trace:{A:[15,27,47,72,93,101,93,72,47,27,15,54,120,224,350,459,502,459,350,224,120,54,3,4,6,12,24,43,67,86,94,86,67,43,24,12,6,4,3,13,26,45,69,89,97,89,69,45,26,13,13,26,46,70,92,100,92,70,46,26,13,5,12,26,48,75,99,108,99,75,48,26,12,5,2,4,10,22,41,64,83,91,83,64,41,22,10,4,2,22,55,122,226,353,462,505,462,353,226,122,55,22,4,11,24,45,70,92,100,92,70,45,24,11,4,2,3,6,13,28,50,78,102,111,102,78,50,28,13,6,3,2,6,11,26,62,135,249,388,506,553,506,388,249,135,62,26,11,6,6,8,14,26,45,68,87,95,87,68,45,26,14,8,6,11,23,43,67,88,96,88,67,43,23,11,5,6,8,15,28,48,73,94,102,94,73,48,28,15,8,6,5],C:[10,16,26,39,50,54,50,39,26,16,10,7,14,26,40,51,56,51,40,26,14,7,4,8,20,50,109,203,317,414,453,414,317,203,109,50,20,8,4,9,16,26,39,51,55,51,39,26,16,9,56,123,229,357,467,511,467,357,229,123,56,2,6,12,22,35,45,49,45,35,22,12,6,2,1,3,6,13,25,39,50,55,50,39,25,13,6,3,1,5,8,15,26,39,50,55,50,39,26,15,8,5,2,5,11,21,32,42,46,42,32,21,11,5,2,2,2,3,6,12,22,33,43,47,43,33,22,12,6,3,2,2,5,5,6,9,16,25,37,47,51,47,37,25,16,9,6,5,5,10,24,56,121,223,347,453,495,453,347,223,121,56,24,10,6,13,24,37,48,52,48,37,24,13,6,5,5,6,9,15,25,36,46,50,46,36,25,15,9,6,5,5],G:[7,10,15,20,25,27,25,20,15,10,7,4,7,13,19,25,27,25,19,13,7,4,3,3,3,5,8,14,20,25,27,25,20,14,8,5,3,3,3,56,122,226,353,461,504,461,353,226,122,56,5,8,13,19,24,26,24,19,13,8,5,22,58,130,245,383,502,549,502,383,245,130,58,22,1,1,3,7,12,18,24,26,24,18,12,7,3,1,1,3,5,8,13,19,24,26,24,19,13,8,5,3,19,51,114,213,334,437,478,437,334,213,114,51,19,2,2,3,4,8,14,21,26,29,26,21,14,8,4,3,2,2,5,5,5,7,10,15,20,25,27,25,20,15,10,7,5,5,5,5,5,7,10,15,20,25,27,25,20,15,10,7,5,5,53,119,223,349,457,500,457,349,223,119,53,5,5,5,7,10,15,21,26,28,26,21,15,10,7,5,5,5],T:[62,135,249,388,507,554,507,388,249,135,62,2,4,6,8,10,11,10,8,6,4,2,3,3,3,4,5,7,9,12,12,12,9,7,5,4,3,3,3,5,6,8,11,13,14,13,11,8,6,5,4,5,7,10,12,13,12,10,7,5,4,1,2,3,5,8,10,11,10,8,5,3,2,1,7,22,58,130,244,383,501,548,501,383,244,130,58,22,7,3,4,5,7,10,12,13,12,10,7,5,4,3,1,2,3,5,8,10,11,10,8,5,3,2,1,3,8,21,54,119,222,347,454,497,454,347,222,119,54,21,8,3,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,2,3,5,7,9,10,9,7,5,3,2,6,11,25,61,131,242,377,492,538,492,377,242,131,61,25,11,6],peak:[5,16,30,44,55,67,81,95,108,123,140,156,169,183]}},{id:"R1-0000-2345",fill:"rgb(255,255,102)",outline:"rgb(0,0,0)",dir:"right",offset:6,gaps:[[3,1],[10,1]],sequence:"ACGACGTACGACG",trace:{A:[49,110,206,323,424,463,424,323,206,110,49,3,5,12,24,45,69,90,98,90,69,45,24,12,5,3,5,7,14,28,49,75,97,105,97,75,49,28,14,7,5,5,10,25,61,132,245,382,499,545,499,382,245,132,61,25,10,5,7,13,27,48,74,96,105,96,74,48,27,13,7,4,6,13,25,46,70,91,100,91,70,46,25,13,6,4,4,7,14,27,49,76,99,108,99,76,49,27,14,7,4,3,8,22,57,125,234,366,479,524,479,366,234,125,57,22,8,3,5,8,15,30,52,80,104,113,104,80,52,30,15,8,5,7,13,25,44,66,86,94,86,66,44,25,13,7,23,58,127,236,368,482,527,482,368,236,127,58,23,3,4,6,13,26,47,73,95,104,95,73,47,26,13,6,4,3,5,6,9,16,30,52,79,102,111,102,79,52,30,16,9,6,5],C:[5,12,21,33,43,47,43,33,21,12,5,7,21,53,117,218,341,447,488,447,341,218,117,53,21,7,4,5,9,15,26,38,49,53,49,38,26,15,9,5,4,4,4,6,9,16,27,40,51,56,51,40,27,16,9,6,4,4,20,50,109,203,317,415,453,415,317,203,109,50,20,3,4,8,14,25,37,48,52,48,37,25,14,8,4,3,3,4,8,14,24,36,46,50,46,36,24,14,8,4,3,2,2,3,6,13,22,34,44,48,44,34,22,13,6,3,2,2,9,23,55,118,219,342,447,489,447,342,219,118,55,23,9,5,9,16,26,39,50,54,50,39,26,16,9,5,4,8,14,25,37,48,52,48,37,25,14,8,4,4,9,22,55,120,224,349,457,500,457,349,224,120,55,22,9,4,5,5,7,10,17,27,40,51,56,51,40,27,17,10,7,5,5],G:[3,6,11,17,22,24,22,17,11,6,3,2,2,4,7,12,17,22,24,22,17,12,7,4,2,2,10,24,59,129,239,373,487,533,487,373,239,129,59,24,10,4,4,4,6,9,14,20,25,27,25,20,14,9,6,4,4,4,3,5,8,13,19,24,26,24,19,13,8,5,3,9,23,59,129,239,374,489,534,489,374,239,129,59,23,9,3,3,5,8,13,18,23,25,23,18,13,8,5,3,3,2,2,2,4,7,12,17,22,24,22,17,12,7,4,2,2,2,4,4,6,9,14,19,24,26,24,19,14,9,6,4,4,22,52,113,209,325,425,465,425,325,209,113,52,22,3,5,8,13,19,24,26,24,19,13,8,5,3,3,3,3,5,8,14,20,26,28,26,20,14,8,5,3,3,3,6,11,26,62,133,246,383,501,547,501,383,246,133,62,26,11,6],T:[2,3,5,7,10,10,10,7,5,3,2,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,4,4,4,6,8,10,12,13,12,10,8,6,4,4,4,4,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4,4,3,4,5,7,10,12,13,12,10,7,5,4,3,3,3,3,5,7,9,11,12,11,9,7,5,3,3,3,8,21,52,115,213,333,436,476,436,333,213,115,52,21,8,2,2,2,3,4,6,8,10,11,10,8,6,4,3,2,2,2,4,4,4,6,8,10,12,13,12,10,8,6,4,4,4,4,4,6,8,10,12,13,12,10,8,6,4,4,3,4,5,7,9,11,12,11,9,7,5,4,3,3,3,3,4,5,7,10,12,13,12,10,7,5,4,3,3,3,5,5,5,6,7,9,11,14,14,14,11,9,7,6,5,5,5],peak:[5,18,33,49,64,78,93,109,125,139,152,167,184]}},{id:"R1-0000-3456",fill:"rgb(255,51,255)",outline:"rgb(0,0,0)",dir:"left",offsetLeft:"23",gaps:[[7,2]],sequence:"GTACGTATAC",trace:{A:[4,10,22,41,64,84,92,84,64,41,22,10,4,5,8,15,29,51,79,102,111,102,79,51,29,15,8,5,11,24,58,124,228,356,465,508,465,356,228,124,58,24,11,13,25,45,69,89,97,89,69,45,25,13,1,2,4,11,24,44,69,90,99,90,69,44,24,11,4,2,1,3,6,13,26,48,75,98,107,98,75,48,26,13,6,3,11,24,58,124,228,355,464,507,464,355,228,124,58,24,11,4,7,13,27,49,75,98,107,98,75,49,27,13,7,4,7,19,50,110,206,322,421,460,421,322,206,110,50,19,7,5,8,15,28,50,76,99,108,99,76,50,28,15,8,5],C:[2,6,13,23,36,47,51,47,36,23,13,6,2,4,5,8,14,24,35,45,49,45,35,24,14,8,5,4,5,7,10,17,28,41,53,57,53,41,28,17,10,7,5,59,130,242,377,494,540,494,377,242,130,59,1,1,2,6,12,22,34,44,48,44,34,22,12,6,2,1,1,2,3,6,13,22,34,44,48,44,34,22,13,6,3,2,5,6,9,15,25,36,46,50,46,36,25,15,9,6,5,3,5,8,15,26,39,51,55,51,39,26,15,8,5,3,2,3,7,13,23,35,46,50,46,35,23,13,7,3,2,10,24,57,125,231,360,470,514,470,360,231,125,57,24,10],G:[21,54,122,228,357,467,511,467,357,228,122,54,21,4,4,6,9,14,21,26,28,26,21,14,9,6,4,4,5,6,7,11,16,23,29,31,29,23,16,11,7,6,5,5,8,13,19,24,26,24,19,13,8,5,2,7,21,56,126,236,370,485,531,485,370,236,126,56,21,7,2,2,2,4,7,13,19,24,26,24,19,13,7,4,2,2,5,6,7,11,17,24,30,32,30,24,17,11,7,6,5,3,3,5,8,13,19,24,26,24,19,13,8,5,3,3,2,3,4,8,14,21,26,29,26,21,14,8,4,3,2,4,4,6,10,15,21,27,29,27,21,15,10,6,4,4],T:[1,1,3,5,7,9,10,9,7,5,3,1,1,10,23,57,124,230,358,468,512,468,358,230,124,57,23,10,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,4,5,7,10,12,13,12,10,7,5,4,1,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,1,8,23,59,130,243,380,498,545,498,380,243,130,59,23,8,5,5,5,7,9,11,13,14,13,11,9,7,5,5,5,8,20,50,110,205,320,418,457,418,320,205,110,50,20,8,2,2,3,4,6,8,10,11,10,8,6,4,3,2,2,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4],peak:[6,20,35,48,62,78,93,108,123,138]}},{id:"R1-0000-4567",fill:"rgb(255,102,255)",outline:"rgb(0,0,0)",dir:"right",offset:15,gaps:[[5,1]],sequence:"CGTACTACGTA",trace:{A:[9,16,29,51,78,100,110,100,78,51,29,16,9,15,28,50,77,100,109,100,77,50,28,15,4,5,7,13,25,44,67,86,94,86,67,44,25,13,7,5,4,4,8,21,53,115,214,335,438,479,438,335,214,115,53,21,8,4,2,3,5,11,23,42,65,85,93,85,65,42,23,11,5,3,2,8,15,29,52,80,103,113,103,80,52,29,15,8,4,9,23,57,126,233,365,477,522,477,365,233,126,57,23,9,4,2,4,10,23,42,66,87,95,87,66,42,23,10,4,2,3,5,12,25,46,71,93,101,93,71,46,25,12,5,3,4,5,8,14,28,50,76,99,108,99,76,50,28,14,8,5,4,19,49,108,202,316,413,452,413,316,202,108,49,19],C:[24,56,121,223,348,454,496,454,348,223,121,56,24,8,14,24,36,46,50,46,36,24,14,8,4,4,5,8,15,24,36,46,50,46,36,24,15,8,5,4,4,3,3,4,8,14,25,38,48,53,48,38,25,14,8,4,3,3,3,8,21,54,119,222,348,455,498,455,348,222,119,54,21,8,3,5,9,15,25,38,48,52,48,38,25,15,9,5,3,3,5,8,15,26,39,51,55,51,39,26,15,8,5,3,3,6,18,48,107,201,315,412,451,412,315,201,107,48,18,6,2,3,6,12,22,33,43,47,43,33,22,12,6,3,2,4,4,6,9,16,28,42,54,58,54,42,28,16,9,6,4,4,3,7,13,24,37,47,52,47,37,24,13,7,3],G:[6,7,11,16,23,29,31,29,23,16,11,7,6,56,121,223,348,455,498,455,348,223,121,56,4,4,5,6,10,16,23,28,31,28,23,16,10,6,5,4,4,3,3,4,5,9,14,21,26,29,26,21,14,9,5,4,3,3,2,2,2,4,7,12,18,24,26,24,18,12,7,4,2,2,2,4,6,9,14,19,24,26,24,19,14,9,6,4,3,3,3,5,8,13,19,24,26,24,19,13,8,5,3,3,3,1,2,3,7,12,19,24,27,24,19,12,7,3,2,1,7,20,51,113,211,330,432,473,432,330,211,113,51,20,7,4,4,4,6,9,15,21,26,29,26,21,15,9,6,4,4,4,3,4,8,13,20,26,28,26,20,13,8,4,3],T:[5,6,7,9,11,13,14,13,11,9,7,6,5,4,6,8,10,12,13,12,10,8,6,4,5,10,24,60,130,241,376,492,538,492,376,241,130,60,24,10,5,3,3,3,3,5,7,9,11,12,11,9,7,5,3,3,3,3,2,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,2,22,53,114,211,328,429,469,429,328,211,114,53,22,3,3,3,3,5,7,9,11,12,11,9,7,5,3,3,3,3,1,1,2,3,5,7,9,10,9,7,5,3,2,1,1,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,5,10,24,58,127,235,366,479,524,479,366,235,127,58,24,10,5,2,3,4,6,8,10,11,10,8,6,4,3,2],peak:[6,18,32,49,66,81,96,112,127,143,158]}},{id:"R1-0000-5678",fill:"rgb(51,255,255)",outline:"rgb(0,0,0)",dir:"right",offset:18,gaps:[[7,1]],sequence:"ACGTACGACGT",trace:{A:[10,25,60,131,244,380,497,544,497,380,244,131,60,25,10,5,6,8,15,28,48,73,95,103,95,73,48,28,15,8,6,5,4,6,13,26,47,72,94,102,94,72,47,26,13,6,4,6,8,15,28,49,74,95,104,95,74,49,28,15,8,6,2,7,22,58,129,243,380,498,545,498,380,243,129,58,22,7,2,11,23,43,66,86,94,86,66,43,23,11,5,8,15,28,50,77,100,109,100,77,50,28,15,8,5,6,11,24,58,125,232,361,471,515,471,361,232,125,58,24,11,6,12,24,43,66,85,93,85,66,43,24,12,14,28,50,76,99,108,99,76,50,28,14,5,7,14,27,47,72,93,101,93,72,47,27,14,7,5],C:[4,5,8,15,24,36,46,50,46,36,24,15,8,5,4,6,11,26,62,135,249,388,506,554,506,388,249,135,62,26,11,6,3,5,8,15,25,38,49,54,49,38,25,15,8,5,3,5,6,9,15,25,36,46,50,46,36,25,15,9,6,5,1,1,3,6,13,24,37,49,53,49,37,24,13,6,3,1,1,53,117,219,342,447,489,447,342,219,117,53,4,5,8,15,25,36,47,51,47,36,25,15,8,5,4,5,5,7,10,17,28,41,53,57,53,41,28,17,10,7,5,5,57,124,231,360,471,516,471,360,231,124,57,9,16,27,40,51,55,51,40,27,16,9,4,6,9,16,27,41,52,57,52,41,27,16,9,6,4],G:[4,5,6,10,16,22,28,31,28,22,16,10,6,5,4,5,5,5,7,10,15,21,26,28,26,21,15,10,7,5,5,5,8,21,53,116,216,337,440,482,440,337,216,116,53,21,8,5,6,7,11,17,23,29,32,29,23,17,11,7,6,5,1,1,1,3,6,11,17,22,24,22,17,11,6,3,1,1,1,4,8,13,20,25,27,25,20,13,8,4,9,21,52,111,206,321,420,459,420,321,206,111,52,21,9,5,5,5,7,10,16,22,27,30,27,22,16,10,7,5,5,5,5,8,14,20,25,27,25,20,14,8,5,57,124,230,358,468,512,468,358,230,124,57,4,4,6,9,14,20,25,28,25,20,14,9,6,4,4],T:[4,4,5,6,8,11,14,14,14,11,8,6,5,4,4,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,3,3,4,5,7,10,12,13,12,10,7,5,4,3,3,11,24,57,122,224,349,456,498,456,349,224,122,57,24,11,1,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,1,3,4,6,8,11,11,11,8,6,4,3,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,4,5,7,10,12,13,12,10,7,5,4,4,6,8,10,12,13,12,10,8,6,4,10,25,60,131,242,378,494,540,494,378,242,131,60,25,10],peak:[7,23,39,54,70,84,97,113,127,138,151]}}]},{name:"Tissue Distribution",type:"bar",height:20,fill:["rgb(255,0,0)","rgb(0,0,255)","rgb(255,255,0)"],outline:["rgb(255,0,0)","rgb(0,0,255)","rgb(255,255,0)"],data:[{id:"123456_at",offset:10,data:[25,35,46]},{id:"234567_at",offset:135,data:[80,45,10]},{id:"345678_at",offset:300,data:[65,46,29]}]}],market:[{symbol:"BMY",data:[[20100824,26.26,26.37,25.95,26.02,11625900,26.02],[20100823,26.48,26.76,26.38,26.48,12146600,26.48],[20100820,26.31,26.54,26.08,26.44,18140100,26.44],[20100819,26.2,26.29,25.81,26.06,8218e3,26.06],[20100818,26.53,26.57,26.23,26.28,12235800,26.28],[20100817,26.4,26.79,26.26,26.59,12325700,26.59],[20100816,26.24,26.34,26.04,26.28,10377700,26.28],[20100813,26.24,26.46,26.1,26.32,5760100,26.32],[20100812,26.01,26.39,26,26.33,7350500,26.33],[20100811,26.32,26.5,26.15,26.25,8808100,26.25],[20100810,26.32,26.78,26.3,26.66,7009500,26.66],[20100809,26.37,26.54,26.3,26.51,6825300,26.51],[20100806,26.29,26.45,26.05,26.37,8774900,26.37],[20100805,25.83,26.38,25.8,26.38,12264600,26.38],[20100804,25.7,26.13,25.61,26.03,10233700,26.03],[20100803,25.65,25.85,25.58,25.68,6842900,25.68],[20100802,25.33,25.61,25.29,25.53,9770900,25.53],[20100730,24.98,25.13,24.78,24.92,11435700,24.92],[20100729,25.37,25.5,24.85,25.08,9463800,25.08],[20100728,25.25,25.36,25.02,25.12,8072400,25.12],[20100727,25.09,25.35,24.84,25.32,14152600,25.32],[20100726,24.57,25.03,24.57,24.97,8817400,24.97],[20100723,24.94,24.95,24.26,24.65,13043700,24.65],[20100722,24.96,25.22,24.75,24.93,10385300,24.93],[20100721,24.92,25.11,24.59,24.75,983e4,24.75],[20100720,24.65,25.09,24.46,25.02,10655500,25.02],[20100719,25.27,25.27,24.78,24.84,11804800,24.84],[20100716,25.44,25.47,25.1,25.17,13136300,25.17]]}]},this.exampleBasicData={x:{Tissue:["Kidney","Liver","Breast","Brain"],Donor:["D1","D2","D2","D1"]},z:{Symbol:["abc","def","ghi","jkl","mno","pqr"],Desc:["blah","yeah","maybe","good","bad","awsome"]},y:{vars:["Gene1","Gene2","Gene3","Gene4","Gene5","Gene6"],smps:["Smp1","Smp2","Smp3","Smp4"],desc:["Intensity"],mean:[[1,2,3,4],[2,1,3,6],[3,2,1,5],[4,2,1,3],[4,3,2,1],[9,2,7,4]],stdev:[[1,3,2,1],[2,3,2,1],[2,2,2,1],[2,3,1,1],[1,1,1,1],[3,1,3,1]],n:[[4,5,5,5],[4,5,5,5],[6,4,4,5],[6,4,5,6],[5,5,5,5],[6,5,5,5]]},a:{xAxis:["Gene1","Gene2","Gene3"],xAxis2:["Gene4","Gene5","Gene6"]}}},CanvasXpress.prototype.initData=function(n){this.isValidPlotData=function(n){var t=this.isGroupedData?this.data.w:this.data.y;return n=="cor"&&t.cor?!0:n=="venn"&&this.data.venn?!0:n=="network"&&this.data.nodes?!0:n=="genome"&&this.data.tracks?!0:n=="sum"&&t.sum&&t.sum[0].length>0?!0:n=="mean"&&t.mean&&t.mean[0].length>0?!0:n=="median"&&t.median&&t.median[0].length>0?!0:n=="iqr"&&t.iqr1&&t.qtl1&&t.median&&t.qtl3&&t.iqr3&&t.median[0].length>0?!0:n=="candle"&&t.close&&t.open&&t.high&&t.low&&t.close[0].length>0?!0:n=="volume"&&t.volume&&t.volume[0].length>0?!0:n=="raw"&&this.isRawData?!0:n=="video"&&this.data.video?!0:!1},this.setAllNodesVisible=function(){var t,n;for(this.nodes={},this.data.nodeIndices={},n=0;n<this.data.nodes.length;n++)t=this.data.nodes[n],t.hide=!1,this.nodes[t.id]=t,this.data.nodeIndices[t.id]=n;for(n=0;n<this.data.edges.length;n++)this.data.edges[n].hide=!1;this.filterData()},this.setNodeIndices=function(){var n,t;for(this.nodes={},this.data.nodeIndices={},n=0;n<this.data.nodes.length;n++)t=this.data.nodes[n],this.nodes[t.id]=t,this.data.nodeIndices[t.id]=n},this.setNodes=function(){var n,t,i;if(this.data.nodeIndices){for(this.nodes={},n=0;n<this.data.nodes.length;n++)t=this.data.nodes[n],this.nodes[t.id]=t;this.data.nodes=[];for(i in this.data.nodeIndices)this.data.nodes[this.data.nodeIndices[i]]=this.nodes[i]}else this.setNodeIndices()},this.hideUnhideNodes=function(n,t){var u,i,r;if(t=t?!0:!1,n){if(this.isArray(n))for(i=0;i<n.length;i++)u=n[i],r=this.data.nodes[this.data.nodeIndices[u]],r.hide=t,this.nodes&&this.nodes[u]&&(this.nodes[u].hide=t)}else for(i=0;i<this.data.nodes.length;i++)r=this.data.nodes[i],r.hide=t,r.hideChildren=t,this.nodes&&this.nodes[r.id]&&(this.nodes[r.id].hide=t,this.nodes[r.id].hideChildren=t)},this.hideUnhideChildrenNodes=function(n,t){var i,r;if(t=t?!0:!1,this.nodeParentHood[n]&&this.nodeParentHood[n].children)for(i=0;i<this.nodeParentHood[n].children.length;i++)r=this.nodeParentHood[n].children[i],this.data.nodes[this.data.nodeIndices[r]].hiddenParent=t,this.hideUnhideChildrenNodes(r,t)},this.resetNodeFilters=function(n){n!=null&&this.filterNodeBy.length>0?(this.filterNodeBy.splice(n,1),this.filterNodeByOp.splice(n,1),this.filterNodeByValue.splice(n,1),this.filterNodeByCase.splice(n,1)):(this.filterNodeBy=[],this.filterNodeByOp=[],this.filterNodeByValue=[],this.filterNodeByCase=[])},this.resetEdgeFilters=function(n){n!=null&&this.filterEdgeBy.length>0?(this.filterEdgeBy.splice(n,1),this.filterEdgeByOp.splice(n,1),this.filterEdgeByValue.splice(n,1),this.filterEdgeByCase.splice(n,1)):(this.filterEdgeBy=[],this.filterEdgeByOp=[],this.filterEdgeByValue=[],this.filterEdgeByCase=[])},this.setAllFeaturesVisible=function(){for(var i,r,t,n=0;n<this.data.tracks.length;n++)for(i=this.data.tracks[n],i.hide=!1,r=i.data,t=0;t<r.length;t++)r[t].hide=!1},this.resetFeatureFilters=function(n){n!=null&&this.filterFeatureBy.length>0?(this.filterFeatureBy.splice(n,1),this.filterFeatureByOp.splice(n,1),this.filterFeatureByValue.splice(n,1),this.filterFeatureByCase.splice(n,1)):(this.filterFeatureBy=[],this.filterFeatureByOp=[],this.filterFeatureByValue=[],this.filterFeatureByCase=[])},this.setSelectNodes=function(n){this.selectNode={},this.isSelectNodes=0;for(var t=0;t<n.length;t++)this.selectNode[n[t]]=!0,this.isSelectNodes++},this.getAnnotations=function(n){var i=[],t;if(n){if(this.data.z)for(t in this.data.z)i.push(t)}else if(this.data.x)for(t in this.data.x)i.push(t);return i},this.getNetworkImages=function(){var i=[],t,n;if(this.graphType=="Network")for(t=0;t<this.data.nodes.length;t++)n=this.data.nodes[t],n.imagePath&&(n.imagePath.match(/^http:\/\//)||(n.imagePath=this.imageDir+n.imagePath),i.push(n.imagePath));return i},this.setAllVariablesVisible=function(n){var t,i;if(this.data.y){if(!this.data.y.vars&&this.data.y.data)for(this.data.y.vars=[],t=0;t<this.data.y.data.length;t++)this.data.y.vars.push("var"+(t+1));if(this.varIndices=[],this.hiddenVars=[],n)for(t=0;t<n.length;t++)this.varIndices.push(n[t]),this.hiddenVars.push(!1);else for(t=0;t<this.data.y.vars.length;t++)this.varIndices.push(t),this.hiddenVars.push(!1);this.filterData(),i=this.layoutComb?this.layoutCurrent:0,this.startingVarIndices&&(this.startingVarIndices[i]&&this.startingVarIndices[i].length==this.varIndices.length?this.varIndices=this.startingVarIndices[i]:this.startingVarIndices[i]=[])}this.data.y&&this.data.a&&(this.xAxisVarIndices=[],this.xAxis2VarIndices=[],this.data.a.xAxis&&(this.xAxisVarIndices=this.getVariableIndices(this.data.a.xAxis)),this.data.a.xAxis2&&(this.xAxis2VarIndices=this.getVariableIndices(this.data.a.xAxis2)))},this.resetVariablesVisibleByAxis=function(n){this.data.a&&this.setVariablesVisibleByAxis(n,this.getVariableIndices(this.data.a[n]))},this.setVariablesVisibleByAxis=function(n,t){var r=n+"VarIndices",i;for(this[r]=[],i=0;i<t.length;i++)this[r].push(t[i])},this.getVariablesVisibleByAxis=function(n){return this[n+"VarIndices"]},this.getVariablesByAxis=function(n){return this.data.a&&this.data.a[n]?this.data.a[n]:[]},this.getVariablesByAnnotationLevel=function(n,t){var u=[],i,r;if(n&&this.data.z[n])if(t)for(i=0;i<this.varIndices.length;i++)r=this.varIndices[i],this.data.z[n][r]!=t||this.hiddenVars[r]||u.push(r);else for(i=0;i<this.varIndices.length;i++)r=this.varIndices[i],this.data.z[n][r]||this.hiddenVars[r]||u.push(r);return u},this.setVariablesVisible=function(n){this.varIndices=[];for(var t=0;t<n.length;t++)this.varIndices.push(n[t])},this.getVariableIndices=function(n){var r,i,t;if(n&&this.data.y.vars)if(r=[],this.isArray(n)){if(n.length>0){for(t=0;t<n.length;t++)for(i=0;i<this.data.y.vars.length;i++)if(this.data.y.vars[i]==n[t]){r.push(i);break}return r}}else{for(t=0;t<this.data.y.vars.length;t++)if(this.data.y.vars[t]==n)return t;return-1}},this.hideUnhideVars=function(n){var u,t,f,r,i,e;if(n){if(this.isArray(n)){for(t=0;t<n.length;t++)for(i=0;i<this.data.y.vars.length;i++)if(this.data.y.vars[i]==n[t]){this.hiddenVars[i]=this.hiddenVars[i]?!1:!0;break}}else for(t=0;t<this.data.y.vars.length;t++)if(this.data.y.vars[t]==n){this.hiddenVars[t]=this.hiddenVars[t]?!1:!0;break}for(r=[],t=0;t<this.data.y.vars.length;t++)this.hiddenVars[t]||r.push(t);if(this.setVariablesVisible(r),u=["xAxis","xAxis2"],this.data.a)for(t=0;t<u.length;t++)if(f=this.getVariableIndices(this.data.a[u[t]]),f.length>0){for(r=[],i=0;i<f.length;i++)e=f[i],this.hiddenVars[e]||r.push(e);this.setVariablesVisibleByAxis(u[t],r)}this.draw()}},this.getVariables=function(){for(var r=[],i,t,n=0;n<this.data.y.vars.length;n++){for(i=-1,t=0;t<this.varIndices.length;t++)if(this.varIndices[t]==n){i=t;break}r.push({name:this.data.y.vars[n],hidden:this.hiddenVars[n],index:i})}return r},this.resetVarFilters=function(n){n!=null&&this.filterVarBy.length>0?(this.filterVarBy.splice(n,1),this.filterVarByOp.splice(n,1),this.filterVarByValue.splice(n,1),this.filterVarByCase.splice(n,1),this.filteredVarIndices.splice(n,1)):(this.filterVarBy=[],this.filterVarByOp=[],this.filterVarByValue=[],this.filterVarByCase=[],this.filteredVarIndices=[])},this.setAllSamplesVisible=function(n){var t,i;if(this.data.y&&this.data.y.smps){if(!this.data.y.smps&&this.data.y.data&&this.data.y.vars)for(this.data.y.smps=[],t=0;t<this.data.y.data.vars[0].length;t++)this.data.y.smps.push("smp"+(t+1));if(this.smpIndices=[],this.hiddenSmps=[],n)for(t=0;t<n.length;t++)this.smpIndices.push(n[t]),this.hiddenSmps.push(!1);else for(t=0;t<this.data.y.smps.length;t++)this.smpIndices.push(t),this.hiddenSmps.push(!1);this.filterData(!0)}if(this.data.w&&this.data.w.smps)for(this.grpIndices=[],this.hiddenGrps=[],t=0;t<this.data.w.smps.length;t++)this.grpIndices.push(t),this.hiddenGrps.push(!1);i=this.layoutComb?this.layoutCurrent:0,this.isGroupedData?this.startingSmpIndices&&(this.startingSmpIndices[i]&&this.startingSmpIndices[i].length==this.grpIndices.length?this.grpIndices=this.startingSmpIndices[i]:this.startingSmpIndices[i]=[]):this.startingSmpIndices&&(this.startingSmpIndices[i]&&this.startingSmpIndices[i].length==this.smpIndices.length?this.smpIndices=this.startingSmpIndices[i]:this.startingSmpIndices[i]=[])},this.getSamplesByAxis=function(n){return this[n]?this[n]:[]},this.getSamplesByAnnotationLevel=function(n,t){var u=[],i,r;if(n&&this.data.x[n])if(t)for(i=0;i<this.smpIndices.length;i++)r=this.smpIndices[i],this.data.x[n][r]!=t||this.hiddenSmps[r]||u.push(r);else for(i=0;i<this.smpIndices.length;i++)r=this.smpIndices[i],this.data.x[n][r]||this.hiddenSmps[r]||u.push(r);return u},this.setSamplesVisible=function(n,t){var i;if(this.isGroupedData)for(this.grpIndices=[],i=0;i<n.length;i++)this.grpIndices.push(n[i]);else for(this.smpIndices=[],i=0;i<n.length;i++)this.smpIndices.push(n[i]);if(t){var r=this.getObjectArray(n),u=this.isGroupedData?this.data.w:this.data.y,f=this.isGroupedData?this.hiddenGrps:this.hiddenSmps;for(i=0;i<u.smps.length;i++)f[i]=r.hasOwnProperty(i)?!1:!0}},this.getSampleIndices=function(n){var i=this.isGroupedData?this.data.w:this.data.y,u,r,t;if(n&&i.smps)if(u=[],this.isArray(n)){if(n.length>0){for(t=0;t<n.length;t++)for(r=0;r<i.smps.length;r++)if(i.smps[r]==n[t]){u.push(r);break}return u}}else{for(t=0;t<i.smps.length;t++)if(i.smps[t]==n)return t;return-1}},this.hideUnhideSmps=function(n){var i,f,t;if(n){var r=this.isGroupedData?this.data.w:this.data.y,u=this.isGroupedData?this.hiddenGrps:this.hiddenSmps;if(this.isArray(n)){for(t=0;t<n.length;t++)for(i=0;i<r.smps.length;i++)if(r.smps[i]==n[t]){u[i]=u[i]?!1:!0;break}}else for(t=0;t<r.smps.length;t++)if(r.smps[t]==n){u[t]=u[t]?!1:!0;break}for(f=[],t=0;t<r.smps.length;t++)u[t]||f.push(t);this.setSamplesVisible(f),this.draw()}},this.getSamples=function(){for(var r=[],u=this.isGroupedData?this.data.w.smps:this.data.y.smps,o=this.isGroupedData?this.data.w:this.data.y,e=this.isGroupedData?this.hiddenGrps:this.hiddenSmps,f=this.isGroupedData?this.grpIndices:this.smpIndices,i,t,n=0;n<u.length;n++){for(i=-1,t=0;t<f.length;t++)if(f[t]==n){i=t;break}r.push({name:u[n],hidden:e[n],index:i})}return r},this.resetSmpFilters=function(n){n!=null&&this.filterSmpBy.length>0?(this.filterSmpBy.splice(n,1),this.filterSmpByOp.splice(n,1),this.filterSmpByValue.splice(n,1),this.filterSmpByCase.splice(n,1),this.filteredSmpIndices.splice(n,1)):(this.filterSmpBy=[],this.filterSmpByOp=[],this.filterSmpByValue=[],this.filterSmpByCase=[],this.filteredSmpIndices=[])},this.setIndices=function(n,t){this.graphType=="Network"?this.setNodes():this.graphType!="Genome"&&this.graphType!="Venn"&&(this.setAllVariablesVisible(n),this.setAllSamplesVisible(t))},this.resetIndices=function(){this.isGroupedData&&this.setIndices()},this.setMaxSmpStringAttr=function(n,t){this.setMaxSmpStringAnnt(n,t),this.setMaxSmpStringLabel(n,t),this.setMaxSmpStringDesc(t),this.setMaxSmpStringName(t)},this.setMaxSmpStringAnnt=function(n,t){var r,i,u;if(t||(t=this.smpLabelFont),r=0,this.maxSmpAnnt=0,this.maxSmpAnntStr="",this.data.x){if(n&&this.data.x[n])return n;for(i in this.data.x)u=this.measureText(i,t),u>r&&(r=u,this.maxSmpAnnt=i.length,this.maxSmpAnntStr=i)}},this.setMaxSmpStringLabel=function(n,t){var f,e,s,o,i,r,u;if(t||(t=this.smpLabelFont),f=0,e={},this.maxSmpLabel=0,this.maxSmpLabelStr="",this.data.x){if(n&&this.data.x[n]){for(s="",i=0;i<this.smpIndices.length;i++)r=this.data.x[n][this.smpIndices[i]],e.hasOwnProperty(r)||(u=this.measureText(r,t),u>f&&(f=u,s=r),e[r]=!0);return s}for(o in this.data.x)for(i=0;i<this.smpIndices.length;i++)r=this.data.x[o][this.smpIndices[i]],r&&!e.hasOwnProperty(r)&&(u=this.measureText(r,t),u>f&&(f=u,this.maxSmpLabel=this.data.x[o][this.smpIndices[i]].length,this.maxSmpLabelStr=this.data.x[o][this.smpIndices[i]]),e[r]=!0)}},this.setMaxSmpStringDesc=function(n){var r,f,i,t,u;if(n||(n=this.smpLabelFont),r=0,f={},this.maxSmpLabelDesc=0,this.maxSmpLabelDescStr="",this.data.x&&this.smpLabelDescription&&this.data.x[this.smpLabelDescription])for(i=0;i<this.smpIndices.length;i++)t=this.data.x[this.smpLabelDescription][this.smpIndices[i]],t&&!f.hasOwnProperty(t)&&(u=this.measureText(t,n),u>r&&(r=u,this.maxSmpLabelDesc=t.length,this.maxSmpLabelDescStr=t))},this.setMaxSmpStringName=function(n){var r,u,t,f,i;if(n||(n=this.smpLabelFont),this.data.y||this.data.w)if(r=this.isGroupedData?this.data.w:this.data.y,u=0,this.maxSmpName=0,this.maxSmpNameStr="",this.isGroupedData)for(t=0;t<r.smps.length;t++)i=this.measureText(r.smps[t],n),i>u&&(u=i,this.maxSmpName=r.smps[t].length,this.maxSmpNameStr=r.smps[t]);else for(t=0;t<this.smpIndices.length;t++)f=r.smps[this.smpIndices[t]],i=this.measureText(f,n),i>u&&(u=i,this.maxSmpName=f.length,this.maxSmpNameStr=f)},this.getSmpAnnotations=function(n,t,i,r){var s={},u=[],o=!1,e,f;if(this.data.x.hasOwnProperty(n)){for(f=0;f<t.length;f++)e=t[f],this.data.x[n][e]!=null?(s[this.data.x[n][e]]=!0,u.push(this.data.x[n][e])):o=!0;if(o&&u.push(""),r)return i?u.join("+"):u;u=[];for(f in s)u.push(f);return o&&u.push(""),i?u.join("+"):u}},this.setMaxVarStringAttr=function(n,t){this.setMaxVarStringAnnt(n,t),this.setMaxVarStringLabel(n,t),this.setMaxVarStringDesc(t),this.setMaxVarStringName(t)},this.setMaxVarStringAnnt=function(n,t){var r,i,u;if(t||(t=this.varLabelFont),r=0,this.maxVarAnnt=0,this.maxVarAnntStr="",this.data.z){if(n&&this.data.z[n])return n;for(i in this.data.z)u=this.measureText(i,t),u>r&&(r=u,this.maxVarAnnt=i.length,this.maxVarAnntStr=i)}},this.setMaxVarStringLabel=function(n,t){var f,e,o,s,r,i,u;if(t||(t=this.varLabelFont),f=0,e={},this.maxVarLabel=0,this.maxVarLabelStr="",this.data.z){if(n&&this.data.z[n]){for(o="",r=0;r<this.varIndices.length;r++)i=this.data.z[n][this.varIndices[r]],e.hasOwnProperty(i)||(u=this.measureText(i,t),u>f&&(f=u,o=i),e[i]=!0);return o}for(s in this.data.z)for(r=0;r<this.varIndices.length;r++)i=this.data.z[s][this.varIndices[r]],i&&!e.hasOwnProperty(i)&&(u=this.measureText(i,t),u>f&&(f=u,this.maxVarLabel=i.length,this.maxVarLabelStr=i),e[i]=!0)}},this.setMaxVarStringDesc=function(n){var r,u,i,t,f;if(n||(n=this.varLabelFont),r=0,u={},this.maxVarLabelDesc=0,this.maxVarLabelDescStr="",this.data.z&&this.varLabelDescription&&this.data.z[this.varLabelDescription])for(i=0;i<this.varIndices.length;i++)t=this.data.z[this.varLabelDescription][this.varIndices[i]],t&&!u.hasOwnProperty(t)&&(f=this.measureText(t,n),f>r&&(r=f,this.maxVarLabelDesc=t.length,this.maxVarLabelDescStr=t),u[t]=!0)},this.setMaxVarStringName=function(n){var r,u,t,i,f;if(n||(n=this.varLabelFont),(this.data.y||this.data.w)&&(r=this.graphType.match(/BarLine|StackedLine|StackedPercentLine/)?this.data.y:this.isGroupedData?this.data.w:this.data.y,u=0,this.maxVarName=0,this.maxVarNameStr="",r.vars))for(t=0;t<this.varIndices.length;t++)i=r.vars[this.varIndices[t]],f=this.measureText(i,n),f>u&&(u=f,this.maxVarName=i.length,this.maxVarNameStr=i)},this.getVarAnnotations=function(n,t,i,r){var s={},u=[],o=!1,e,f;if(this.data.z.hasOwnProperty(n)){for(f=0;f<t.length;f++)e=t[f],this.data.z[n][e]!=null?(s[this.data.z[n][e]]=!0,u.push(this.data.z[n][e])):o=!0;if(o&&u.push(""),r)return i?u.join("+"):u;u=[];for(f in s)u.push(f);return o&&u.push(""),i?u.join("+"):u}},this.filterData=function(){var r={},u={},a={},v=!1,p=function(n,t,i){var r,u,f;if(t.hasOwnProperty(n))return t[n];if(n.match(":::")&&(r=n.split(":::"),i[r[1]])){for(r[1]=parseInt(r[1]),u=0;u<i[r[1]].length;u++)if(f=i[r[1]][u],t.hasOwnProperty(f))t=t[f];else return!1;if(t.hasOwnProperty(r[0]))return t[r[0]]}return!1},h=function(ts,op,vl,cs){if(op.match(/[\>\<\=]/))return eval(parseFloat(ts)+" "+op+" "+parseFloat(vl));if(op.match("null"))return op=="not null"&&ts!=null?!0:op=="null"&&ts==null?!0:!1;var r=cs?new RegExp(vl):new RegExp(vl,"i");return op=="like"?r.test(ts):r.test(ts)?!1:!0},k=function(n){a[n]||(a[n]=0),a[n]++},d,w,f,c,e,b,t,i,l,o,n,s;if(this.graphType=="Genome"&&this.filterFeatureBy.length>0){for(n=0;n<this.filterFeatureBy.length;n++)if(this.filterFeatureBy[n])for(t=0;t<this.data.tracks.length;t++)for(d=this.data.tracks[t],w=d.data,f=0;f<w.length;f++)(c=w[f],!this.filterSkipNullKeys||c.hasOwnProperty(this.filterFeatureBy[n]))&&(e=p(this.filterFeatureBy[n],c,this.featuresProperties),h(e,this.filterFeatureByOp[n],this.filterFeatureByValue[n],this.filterFeatureByCase[n])?(r[t+":"+f]=!0,this.filterType=="or"&&u[t+":"+f]&&(c.hide=!1)):(c.hide=this.filterType=="and"?!0:r[t+":"+f]?!1:!0,u[t+":"+f]=!0))}else if(this.graphType=="Network"&&(this.filterNodeBy.length>0||this.filterEdgeBy.length)){for(n=0;n<this.filterNodeBy.length;n++)if(this.filterNodeBy[n])for(t=0;t<this.data.nodes.length;t++)(!this.filterSkipNullKeys||this.data.nodes[t].hasOwnProperty(this.filterNodeBy[n]))&&(this.data.nodes[t].hide||(e=p(this.filterNodeBy[n],this.data.nodes[t],this.nodesProperties),h(e,this.filterNodeByOp[n],this.filterNodeByValue[n],this.filterNodeByCase[n])?(r[this.data.nodes[t].id]=!0,this.filterType=="or"&&u[this.data.nodes[t].id]&&(this.data.nodes[t].hide=!1)):(this.data.nodes[t].hide=this.filterType=="and"?!0:r[this.data.nodes[t].id]?!1:!0,u[this.data.nodes[t].id]=!0)));for(n=0;n<this.filterEdgeBy.length;n++)if(this.filterEdgeBy[n])for(t=0;t<this.data.edges.length;t++){var g=this.data.nodes[this.data.nodeIndices[this.data.edges[t].id1]],nt=this.data.nodes[this.data.nodeIndices[this.data.edges[t].id2]],y=g.id+":"+nt.id;(!this.filterSkipNullKeys||this.data.edges[t].hasOwnProperty(this.filterEdgeBy[n]))&&(e=p(this.filterEdgeBy[n],this.data.edges[t],this.edgesProperties),h(e,this.filterEdgeByOp[n],this.filterEdgeByValue[n],this.filterEdgeByCase[n])?(r[y]=!0,this.filterType=="or"&&u[y]&&(this.data.edges[t].hide=!1)):(this.data.edges[t].hide=this.filterType=="and"?!0:r[y]?!1:!0,u[y]=!0),this.data.edges[t].hide||(k(g.id),k(nt.id)))}if(this.filterEdgeBy.length>0)for(n=0;n<this.data.nodes.length;n++)b=this.data.nodes[n],b.hide=a[b.id]?!1:!0}else{if(this.filterSmpBy.length>0){for(n=0;n<this.filterSmpBy.length;n++)if(this.filterSmpBy[n])for(v=!0,t=0;t<this.smpIndices.length;t++)i=this.smpIndices[t],l=this.filterSmpBy[n]=="smps"?this.data.y.smps[i]:this.data.x[this.filterSmpBy[n]][i],h(l,this.filterSmpByOp[n],this.filterSmpByValue[n],this.filterSmpByCase[n])?(r[i]=!0,this.filterType=="or"&&u[i]&&(this.hiddenSmps[i]=!1)):(this.hiddenSmps[i]=this.filterType=="and"?!0:r[i]?!1:!0,u[i]=!0);if(v){for(o=[],n=0;n<this.smpIndices.length;n++)s=this.smpIndices[n],this.hiddenSmps[s]||o.push(s);this.smpIndices=o}}if(this.filterVarBy.length>0){for(n=0;n<this.filterVarBy.length;n++)if(this.filterVarBy[n])for(v=!0,t=0;t<this.varIndices.length;t++)i=this.varIndices[t],l=this.filterVarBy[n]=="vars"?this.data.y.vars[i]:this.data.z[this.filterVarBy[n]][i],h(l,this.filterVarByOp[n],this.filterVarByValue[n],this.filterVarByCase[n])?(r[i]=!0,this.filterType=="or"&&u[i]&&(this.hiddenVars[i]=!1)):(this.hiddenVars[i]=this.filterType=="and"?!0:r[i]?!1:!0,u[i]=!0);if(v){for(o=[],n=0;n<this.varIndices.length;n++)s=this.varIndices[n],this.hiddenVars[s]||o.push(s);this.varIndices=o}}}},this.setRangeData=function(n,t,i,r){var c=this.isGroupedData&&!t?this.data.w:this.data.y,o=Number.MAX_VALUE,e=Number.MAX_VALUE*-1,nt,tt,l,k,v,h,y,a,b,w,u,f,s;if(this.setMin!=null&&this.setMax!=null){this.minData=this.setMin,this.maxData=this.setMax;return}if(this.isGroupedData&&!n&&(n=this.summaryType),n=="genome")for(u=0;u<this.data.tracks.length;u++)for(f=0;f<this.data.tracks[u].data.length;f++)if(this.data.tracks[u].type=="box")for(v=0;v<this.data.tracks[u].data[f].data.length;v++)l=this.data.tracks[u].data[f].data[v],e=Math.max(e,Math.max(l[0],l[1])),o=Math.min(o,Math.min(l[0],l[1]));else this.data.tracks[u].type=="sequence"?(l=this.data.tracks[u].data[f].offset,e=Math.max(e,l+this.data.tracks[u].data[f].sequence.length),o=Math.min(o,l)):this.data.tracks[u].type.match(/bar|heatmap|line|stacked/)?(l=this.data.tracks[u].data[f].offset,e=this.data.tracks[u].autowidth?Math.max(e,l+this.data.tracks[u].data[f].data.length):Math.max(e,l),o=Math.min(o,l)):(l=this.data.tracks[u].data[f].offset,e=Math.max(e,l),o=Math.min(o,l));else if(n=="circular")nt=this.getVariableIndices(this.rAxis),nt>=0?(tt=this.range(this.data.y.data[nt]),o=tt[0],e=tt[1]):(o=0,e=1);else if(n!="km"||t)if(n=="video")o=0,e=1;else if(n!="percentile"||t)if(n!="mean"&&n!="median"&&n!="sum"||t)if(n!="iqr"||t)if(n=="candle")for(this.isTransformedData&&(alert("Transformation not allowed"),this.isTransformedData=!1),a=this.isGroupedData?this.grpIndices:this.smpIndices,u=0;u<this.varIndices.length;u++)for(h=this.varIndices[u],f=0;f<a.length;f++){var y=a[f],it=c.high[h][y],rt=c.low[h][y];isNaN(it)||isNaN(rt)||(o=Math.min(rt,o),e=Math.max(it,e))}else if(n=="volume")for(a=this.isGroupedData?this.grpIndices:this.smpIndices,u=0;u<this.varIndices.length;u++)for(h=this.varIndices[u],f=0;f<a.length;f++)y=a[f],isNaN(c.volume[h][y])||(o=Math.min(c.volume[h][y],o),e=Math.max(c.volume[h][y],e));else if(n=="cor")for(a=this.correlationAxis=="variables"?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices,u=0;u<a.length;u++)for(f=0;f<a.length;f++)s=this.isTransformedData?c.trans[u][f]:c.cor[u][f],isNaN(s)||(i?s>0&&(o=Math.min(s,o),e=Math.max(s,e)):(o=Math.min(s,o),e=Math.max(s,e)));else if(b=this.isTransformedData?c.trans:c.data,r){for(u=0;u<this.smpIndices.length;u++){for(w=0,f=0;f<this.varIndices.length;f++)s=b[this.varIndices[f]][this.smpIndices[u]],!isNaN(s)&&s>0&&(w+=s);e=Math.max(w,e)}o=0}else for(u=0;u<this.varIndices.length;u++)for(f=0;f<this.smpIndices.length;f++)s=b[this.varIndices[u]][this.smpIndices[f]],isNaN(s)||(i?s>0&&(o=Math.min(s,o),e=Math.max(s,e)):(o=Math.min(s,o),e=Math.max(s,e)));else for(this.isTransformedData&&(alert("Transformation not allowed"),this.isTransformedData=!1),u=0;u<this.varIndices.length;u++)for(h=this.varIndices[u],f=0;f<c.iqr1[h].length;f++){var d=c.iqr1[h][f],g=c.iqr3[h][f],p=c.out[h][f];if(isNaN(d)||isNaN(g)||(i?d>0&&g>0&&(o=Math.min(d,o),e=Math.max(g,e)):(o=Math.min(d,o),e=Math.max(g,e))),p)for(v=0;v<p.length;v++)isNaN(p[v])||(i?p[v]>0&&(o=Math.min(p[v],o),e=Math.max(p[v],e)):(o=Math.min(p[v],o),e=Math.max(p[v],e)))}else if(r){for(a=this.isGroupedData?this.grpIndices:this.smpIndices,b=this.isTransformedData?c.trans:c[this.summaryType],u=0;u<a.length;u++){for(h=a[u],w=0,f=0;f<this.varIndices.length;f++)y=this.varIndices[f],s=b[y][h],!isNaN(s)&&s>0&&(w+=s);e=Math.max(w,e)}o=0}else for(u=0;u<this.varIndices.length;u++)for(h=this.varIndices[u],this.isTransformedData?l=c.trans[h]:this.summaryType=="mean"?l=c.mean[h]:this.summaryType=="median"?l=c.median[h]:this.summaryType=="sum"&&(l=c.sum[h]),f=0;f<l.length;f++)s=l[f],k=c.stdev&&!this.isTransformedData?c.stdev[h][f]:Number.NaN,isNaN(s)||(isNaN(k)?i?s>0&&(o=Math.min(s,o),e=Math.max(s,e)):(o=Math.min(s,o),e=Math.max(s,e)):i?s>0&&(o=Math.min(s,o),e=Math.max(s+k,e)):(o=Math.min(s,o),e=Math.max(s+k,e)));else o=0,e=100;else o=0,e=1;this.minData=this.setMin!=null?this.setMin:o,this.maxData=this.setMax!=null?this.setMax:e},this.setRangeDataObject=function(n){for(var u=Number.MAX_VALUE,f=Number.MAX_VALUE*-1,i,r,t=0;t<this.varIndices.length;t++)for(i=0;i<this.smpIndices.length;i++)r=n[this.varIndices[t]][this.smpIndices[i]],isNaN(r)||(u=Math.min(r,u),f=Math.max(r,f));return[u,f]},this.sortNetworkIndices=function(n){for(var r=this.data[this.networkShowDataTable],o=[n]?n:this.networkShowDataTable=="nodes"?"id":"id1",u=[],i=[],e,f,t=0;t<r.length;t++)u.push(t),i.push(r[t][o]?r[t][o]:null);for(this.isNumeric(i)?(e=Number.MAX_VALUE*-1,u.sort(function(n,t){return(i[n]||e)-(i[t]||e)})):u.sort(function(n,t){return i[n]>i[t]?1:i[n]<i[t]?-1:0}),f=[],t=0;t<r.length;t++)f.push(r[u[t]]);this.sortDir=="ascending"&&f.reverse(),this.data[this.networkShowDataTable]=f,this.networkShowDataTable=="nodes"&&this.setNodeIndices(),this.draw()},this.sortIndices=function(n,t,i,r,u,f,e){var l=this,c=this.isGroupedData?this.grpIndices:n=="vars"?this.varIndices:this.smpIndices,s,o,h;if(this.tmpAsciiArray=[],this.tmpAsciiArray1=[],this.tmpAsciiArray2=[],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1,i&&(i=this.toArray(i)),r&&(r=this.toArray(r)),u&&(u=this.toArray(u)),t||(t=this.sortDir),i&&n=="vars")i.length==1&&this.data.z&&this.data.z[i[0]]?(this.tmpAsciiArray=this.data.z[i[0]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray)):i.length==2&&this.data.z&&this.data.z[i[0]]&&this.data.z[i[1]]?(this.tmpAsciiArray=this.data.z[i[0]],this.tmpAsciiArray1=this.data.z[i[1]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1)):i.length==3&&this.data.z&&this.data.z[i[0]]&&this.data.z[i[1]]&&this.data.z[i[2]]&&(this.tmpAsciiArray=this.data.z[i[0]],this.tmpAsciiArray1=this.data.z[i[1]],this.tmpAsciiArray2=this.data.z[i[2]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1),this.tmpAsciiArrayAscii2=this.isAsciiArray(this.tmpAsciiArray2)),this.smpSort=-1,this.varSort=i;else if(i&&n=="smps")i.length==1&&this.data.x&&this.data.x[i[0]]?(this.tmpAsciiArray=this.data.x[i[0]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray)):i.length==2&&this.data.x&&this.data.x[i[0]]&&this.data.x[i[1]]?(this.tmpAsciiArray=this.data.x[i[0]],this.tmpAsciiArray1=this.data.x[i[1]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1)):i.length==3&&this.data.x&&this.data.x[i[0]]&&this.data.x[i[1]]&&this.data.x[i[2]]&&(this.tmpAsciiArray=this.data.x[i[0]],this.tmpAsciiArray1=this.data.x[i[1]],this.tmpAsciiArray2=this.data.x[i[2]],this.tmpAsciiArrayAscii=this.isAsciiArray(this.tmpAsciiArray),this.tmpAsciiArrayAscii1=this.isAsciiArray(this.tmpAsciiArray1),this.tmpAsciiArrayAscii2=this.isAsciiArray(this.tmpAsciiArray2)),this.varSort=-1,this.smpSort=i;else if(f&&e)o=r?parseInt(this.getVariableIndices(r[0])):parseInt(this.getSampleIndices(u[0])),this.tmpAsciiArray=this.data.y[f][o],this.tmpAsciiArrayAscii=!1,this.smpSort=[o];else if(r){for(s=[],o=0;o<this.varIndices.length;o++)s.push(o);r.length==1?(this.tmpAsciiArray=this.getDataForSmpGrpAtIndex(r[0]-1,s,f),this.tmpAsciiArrayAscii=!1,this.smpSort=[r[0]-1]):r.length==2?(this.tmpAsciiArray=this.getDataForSmpGrpAtIndex(r[0]-1,s,f),this.tmpAsciiArray1=this.getDataForSmpGrpAtIndex(r[1]-1,s,f),this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.smpSort=[r[0]-1,r[1]-1]):r.length==3&&(this.tmpAsciiArray=this.getDataForSmpGrpAtIndex(r[0]-1,s,f),this.tmpAsciiArray1=this.getDataForSmpGrpAtIndex(r[1]-1,s,f),this.tmpAsciiArray2=this.getDataForSmpGrpAtIndex(r[2]-1,s,f),this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1,this.smpSort=[r[0]-1,r[1]-1,r[2]-1])}else u?(h=f?this.data.y[f]:this.data.y.data,u.length==1?(this.tmpAsciiArray=h[u[0]-1],this.tmpAsciiArrayAscii=!1,this.smpSort=[u[0]-1]):u.length==2?(this.tmpAsciiArray=h[u[0]-1],this.tmpAsciiArray1=h[u[1]-1],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.smpSort=[u[0]-1,u[1]-1]):r.length==3&&(this.tmpAsciiArray=h[u[0]-1],this.tmpAsciiArray1=h[u[1]-1],this.tmpAsciiArray2=h[u[2]-1],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1,this.smpSort=[u[0]-1,u[1]-1,u[2]-1])):(this.tmpAsciiArray=this.isGroupedData?this.data.w.smps:n=="vars"?this.data.y.vars:this.data.y.smps,this.tmpAsciiArrayAscii=!0,n=="vars"?this.varSort=!1:this.smpSort=!1);this.tmpAsciiArrayAscii?c.sort(function(n,t){return l.sortAsciibetically(n,t)}):c.sort(function(n,t){return l.sortNumerically(n,t)}),t!="ascending"&&c.reverse(),this.tmpAsciiArray=[],this.tmpAsciiArray1=[],this.tmpAsciiArray2=[],this.tmpAsciiArrayAscii=!1,this.tmpAsciiArrayAscii1=!1,this.tmpAsciiArrayAscii2=!1},this.isAsciiArray=function(n){for(var t=0;t<n.length;t++)if(n[t]!=null&&isNaN(n[t]))return!0;return!1},this.sortAsciibetically=function(n,t){var i=this;return this.tmpAsciiArray[n]==this.tmpAsciiArray[t]&&this.tmpAsciiArray1.length>0?this.tmpAsciiArrayAscii1?i.sortAsciibetically1(n,t):i.sortNumerically1(n,t):this.tmpAsciiArray[n]>this.tmpAsciiArray[t]?1:this.tmpAsciiArray[n]<this.tmpAsciiArray[t]?-1:0},this.sortAsciibetically1=function(n,t){var i=this;return this.tmpAsciiArray1[n]==this.tmpAsciiArray1[t]&&this.tmpAsciiArray2.length>0?this.tmpAsciiArrayAscii2?i.sortAsciibetically2(n,t):i.sortNumerically2(n,t):this.tmpAsciiArray1[n]>this.tmpAsciiArray1[t]?1:this.tmpAsciiArray1[n]<this.tmpAsciiArray1[t]?-1:0},this.sortAsciibetically2=function(n,t){return this.tmpAsciiArray2[n]>this.tmpAsciiArray2[t]?1:this.tmpAsciiArray2[n]<this.tmpAsciiArray2[t]?-1:0},this.sortNumerically=function(n,t){var r=this,i=Number.MAX_VALUE*-1;return(this.tmpAsciiArray[n]||i)-(this.tmpAsciiArray[t]||i)==0&&this.tmpAsciiArray1.length>0?this.tmpAsciiArrayAscii1?r.sortAsciibetically1(n,t):r.sortNumerically1(n,t):(this.tmpAsciiArray[n]||i)-(this.tmpAsciiArray[t]||i)},this.sortNumerically1=function(n,t){var r=this,i=Number.MAX_VALUE*-1;return(this.tmpAsciiArray1[n]||i)-(this.tmpAsciiArray1[t]||i)==0&&this.tmpAsciiArray2.length>0?this.tmpAsciiArrayAscii2?r.sortAsciibetically2(n,t):r.sortNumerically2(n,t):(this.tmpAsciiArray1[n]||i)-(this.tmpAsciiArray1[t]||i)},this.sortNumerically2=function(n,t){var i=Number.MAX_VALUE*-1;return(this.tmpAsciiArray2[n]||i)-(this.tmpAsciiArray2[t]||i)},this.radixSort=function(n){for(var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=new Int32Array(n.length),o=[].concat(l),s=[].concat(l),h=[].concat(l),c=[].concat(l),a=0,i,v=0,r,y=0,u,p=0,f,t=0;t<n.length;t++)i=n[t]&255,r=n[t]>>8&255,u=n[t]>>16&255,f=n[t]>>24&255^128,o[i]++,s[r]++,h[u]++,c[f]++;for(t=0;t<256;t++)i=a+o[t],r=v+s[t],u=y+h[t],f=p+c[t],o[t]=a,s[t]=v,h[t]=y,c[t]=p,a=i,v=r,y=u,p=f;for(t=0;t<n.length;t++)i=n[t]&255,e[o[i]]=n[t],o[i]++;for(t=0;t<n.length;t++)r=e[t]>>8&255,n[s[r]]=e[t],s[r]++;for(t=0;t<n.length;t++)u=n[t]>>16&255,e[h[u]]=n[t],h[u]++;for(t=0;t<n.length;t++)f=e[t]>>24&255^128,n[c[f]]=e[t],c[f]++;return n},this.isNumeric2DArray=function(n){for(var i,t=0;t<n.length;t++)for(i=0;i<n[t].length;i++)if(n[t][i]&&isNaN(n[t][i]))return!1;return!0},this.isNumeric=function(n,t,i){var u,r;if(t){for(u=0;u<this.smpIndices.length;u++)if(r=this.smpIndices[u],n[r]&&isNaN(n[r]))return!1}else if(i){for(u=0;u<this.varIndices.length;u++)if(r=this.varIndices[u],n[r]&&isNaN(n[r]))return!1}else for(r=0;r<n.length;r++)if(n[r]&&isNaN(n[r]))return!1;return!0},this.precedence={sin:16,cos:16,tan:16,sec:16,csc:16,cot:16,asin:16,acos:16,atan:16,asec:16,acsc:16,acot:16,sinh:16,cosh:16,tanh:16,sech:16,csch:16,coth:16,asinh:16,acosh:16,atanh:16,asech:16,acsch:16,acoth:16,exp:16,ln:16,log:16,logb:16,pow:16,sq:16,sqrt:16,abs:16,sgn:16,chs:16,floor:16,ceil:16,ip:16,fp:16,inv:16,min:16,max:16,gamma:16,fact:16,comb:16,perm:16,rand:16,gcd:16,lcm:16,prime:16,and:16,or:16,xor:16,x:16,y:16,pi:16,e:16,neg:15,not:15,"^":14,"*":13,"/":13,mod:13,div:13,"+":12,"-":12,"<":10,"<=":10,"==":10,"!=":10,">=":10,">":10,"&&":5,"||":4,",":1},this.expects={sin:1,cos:1,tan:1,sec:1,csc:1,cot:1,asin:1,acos:1,atan:1,asec:1,acsc:1,acot:1,sinh:1,cosh:1,tanh:1,sech:1,csch:1,coth:1,asinh:1,acosh:1,atanh:1,asech:1,acsch:1,acoth:1,exp:1,ln:1,log:1,logb:2,pow:2,sq:1,sqrt:1,abs:1,sgn:1,chs:1,floor:1,ceil:1,ip:1,fp:1,inv:1,min:2,max:2,gamma:1,fact:1,comb:2,perm:2,gcd:2,lcm:2,prime:1,and:2,or:2,xor:2,neg:1,not:1,"^":2,"*":2,"/":2,mod:2,div:2,"+":2,"-":2,"<":2,"<=":2,"==":2,"!=":2,">=":2,">":2,"&&":2,"||":2},this.alias={"+":"add","-":"sub","*":"mul","/":"div","!":"fact","x^y":"pow","^":"pow","10^":"pow10",div:"idiv","<":"lt","<=":"le","==":"eq","!=":"ne",">=":"ge",">":"gt","%":"pc","%ch":"pcch"},this.add=function(n,t){return new Number(t)+new Number(n)},this.sub=function(n,t){return t-n},this.mul=function(n,t){return t*n},this.div=function(n,t){return t/n},this.sin=function(n){return Math.sin(n)},this.cos=function(n){return Math.cos(n)},this.tan=function(n){return Math.tan(n)},this.sec=function(n){return 1/Math.cos(n)},this.csc=function(n){return 1/Math.sin(n)},this.cot=function(n){return 1/Math.tan(n)},this.asin=function(n){return Math.asin(n)},this.acos=function(n){return Math.acos(n)},this.atan=function(n){return Math.atan(n)},this.asec=function(n){return Math.acos(1/n)},this.acsc=function(n){return Math.asin(1/n)},this.acot=function(n){return Math.atan(1/n)},this.sinh=function(n){return(Math.exp(n)-Math.exp(-n))*.5},this.cosh=function(n){return(Math.exp(n)+Math.exp(-n))*.5},this.tanh=function(n){return(Math.exp(n)-Math.exp(-n))/(Math.exp(n)+Math.exp(-n))},this.sech=function(n){return 1/cosh(n)},this.csch=function(n){return 1/sinh(n)},this.coth=function(n){return 1/tanh(n)},this.asinh=function(n){return Math.log(n+Math.sqrt(n*n+1))},this.acosh=function(n){return Math.log(n+Math.sqrt(n*n-1))},this.atanh=function(n){return Math.log((1+n)/(1-n))*.5},this.asech=function(n){return acosh(1/n)},this.acsch=function(n){return asinh(1/n)},this.acoth=function(n){return atanh(1/n)},this.exp=function(n){return Math.exp(n)},this.ln=function(n){return Math.log(n)},this.log=function(n){return Math.log(n)/Math.LN10},this.logb=function(n,t){return Math.log(t)/Math.log(n)},this.pow=function(n,t){return Math.pow(t,n)},this.pow10=function(n){return Math.pow(10,n)},this.sq=function(n){return n*n},this.sqrt=function(n){return Math.sqrt(n)},this.abs=function(n){return n>=0?n:-n},this.sgn=function(n){return n==0?0:n>0?1:-1},this.chs=function(n){return-n},this.neg=function(n){return-n},this.floor=function(n){return Math.floor(n)},this.ceil=function(n){return Math.ceil(n)},this.ip=function(n){return parseInt(n)},this.fp=function(n){return abs(n)-ip(abs(n))},this.inv=function(n){return 1/n},this.idiv=function(n,t){return parseInt(t/n)},this.mod=function(n,t){return t%n},this.and=function(n,t){return t&n},this.or=function(n,t){return t|n},this.xor=function(n,t){return t^n},this.not=function(n){return~n},this.lt=function(n,t){return t<n?1:0},this.le=function(n,t){return t<=n?1:0},this.eq=function(n,t){return t==n?1:0},this.ne=function(n,t){return t!=n?1:0},this.ge=function(n,t){return t>=n?1:0},this.gt=function(n,t){return t>n?1:0},this.Min=function(n,t){return Math.min(t,n)},this.Max=function(n,t){return Math.max(t,n)},this.pc=function(n,t){return t*n/100},this.pcch=function(n,t){return 100*n/t},this.gammaConsts=[76.180091729471457,-86.505320329416776,24.014098240830911,-1.231739572450155,.001208650973866179,-5395239384953e-18],this.gammaLn=function(n){var u=new Number(n),t=new Number(n+5.5),i=new Number(1.0000000001900149),r;t-=(n+.5)*Math.log(t);for(r in this.gammaConsts)i+=this.gammaConsts[r]/++u;return Math.log(2.5066282746310007*i/n)-t},this.gamma=function(n){return Math.exp(this.gammaLn(n))},this.fact=function(n){var t=new Number(n);if(n<=1)return 1;if(n>100||n%1)return Math.exp(this.gammaLn(n+1));while(--n)t*=n;return t},this.comb=function(n,t){return Math.floor(.5+Math.exp(this.gammaLn(t+1)-this.gammaLn(n+1)-this.gammaLn(t-n+1)))},this.perm=function(n,t){return Math.floor(.5+Math.exp(this.gammaLn(t+1)-this.gammaLn(t-n+1)))},this.gcd=function(n,t){return n==0?t||1:t?this.gcd(t,n%t):n},this.lcm=function(n,t){return n/this.gcd(n,t)*t},this.prime=function(n){var t=new Number(5),r=new Number(4),i=parseInt(n/t);if(n==2||n==3||n==5)return 1;if(n<5||(n&1)==0||n%3==0)return 0;while(t*i<n&&t<i)i=parseInt(n/(t+=r=6-r));return t*i==n?0:1},this.degreesToArcLength=function(n,t){return n*t},this.radiansToArcLength=function(n,t){return n*Math.PI*t/180},this.arcLengthToDegrees=function(n,t){return t*180/(n*Math.PI)},this.arcLengthToRadians=function(n,t){return t/n},this.cleanArray=function(n,t,i){var f=[],u,r;if(t)for(u=0;u<this.smpIndices.length;u++)r=this.smpIndices[u],isNaN(n[r])||f.push(n[r]);else if(i)for(u=0;u<this.varIndices.length;u++)r=this.varIndices[u],isNaN(n[r])||f.push(n[r]);else for(r=0;r<n.length;r++)isNaN(n[r])||f.push(n[r]);return f},this.cleanArrays=function(n,t,i,r){var e=[],o=[],f,u;if(i)for(f=0;f<this.smpIndices.length;f++)u=this.smpIndices[f],isNaN(n[u])||isNaN(t[u])||(e.push(n[u]),o.push(t[u]));else if(r)for(f=0;f<this.varIndices.length;f++)u=this.varIndices[f],isNaN(n[u])||isNaN(t[u])||(e.push(n[u]),o.push(t[u]));else for(u=0;u<n.length;u++)isNaN(n[u])||isNaN(t[u])||(e.push(n[u]),o.push(t[u]));return[e,o]},this.sortArray=function(n,t){var r=[],i;if(n.length!=t.length)return n;for(i=0;i<n.length;i++)if(n[t[i]])r[i]=n[t[i]];else return n;return r},this.reverseArray=function(n){for(var i=[],r=0,t=n.length-1;t>=0;t--)i[r]=n[t],r++;return i},this.percentile=function(n,t,i){var r=t-n,u;return r==0?50:(u=i-n,u*100/r)},this.rank=function(n){for(var i=[],t=0;t<n.length;t++)i.push(t);return i.sort(function(t,i){return n[t]-n[i]}),i},this.min=function(n,t,i){var r,u;if(this.isArray(n)){for(n=this.cleanArray(n,t,i),r=Number.MAX_VALUE,u=0;u<n.length;u++)r=Math.min(r,n[u]);return r}return this.Min(n,t)},this.max=function(n,t,i){var r,u;if(this.isArray(n)){for(n=this.cleanArray(n,t,i),r=Number.MIN_VALUE,u=0;u<n.length;u++)r=Math.max(r,n[u]);return r}return this.Max(n,t)},this.sum=function(n,t,i,r){var f,u;for(n=this.cleanArray(n,t,i),f=0,u=0;u<n.length;u++)r?n[u]>0&&(f+=n[u]):f+=n[u];return f},this.mean=function(n,t,i){var u,f,r;for(n=this.cleanArray(n,t,i),u=0,f=0,r=0;r<n.length;r++)isNaN(n[r])||(u+=n[r],f++);return f>0&&(u/=f),u},this.range=function(n,t,i){var u,f,r;for(n=this.cleanArray(n,t,i),u=Number.MAX_VALUE,f=Number.MAX_VALUE*-1,r=0;r<n.length;r++)u=Math.min(n[r],u),f=Math.max(n[r],f);return[u,f]},this.median=function(n,t,i){var e;n=this.cleanArray(n,t,i);var u=[],f=[],r=0;for(u[0]=Number.NaN,u[1]=Number.NaN,e=0;e<n.length;e++)f.push(n[e]),r++;return r>0&&(u[1]=r,f.sort(function(n,t){return n-t}),u[0]=r%2?f[parseInt(r/2)]:(f[parseInt((r-1)/2)]+f[r/2])/2),u},this.meanStandardDeviationN=function(n,t,i){var u;n=this.cleanArray(n,t,i);var r=[],o=0,f=0,e=0;for(u=0;u<n.length;u++)f+=n[u],o+=n[u]*n[u],e++;return e>0?(f/=e,o=Math.sqrt(o/e-f*f),r.push(f),r.push(o),r.push(e)):(r.push(""),r.push(""),r.push("")),r},this.quantiles=function(n,t,i){var o,v,s,a,y,p,u;n=this.cleanArray(n,t,i);var r=[],e=[],f=n.length;if(f>2){var h=Math.floor(f*.25),l=Math.floor(f*.5),c=Math.floor(f*.75);for(n.sort(function(n,t){return n-t}),v=f%2?n[l]:this.mean([n[l-1],n[l]]),f/2%2?(o=n[h],s=n[c]):(o=this.mean([n[h-1],n[h]]),s=this.mean([n[c-1],n[c]])),a=(s-o)*1.5,u=0;u<=h;u++)if(n[u]<o-a)e.push(n[u]);else{y=n[u];break}for(u=f-1;u>=c;u--)if(n[u]>s+a)e.push(n[u]);else{p=n[u];break}r.push(o),r.push(v),r.push(s),r.push(y),r.push(p),r.push(e),r.push(f)}else f>1?(r.push(n[0]),r.push(n[1]),r.push(n[1]),r.push(n[0]),r.push(n[1]),r.push(e),r.push(f)):f>0?(r.push(n[0]),r.push(n[0]),r.push(n[0]),r.push(n[0]),r.push(n[0]),r.push(e),r.push(f)):(r.push(Number.NaN),r.push(Number.NaN),r.push(Number.NaN),r.push(Number.NaN),r.push(Number.NaN),r.push(Number.NaN));return r},this.covariance=function(n,t,i,r){var o=this.cleanArrays(n,t,i,r),u;n=o[0],t=o[1];var f=0,e=0,s=this.mean(n),h=this.mean(t);for(u=0;u<n.length;u++)f+=n[u]*t[u],e++;return e>0?(f/=e,f-s*h):f},this.correlation=function(n,t,i,r){var s=this.cleanArrays(n,t,i,r),u;n=s[0],t=s[1];var f=0,e=0,o=0,h=0,c=0,a=this.covariance(n,t),l=0;for(u=0;u<n.length;u++)e+=n[u],o+=t[u],h+=n[u]*n[u],c+=t[u]*t[u],f++;return f>0&&(l=f*f*a/Math.sqrt((f*h-e*e)*(f*c-o*o))),l},this.regression=function(n,t,i,r){var c=this.cleanArrays(n,t,i,r),u;n=c[0],t=c[1];var f=0,e=0,o=0,l=0,s=0,a=0,p=this.covariance(n,t),v=0,h=0,y=0;for(u=0;u<n.length;u++)e+=n[u],o+=t[u],l+=n[u]*t[u],s+=n[u]*n[u],a+=t[u]*t[u],f++;return f>2&&(h=(f*l-e*o)/(f*s-e*e),y=(o-h*e)/f,v=f*f*p/Math.sqrt((f*s-e*e)*(f*a-o*o))),[h,y,v]},this.slope=function(n,t,i,r){return t!=r?(i-n)/(r-t):0},this.intercept=function(n,t,i){return t-n*i},this.slopeIntercept=function(n,t,i,r){var u=this.slope(n,t,i,r);return[u,this.intercept(n,t,u)]},this.normalize=function(n){for(var r,i,t=0;t<n.length;t++)for(r=this.meanStandardDeviationN(n[t]),i=0;i<n[t].length;i++)n[t][i]=(n[t][i]-r[0])/r[1];return n},this.euclidianDistance=function(n,t,i,r){var e=this.cleanArrays(n,t,i,r),u,f;if(n=e[0],t=e[1],u=0,n.length==t.length){for(f=0;f<n.length;f++)u+=Math.pow(n[f]-t[f],2);u=Math.sqrt(u)}return u},this.manhattanDistance=function(n,t,i,r){var e=this.cleanArrays(n,t,i,r),f,u;if(n=e[0],t=e[1],f=0,n.length==t.length)for(u=0;u<n.length;u++)f+=Math.abs(n[u]-t[u]);return f},this.maxDistance=function(n,t,i,r){var e=this.cleanArrays(n,t,i,r),f,u;if(n=e[0],t=e[1],f=0,n.length==t.length)for(u=0;u<n.length;u++)f=Math.max(f,Math.abs(n[u]-t[u]));return f},this.addVectors=function(n,t,i,r){var e=this.cleanArrays(n,t,i,r),f,u;if(n=e[0],t=e[1],f=[],n.length==t.length)for(u=0;u<n.length;u++)f.push(n[u]+t[u]);return f},this.compareVectors=function(n,t){if(this.isArray(n)&&this.isArray(t)){if(n.length!=t.length)return!1;for(var i=0;i<n.length;i++)if(this.isArray(n[i])&&this.isArray(t[i])&&!this.compareArrays(n[i],t[i])||n[i]!==t[i])return!1;return!0}},this.vectorDotProduct=function(n,t,i,r){var e=this.cleanArrays(n,t,i,r),f,u;if(n=e[0],t=e[1],f=0,n.length==t.length)for(u=0;u<n.length;u++)f+=n[u]*t[u];return f},this.multiplyVectorByValue=function(n,t,i,r){n=this.cleanArray(n,i,r);for(var u=0;u<n.length;u++)n[u]*=t;return n},this.getCentroid=function(n,t,i,r){var f=[],e,u;if(t.length==r.length)for(e=n+i,u=0;u<t.length;u++)f.push((n*t[u]+i*r[u])/e);return f},this.createNode=function(n,t,i,r,u,f){var e={id:n,left:t,right:i,dist:r,centroid:u};return f&&(e.mid=f),t==null&&i==null?(e.size=1,e.depth=0):(e.size=t.size+i.size,e.depth=1+Math.max(t.depth,i.depth)),e},this.createRandomVectors=function(n,t){var f=t.length,r,u;if(n>f)return null;for(var e=[],h=[],c={},l=0,i=0,o,s;i<n;){if(l==f)return null;if(r=Math.floor(Math.random()*f),!(r in c)){for(c[r]=1,l++,o=t[r],s=!0,u=0;u<i;u++)if(this.compareVectors(o,e[u])){s=!1;break}s&&(e[i]=o,h[i]=r,i++)}}return{vectors:e,indices:h}},this.imputeDatum=function(n){var r=[],t,i;if(this.clusterAxis=="samples")for(t=0;t<this.varIndices.length;t++)i=this.varIndices[t],r.push(this.data.y.data[i][n]);else for(t=0;t<this.smpIndices.length;t++)i=this.smpIndices[t],r.push(this.data.y.data[n][i]);return this[this.imputeMethod](r)},this.getIdsForClustering=function(){var i=[],n,t;if(this.clusterAxis=="samples")for(n=0;n<this.smpIndices.length;n++)t=this.smpIndices[n],i[n]=this.useSmpVarIndexOnClustering?t:this.data.y.smps[t];else for(n=0;n<this.varIndices.length;n++)t=this.varIndices[n],i[n]=this.useSmpVarIndexOnClustering?t:this.data.y.vars[t];return i},this.getDataForClustering=function(){var r=[],u=[],n,f,t,e,i;if(this.clusterAxis=="samples"){for(n=0;n<this.smpIndices.length;n++)r[n]=[];for(n=0;n<this.varIndices.length;n++)for(f=this.varIndices[n],t=0;t<this.smpIndices.length;t++)e=this.smpIndices[t],i=this.data.y.data[f][e],isNaN(i)&&(u[t]||(u[t]=this.imputeDatum(e)),i=u[t]),r[t][n]=i}else{for(n=0;n<this.varIndices.length;n++)r[n]=[];for(n=0;n<this.varIndices.length;n++)for(f=this.varIndices[n],t=0;t<this.smpIndices.length;t++)e=this.smpIndices[t],i=this.data.y.data[f][e],isNaN(i)&&(u[n]||(u[n]=this.imputeDatum(f)),i=u[n]),r[n][t]=i}return this.centerData&&(r=this.normalize(r)),r},this.cluster=function(){var h,r,n,t;this.useSmpVarIndexOnClustering=!0;var a,u=this.getDataForClustering(),y=this.getIdsForClustering(),i=[],e=[],o=[],s=[];for(n=0;n<u.length;n++)i[n]=[];for(n=0;n<u.length;n++)for(i[n][n]=Number.POSITIVE_INFINITY,t=n+1;t<u.length;t++)i[n][t]=this[this.distance+"Distance"](u[n],u[t]),i[t][n]=i[n][t];for(n=0;n<u.length;n++)for(e[n]=0,t=0;t<u.length;t++)i[n][e[n]]>i[n][t]&&(e[n]=t);for(n=0;n<u.length;n++)s[n]=[],s[n][0]=this.createNode(y[n],null,null,0,u[n]),o[n]=1;for(h=0;h<u.length-1;h++){for(r=0,n=0;n<u.length;n++)i[n][e[n]]<i[r][e[r]]&&(r=n);var f=e[r],c=s[r][0],l=s[f][0],p=this.getCentroid(c.size,c.centroid,l.size,l.centroid),v=this.createNode(-1,c,l,i[r][f],p);for(s[r].splice(0,0,v),o[r]+=o[f],t=0;t<u.length;t++)this.linkage=="single"?i[r][t]>i[f][t]&&(i[t][r]=i[r][t]=i[f][t]):this.linkage=="complete"?i[r][t]<i[f][t]&&(i[t][r]=i[r][t]=i[f][t]):this.linkage=="average"&&(i[t][r]=i[r][t]=(o[r]*i[r][t]+o[f]*i[f][t])/(o[r]+o[t]));for(i[r][r]=Number.POSITIVE_INFINITY,n=0;n<u.length;n++)i[n][f]=i[f][n]=Number.POSITIVE_INFINITY;for(t=0;t<u.length;t++)e[t]==f&&(e[t]=r),i[r][t]<i[r][e[r]]&&(e[r]=t);a=v}return this.writeNewick(a)},this.isLeafNode=function(n){return n.left==null&&n.right==null?!0:!1},this.writeNewick=function(n,t){var r="",u="",f,e,i;if(this.isLeafNode(n))r=n.id;else{if(f=this.writeNewick(n.left,t),e=this.writeNewick(n.right,t),n.mid)for(i=0;i<n.mid.length;i++)u+=t&&n.mid[i].dist?","+n.mid[i].id+":"+n.mid[i].dist:","+n.mid[i].id,u+=n.mid[i].id;r="("+f+u+","+e+")"}return t&&n.dist&&(r+=":"+n.dist),r},this.kmeans=function(){var r=this.getDataForClustering(),y=this.getIdsForClustering(),i=[],o=[],f=!0,l=0,e=null,a=this.createRandomVectors(this.kmeansClusters,r),v,s,h,u,c,t,n;if(a==null)return null;for(e=a.vectors;f;){for(n=0;n<this.kmeansClusters;n++)o[n]=0;for(n=0;n<r.length;n++){for(v=r[n],s=Number.MAX_VALUE,u=0;u<this.kmeansClusters;u++)c=this.euclidianDistance(e[u],v),c<s&&(s=c,h=u);o[h]++,i[n]=h}for(t=[],n=0;n<this.kmeansClusters;n++)t[n]=null;for(n=0;n<r.length;n++)t[i[n]]=t[i[n]]==null?r[n]:this.addVectors(t[i[n]],r[n]);for(n=0;n<this.kmeansClusters;n++)t[n]=this.multiplyVectorByValue(t[n],1/o[n]);for(f=!1,n=0;n<this.kmeansClusters;n++)if(!this.compareVectors(t[n],e[n])){f=!0;break}e=t,l++,l>this.maxIterations&&(f=!1)}for(n=0;n<i.length;n++)i[n]="K-"+(i[n]+1);return i},this.transpose=function(n,t){var e,o,s,f,u,i,r;if(n){for(u=[],i=0;i<n.length;i++)for(r=0;r<n[i].length;r++)u[r]||(u[r]=[]),u[r][i]=n[i][r];return u}for(this.ungroupSamples(),this.transform("reset"),this.data.l&&delete this.data.l,this.data.d&&delete this.data.d,this.data.a&&delete this.data.a,this.data.t&&(e=this.data.t.vars,f=this.data.t.smps,e&&(this.data.t.smps=e),f&&(this.data.t.vars=f)),o=this.data.x,s=this.data.z,o&&(this.data.z=o),s&&(this.data.x=s),f=this.data.y.smps,this.data.y.smps=this.data.y.vars,this.data.y.vars=f,u=this.data.y.data,this.data.y.data=[],i=0;i<this.data.y.vars.length;i++)for(this.data.y.data[i]=[],r=0;r<this.data.y.smps.length;r++)this.data.y.data[i][r]=u[r][i];t||(this.initializeData(this.data),this.resetObject(),this.draw())},this.checkObject=function(){var i=this.data.y,t,n;for(this.isGroupedData&&(this.data.w={},i=this.data.w),t=["vars","smps","desc","data","mean","median","stdev","n","qtl1","qtl3","iqr1","iqr3","out","trans","cor","sum","grps","close","open","high","low","volume"],n=0;n<t.length;n++)i[t[n]]||(i[t[n]]=[])},this.resetObject=function(n){var i=["mean","median","stdev","n","qtl1","qtl3","iqr1","iqr3","out","cor","sum","grps","close","open","high","low","volume"],t;if(this.isGroupedData){for(this.isTransformedData||i.push("trans"),t=0;t<i.length;t++)delete this.data.y[i[t]];delete this.data.w}else if(this.isTransformedData||i.push("trans"),this.isRawData)for(t=0;t<i.length;t++)delete this.data.y[i[t]];else delete this.data.y.data;n&&this.checkObject()},this.getDataAtPos=function(n,t,i,r,u,f){var e=Number.NaN,o=this.isGroupedData?this.data.w:this.data.y;return this.isGroupedData||!this.isRawData?this.isTransformedData?e=o.trans[n][t]:(i=i?i:this.summaryType,e=o.hasOwnProperty(i)?o[i][n][t]:0):i?o[i]&&o[i][n]&&(e=o[i][n][t]):e=this.isTransformedData?o.trans[n][t]:o.data[n][t],r&&(isNaN(e)||(r=="log2"?e=Math.log(e)/Math.LN2:r=="log10"?e=Math.log(e)/Math.LN10:r=="exp2"?e=Math.pow(2,e):r=="exp10"?e=Math.pow(2,e):r=="percentile"&&(e=this.percentile(u,f,e)))),e},this.getDataForSmpGrpAtIndex=function(n,t,i){var f=[],e,o,r,u;if(t||(t=this.varIndices),this.isGroupedData||!this.isRawData){if(e=this.isGroupedData?this.data.w:this.data.y,this.isTransformedData)f.push(e.trans[u][n]);else if(i=this.summaryType,e.hasOwnProperty(i))for(r=0;r<t.length;r++)u=t[r],f.push(e[i][u][n])}else if(o=i?this.data.y[i]:this.data.y.data,this.isTransformedData)for(r=0;r<t.length;r++)u=t[r],f.push(this.data.y.trans[u][n]);else for(r=0;r<t.length;r++)u=t[r],f.push(o[u][n]);return f},this.getDataForVariableAtIndex=function(n){var r=[],t,i;if(this.isTransformedData)for(t=0;t<this.smpIndices.length;t++)i=this.smpIndices[t],r.push(this.data.y.trans[n][i]);else for(t=0;t<this.smpIndices.length;t++)i=this.smpIndices[t],r.push(this.data.y.data[n][i]);return r},this.getMetaDataForVariableAtIndex=function(n){var t={},i;if(this.data.z)for(i in this.data.z)t[i]=this.data.z[i][n];return t[name]=this.data.y.vars[n],t},this.getMetaDataForSampleAtIndex=function(n){return this.isGroupedData?this.getMetaDataForGrpAtIndex(n):this.getMetaDataForSmpAtIndex(n)},this.getMetaDataForSmpAtIndex=function(n){var t={},i;if(this.data.x)for(i in this.data.x)t[i]=this.data.x[i][n];return t[name]=this.data.y.vars[n],t},this.getMetaDataForGrpAtIndex=function(n){for(var i=[],r,t=0;t<this.data.w.grps[n].length;t++)r=this.data.w.grps[n][t],i.push(this.getMetaDataForSmpAtIndex[r]);return i},this.summarize=function(n,t){var i=this.isGroupedData?this.data.w:this.data.y,h=this.isGroupedData?!1:!0,c,a,v,o,s,r,f,e,u,l;if(this.isGroupedData||this.checkObject(),n=="cor")if(this.isBoxPlotCalc=!1,this.correlationAxis=="samples")for(c=this.isGroupedData?this.grpIndices:this.smpIndices,o=0;o<c.length;o++)for(r=c[o],a=this.getDataForSmpGrpAtIndex(r),i.cor[r]||(i.cor[r]=[]),u=o;u<c.length;u++)f=c[u],i.cor[f]||(i.cor[f]=[]),v=this.getDataForSmpGrpAtIndex(f),o==u?(this.isTransformedData&&(i.trans[r][f]=1),i.cor[r][f]=1):(i.cor[r][f]=this.correlation(a,v),i.cor[f][r]=i.cor[r][f],this.isTransformedData&&(i.trans[r][f]=i.cor[r][f],i.trans[f][r]=i.cor[f][r]));else for(o=0;o<this.varIndices.length;o++)for(r=this.varIndices[o],i.cor[r]||(i.cor[r]=[]),u=o;u<this.varIndices.length;u++)f=this.varIndices[u],i.cor[f]||(i.cor[f]=[]),o==u?(i.cor[r][f]=1,this.isTransformedData&&(i.trans[r][f]=1)):(i.cor[r][f]=this.correlation(i.data[r],i.data[f],h),i.cor[f][r]=i.cor[r][f],this.isTransformedData&&(i.trans[r][f]=i.cor[r][f],i.trans[f][r]=i.cor[f][r]));else for(this.isBoxPlotCalc=n=="iqr"?!0:!1,o=0;o<this.varIndices.length;o++){if(r=this.varIndices[o],i.mean[r]||(i.trans[r]=[],i.mean[r]=[],i.median[r]=[],i.stdev[r]=[],i.qtl1[r]=[],i.qtl3[r]=[],i.iqr1[r]=[],i.iqr3[r]=[],i.out[r]=[],i.n[r]=[],i.sum[r]=[]),this.isGroupedData)s=t[r];else for(i.grps=[],s=[],u=0;u<this.smpIndices.length;u++)f=this.smpIndices[u],i.grps[u]=[],i.grps[u].push(f),s[u]=[i.data[r][f]];if(n=="iqr")for(this.summaryType="iqr",u=0;u<s.length;u++)e=this.quantiles(s[u],h),this.isTransformedData&&(i.trans[r][u]=e[1]),i.median[r][u]=e[1],i.qtl1[r][u]=e[0],i.qtl3[r][u]=e[2],i.iqr1[r][u]=e[3],i.iqr3[r][u]=e[4],i.out[r][u]=e[5],i.n[r][u]=e[6];else if(n=="median")for(this.summaryType="median",u=0;u<s.length;u++)e=this.median(s[u],h),this.isTransformedData&&(i.trans[r][u]=e[1]),i.median[r][u]=e[0],i.n[r][u]=e[1];else if(n=="mean")for(this.summaryType="mean",u=0;u<s.length;u++)e=this.meanStandardDeviationN(s[u],h),this.isTransformedData&&(i.trans[r][u]=e[1]),i.mean[r][u]=e[0],i.stdev[r][u]=e[1],i.n[r][u]=e[2];else if(n=="sum")for(this.summaryType="sum",u=0;u<s.length;u++)l=this.sum(s[u],h),this.isTransformedData&&(i.trans[r][u]=l),i.sum[r][u]=l,i.n[r][u]=s[u].length}},this.copySummarizedData=function(){for(var i=this.isGroupedData?this.data.w:this.data.y,u,t,n,r=0;r<this.varIndices.length;r++){if(t=this.varIndices[r],i.data[t]=[],i.trans[t]=[],this.summaryType=="mean")for(n=0;n<i.mean[t].length;n++)i.data[t][n]=i.mean[t][n];else if(this.summaryType=="median"||this.summaryType=="iqr")for(n=0;n<i.median[t].length;n++)i.data[t][n]=i.median[t][n];else if(this.summaryType=="candle")for(n=0;n<i.close[t].length;n++)i.data[t][n]=i.close[t][n];else if(this.summaryType=="volume")for(n=0;n<i.volume[t].length;n++)i.data[t][n]=i.volume[t][n];else if(this.summaryType=="sum")for(n=0;n<i.volume[t].length;n++)i.data[t][n]=i.sum[t][n];u||(u=t)}return u},this.transformValue=function(n,t,i){switch(n){case"log2":return i?Math.pow(2,t):Math.log(t)/Math.LN2;case"log10":return i?Math.pow(10,t):Math.log(t)/Math.LN10;case"exp2":return i?Math.log(t)/Math.LN2:Math.pow(2,t);case"exp10":return i?Math.log(t)/Math.LN10:Math.pow(10,t);default:return t}},this.transform=function(n,t,i){var r=0;this.isGroupedData||this.checkObject(),(!this.isRawData||this.isGroupedData)&&(r=this.copySummarizedData()),this.transformType=n,n=="reset"||n=="undo"?(this.transformReset(),this.transformType=!1,this.isTransformedData=!1):n=="save"?(this.transformSave(),this.transformType=!1,this.isTransformedData=!1):n=="log2"||n=="log10"||n=="exp2"||n=="exp10"?(this.transformLogExp(n),this.isTransformedData=!0):n=="ratio"||n=="ratio2"||n=="ratio10"?(this.transformRatio(n,i),this.isTransformedData=!0):(this.transformRelative(n,t,r),this.isTransformedData=!0),this.draw()},this.transformReset=function(){for(var i=this.isGroupedData?this.data.w:this.data.y,n,t,r=0;r<this.varIndices.length;r++)for(n=this.varIndices[r],t=0;t<i.data[n].length;t++)i.trans[n]&&!isNaN(i.data[n][t])&&(i.trans[n][t]=i.data[n][t])},this.transformSave=function(){for(var i=this.isGroupedData?this.data.w:this.data.y,t,n,r=0;r<this.varIndices.length;r++)for(t=this.varIndices[r],n=0;n<i.data[t].length;n++)isNaN(i.data[t][n])||(i.data[t][n]=i.trans[t][n])},this.transformLogExp=function(n){var i=this.isGroupedData?this.data.w:this.data.y,u,t,r;for(n=="log"?n=this.transformBase==2?"type2":"type10":n=="exp"&&(n=this.transformBase==2?"exp2":"exp10"),u=0;u<this.varIndices.length;u++)for(t=this.varIndices[u],i.trans[t]||(i.trans[t]=[]),r=0;r<i.data[t].length;r++)isNaN(i.data[t][r])||(n=="log2"?(this.isLogData=!0,this.transformBase=2,i.trans[t][r]=Math.log(i.data[t][r])/Math.LN2):n=="log10"?(this.isLogData=!0,this.transformBase=10,i.trans[t][r]=Math.log(i.data[t][r])/Math.LN10):n=="exp2"?(this.isLogData=!1,this.transformBase=2,i.trans[t][r]=Math.pow(2,i.data[t][r])):n=="exp10"&&(this.isLogData=!1,this.transformBase=10,i.trans[t][r]=Math.pow(10,i.data[t][r])))},this.transformRatio=function(n,t){var r=this.isGroupedData?this.data.w:this.data.y,e,i,u,f;for(t=t?t:this.ratioReference?this.ratioReference:0,e=0;e<this.varIndices.length;e++)for(i=this.varIndices[e],r.trans[i]||(r.trans[i]=[]),u=0;u<r.data[i].length;u++)isNaN(r.data[i][u])||isNaN(r.data[i][t])||(this.isLogData?(n=="ratio"&&(n=this.transformBase==2?"ratio2":"ratio10"),r.data[i][u]>=r.data[i][t]?(f=r.data[i][u]-r.data[i][t],n=="ratio2"?r.trans[i][u]=Math.pow(2,f):n=="ratio10"&&(r.trans[i][u]=Math.pow(10,f))):(f=r.data[i][t]/r.data[i][e],r.trans[i][u]=n=="ratio2"?Math.pow(2,f)*-1:Math.pow(10,f)*-1)):r.trans[i][u]=r.data[i][u]>=r.data[i][t]?r.data[i][u]/r.data[i][t]:r.data[i][t]/r.data[i][u]*-1)},this.transformRelative=function(n,t,i){var u=this.isGroupedData?this.data.w:this.data.y,c=this.isGroupedData?!1:!0,o,e,h,s,f,r;if(t=t?t:this.zscoreAxis?this.zscoreAxis:"samples",t=="samples")for(e=0;e<u.data[i].length;e++){for(s=[],r=0;r<this.varIndices.length;r++)o=this.varIndices[r],s.push(u.data[o][e]);for(n=="percentile"?f=this.range(s,c):n=="zscore"&&(f=this.meanStandardDeviationN(s,c)),r=0;r<this.varIndices.length;r++)o=this.varIndices[r],u.trans[o]||(u.trans[o]=[]),isNaN(u.data[o][e])||(n=="percentile"?u.trans[o][e]=this.percentile(f[0],f[1],u.data[o][e]):n=="zscore"&&(u.trans[o][e]=(u.data[o][e]-f[0])/f[1]))}else for(e=0;e<this.varIndices.length;e++)for(h=this.varIndices[e],u.trans[h]=[],s=u.data[h],n=="percentile"?f=this.range(s,c):n=="zscore"&&(f=this.meanStandardDeviationN(s,c)),r=0;r<s.length;r++)isNaN(u.data[h][r])||(n=="percentile"?u.trans[h][r]=this.percentile(f[0],f[1],u.data[h][r]):n=="zscore"&&(u.trans[h][r]=(u.data[h][r]-f[0])/f[1]))},this.sortSamples=function(n,t,i,r,u){this.sortIndices("smps",n,t,!1,i,r,u),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortSamplesByCategory=function(n){this.sortIndices("smps",!1,n),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortSamplesByVariable=function(n,t){var i=parseInt(this.getVariableIndices(n));this.sortIndices("smps",!1,!1,!1,i+1,t),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortVariables=function(n,t,i,r,u){this.sortIndices("vars",n,t,i,!1,r,u),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortVariablesByCategory=function(n){this.sortIndices("vars",!1,n),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.sortVariablesBySample=function(n){var t=parseInt(this.getSampleIndices(n));this.sortIndices("vars",!1,!1,t+1),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.getGroupingFactors=function(n){return n?this.groupingFactors:this.getObjectArray(this.groupingFactors)},this.modifyGroupingFactors=function(n,t){this.modifyObjectArray(n,t,"groupingFactors")},this.segregateSamplesVariables=function(n,t,i,r,u){var f,e;delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.smps=n,this.data.l.vars=t,this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.data.l.desc=[];var o=1/n.length,s=1/t.length,h=this.data.y.desc[0]?this.data.y.desc[0]:"";for(f=0;f<t.length;f++)for(e=0;e<n.length;e++)this.data.l.weight.push([s,o]),this.data.l.type.push(this.graphType),this.data.l.name.push([r[f],i[e]]),this.data.l.desc.push(h);this.layoutComb=!0,this.layout=n.length+"X"+t.length,this.isValidLayout(),u||this.draw()},this.desegregateSamples=function(n){this.segregateSamplesBy=!1,this.showAnimation=this.showAnimationTemp,this.resetLayout(),this.segregateVariablesBy?this.segregateVariables(this.segregateVariablesBy,n):this.isValidLayout(),n||this.draw()},this.segregateSamples=function(n,t){var u,s,i;if(this.data.x&&this.data.x[n]){delete this.layoutParams;var r={},f=0,e=[],o=[];for(u=0;u<this.data.x[n].length;u++)i=this.data.x[n][u],r.hasOwnProperty(i)||(r[i]=[],f++),r[i].push(this.data.y.smps[u]);if(s=1/f,this.segregateVariablesBy){vars=this.data.l.vars;for(i in r)e.push(i),o.push(r[i]);this.segregateSamplesBy=n,this.segregateSamplesVariables(o,this.data.l.vars,e,this.data.l.name,t)}else{delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.data.l.desc=[];for(i in r)this.data.l.smps.push(r[i]),this.data.l.weight.push(s),this.data.l.type.push(this.graphType),this.data.l.name.push(i),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:"");this.segregateSamplesBy=n,this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.layout="1X"+this.data.l.smps.length,this.isValidLayout()}t||this.draw()}},this.desegregateVariables=function(n){this.segregateVariablesBy=!1,this.showAnimation=this.showAnimationTemp,this.resetLayout(),this.segregateSamplesBy?this.segregateSamples(this.segregateSamplesBy,n):this.isValidLayout(),n||this.draw()},this.segregateVariables=function(n,t){var u,s,i;if(this.data.z&&this.data.z[n]){delete this.layoutParams;var r={},f=0,e=[],o=[];for(u=0;u<this.data.z[n].length;u++)i=this.data.z[n][u],r.hasOwnProperty(i)||(r[i]=[],f++),r[i].push(this.data.y.vars[u]);if(s=1/f,this.segregateSamplesBy){for(i in r)o.push(i),e.push(r[i]);this.segregateVariablesBy=n,this.segregateSamplesVariables(this.data.l.smps,e,this.data.l.name,o,t)}else{delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.vars=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.data.l.desc=[];for(i in r)this.data.l.vars.push(r[i]),this.data.l.weight.push(s),this.data.l.type.push(this.graphType),this.data.l.name.push(i),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:"");this.segregateVariablesBy=n,this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.layout="1X"+this.data.l.vars.length,this.isValidLayout()}t||this.draw()}},this.deleteSubGraphAttributes=function(){var n,t,i;if(this.layoutRows&&this.layoutCols)for(n=0,t=0;t<this.layoutRows;t++)for(i=0;i<this.layoutCols;i++)delete this["subGraphWeight"+n],delete this["subGraphType"+n],delete this["subGraphSummaryType"+n],delete this["subGraphTransformType"+n],n++},this.unsetAllVsAll=function(){if(this.graphType.match(/Scatter/)){if(this.xAxisTemp&&this.xAxisTemp.length>0&&(this.xAxis=this.xAxisTemp,this.xAxisTmp=[]),this.yAxisTemp&&this.yAxisTemp.length>0&&(this.yAxis=this.yAxisTemp,this.yAxisTmp=[]),this.zAxisTemp&&this.zAxisTemp.length>0&&(this.zAxis=this.zAxisTemp,this.zAxisTmp=[]),!this.xAxis||!this.yAxis){this.xAxis=[],this.yAxis=[],this.xAxisIndices=[],this.yAxisIndices=[],this.xAxis=[this.data.y.smps[0]];for(var n=1;n<this.data.y.smps.length;n++)this.yAxis.push(this.data.y.smps[n]);this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis),this.initAxes(!0)}this.allVsAll=!1,this.showAnimationTemp&&(this.showAnimation=this.showAnimationTemp),this.resetLayout(),this.isValidLayout()}},this.setAllVsAll=function(){var i,r,n,t;if(this.graphType.match(/Scatter/)){for(i=this.data.y.data[0].length,r=1/i,this.xAxisTemp=this.xAxisTemp||this.xAxis,this.xAxis=[],this.yAxisTemp=this.yAxisTemp||this.yAxis,this.yAxis=[],this.zAxisTemp=this.zAxisTemp||this.zAxis,this.zAxis=[],this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.desc=[],n=0;n<i;n++)for(t=0;t<i;t++)this.data.l.weight.push(r),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:""),this.data.l.type.push(this.graphType),n==t?this.data.l.smps.push({}):this.allVsAllType=="upper"?t>n?this.data.l.smps.push({xAxis:[this.data.y.smps[t]],yAxis:[this.data.y.smps[n]]}):this.data.l.smps.push({}):this.allVsAllType=="lower"?n>t?this.data.l.smps.push({xAxis:[this.data.y.smps[t]],yAxis:[this.data.y.smps[n]]}):this.data.l.smps.push({}):this.data.l.smps.push({xAxis:[this.data.y.smps[t]],yAxis:[this.data.y.smps[n]]});this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.layout=i+"X"+i,this.isValidLayout()}},this.setMultiplePies=function(){var n,t,i,u,f,e,r;if(this.graphType.match(/Pie/)){for(i=this.xAxis.length,this.layout?(u=this.layout.split(/X/i),n=parseInt(u[0]),t=parseInt(u[1]),n*t<i&&(n=Math.ceil(Math.sqrt(i)),t=Math.floor(Math.sqrt(i)),this.layout=n+"X"+t)):(n=Math.ceil(Math.sqrt(i)),t=Math.floor(Math.sqrt(i)),this.layout=n+"X"+t),f=1/n,e=1/t,delete this.layoutParams,delete this.data.l,this.deleteSubGraphAttributes(),this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.desc=[],r=0;r<i;r++)this.data.l.smps.push([this.xAxis[r]]),this.data.l.weight.push([e,f]),this.data.l.desc.push(this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:""),this.data.l.type.push(this.graphType);this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.isValidLayout()}},this.ungroupSamples=function(){this.isGroupedData=!1,this.groupingFactors=[],this.grpIndices=[],this.hiddenGrps=[],this.setMaxSmpStringName(),this.setOriginalIndices(0,!1,!1,!0),this.draw();return},this.createHistogram=function(n){var e,o,f,c,l,s=0,r=[],a=[],v=[],u={},t,h,i;if(u.y={},u.y.data=[],u.y.vars=[],u.y.smps=[],this.graphType.match(/Scatter/)){if(this.type2D=="XYZ")e=n=="y"?this.yAxisIndices[this.yAxisCurrent]:this.xAxisIndices[this.xAxisCurrent],r.push(e);else if(this.type2D=="XY")for(t=0;t<this.xAxisIndices.length;t++)e=n=="y"?this.yAxisIndices[t]:this.xAxisIndices[t],r.push(e);else if(this.type2D=="X")if(n=="y")r.push(this.yAxisIndices[this.yAxisCurrent]);else for(t=0;t<this.xAxisIndices.length;t++)r.push(this.xAxisIndices[t]);else if(n=="y")for(t=0;t<this.yAxisIndices.length;t++)r.push(this.yAxisIndices[t]);else r.push(this.xAxisIndices[this.xAxisCurrent]);for(t=0;t<this.histogramBins;t++)u.y.vars.push("Bin"+(t+1)),u.y.data[t]=[];for(t=0;t<r.length;t++){for(u.y.smps.push(this.data.y.smps[r[t]]),u.y.smps.push(this.data.y.smps[r[t]]+" counts"),a.push(this.data.y.smps[r[t]]),v.push(this.data.y.smps[r[t]]+" counts"),h=[],i=0;i<this.histogramBins;i++)h[i]=0;for(o=this.getDataForSmpGrpAtIndex(r[t]),f=this.range(o),c=(f[1]-f[0])/this.histogramBins+f[0]/(this.histogramBins*2),i=0;i<o.length;i++)l=Math.floor((o[i]-f[0])/c),h[l]++;for(i=0;i<this.histogramBins;i++)u.y.data[i][s]=c*(i+1);for(s++,i=0;i<this.histogramBins;i++)u.y.data[i][s]=h[i];s++}this.isCreateHistogram=!0,this.isHistogram=!0,this.histogramBarWidthStndBy=this.histogramBarWidth,this.dataStndBy=this.data,this.data={},this.resetConfig(["graphType","isHistogram"]),this.xAxis=a,this.yAxis=v,this.showLegend=!1,this.histogramBarWidth=1.5,this.initializeData(u)}},this.removeHistogram=function(){this.isCreateHistogram=!1,this.histogramBarWidth=this.histogramBarWidthStndBy,this.switchData()},this.addRegressionLine=function(){var t,i,r,u,f,e,o,n;if(this.graphType.match(/Scatter/))if(this.type2D=="XYZ")t=this.xAxisIndices[this.xAxisCurrent],i=this.yAxisIndices[this.yAxisCurrent],e=this.data.y.smps[t]+" vs "+this.data.y.smps[i],r=this.getDataForSmpGrpAtIndex(t),u=this.getDataForSmpGrpAtIndex(i),f=this.regression(r,u),this.addRegressionDecoration(f,e,this.foreground);else if(this.type2D=="XY")for(n=0;n<this.xAxisIndices.length;n++)o=n%this.colors.length,t=this.xAxisIndices[n],i=this.yAxisIndices[n],e=this.data.y.smps[t]+" vs "+this.data.y.smps[i],r=this.getDataForSmpGrpAtIndex(t),u=this.getDataForSmpGrpAtIndex(i),f=this.regression(r,u),this.addRegressionDecoration(f,e,this.colors[o]);else if(this.type2D=="X")for(i=this.yAxisIndices[this.yAxisCurrent],u=this.getDataForSmpGrpAtIndex(i),n=0;n<this.xAxisIndices.length;n++)o=n%this.colors.length,t=this.xAxisIndices[n],e=this.data.y.smps[t]+" vs "+this.data.y.smps[i],r=this.getDataForSmpGrpAtIndex(t),f=this.regression(r,u),this.addRegressionDecoration(f,e,this.colors[o]);else for(t=this.xAxisIndices[this.xAxisCurrent],r=this.getDataForSmpGrpAtIndex(t),n=0;n<this.yAxisIndices.length;n++)o=n%this.colors.length,i=this.yAxisIndices[n],u=this.getDataForSmpGrpAtIndex(i),e=this.data.y.smps[t]+" vs "+this.data.y.smps[i],f=this.regression(r,u),this.addRegressionDecoration(f,e,this.colors[o])},this.addRegressionDecoration=function(n,t,i){this.showDecorations=!0,this.data.d||(this.data.d={}),this.data.d.reg||(this.data.d.reg=[]),this.data.d.reg.push({slope:n[0],intercept:n[1],cor:n[2],label:t,color:i})},this.addNormalDistributionLine=function(n){var c,r,i,u,f,e,o,s,h,l,a,t;if(this.graphType.match(/Scatter/))if(this.type2D=="XYZ")i=n=="y"?this.yAxisIndices[this.yAxisCurrent]:this.xAxisIndices[this.xAxisCurrent],u=n=="y"?this.xAxisIndices[this.xAxisCurrent]:this.yAxisIndices[this.yAxisCurrent],f=this.getDataForSmpGrpAtIndex(i),e=this.getDataForSmpGrpAtIndex(u),o=this.max(e),h=this.data.y.smps[i],s=this.meanStandardDeviationN(f),this.addNormalDistributionDecoration(s,o,h,this.foreground,n);else for(c=n=="y"?this.yAxisIndices:this.xAxisIndices,r=n=="y"?this.xAxisIndices:this.yAxisIndices,a=n=="y"?this.xAxisCurrent:this.yAxisCurrent,t=0;t<c.length;t++)l=t%this.colors.length,i=c[t],u=r[t]?r[t]:r[a],f=this.getDataForSmpGrpAtIndex(i),e=this.getDataForSmpGrpAtIndex(u),o=this.max(e),h=this.data.y.smps[i],s=this.meanStandardDeviationN(f),this.addNormalDistributionDecoration(s,o,h,this.colors[l],n)},this.addNormalDistributionDecoration=function(n,t,i,r,u){this.showDecorations=!0,this.data.d||(this.data.d={}),this.data.d.nor||(this.data.d.nor=[]),u&&u=="y"?this.data.d.nor.push({mu:n[0],sigma:n[1],yAxis:!0,max:t,label:i,color:r}):this.data.d.nor.push({mu:n[0],sigma:n[1],max:t,label:i,color:r})},this.addKaplanMeierCurve=function(n,t,i,r){var f=!1,h={d:{},c:{}},e={},l=1.95996,c=l*l,o,y,a,p,w,b,k,d,s,v,u;if(n&&t&&(k=this.getSampleIndices(n),d=this.getSampleIndices(t),k!=null&&d!=null)){for(u=0;u<this.varIndices.length;u++)s=this.data.y.data[u][k],v=this.data.y.data[u][d],isNaN(v)||(isNaN(v)||v!=0?(h.c[s]=h.c[s]?h.c[s]+1:1,e[s]=!0):(h.d[s]=h.d[s]?h.d[s]+1:1,e[s]=!0));for(e=this.getKeys(e),e.sort(function(n,t){return n-t}),f={times:e,data:[]},u=0;u<e.length;u++)f.data.push([h.c[e[u]]||0,h.d[e[u]]||0]);for(f.data[0].push(this.varIndices.length),u=1;u<e.length;u++)f.data[u].push(f.data[u-1][2]-(f.data[u-1][0]+f.data[u-1][1]));for(o=1,u=0;u<e.length;u++)o=o*(1-f.data[u][1]/f.data[u][2]),y=1-o,a=2*o*this.varIndices.length+c+1+l*Math.sqrt(c+2-1/this.varIndices.length+4*o*(y*this.varIndices.length-1)),p=2*(this.varIndices.length+c),w=a/p,o==1&&(w=1),a=2*o*this.varIndices.length+c-1-l*Math.sqrt(c-2-1/this.varIndices.length+4*o*(y*this.varIndices.length+1)),b=a/p,o==0&&(b=0),f.data[u].push(o,w,b);this.addKaplanMeierDecoration(n,f,i,r)}},this.addKaplanMeierDecoration=function(n,t,i,r){this.showDecorations=!0,this.data.d||(this.data.d={}),this.data.d.kaplanMeier||(this.data.d.kaplanMeier=[]),this.data.d.kaplanMeier.push({time:n,data:t,label:i||"Kaplan - Meier "+(this.data.d.kaplanMeier.length+1),color:r||this.colors[this.data.d.kaplanMeier.length%this.colors.length]})},this.addLineDecoration=function(n,t,i,r){this.graphType.match(/Scatter|Network|Genome|Correlation|Venn|Circular/)||(this.data.d||(this.data.d={}),this.data.d.lines||(this.data.d.lines=[]),n&&n=="solid"&&(n="line"),this.data.d.lines.push({type:n||"line",color:t||this.foreground,value:i||0,label:r||!1}))},this.createRandomData=function(){var t={},r,n,i;for(t.y={},t.y.data=[],t.y.vars=[],t.y.smps=[],n=0;n<this.randomDataSamples;n++)t.y.smps[n]="Sample"+(n+1);for(n=0;n<this.randomDataVariables;n++)for(t.y.data[n]=[],t.y.vars[n]="Variable"+(n+1),i=0;i<this.randomDataSamples;i++)t.y.data[n].push(Math.floor((Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1))*this.randomDataSigma+this.randomDataMean));for(t.x={},r=Math.floor(this.randomDataSamples/this.randomDataSampleAnnotationRatio),n=0;n<this.randomDataSampleAnnotations;n++)for(t.x["Factor"+(n+1)]=[],i=0;i<this.randomDataSamples;i++)t.x["Factor"+(n+1)][i]="Level"+(Math.floor(Math.random()*r)+1);for(t.z={},r=Math.floor(this.randomDataVariables/this.randomDataVariableAnnotationRatio),n=0;n<this.randomDataVariableAnnotations;n++)for(t.z["Annt"+(n+1)]=[],i=0;i<this.randomDataVariables;i++)t.z["Annt"+(n+1)][i]="Desc"+(Math.floor(Math.random()*r)+1);this.data&&!this.dataStndBy&&(this.dataStndBy=this.data,this.data={}),this.resetConfig(["graphType"]),this.initializeData(t),this.draw()},this.restoreRandomData=function(){this.switchData()},this.groupSamples=function(t,i,r){var y,w,e,s,l,c,b,u,o,f,a,k;if(t.length<1)return this.ungroupSamples();for(u=0;u<t.length;u++)if(!t||!this.data.x[t[u]])return this.ungroupSamples();if(this.layoutComb&&this.data.l.comp)for(this.varIndices=[],u=0;u<this.data.l.comp.length;u++)for(f=0;f<this.data.l.comp[u].length;f++)this.varIndices.push(this.data.l.comp[u][f]);this.resetIndices(),this.isGroupedData=!0,this.groupingFactors=t,this.resetObject(!0),this.hiddenGrps=[];var h={},v=[],p=0;for(u=0;u<this.smpIndices.length;u++){for(o=this.smpIndices[u],y=[],f=0;f<t.length;f++)w=t[f],e=this.data.x[w][o],e||(e="NA"),y.push(e);e=y.join(" - "),h.hasOwnProperty(e)?h[e].push(o):(this.data.w.smps.push(e),v[p]=e,h[e]=[],h[e].push(o),p++)}for(u=0;u<v.length;u++)e=v[u],this.data.w.grps.push(h[e]);if(this.grpIndices=[],r)for(u=0;u<r.length;u++)this.grpIndices.push(r[u]),this.hiddenGrps.push(!1);else for(u=0;u<this.data.w.grps.length;u++)this.grpIndices.push(u),this.hiddenGrps.push(!1);for(u=0;u<this.varIndices.length;u++)this.data.w.vars.push(this.data.y.vars[this.varIndices[u]]);for(s=[],i?this.isArray(i)?s=i:s.push(i):(i=this.graphType=="Boxplot"?"iqr":"mean",s.push(i)),l=0;l<s.length;l++){for(c=[],b=s[l],n=this.isTransformedData?this.data.y.trans:this.isRawData?this.data.y.data:this.summaryType=="median"||this.summaryType=="iqr"?this.data.y.median:this.summaryType=="mean"?this.data.y.mean:this.summaryType=="cor"?this.data.y.cor:this.summaryType=="sum"?this.data.y.sum:this.data.y[this.summaryType],u=0;u<this.varIndices.length;u++)for(o=this.varIndices[u],c[o]=[],f=0;f<this.data.w.grps.length;f++)for(c[o][f]=[],a=0;a<this.data.w.grps[f].length;a++)k=this.data.w.grps[f][a],c[o][f].push(n[o][k]);this.summarize(b,c)}this.setMaxVarStringName(),this.setMaxSmpStringName(),this.xAxisValues=[],this.xAxis2Values=[],this.yAxisValues=[],this.zAxisValues=[],this.layoutComb&&this.layoutAdjust||typeof this.setAxes=="function"&&this.setAxes(),this.setOriginalIndices(0,!1,!1,!0),this.draw()},this.initializeDataAttributes=function(n,t){this.setIndices(n,t),this.graphType!="Network"&&this.graphType!="Genome"&&this.graphType!="Venn"&&(this.setMaxVarStringAttr(),this.setMaxSmpStringAttr())},this.initializeData=function(t){if(n&&!t?(this.isExample=!1,this.data=n,delete n):t?(this.isExample=!1,this.data=t,delete t):(this.remoteService||(this.isExample=!0),this.data=this.exampleRawData),this.samplesData=!1,this.variablesData=!1,this.nodesData=!1,this.edgesData=!1,this.featuresData=!1,this.validGraphTypes=[],this.data.y||this.data.venn||this.data.nodes||this.data.tracks||this.data.market||this.data.fx||this.data.video){if(this.data.fx&&this.FunctionData(),this.data.market&&(this.setMarketData(),this.summaryType="candle",this.validGraphTypes.push("Candlestick")),this.data.venn&&(this.summaryType="venn",this.validGraphTypes.push("Venn")),this.data.video&&(this.summaryType="video",this.validGraphTypes.push("Video")),this.data.nodes&&(this.summaryType="network",this.validGraphTypes.push("Network")),this.data.tracks&&(this.summaryType="genome",this.validGraphTypes.push("Genome")),this.data.y){if(this.data.y.data||this.data.y.mean||this.data.y.median||this.data.y.cor||this.data.y.sum||this.data.y.close)this.data.y.data?(this.isRawData=!0,this.summaryType="raw"):(this.isRawData=!1,this.data.y.iqr1&&this.data.y.qtl1&&this.data.y.median&&this.data.y.qtl3&&this.data.y.iqr3?this.summaryType="iqr":this.data.y.median?this.summaryType="median":this.data.y.mean?this.summaryType="mean":this.data.y.cor?this.summaryType="cor":this.data.y.sum&&(this.summaryType="sum"));else{alert("Dude! there is not a valid data structure");return}this.validGraphTypes.push("Bar"),this.validGraphTypes.push("Line"),this.validGraphTypes.push("Area"),this.validGraphTypes.push("AreaLine"),this.validGraphTypes.push("BarLine"),this.validGraphTypes.push("Boxplot"),this.validGraphTypes.push("Dotplot"),this.validGraphTypes.push("Heatmap"),this.validGraphTypes.push("Stacked"),this.validGraphTypes.push("StackedLine"),this.validGraphTypes.push("StackedPercent"),this.validGraphTypes.push("StackedPercentLine"),this.validGraphTypes.push("Pie"),this.validGraphTypes.push("Correlation"),this.validGraphTypes.push("Circular"),this.data.y.smps&&(this.data.y.smps.length>2?(this.validGraphTypes.push("Scatter2D"),this.validGraphTypes.push("ScatterBubble2D"),this.validGraphTypes.push("Scatter3D")):this.data.y.smps.length>1&&this.validGraphTypes.push("Scatter2D"))}this.validGraphTypes.sort()}this.initializeDataAttributes(this.data.initialVarIndices,this.data.initialSmpIndices),delete this.data.initialVarIndices,delete this.data.initialSmpIndices},this.setMarketTechnicalData=function(){var r,t,i,u,n;if(this.stockIndicators.length>0){var o={},s=!1,f={Sma5:5,Sma10:10,Sma20:20,Sma25:25,Sma50:50},e=[];for(t=0;t<this.stockIndicators.length;t++)f.hasOwnProperty(this.stockIndicators[t])&&e.push(this.stockIndicators[t]);if(e.length>0){for(this.stockIndicators=e,r={},t=0;t<this.stockIndicators.length;t++)if(n=this.stockIndicators[t],f.hasOwnProperty(n)&&!this.data.y.hasOwnProperty(n))for(o[n]=!0,s=!0,r[n]=[],this.data.y[n]=[],i=0;i<this.data.y.vars.length;i++)r[n][i]=[],this.data.y[n][i]=[];if(s)for(t=0;t<this.data.y.smps.length;t++)for(i=0;i<this.data.y.vars.length;i++)for(u=0;u<this.stockIndicators.length;u++)n=this.stockIndicators[u],o.hasOwnProperty(n)&&(isNaN(this.data.y.close[i][t])||(r[n][i].push(this.data.y.close[i][t]),r[n][i].length==f[n]&&n.match(/Sma/)&&(this.data.y[n][i][t]=this.mean(r[n][i]),r[n][i].shift())))}}},this.setMarketData=function(){var f,e,o,n,i,t,u,r;if(this.data.market&&!this.isMarketDataFormated)for(f=this.data.market,this.data.market={},this.data.market.smps=[],this.data.market.vars=[],this.data.market.close=[],this.data.market.open=[],this.data.market.high=[],this.data.market.low=[],this.data.market.volume=[],this.data.market.desc=["Price","Vol"],e={},o=0,n=0;n<f.length;n++)for(this.data.market.vars.push(f[n].symbol),this.data.market.close[n]=[],this.data.market.open[n]=[],this.data.market.high[n]=[],this.data.market.low[n]=[],this.data.market.volume[n]=[],i=f[n].data,t=i.length-1;t>=0;t--)u=this.parseDate(i[t][0]),r=0,e.hasOwnProperty(u)?r=e[u]:(r=o,e[u]=o,this.data.market.smps.push(u),o++),this.data.market.open[n][r]=i[t][1],this.data.market.high[n][r]=i[t][2],this.data.market.low[n][r]=i[t][3],this.data.market.close[n][r]=i[t][4],this.data.market.volume[n][r]=i[t][5];this.isMarketDataFormated=!0},this.switchToMarketData=function(){var n=this.data.market;this.dataStndBy=this.data,this.data={},this.data.y=n,this.initializeDataAttributes(),this.showVolume&&(this.deleteSubGraphAttributes(),this.data.l={},this.data.l.vars=[this.data.y.vars,this.data.y.vars],this.data.l.weight=this.graphOrientation=="vertical"?[.75,.25]:[.25,.75],this.data.l.type=["Candlestick","Candlestick"],this.data.l.name=this.graphOrientation=="vertical"?["Price","Volume"]:["Volume","Price"],this.data.l.desc=this.graphOrientation=="vertical"?["Price","Volume"]:["Volume","Price"],this.segregateSamplesBy=!1,this.segregateVariablesBy=!1,this.layoutComb=!0,this.layout="1X2",this.isValidLayout())},this.switchFromMarketData=function(){this.switchData(),this.showVolume&&(this.resetLayout(),this.isValidLayout())},this.switchData=function(){this.dataStndBy&&(this.initConfig(),this.data=this.dataStndBy,this.initializeData(this.data))},this.updateData=function(n){this.initializeData(n),this.initializeGraph()},this.initializeData()},CanvasXpress.prototype.FunctionData=function(){this.implied=function(n){return n=="neg"?!1:/^(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|\w+$/.test(n)},this.tokenize=function(n){var t,i=[],r=new String("");for(n=n.toLowerCase(),n=n.replace(/\s/g,""),n=n.replace(/\+\+/g,"+"),n=n.replace(/\+-/g,"-"),n=n.replace(/-\+/g,"-"),n=n.replace(/--/g,"+"),n=n.replace(/^\+/,""),n=n.replace(/([(*\/&\|<>=])\+/g,"$1"),n=n.replace(/^-/,"neg "),n=n.replace(/([(*\/&\|<>=])-/g,"$1neg "),n=n.replace(/\)(\(|\w)/g,")*$1"),n=n.replace(/(\d)\(/g,"$1*(");t=/(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|[xy]|[a-z]+|[-+*\/(),^]|<=?|>=?|==|!=|&&|\|\|/g.exec(n);)this.implied(r)&&this.implied(t[0].toString())&&i.push("*"),i.push(r=t[0]);return i},this.isValidEnd=function(n){return/^(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|[)xye]|pi|rand$/.test(n)},this.toPostFx=function(n){for(var t=new String,u=new String(""),i=[],r=[];t=n.shift();){if(t=="(")i.push(t);else if(this.precedence[t]){while(i.length&&i[i.length-1]!="("&&this.precedence[i[i.length-1]]>=this.precedence[t])r.push(i.pop());t!=","||this.isValidEnd(u)||r.push("Unexpected: "+u),t!=","&&i.push(t)}else if(t==")"){for(this.isValidEnd(u)||r.push("Unexpected: "+u);i.length&&i[i.length-1]!="(";)r.push(i.pop());i.length==0&&r.push("Unmatched: )"),i.pop()}else/^[-+]?(\d+\.?|\d*\.\d+)(e[-+]?\d+)?$/.test(t)?r.push(t):r.push("Unknown: "+t);u=t}for(this.isValidEnd(u)||r.push("Unexpected: "+u);t=i.pop();)t=="("&&r.push("Unmatched: ("),r.push(t);return r},this.syntaxCheck=function(n){for(var i=new Number(0),t=new String,r=0;r<n.length;r++,i++){if(/^Un(matched|known|expected).*/.test(t=n[r]))return t;if(this.expects[t]){if(i<this.expects[t])return"Invalid use of: "+t;i-=this.expects[t]}}return i==1?!1:n.length?"Unused arguments":"No function"},this.evaluate=function(n,t,i){for(var u=[],r=new String,f=0;f<n.length;f++)if(r=n[f],r=="x"?u.push(t):r=="y"?u.push(i):r=="pi"?u.push(Math.PI):r=="e"?u.push(Math.E):r=="rand"?u.push(Math.random()):this[this.alias[r]||r]?u.push(this[this.alias[r]||r](u.pop(),this[this.alias[r]||r].length>1?u.pop():0)):u.push(r),isNaN(u[u.length-1]))return Number.NaN;return parseFloat(u.pop())},this.set2DPlot=function(n,t){var f={vars:[],smps:["X","Y"],data:[]},o=this.setMinX?this.setMinX:-1,h=this.setMaxX?this.setMaxX:1,s=this.setMinY?this.setMinY:-1,c=this.setMaxY?this.setMaxY:1,l=(h-o)/this.functionIntervals,a=(c-s)/this.functionIntervals,e=1,r,u,i;if(t==1)for(i=o,u=0;u<this.functionIntervals;u++)r=this.evaluate(n,i,0),isNaN(r)&&(r=""),i+=l,f.vars.push("v"+e),f.data.push([i,r]),e++;else for(r=s,u=0;u<this.functionIntervals;u++)i=this.evaluate(n,0,r),isNaN(i)&&(i=""),r+=a,f.vars.push("v"+e),f.data.push([i,r]),e++;return f},this.set3DPlot=function(n){for(var f={vars:[],smps:["X","Y","Z"],data:[]},s=this.setMinX?this.setMinX:-Math.PI/2,l=this.setMaxX?this.setMaxX:Math.PI/2,h=this.setMinY?this.setMinY:-Math.PI/2,a=this.setMaxY?this.setMaxY:Math.PI/2,t=this.width<=180?20:this.width<=600?30:40,c=1,e,r,o,u,i=0;i<=t;i++)for(e=h+(a-h)*i/t,r=0;r<=t;r++)o=s+(l-s)*r/t,u=this.evaluate(n,o,e),isFinite(u)||(u=0),f.vars.push("v"+c),f.data.push([o,u,e]),c++;return f},this.initializeFunctionData=function(){var t=this.toPostFx(this.tokenize(this.data.fx)),r=this.syntaxCheck(t),n,i;if(r){alert(r);return}n=0;for(i in t)t[i]=="x"?n|=1:t[i]=="y"&&(n|=2);n==0&&(n=1),n==3?(this.data.y=this.set3DPlot(t),this.graphType="Scatter3D",this.colorBy="Y"):(this.data.y=this.set2DPlot(t,n),this.graphType="Scatter2D",this.lineType="spline"),this.scatterType="function"},this.initializeFunctionData()},CanvasXpress.prototype.initRemote=function(){this.ajaxRequest=function(n,t,i,r){var u,s,o,f,e;if(i=i=="json"?"json":"text",r=r=="POST"?"POST":"GET",u=!1,s=this,window.XMLHttpRequest)try{u=new XMLHttpRequest}catch(h){u=!1}else if(typeof ActiveXObject!="undefined")try{u=new ActiveXObject("Msxml2.XMLHTTP")}catch(h){try{u=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){u=!1}}u&&n&&t&&(o="uid="+(new Date).getTime(),n+=n.indexOf("?")+1?"&":"?",n+=o,u.open(r,n,!0),r=="GET"?u.overrideMimeType&&u.overrideMimeType("text/xml"):(f=!1,e=n.split("?"),n=e[0],f=e[1],u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.setRequestHeader("Content-length",f.length),u.setRequestHeader("Connection","close")),u.onreadystatechange=function(){if(u.readyState==4)if(u.status==200){var result="";u.responseText&&(result=u.responseText),i=="json"&&(result=result.replace(/[\n\r]/g,""),result=eval("("+result+")")),t&&t(result)}else u.status==0||alert(u.status)},u.send(f))},this.requestRemoteData=function(n){var t,i,r;this.hideViewport(),t="index="+this.remoteDataIndex+"&dir="+this.remoteDirection;for(i in this.remoteParams)t+="&"+i+"="+this.remoteParams[i];n&&(t+="&records=true"),r=this.remoteService+"?"+t,this.ajaxRequest(r,this.updateRemoteData,"json","GET")},this.requestRemoteIds=function(n){var t,i;if(this.remoteUpdate){t="update=true";for(i in this.remoteParams)t+="&"+i+"="+this.remoteParams[i];var u=this.remoteService+"?"+t,r=this,f=function(){this.update=function(){clearInterval(t),r.ajaxRequest(u,r.updateRemoteIds,"json","GET")};var t=setInterval(this.update,n/5||1)};f.call()}},this.updateRemoteIds=function(n){return function(t){var i=n,r=document.getElementById(n.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect");if(r){t.ids&&(i.remoteIds=t.ids);var u=r.selectedIndex,f=r.childNodes[u].text,e=function(){this.update=function(){r.childNodes.length>=i.remoteIds.length?(i.remoteUpdate=!1,clearInterval(n)):(i.resetSelectOptionsRemoteData(r,f),i.requestRemoteIds())};var n=setInterval(this.update,i.remoteUpdateDelay)};e.call()}}}(this),this.saveRemoteParameters=function(){var n="index="+this.remoteDataIndex+"&save=true",t,i;for(t in this.remoteParams)n+="&"+t+"="+this.remoteParams[t];n+="&params="+JSON.stringify(this.userConfig),i=this.remoteService+"?"+n,this.ajaxRequest(i,function(){alert("Parameters saved")},"json","POST")},this.castRemoteParameters=function(n){n.remoteParentId=this.remoteParentId,n.remoteService=this.remoteService,n.remoteDirection=this.remoteDirection,n.remoteDataIndex=this.remoteDataIndex,n.remoteWindow=this.remoteWindow,n.remoteAutoPlay=this.remoteAutoPlay,n.remoteAutoPlayDelay=this.remoteAutoPlayDelay;for(var t in this.remoteParams)n.remoteParams[t]=this.remoteParams[t];n.addRemoveNavigationTopListeners("addEvtListener"),n.addRemoveNavigationLeftRightListeners("addEvtListener")},this.maintainIndices=function(n){this.graphType.match(/Network|Genome|Venn/)||n.config.graphType.match(/Network|Genome|Venn/)||(this.data.y.vars.length==n.data.y.vars.length&&(n.data.initialVarIndices=this.varIndices),this.data.y.smps.length==n.data.y.smps.length&&(n.data.initialSmpIndices=this.smpIndices))},this.maintainState=function(n){var t,i;if(!this.graphType.match(/Network|Genome|Venn/)&&!n.graphType.match(/Network|Genome|Venn/)&&this.isGroupedData&&n.data.x){for(t=0;t<this.groupingFactors.length;t++)if(!n.data.x[this.groupingFactors[t]])return;this.isCompatibleGraphType(this.graphType,n.graphType)&&(n.graphType=this.graphType),i=this.data.y.smps.length==n.data.y.smps.length?this.grpIndices:!1,n.groupSamples(this.groupingFactors,!1,i)}},this.updateRemoteData=function(n){return function(t){var i,u,e,o;if(t&&t.data){var r=n.appendUserConfig(t.data),h=n.remoteDirection=="next"?!0:!1,f=document.getElementById("container-"+n.target);if(f){var c=f.parentNode,l=f.getClientRects(),s=document.getElementById(n.target),a=n.target;if(n.insertTarget(r.renderTo,f,s.width,s.height,h),r.hidden=!0,n.maintainIndices(r),i=new CanvasXpress(r),n.castRemoteParameters(i),n.maintainState(i),n.addSelectOptionsRemoteData(t.ids),n.resetInfoSpan(!1,!0),n.animateTransition(c,l[0],a),n.requestRemoteIds(n.remoteUpdateDelay),n.Ext&&(i.Ext||(i.Ext={canvasId:r.renderTo,canvas:i,extId:n.Ext.id||n.Ext.extId})),t.postprocess)for(u=0;u<t.postprocess.length;u++)e=t.postprocess[u].func,o=t.postprocess[u].param,e&&(o?i[e].apply(i,o):i[e]());t.info&&(i.updateInfoDiv(t.info),i.showInfoDiv()),n.showCode&&i.updateCodeDiv()}}else n.remoteDataIndex=n.remoteDirection=="next"?n.remoteDataIndex-1:n.remoteDataIndex+1,n.remoteUpdating=!1}}(this),this.appendUserConfig=function(n){for(var t in this.userConfig)t.match(/decrease|remote/)||n.config[t]||(n.config[t]=this.userConfig[t]);return n},this.updateCurrentRemoteData=function(n,t){var i,r;if(n||(n=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),t||(t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent")),n&&t){if(n.selectedIndex=this.remoteDataIndex,this.remoteIds.length==0)for(i=0;i<n.childNodes.length;i++)this.remoteIds.push(n.childNodes[i].text);n.childNodes[n.selectedIndex]?(r=n.childNodes[n.selectedIndex].text,t.value=r.length>40?r.substring(0,37)+"...":r):this.resetSelectOptionsRemoteData(n)}},this.resetSelectOptionsRemoteData=function(n,t){if(n||(n=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),n){if(this.remoteIds.length==0)for(var i=0;i<n.childNodes.length;i++)this.remoteIds.push(n.childNodes[i].text);this.clearSelectOptionsRemoteData(n),this.addSelectOptionsRemoteData(this.remoteIds,n,t)}},this.clearSelectOptionsRemoteData=function(n){if(n||(n=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),n&&n.hasChildNodes())while(n.childNodes.length>=1)n.removeChild(n.firstChild)},this.addSelectOptionsRemoteData=function(n,t,i){var r,u;if(n&&(this.remoteIds=n,t||(t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect")),t)){for(r=0;r<this.remoteIds.length;r++){u=document.createElement("option"),u.text=this.remoteIds[r],u.value=r,i?this.remoteIds[r]==i&&(u.selected="selected",this.remoteDataIndex=r,t.selectedIndex=this.remoteDataIndex):this.remoteDataIndex==r&&(u.selected="selected",t.selectedIndex=this.remoteDataIndex);try{t.add(u,null)}catch(f){t.add(u)}}this.remoteIds.length==1?this.hideNavigation():this.showNavigation()}},this.animateTransition=function(n,t,i){var h;if(n&&t){var r=this,s=15,e=0,u=n.firstChild,f=n.lastChild,o=t.width,c=t.height;n.parentNode.style.overflow="hidden",this.isIE?(this.remoteDirection=="next"?n.removeChild(u):n.removeChild(f),n.parentNode.style.overflow="visible",this.remoteUpdating=!1):(h=function(){this.update=function(){var c=Math.atan(e/s*10-5)*.5/Math.atan(5)+.5,h=o*c;e>=s?(clearInterval(t),r.destroy(i),r.remoteDirection=="next"?f.style.left="0px":u.style.left="0px",n.parentNode.style.overflow="visible",r.remoteUpdating=!1,r.updateCurrentRemoteData()):(r.remoteDirection=="next"?(u.style.left=h*-1+"px",f.style.left=h*-1+"px"):(u.style.left=-o+h+"px",f.style.left=-o+h+"px"),u.style.display="block",f.style.display="block"),e++};var t=setInterval(this.update,100)},h.call())}},this.handleRemoteSelect=function(n){return function(t){var i=n.getTargetEvent(t),u=i.children[i.selectedIndex].value,f=document.getElementById(n.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent"),r;n.remoteDirection=u>n.remoteDataIndex?"next":"previous",n.remoteDataIndex=u,r=i.children[i.selectedIndex].text,f&&i&&(i.style.display="none",n.resetSelectOptionsRemoteData(i),f.value=r.length>40?r.substring(0,37)+"...":r),n.requestRemoteData()}}(this),this.handleRemoteClickStop=function(n){return function(){n.remoteStop=!0}}(this),this.handleRemoteClickPlay=function(n){return function(t){var i=n.getTargetEvent(t);n.remoteDirection="next",n.remoteStop=!1,n.playRemoteData(i.parentNode.lastChild)}}(this),this.playRemoteData=function(n){var t=function(){that=CanvasXpress.references[0],that&&(that.remoteUpdating||that.remoteStop||(that.remoteUpdating=!0,that.showInfoSpan(!1,"Updating ...",!0),n&&n.tagName.match(/select/i)&&that.remoteDataIndex>=n.length-1?that.remoteDataIndex=0:that.remoteDataIndex++,that.requestRemoteData())),this.update=function(){that=CanvasXpress.references[0],that?(that.remoteUpdating||that.remoteStop||(that.remoteUpdating=!0,that.showInfoSpan(!1,"Updating ...",!0),n&&n.tagName.match(/select/i)&&that.remoteDataIndex>=n.length-1?that.remoteDataIndex=0:that.remoteDataIndex++,that.requestRemoteData()),that.remoteStop&&clearInterval(t)):clearInterval(t)};var t=setInterval(this.update,that.remoteAutoPlayDelay)};t.call()},this.handleRemoteClickPrev=function(n){return function(t){if(!n.remoteUpdating){var r=n.getTargetEvent(t),i=r.parentNode.lastChild;n.remoteUpdating=!0,n.showInfoSpan(!1,"Updating ...",!0),n.remoteDirection="previous",i&&i.tagName.match(/select/i)&&n.remoteDataIndex<=0?n.remoteDataIndex=i.length-1:n.remoteDataIndex--,n.requestRemoteData()}}}(this),this.handleRemoteClickNext=function(n){return function(t){if(!n.remoteUpdating){var r=n.getTargetEvent(t),i=r.parentNode.lastChild;n.remoteUpdating=!0,n.showInfoSpan(!1,"Updating ...",!0),n.remoteDirection="next",i&&i.tagName.match(/select/i)&&n.remoteDataIndex>=i.length-1?n.remoteDataIndex=0:n.remoteDataIndex++,n.requestRemoteData()}}}(this),this.handleRemoteClickDown=function(n){return function(){if(!n.remoteUpdating){var t=document.getElementById(n.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect");t&&(t.style.display=="none"?(t.style.display="block",t.options[t.selectedIndex].selected=!0):t.style.display="none")}}}(this),this.addRemoteNavigationTop=function(n){var h="5px",t=document.createElement("div"),f,e,o,s,i,u,r;return t.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBar",t.style.padding="2px",t.style.color=this.skinColor,t.style.border="1px solid "+this.skinBorderColor,t.style.backgroundColor=this.skinBackgroundColor,t.style.boxShadow="2px 2px 2px "+this.skinShadowColor,t.style.MozBoxShadow="2px 2px 2px "+this.skinShadowColor,t.style.borderRadius="4px",t.style.width="435px",t.style.position="absolute",t.style.marginLeft=n+"px",t.style.zIndex=9500,t.style.display="none",f=document.createElement("img"),f.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarPrev",f.src=this.imageDir+this.previousButton,f.alt="Previous graph",f.title="Previous graph",f.style.margin=h,t.appendChild(f),e=document.createElement("img"),e.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarPlay",e.src=this.imageDir+this.playButton,e.alt="Iterate over graphs",e.title="Iterate over graphs",e.style.margin=h,t.appendChild(e),o=document.createElement("img"),o.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarStop",o.src=this.imageDir+this.stopButton,o.alt="Stop iteration",o.title="Stop iteration",o.style.margin=h,t.appendChild(o),s=document.createElement("img"),s.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarNext",s.src=this.imageDir+this.nextButton,s.alt="Next graph",s.title="Next graph",s.style.margin=h,t.appendChild(s),i=document.createElement("input"),i.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent",i.type="text",i.style.padding="1px 1px 2px 1px",i.style.position="absolute",i.style.cursor="default",i.style.display="block",i.style.left="102px",i.style.top="0px",i.style.margin="5px",i.style.width="322px",i.style.borderRadius="4px",i.style.MozBorderRadius="4px",t.appendChild(i),u=document.createElement("img"),u.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarDown",u.src=this.imageDir+this.dropdownButton,u.alt="Select graph",u.title="Select graph",u.style.margin=h,u.style.position="absolute",u.style.top="3px",u.style.right="4px",t.appendChild(u),r=document.createElement("select"),r.id=this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect",r.style.position="absolute",r.style.margin="5px",r.style.color=this.skinColor,r.style.backgroundColor=this.skinBackgroundColor,r.style.border="1px solid "+this.skinBorderColor,r.style.marginTop="1px",r.style.left="102px",r.style.top="26px",r.style.maxWidth="800px",r.style.display="none",r.size=10,t.appendChild(r),t},this.addRemoveNavigationTopListeners=function(n){var t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarPrev"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarPlay"),r=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarStop"),u=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarNext"),f=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarDown"),e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect");t&&this[n](t,"click",this.handleRemoteClickPrev,!1),i&&this[n](i,"click",this.handleRemoteClickPlay,!1),r&&this[n](r,"click",this.handleRemoteClickStop,!1),u&&this[n](u,"click",this.handleRemoteClickNext,!1),f&&this[n](f,"click",this.handleRemoteClickDown,!1),e&&this[n](e,"change",this.handleRemoteSelect,!1)},this.selectDataSet=function(){var u=document.activeElement,t,i,n,r;if(u.id==this.remoteParentId+"-canvasXpressRemoteWindowTopBarCurrent"&&(t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBarSelect"),i=[],t&&u.value.length>0)){if(this.remoteIds.length==0)for(n=0;n<t.childNodes.length;n++)this.remoteIds.push(t.childNodes[n].text);for(this.clearSelectOptionsRemoteData(t),n=0;n<this.remoteIds.length;n++)this.remoteIds[n].toLowerCase().indexOf(u.value.toLowerCase())>=0&&i.push(n);for(n=0;n<i.length;n++){r=document.createElement("option"),r.text=this.remoteIds[i[n]],r.value=i[n];try{t.add(r,null)}catch(f){t.add(r)}}t.style.display="block"}},this.addRemoteNavigationBottom=function(n){var t=document.createElement("div");return t.id=this.remoteParentId+"-canvasXpressRemoteWindowBottomBar",t.style.position="absolute",t.style.marginLeft=n+"px",t.style.display="none",t.style.height="18px",t},this.addRemoteNavigationLeftRight=function(n,t,i,r,u){var f=document.createElement("div"),e=document.createElement("img");return f.style.height=i+u+"px",f.style.width=r+"px",f.style.marginLeft="3px",f.style.marginRight="3px",f.style.top="0px",e.style.position="absolute",e.style.top=i/2+"px",e.style.left="1px",n=="l"?(f.style.position="relative",f.id=this.remoteParentId+"-canvasXpressRemoteWindowPrevBar",f.style.left="0px",f.style.display="none",e.src=this.imageDir+this.previousButton):(f.style.position="absolute",f.id=this.remoteParentId+"-canvasXpressRemoteWindowNextBar",f.style.left=r+t+14+"px",f.style.display="none",e.src=this.imageDir+this.nextButton),e.style.margin="auto",f.appendChild(e),f},this.addRemoveNavigationLeftRightListeners=function(n){var t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar");t&&this[n](t,"click",this.handleRemoteClickPrev,!1),i&&this[n](i,"click",this.handleRemoteClickNext,!1)},this.updateRemoteNavigationWindow=function(){var n=document.getElementById(this.target),t=24,i=36,r=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),u=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar"),e=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindow"),f=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBuffer"),o,s;r&&u&&e&&f&&(o=r.childNodes[0],r.style.left="7px",r.style.height=n.height+i+7+"px",o.style.top=n.height/2+"px",s=u.childNodes[0],u.style.left=n.width+t+7+"px",u.style.height=n.height+i+7+"px",s.style.top=n.height/2+"px",e.style.height=i*2+n.height+"px",e.style.width=t*2+n.width+"px",f.style.width=parseInt(n.parentNode.parentNode.clientWidth)*2+"px",f.style.left=t+7+"px",f.style.top=i+7+"px",this.resizeExtContainer(t*2+n.width))},this.addRemoteWindow=function(){var u=document.getElementById("container-"+this.target),i=document.getElementById(this.target),f=u.parentNode,r=24,e=36;if(f.id&&!f.id.match(/canvasXpressRemoteWindow/)){this.remoteParentId=f.id;var n=document.createElement("div"),o=this.addRemoteNavigationTop(r+7),s=this.addRemoteNavigationLeftRight("l",i.width,i.height,r,e+14),t=document.createElement("div"),h=this.addRemoteNavigationLeftRight("r",i.width,i.height,r,e+14),c=this.addRemoteNavigationBottom(r+7);n.id=this.remoteParentId+"-canvasXpressRemoteWindow",n.style.marginTop="3px",n.style.height=e+18+i.height+14+"px",n.style.width=r*2+i.width+14+"px",n.style.position="relative",t.id=this.remoteParentId+"-canvasXpressRemoteWindowBuffer",t.style.width=(parseInt(i.parentNode.parentNode.clientWidth)+7)*2+"px",t.style.position="absolute",t.style.left=r+"px",t.style.top=e+"px",t.style.overflow="hidden",n.appendChild(o),n.appendChild(s),n.appendChild(t),n.appendChild(h),n.appendChild(c),f.insertBefore(n,u),t.appendChild(u.parentNode.appendChild(u)),this.addRemoveNavigationTopListeners("addEvtListener"),this.addRemoveNavigationLeftRightListeners("addEvtListener"),this.requestRemoteData(!0),this.initialRemoteDataRequest=!0,this.remoteAutoPlay&&(this.remoteUpdating=!0,this.remoteDirection="next",this.remoteStop=!1,this.playRemoteData(o.lastChild))}else this.initialRemoteDataRequest=!1},this.resizeExtContainer=function(n){var t,f;if(this.Ext&&this.Ext.extId&&Ext&&(t=Ext.getCmp(this.Ext.extId),f=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindow"),t&&f)){var o=t.getWidth(),s=t.getHeight(),i=t.ownerCt;if(i){var e=i.getXType(),r=i.getWidth(),h=i.getHeight(),u=0;e=="window"||e=="panel"&&(u=r>=n?0:15,o<=r&&n<r&&(n=r,u=-15)),t.setWidth(n+u),t.doLayout(),i.doLayout(),i.ownerCt.doLayout()}}},this.hideNavigation=function(){var n=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBar"),t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar"),r=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBottomBar");n&&(n.style.display="none"),t&&(t.style.display="none"),i&&(i.style.display="none"),r&&(r.style.display="none")},this.showNavigation=function(){var n=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowTopBar"),t=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowPrevBar"),i=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowNextBar"),r=document.getElementById(this.remoteParentId+"-canvasXpressRemoteWindowBottomBar");n&&(n.style.display="block"),t&&(t.style.display="block"),i&&(i.style.display="block"),r&&(r.style.display="block")},this.initializeRemote=function(){this.remoteService&&this.addRemoteWindow()},this.initializeRemote()},CanvasXpress.prototype.initGraph=function(){this.draw=function(n,t,i,r){this.setUserEvents(),this.initializeGraph(!0,n,t,i,r),this.userEvents.enddraw&&this.userEvents.enddraw.call(this)},this.isValidGraphType=function(n){switch(n){case"Bar":case"Line":case"Area":case"AreaLine":case"Dotplot":case"Heatmap":case"Stacked":case"StackedPercent":case"Boxplot":case"Correlation":case"Pie":case"Circular":return this.data.y?!0:!1;case"BarLine":case"StackedLine":case"StackedPercentLine":return this.data.y&&this.data.a&&this.data.a.xAxis&&this.data.a.xAxis2?!0:!1;case"Scatter2D":return this.data.y&&this.data.y.smps&&this.data.y.smps.length>1?!0:!1;case"ScatterBubble2D":case"Scatter3D":return this.data.y&&this.data.y.smps&&this.data.y.smps.length>2?!0:!1;case"Candlestick":return this.data.market?!0:!1;case"Venn":return this.data.venn?!0:!1;case"Network":return this.data.nodes?!0:!1;case"Genome":return this.data.tracks?!0:!1;case"Video":return this.data.video?!0:!1}return!1},this.setColorScheme=function(){switch(this.colorScheme){case"reset":this.colors=this.colors0;break;case"basic":this.colors=this.colors1;break;case"dark":this.colors=this.colors2;break;case"strong":this.colors=this.colors3;break;case"light":this.colors=this.colors4;break;case"pastel":this.colors=this.colors5;break;case"balanced":this.colors=this.colors6;break;case"user":this.colors=this.colors}},this.reinitializeGraph=function(){this.graphType=="Candlestick"?(this.isGraphTime=!0,this.isMarketSwitched||(this.switchToMarketData(),this.initAxes(),this.summaryType="candle",this.initializeDataAttributes(),this.isMarketSwitched=!0),this.setMarketTechnicalData()):this.isExample&&this.isMarketSwitched?(this.switchFromMarketData(),this.isMarketSwitched=!1,this.summaryType=this.data.y.data?"raw":"mean",this.initializeDataAttributes(),this.isGraphTime=!1,this.showVolume&&(this.layoutComb=!1)):this.graphType.match(/Scatter/)&&this.allVsAll?this.setAllVsAll():this.graphType.match(/Pie/)&&this.xAxis.length>1&&this.setMultiplePies()},this.initializeGraph=function(n,t,i,r,u){var c=this,l=5,s=0,e=[],h=function(){for(var n=0;n<e.length;n++)if(!CanvasXpress.cacheImages.hasOwnProperty(e[n]))return!1;return!0},f,o;if(this.graphType=="Network")e=this.getNetworkImages();else if(this.graphType.match(/scatter/i))for(f=0;f<this.images.length;f++)this.images[f].match(/^http:\/\//)||(this.images[f]=this.imageDir+this.images[f]),e.push(this.images[f]);if(this.backgroundImage&&(this.backgroundImage.match(/^http:\/\//)||(this.backgroundImage=this.imageDir+this.backgroundImage),e.push(this.backgroundImage)),e.length>0&&(this.graphType=="Network"?this.Network(!0):this.graphType=="Scatter3D"?this.Scatter3D(!0):(this.graphType=="Scatter2D"||this.graphType=="ScatterBubble2D")&&this.Scatter2D(!0)),e.length>0&&!h())for(f=0;f<e.length;f++)CanvasXpress.cacheImages.hasOwnProperty(e[f])||(CanvasXpress.cacheImages[e[f]]=!0,o=new Image,o.onload=function(){CanvasXpress.cacheImages[this.src]=this,s<l*e.length?h()?c.renderGraph(n,t,i,r,u):s++:alert("Problem loading images")},o.src=e[f]);else this.renderGraph(n,t,i,r,u)},this.renderGraph=function(n,t,i,r,u){var e,f;if(!this.initialRemoteDataRequest)if(this.setColorScheme(),this.reinitializeGraph(),this.layoutComb&&this.layoutAdjust||r||this.graphType=="Candlestick"&&(this.graphType!="Candlestick"||this.showVolume)||this.initAxes(n),n?this.resizeCanvas(!0,t,i):this.resizeCanvas(!1,t,i),this.isVML&&(this.showShadow=!1),this.isValidAnimation()&&this.showAnimation&&!this.isAnimation)this.createAnimation(this.animationType);else{f=this.layoutComb?!0:!1;switch(this.graphType){case"Bar":case"Dotplot":this.isBoxPlotCalc&&this.isGroupedData&&this.groupSamples(this.getGroupingFactors(!0)),this.is3DPlot?this.Scatter3D():this.oneDPlot();break;case"Line":case"Area":case"AreaLine":case"BarLine":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Candlestick":this.isBoxPlotCalc&&this.isGroupedData&&this.groupSamples(this.getGroupingFactors(!0)),this.oneDPlot();break;case"Boxplot":!this.isBoxPlotCalc&&this.isGroupedData&&this.groupSamples(this.getGroupingFactors(!0)),this.oneDPlot();break;case"Scatter2D":case"ScatterBubble2D":this.Scatter2D();break;case"Scatter3D":this.Scatter3D();break;case"Correlation":this.Correlation();break;case"Venn":this.Venn();break;case"Pie":this.Pie();break;case"Circular":this.Circular();break;case"Network":u?(e=this.calculateLayout,f=this.randomNetwork,this.calculateLayout=!1,this.randomNetwork=!1,this.Network(),this.calculateLayout=e,this.randomNetwork=f):this.Network();break;case"Genome":this.Genome();break;case"Video":this.Video()}this.drawCanvasBox(),this.showCode&&this.updateCodeDiv(),this.showDataTable?this.updateDataTable():this.dataTableLastState&&this.dataTableLastState!="docked"&&this.hideUnhideDataTable(!0),this.setAcknowledgementVisibility(),this.graphType!="Network"&&this.drawCitation(),this.setVideoControls()}},this.initializeGraph()},CanvasXpress.prototype.initAxes=function(n,t){this.getValidAxes=function(n){var t=[];if(this.graphType=="Scatter2D")t.push("xAxis"),t.push("yAxis");else if(this.graphType=="ScatterBubble2D"||this.graphType=="Scatter3D")t.push("xAxis"),t.push("yAxis"),t.push("zAxis");else if(this.graphType.match(/Network|Genome|Correlation|Venn|Heatmap|Pie|Video/))if(n)t.push("xAxis");else return!1;else this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)||this.graphType=="Candlestick"&&this.showVolume?(t.push("xAxis"),t.push("xAxis2")):this.graphType=="Circular"?(t.push("xAxis"),t.push("rAxis")):t.push("xAxis");return t},this.addRemoveSamplesInAxis=function(n,t,i){return this.graphType=="Scatter2D"||this.graphType=="ScatterBubble2D"?i?this.removeSamplesFromAxis(n,t):this.addSamplesToAxis(n,t):this.graphType=="Scatter3D"||this.graphType=="Pie"?this.switchSampleInAxis(n,t):void 0},this.addSamplesToAxis=function(n,t){if(this[t]){if(this.isArray(n))for(var i=0;i<n.length;i++)this[t].push(n[i]);else this[t].push(n);return!1}return"Not a valid axis"},this.removeSamplesFromAxis=function(n,t){var r,u,i;if(this[t]){if(this[t].length>1){if(r={},u=[],this.isArray(n))for(i=0;i<n.length;i++)r[n[i]]=1;else r[n]=1;for(i=0;i<this[t].length;i++)r.hasOwnProperty(this[t][i])||u.push(this[t][i]);return this[t]=u,!1}return t+" cannot be null"}return"Not a valid axis"},this.switchSampleInAxis=function(n,t){return this[t]?(this[t][0]=n,!1):"Not a valid axis"},this.addRemoveVariablesInAxis=function(n,t,i){return i?this.removeVariablesFromAxis(n,t):this.addVariablesToAxis(n,t)},this.addVariablesToAxis=function(n,t){if(this.data.a||(this.data.a={}),this.data.a[t]||(this.data.a[t]=[]),this.isArray(n))for(var i=0;i<n.length;i++)this.data.a[t].push(n[i]);else this.data.a[t].push(n);return this.resetVariablesVisibleByAxis(t),!1},this.removeVariablesFromAxis=function(n,t){var r,u,i;if(this.data.a&&this.data.a[t]){if(r={},u=[],this.isArray(n))for(i=0;i<n.length;i++)r[n[i]]=1;else r[n]=1;for(i=0;i<this.data.a[t].length;i++)r.hasOwnProperty(this.data.a[t][i])||u.push(this.data.a[t][i]);this.data.a[t]=u}return this.resetVariablesVisibleByAxis(t),!1},this.formatAxisValue=function(n,t){return this[t+"TickFormat"]?this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2TickFormat?sprintf(this.xAxis2TickFormat,n):sprintf(this[t+"TickFormat"],n):sprintf(this[t+"TickFormat"],n):this.graphType=="Candlestick"&&this.summaryType=="volume"?sprintf("%."+this.xAxis2Decs+"f",n):sprintf("%."+this[t+"Decs"]+"f",n)},this.getAxisRangeBySample=function(n){var u=[],r,t,i;if(this.isArray(n))for(t=0;t<this.varIndices.length;t++)for(i=this.varIndices[t],r=0;r<n.length;r++)u.push(this.getDataAtPos(i,r));else for(t=0;t<this.varIndices.length;t++)i=this.varIndices[t],u.push(this.getDataAtPos(i,n));return this.range(u)},this.getAxisIncrements=function(n,t,i,r,u){if(t-n<=Number.MIN_VALUE)return.1;var e,s=((u||t)-n)*this.axisExtension,c=n-s,l=(u||t)+s,h=l-c,a=-Math.floor(Math.log(h/i)/Math.LN10),f=Math.pow(10,-a),v=this.getAxisDecimals(f),o=h/i/f;return e=r?parseFloat(this.formatNumber(((u||t)-n)/i,v)):o<1.5?f:o<2?f*2:o<2.5?f*2.5:o<5?f*5:o<7.5?f*7.5:f*10,this.getAxisMin(n,e)+e*i<t?this.getAxisIncrements(n,t,i,r,(u||t)+e):e},this.getAxisMin=function(n,t){var i=t*Math.floor(n/t);return isNaN(i)?0:i<0&&this.minData>=0?0:i},this.getAxisDecimals=function(n){var t=1e6;return((n*t-parseInt(n)*t)/t).toString().replace(/\./,"").length-1},this.setAxis=function(n){var t=this.isGroupedData?this.data.w:this.data.y;this[n].length==0?n=="xAxis"?this[n].push(t.smps[this.smpIndices[0]]):n=="yAxis"?t.smps.length>1?this[n].push(t.smps[this.smpIndices[1]]):this[n].push(t.smps[this.smpIndices[0]]):n=="zAxis"&&(t.smps.length>2?this[n].push(t.smps[this.smpIndices[2]]):t.smps.length>1?this[n].push(t.smps[this.smpIndices[1]]):this[n].push(t.smps[this.smpIndices[0]])):this.graphType=="Scatter3D"&&this[n].length>1&&(this[n]=[this[n][0]])},this.setAxisValues=function(t){var u,f,l,a,k,v,y,h={},s=t+"MinorValues",r=t+"Values",p=t+"Ticks",o=t+"TickFormat",d=t+"Incr",e=t+"Decs",g=t+"Min",nt=t+"Transform",w=t+"MaxStrLength",b,c,i;if(this[nt]=="percentile"){for(this[e]=0,this[r]=[],this[s]=[],b=[0,25,50,75,100],i=0;i<b.length;i++)this[r].push(b[i]);for(i=5;i<100;i+=5)this[s].push(i)}else if(this[r].length==0||n)for(n&&(this[r]=[],this[s]=[]),u=this[g],k=this[d]/this[p],i=1;i<=this[p];i++){for(c=1;c<this[p];c++)this[s].push(u+k*c);u+=this[d],this[e]==0&&u.toString().match(/\.5$/)&&(this[e]=1),f=this[o]?sprintf(this[o],u):this.formatNumber(sprintf("%."+this[e]+"f",u),this[e]),h.hasOwnProperty(f)&&!this[o]?v=!0:h[f]=1,this[r].push(f)}else for(l=this[r],this[r]=[],i=0;i<l.length;i++)u=l[i],a=parseFloat(u),f=this[o]?sprintf(this[o],a):this.formatNumber(sprintf("%."+this[e]+"f",a),this[e]),h.hasOwnProperty(f)&&!this[o]?v=!0:h[f]=1,this[r].push(f);v?(this[e]++,this[r]=[],this[s]=[],this.setAxisValues(t)):(y=this.getMaxText(this[r]),this[w]=this[w]?this.getMaxText([this[w],y]):y)},this.setAxisAttributes=function(n,t,i,r,u){var a=r&&r.match(/log/)?!0:!1,s=n+"Ticks",f=n+"Incr",h=n+"Exact",c=n+"AbsMin",l=n+"AbsMax",e=n+"Min",o=n+"Max",v=n+"Range",y=n+"Decs",p=n+"Transform";this.setRangeData(t,i,a,u),r&&(r=="log2"?(this.minData=Math.log(this.minData)/Math.LN2,this.maxData=Math.log(this.maxData)/Math.LN2):r=="log10"?(this.minData=Math.log(this.minData)/Math.LN10,this.maxData=Math.log(this.maxData)/Math.LN10):r=="exp2"?(this.minData=Math.pow(2,this.minData),this.maxData=Math.pow(2,this.maxData)):r=="exp10"?(this.minData=Math.pow(10,this.minData),this.maxData=Math.pow(10,this.maxData)):r=="percentile"&&(this.minData=-12.5,this.maxData=112.5)),this[c]=this.setMin==null?this.minData:this[c],this[l]=this.setMax==null?this.maxData:this[l],this[f]=this.getAxisIncrements(this.minData,this.maxData,this[s],this[h]),this[y]=this.getAxisDecimals(this[f]),u?(this[e]=0,this[o]=this.graphType.match(/Percent/)?100:this[e]+this[f]*this[s]):this[h]||r&&r=="percentile"?(this[e]=this.minData,this[o]=this.maxData):(this[e]=this.getAxisMin(this.minData,this[f]),this[o]=this[e]+this[f]*this[s],this[o]-this[f]*2>this.maxData&&(this[e]-this[f]>0&&(this[e]-=this[f],this[o]-=this[f]),this.minData>0&&this[e]<0&&(this[e]+=this[f],this[o]+=this[f]))),this[v]=this[o]-this[e],this.setAxisValues(n)},this.setAxes=function(n){var o,t,s,h,u,r;if(this.graphType.match(/Correlation/))o=this.isGroupedData?this.data.w:this.data.y,this.setMin=null,this.setMax=null,this.correlationAnchorLegend&&this.setAxisAttributes("xAxis"),o.cor&&o.cor.length!=0||(this.summarize("cor"),this.setRangeData("cor")),this.yAxisTitle||(this.yAxisTitle="Correlation");else if(this.graphType.match(/Scatter|Pie/)){var y=this.smpIndices,i=["xAxis"],f=["X"];for(this.setMin=null,this.setMax=null,this.graphType.match(/Scatter/)&&(i.push("yAxis"),f.push("Y")),this.graphType.match(/ScatterBubble2D|Scatter3D/)&&(i.push("zAxis"),f.push("Z")),this.graphType=="Scatter3D"&&(this.xAxisTicks=10,this.yAxisTicks=10,this.zAxisTicks=10),t=0;t<i.length;t++){var a=i[t]+"Indices",r="setMin"+f[t],u="setMax"+f[t];this.setAxis(i[t]),this[a]=this.getSampleIndices(this[i[t]]),this.setSamplesVisible(this[a]),this[r]&&(this.setMin=this[r]),this[u]&&(this.setMax=this[u]),this.setAxisAttributes(i[t],t>0?n:!1,!1,this[i[t]+"Transform"]),this.setSamplesVisible(y)}this.xAxisTitle||(this.xAxisTitle=this.xAxis.length==1?this.xAxis[0]:" "),this.yAxisTitle||(this.yAxisTitle=this.yAxis.length==1?this.yAxis[0]:" "),this.zAxisTitle||(this.zAxisTitle=this.zAxis.length==1?this.zAxis[0]:" ")}else if(this.graphType.match(/Genome/))s=this.setMin,h=this.setMax,this.setRangeData("genome"),this.xAxisExact=!0,this.xAxisTransform=!1,this.xAxisAbsMin=this.minData,this.xAxisAbsMax=this.maxData,s!=null&&(this.setMin=s),h!=null&&(this.setMax=h),this.xAxisMin=this.setMin!=null?this.setMin:this.minData-1,this.xAxisMax=this.setMax!=null?this.setMax:this.maxData+1,this.xAxisDecs=0,this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisTicks=this.ticks,this.xAxisIncr=this.xAxisRange/this.xAxisTicks,this.setAxisValues("xAxis");else{var p=this.smpIndices,w=this.varIndices,b=this.grpIndices,v=this.varIndices,c=this.graphType=="Dotplot"&&this.isGroupedData?!0:!1,e=this.graphType.match(/Percent/)?"percentile":!1,k=this.graphType.match(/Stacked/)||this.graphType.match(/Area/)&&this.areaIsCumulative?!0:!1,l=this.graphType=="Candlestick"?"candle":e?e:!1;this.varIndicesStart>-1||this.smpIndicesStart>-1?(this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.graphType=="Heatmap"&&(this.graphOrientation="horizontal")):this.graphType=="StackedPercent"||this.graphType=="StackedPercentLine"?(this.setMin=null,this.setMax=null,this.axisExact=!0,this.xAxisExact=!0):this.graphType!="Boxplot"||this.isGroupedData||this.data.y.median||this.summarize("iqr"),this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a&&this.setVariablesVisible(this.getVariablesVisibleByAxis("xAxis")),this.setAxisAttributes("xAxis",l,c,e,k),this.xAxisTitle=!this.xAxisTitle&&this.data.y.desc?this.data.y.desc[0]:"",(this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a||this.graphType=="Candlestick"&&this.showVolume)&&(l=this.graphType=="Candlestick"?"volume":!1,this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&(this.setVariablesVisible(v),this.setVariablesVisible(this.getVariablesVisibleByAxis("xAxis2"))),u=this.setMax!=null?this.setMax:null,r=this.setMin!=null?this.setMin:null,this.setMax=this.setMax2!=null?this.setMax2:null,this.setMin=this.setMin2!=null?this.setMin2:null,this.setAxisAttributes("xAxis2",l,c),this.xAxis2Title=!this.xAxis2Title&&this.data.y.desc?this.data.y.desc[1]:"",this.setMax=u!=null?u:null,this.setMin=r!=null?r:null),this.graphType=="Circular"&&this.rAxis&&this.setAxisAttributes("rAxis","circular",c,e,!1,!0),this.setVariablesVisible(v),this.smpIndices=p,this.varIndices=w,this.grpIndices=b}},this.setScatterPointSize=function(){this.scatterPointSize=this.varIndices.length>50?this.sizes[1]:this.varIndices.length>20?this.sizes[2]:this.sizes[3],this.layoutComb&&(this.scatterPointSize=Math.ceil(this.scatterPointSize/this.layoutRows))},this.setAxisUnits=function(n,t){var i=n+"Unit",r=n+"Range",u=t?t:n.substring(0,1);this[i]=this[u]/this[r]},this.setAxisFont=function(n,t){var f=this.graphType=="Venn"?16:12,i,r,u;!this.autoScaleFont&&this.axisTickFont&&this.decorationFont&&this.axisTitleFont?(this.axisTickFont=parseInt(this.axisTickFontSize)+"Pt "+this.fontName,this.decorationFont=parseInt(this.decorationFontSize)+"Pt "+this.fontName,this.axisTitleFont=parseInt(this.axisTitleFontSize)+"Pt "+this.fontName):(t>=600?(i=12*this.tickScaleFontFactor,u=10*this.decorationScaleFontFactor,r=this.getFontPt(this.scaleTextToFont(n,f,t-2))*this.axisTitleScaleFontFactor):t>=400?(i=10*this.tickScaleFontFactor,u=8*this.decorationScaleFontFactor,r=this.getFontPt(this.scaleTextToFont(n,f,t-2))*this.axisTitleScaleFontFactor):t>=200?(i=8*this.tickScaleFontFactor,u=6*this.decorationScaleFontFactor,r=8*this.axisTitleScaleFontFactor):t>=100?(i=6*this.tickScaleFontFactor,u=4*this.decorationScaleFontFactor,r=6*this.axisTitleScaleFontFactor):(i=4*this.tickScaleFontFactor,u=2*this.decorationScaleFontFactor,r=4*this.axisTitleScaleFontFactor),this.axisTickFont=parseInt(i)+"Pt "+this.fontName,this.decorationFont=parseInt(u)+"Pt "+this.fontName,this.axisTitleFont=parseInt(r)+"Pt "+this.fontName)},this.getAxisFont=function(n){return n>=600?12:n>=400?10:n>=200?8:6},this.getHeatmapShades=function(n,t){switch(n){case"white":case"black":return t&&t!="white"&&t!="black"?this.getHeatmapShades(t):this.greys;case"grey":return this.greys;case"green":return this.greens;case"red":return this.reds;case"blue":return this.blues;case"yellow":return this.yellows;case"cyan":return this.cyans;case"purple":return this.purples}},this.setHeatmapColors=function(n){var e,u,o,s,t;this.setRGB();var h=n?n:this.maxData-this.minData,i=this.heatmapType.split("-"),f=256/this.indicatorBins,r=this.getHeatmapShades(i[0],i[1]);if(this.heatmapColors=[],this.heatmapBin=(h?h:1)/this.indicatorBins,this.indicatorCenter.match("rainbow")&&i.length>1){for(e=["red","purple","blue","cyan","green","yellow"],this.indicatorCenter=="rainbow-green"&&e.reverse(),u=null,t=0;t<e.length;t++)e[t]==i[0]&&(u=t);if(u==null){alert("Dude! "+i[0]+" ain't a valid color ... This is not looking good ..."),this.heatmapColors=this.blues;return}for(o=[e[u]],u++;o.length<6;)u>5&&(u=0),o.push(e[u]),u++;for(u=null,t=0;t<o.length;t++)o[t]==i[1]&&(u=t);if(u==null){alert("Dude! "+i[1]+" ain't a valid color ... This is not looking good ..."),this.heatmapColors=this.blues;return}for(t=0;t<u;t++)for(r=this.getHeatmapShades(o[t]),s=0;s<f;s++)this.heatmapColors.push(r[s])}else if(i.length>1)if(i[0]=="white"&&i[1]!="black"||i[0]=="black"&&i[1]!="white")this.heatmapType=i[1],this.setHeatmapColors(n);else if(i[1]=="white")if(i[0]=="black")for(this.heatmapColors.push("rgb(0,0,0)"),t=f-1;t>=0;t--)this.heatmapColors.push(r[t]),this.heatmapColors.push(r[t]);else{for(t=0;t<f;t++)this.heatmapColors.push(r[t]),this.heatmapColors.push(r[t]);this.heatmapColors.push("rgb(255,255,255)")}else if(i[1]=="black")if(i[0]=="white")for(this.heatmapColors.push("rgb(255,255,255)"),t=0;t<f;t++)this.heatmapColors.push(r[t]),this.heatmapColors.push(r[t]);else{for(t=0;t<f;t++)this.heatmapColors.push(r[t]),this.heatmapColors.push(r[t]);this.heatmapColors.push("rgb(0,0,0)")}else{for(t=0;t<f;t++)this.heatmapColors.push(r[t]);for(this.indicatorCenter=="black"?this.heatmapColors.push("rgb(0,0,0)"):this.heatmapColors.push("rgb(255,255,255)"),r=this.getHeatmapShades(i[1]),t=f-1;t>=0;t--)this.heatmapColors.push(r[t])}else for(this.indicatorCenter=="black"&&color[0]!="grey"?this.heatmapColors.push("rgb(0,0,0)"):this.heatmapColors.push("rgb(255,255,255)"),t=f-1;t>=0;t--)this.heatmapColors.push(r[t]),this.heatmapColors.push(r[t])},this.initializeAxis=function(){this.graphType.match(/Venn|Network|Video/)||t||(this.setAxes(),this.setHeatmapColors())},this.initializeAxis()},CanvasXpress.prototype.Pie=function(){this.setVarPie=function(){var r=[],t=this.smpIndices[0],i,n,u;for(this.varIndices.length>=this.maxPieSectors-1&&(i=this,this.varIndices.sort(function(n,r){return i.data.y.data[r][t]-i.data.y.data[n][t]})),n=0;n<this.varIndices.length;n++)u=this.varIndices[n],r.push(this.getDataAtPos(u,t));this.varPie=this.setPieData(r,!0)},this.getPieLegendDimensions=function(){this.setLegendFont();var n=this.getFontPt(this.legendFont),t=this.shortenText(this.maxVarNameStr,this.maxVarStringLen),i=this.measureText(t,this.legendFont);i>this.width/2&&(this.legendFont=this.scaleTextToFont(i,n,this.width/2));var r=n+this.measureText(t,this.legendFont)+this.margin*5,u=this.varIndices.length>this.maxPieSectors?this.maxPieSectors:this.varIndices.length,f=u*(n+this.margin)+this.margin*3;return[r,f]},this.setPieXYDimensions=function(){var n=this.getPieLegendDimensions();this.showLegend&&(this.legendPosition=="right"?this.right=this.layoutComb?this.layoutRight:n[0]:this.bottom=this.layoutComb?this.layoutBottom:n[1]),this.x=this.layoutComb?this.layoutWidth:this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.layoutComb?this.layoutHeight:this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.setAxisFont("Pie",this.x)},this.drawPieDataPoints=function(){var n=Math.min(this.x,this.y),t=(n-n/5)/2,i=this.marginLeft+this.offsetX+this.left+this.x/2,r=this.marginTop+this.offsetY+this.top+this.y/2;this.setVarPie(),this.drawPie(this.varPie,i,r,t,!0)},this.drawPieLegend=function(){var o,f,r;if(this.showLegend){var i,u,n=this.getPieLegendDimensions(),t=this.getFontPt(this.legendFont),e=t/2;for(this.legendPosition=="right"?(i=this.layoutComb?this.width-(this.marginRight+n[0])+this.marginLeft+this.left:this.marginLeft+this.left+this.x+this.margin*2+e,u=this.layoutComb?this.layoutTop+this.margin*3+(this.height-(this.layoutTop+this.layoutBottom))/2-n[1]/2:this.marginTop+this.top+(this.y/2-n[1]/2)+this.margin):(i=this.layoutComb?this.layoutLeft+this.margin*3+(this.width-(this.layoutLeft+this.layoutRight))/2-n[0]/2:this.marginLeft+this.left+(this.x/2-n[0]/2)+this.margin,u=this.layoutComb?this.height-(this.marginBottom+n[1])+this.marginTop+this.top:this.marginTop+this.top+this.y+this.margin*2+e),o=i+e+this.margin,f=u,r=0;r<this.varPie.ids.length;r++){var s=this.varPie.ids[r],h=r%this.colors.length,c=s>-1?this.shortenText(this.data.y.vars[s],this.maxVarStringLen):"Other";this.drawShape("square",i,f,t,t,this.colors[h],this.foreground,"closed"),this.drawText(c,o,f,this.legendFont,this.legendColor,"left","middle"),f+=t+this.margin}this.legendBox&&this.rectangle(i-this.margin*2,u-this.margin*2,n[0]-t,n[1]-t,!1,this.legendBoxColor,"open")}},this.drawPiePlot=function(){this.setPieXYDimensions(),this.drawTitle(),this.drawPieDataPoints(),this.drawPieLegend()},this.initializePiePlot=function(){if(this.xAxisMin<0){alert("Dude you can't draw a pie chart with negative numbers!");return}this.layoutValid?this.drawLayoutCompartments(this.drawPiePlot):this.drawPiePlot()},this.initializePiePlot()},CanvasXpress.prototype.Venn=function(){this.setVennXYDimensions=function(){var n;this.vennMarginLeft=0,this.vennMarginTop=0,this.setLegendFont(),this.setAxisFont("Venn",this.width),this.showLegend&&(this.bottom=this.margin+(this.getFontPt(this.legendFont)+this.margin)*this.vennGroups),this.x=this.width<=this.height?this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y=this.vennGroups==4?this.x*.8:this.vennGroups==3?this.x*.95:this.vennGroups==2?this.x*.65:this.x,this.vennMarginTop=(this.height-(this.marginTop+this.top+this.y+this.bottom+this.marginBottom))/2,this.vennMarginLeft=(this.width-(this.marginLeft+this.left+this.x+this.right+this.marginRight))/2,this.x<400&&(n=this.getFontPt(this.axisTickFont)-2,this.x<200&&(n-=1),this.axisTickFont=n+"Pt "+this.fontName),this.resizeCanvas()},this.drawVennBubble=function(n,t,i){this.vennGroups==4?this.isIE&&!this.useFlashIE?(i=i.replace("rgb","rgba"),i=i.replace(")",",0.5)"),this.drawShape("ellipse2",0,0,this.x/1.4,this.x/1.4,i,this.foreground,"closed")):(this.drawShape("ellipse2",0,0,this.x/1.4,this.x/1.4,i,this.foreground,"closed"),this.ctx.globalCompositeOperation="lighter"):this.isIE&&!this.useFlashIE?(i=i.replace("rgb","rgba"),i=i.replace(")",",0.5)"),this.drawShape("circle",n,t,this.x/2,this.x/2,i,this.foreground,"closed")):(this.drawShape("circle",n,t,this.x/2,this.x/2,i,this.foreground,"closed"),this.ctx.globalCompositeOperation="lighter")},this.drawVennLayout=function(){var n,t,r,u,i,f,e;if(this.ctx.clearRect(0,0,this.width,this.height),this.vennGroups==4?(this.ctx.save(),n=this.vennMarginLeft+this.marginLeft+this.margin+this.x/4.94,t=this.vennMarginTop+this.marginTop+this.top+this.x/13,this.ctx.translate(n,t),this.ctx.rotate(Math.PI/4),this.drawVennBubble(0,0,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),n=this.x/22.4,t=this.x/-5.32,this.ctx.translate(n,t),this.drawVennBubble(0,0,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,153,51)"),n=this.x/1.84,t=this.x/-5.32,this.ctx.translate(n,t),this.ctx.rotate(Math.PI/2),n=this.x/-22.4,t=this.x/-5.32,this.ctx.translate(n,t),this.drawVennBubble(0,0,this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)"),n=this.x/22.4,t=this.x/5.32,this.ctx.translate(n,t),this.drawVennBubble(0,0,this.vennColors.length>3&&this.validateColor(this.vennColors[3])?this.validateColor(this.vennColors[3]):"rgb(153,204,0)"),this.ctx.restore(),r=[11.2,3.05,1.46,1.08],u=[7,42,42,7]):this.vennGroups==3?(this.ctx.save(),n=this.vennMarginLeft+this.marginLeft+this.left+this.x/2,t=this.vennMarginTop+this.marginTop+this.top+this.x/2.86,this.drawVennBubble(n,t,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),t+=this.x/3.33,n=this.vennMarginLeft+this.marginLeft+this.left+this.x/3,this.drawVennBubble(n,t,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,255,0)"),n=this.vennMarginLeft+this.marginLeft+this.left+this.x/1.5,this.drawVennBubble(n,t,this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)"),this.ctx.restore(),r=[2,8.66,1.13],u=[20,2.3,2.3]):this.vennGroups==2?(this.ctx.save(),n=this.vennMarginLeft+this.marginLeft+this.left+this.x/3,t=this.vennMarginTop+this.marginTop+this.top+this.x/2.67,this.drawVennBubble(n,t,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(0,0,255)"),n=this.vennMarginLeft+this.marginLeft+this.left+this.x/1.5,t=this.vennMarginTop+this.marginTop+this.top+this.x/2.67,this.drawVennBubble(n,t,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(255,0,0)"),this.ctx.restore(),r=[3,1.5],u=[16,16]):this.vennGroups==1&&(n=this.vennMarginLeft+this.marginLeft+this.left+this.x/2,t=this.vennMarginTop+this.marginTop+this.top+this.x/2,this.drawShape("circle",n,t,this.x,this.x,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)",this.foreground,"closed"),r=[100],u=[100]),!this.vennLegendColors)for(i=0;i<this.vennGroups;i++)f=this.vennMarginLeft+this.marginLeft+this.left+this.x/r[i],e=this.vennMarginTop+this.marginTop+this.top+this.x/u[i],this.drawText(["A","B","C","D"][i],f,e,this.axisTickFont,this.axisTickColor,"center","middle")},this.drawVennDataPoints=function(){var t,i,n;for(this.vennGroups==4?(t=[5.6,2.94,3.5,1.54,3.29,2,2.59,1.212,2,1.442,1.4,1.757,2.31,1.624,2],i=[2.94,7,3.92,7,1.89,4.06,2.66,2.94,1.54,1.89,3.92,1.729,1.729,2.66,2.03],this.y=this.x*1.1/1.4):this.vennGroups==3?(t=[2,3.5,2.55,1.4,1.6,2,2],i=[3.6,1.54,2.07,1.54,2.07,1.54,1.83],this.y=this.x*.95):this.vennGroups==2?(t=[3.5,1.4,2],i=[2.66,2.66,2.66],this.y=this.x*.65):this.vennGroups==1&&(t=[2],i=[2]),n=0;n<t.length;n++){var r=this.vennMarginLeft+this.marginLeft+this.left+this.x/t[n],u=this.vennMarginTop+this.marginTop+this.top+this.x/i[n],f=this.getFontPt(this.axisTickFont),e=this.data.venn.data[this.vennCompartments[n]]?this.data.venn.data[this.vennCompartments[n]]:0;this.drawText(e,r,u,this.axisTickFont,this.axisTickColor,"center","middle"),this.addArea(["circle",r,u,f],[n])}},this.drawVennLegend=function(){var t,i,o;if(this.showLegend){var f=["A","B","C","D"],r=this.getFontPt(this.legendFont),e=this.vennMarginLeft+this.marginLeft+this.left,s=e+r*2,u=this.vennMarginTop+this.marginTop+this.top+this.y+this.margin+r/2,n=[];for(this.vennGroups==4?(n.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),n.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,153,51)"),n.push(this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[3]):"rgb(153,204,0)"),n.push(this.vennColors.length>3&&this.validateColor(this.vennColors[3])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)")):this.vennGroups==3?(n.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),n.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,255,0)"),n.push(this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)")):this.vennGroups==2?(n.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(0,0,255)"),n.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(255,0,0)")):n.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),t=0;t<this.vennGroups;t++)this.vennLegendColors||this.drawText(f[t]+": ",e,u,this.legendFont,this.legendColor,"left","middle"),i=this.data.venn.legend&&this.data.venn.legend[f[t]]?this.data.venn.legend[f[t]]:"N/A",o=this.measureText(i,this.legendFont)>this.x?this.scaleTextToFont(i,r,this.x-this.margin):this.legendFont,this.vennLegendColors?this.drawText(i,e,u,o,n[t],"left","middle"):this.drawText(i,s,u,o,this.legendColor,"left","middle"),u+=this.margin+r}},this.drawVennPlot=function(){this.setVennXYDimensions(),this.drawTitle(),this.showShadow=!1,this.drawVennLayout(),this.showShadow=this.tmpshowShadow,this.drawVennDataPoints(),this.drawVennLegend()},this.initializeVennPlot=function(){this.transparency=null,this.tmpshowShadow=this.showShadow,this.background="rgb(255,255,255)",this.foreground="rgb(0,0,0)",this.drawVennPlot()},this.initializeVennPlot()},CanvasXpress.prototype.Correlation=function(){this.setCorrelationVarSmpLabelFont=function(n){var t=this.scaleTextToSize(n);t=this.correlationAxis=="samples"?t*this.smpLabelScaleFontFactor:t*this.varLabelScaleFontFactor,t=Math.min(t,this.maxTextSize),this.smpLabelFont=t+"Pt "+this.fontName,this.varLabelFont=t+"Pt "+this.fontName},this.getCorrelationLabelsHeight=function(){var n=0;return n+=this.correlationAxis=="samples"?this.maxSmpName>this.maxSmpStringLen?this.measureText(this.maxSmpNameStr.substring(0,this.maxSmpStringLen),this.smpLabelFont):this.measureText(this.maxSmpNameStr,this.smpLabelFont):this.maxVarName>this.maxVarStringLen?this.measureText(this.maxVarNameStr.substring(0,this.maxVarStringLen),this.varLabelFont):this.measureText(this.maxVarNameStr,this.varLabelFont),this.correlationAnchorLegend&&(n+=this.correlationAnchorLegendAlignWidth+this.margin),n},this.setCorrelationXYDimensions=function(){this.corMarginLeft=0,this.corMarginTop=0,this.yAxisShow&&(this.setAxisFont(this.yAxisTitle,this.height),this.left=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.x=this.width<=this.height?this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom);var n=this.correlationAxis=="variables"?this.varIndices.length:this.isGroupedData?this.grpIndices.length:this.smpIndices.length;this.diamondSize=this.x/n,this.setCorrelationVarSmpLabelFont(n),this.y=this.x/2+this.diamondSize/2,this.xAxisShow&&(this.top+=this.margin+this.getCorrelationLabelsHeight()+this.margin),this.autoAdjust?(this.height=this.marginTop+this.top+this.y+this.bottom+this.marginBottom,this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight):(this.corMarginTop=(this.height-(this.marginTop+this.top+this.y+this.bottom+this.marginBottom))/2,this.corMarginLeft=(this.width-(this.marginLeft+this.left+this.x+this.right+this.marginRight))/2),this.resizeCanvas()},this.drawCorrelationLayout=function(){var i,v,e;if(this.yAxisShow&&this.drawText(this.yAxisTitle,this.corMarginLeft+this.marginLeft+this.left/2,this.marginTop+this.top+this.y/2,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2),this.xAxisShow){var n=this.corMarginLeft+this.marginLeft+this.left+this.diamondSize/2,o=this.corMarginTop+this.marginTop+this.top-this.margin,r=this.corMarginTop+this.marginTop+this.top-(this.getCorrelationLabelsHeight()+this.margin),y=r+this.correlationAnchorLegendAlignWidth,t,s,u,h=this.isGroupedData?this.data.w:this.data.y,c=this.correlationAxis=="variables"?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices,p=this.correlationAxis=="samples"?this.maxSmpStringLen:this.maxVarStringLen;for(this.correlationAnchorLegend&&(u=this.correlationAxis=="samples"?h.data[0]:this.getDataForSmpGrpAtIndex(0),c.sort(function(n,t){return u[n]-u[t]}),this.setAxisUnits("xAxis")),this.correlationAxis=="samples"?(t=h.smps,s=this.smpLabelFont):(t=h.vars,s=this.varLabelFont),i=0;i<c.length;i++){var f=c[i],w=this.shortenText(t[f],p),l=this.correlationAxis=="samples"?this.getSmpColor(t[f]):this.getVarColor(t[f]),a=i/this.correlationLabelInterval;parseInt(a)==parseFloat(a)&&this.drawText(w,n,o,s,l,"left","middle",-Math.PI/2),this.correlationAnchorLegend&&(v=u[f],e=this.corMarginLeft+this.marginLeft+this.left+(v-this.xAxisMin)*this.xAxisUnit,this.drawLine("line",e,r-this.margin,e,r,l),this.drawLine("line",e,r,n,y,l)),n+=this.diamondSize}}n=this.corMarginLeft+this.marginLeft+this.left+this.x/3-this.heatmapColors.length*this.indicatorWidth,o=this.corMarginTop+this.marginTop+this.top+this.y*7/8,this.correlationAnchorLegend&&this.setRangeData("cor"),(this.minData==null||this.maxData==null)&&this.setRangeData("cor"),this.drawColorIndicator(n,o,this.minData,this.maxData,2)},this.drawCorrelationDataPoints=function(){var u,e,r,i,n=this.diamondSize/2,y=this.isGroupedData?this.data.w.cor:this.data.y.cor,f=this.correlationAxis=="variables"?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices,l,s,a,t;for(u=this.corMarginLeft+this.marginLeft+this.left+n,e=this.corMarginTop+this.marginTop+this.top+n,t=0;t<Math.ceil(f.length/2);t++){for(l=f[t],r=u+this.diamondSize*t,i=e,s=t;s<f.length-t;s++){var o=f[s],h=y[l][o],c=this.getHeatmapColor(this.minData,this.maxData,h);isNaN(h)?this.addArea(this.drawShape("diamond",r,i,this.diamondSize,this.diamondSize,this.missingDataColor,this.missingDataColor,"closed"),[l,o]):this.addArea(this.drawShape("diamond",r,i,this.diamondSize,this.diamondSize,c,c,"closed"),[l,o]),r+=n,i+=n}for(i-=this.diamondSize,a=s-2;a>=t;a--){var v=f[f.length-a-1],h=y[v][o],c=this.getHeatmapColor(this.minData,this.maxData,h);isNaN(h)?this.addArea(this.drawShape("diamond",r,i,this.diamondSize,this.diamondSize,this.missingDataColor,this.missingDataColor,"closed"),[v,o]):this.addArea(this.drawShape("diamond",r,i,this.diamondSize,this.diamondSize,c,c,"closed"),[v,o]),r+=n,i-=n}}for(this.drawLine("line",this.corMarginLeft+this.marginLeft+this.left,this.corMarginTop+this.marginTop+this.top+n,this.corMarginLeft+this.marginLeft+this.left+this.x/2,this.corMarginTop+this.marginTop+this.top+this.y,this.foreground,!1,"butt"),this.drawLine("line",this.corMarginLeft+this.marginLeft+this.left+this.x,this.corMarginTop+this.marginTop+this.top+n,this.corMarginLeft+this.marginLeft+this.left+this.x/2,this.corMarginTop+this.marginTop+this.top+this.y,this.foreground,!1,"butt"),u=this.corMarginLeft+this.marginLeft+this.left+n,e=this.corMarginTop+this.marginTop+this.top,r=u+this.x/2,i=this.corMarginTop+this.marginTop+this.top+this.y-n,t=0;t<f.length;t++)this.drawLine("line",u,e,r,i,this.foreground,!1,"butt"),u+=this.diamondSize,r+=n,i-=n;for(u=this.corMarginLeft+this.marginLeft+this.left+this.x-n,e=this.corMarginTop+this.marginTop+this.top,r=this.corMarginLeft+this.marginLeft+this.left+this.x/2-n,i=this.corMarginTop+this.marginTop+this.top+this.y-n,t=0;t<f.length;t++)this.drawLine("line",u,e,r,i,this.foreground,!1,"butt"),u-=this.diamondSize,r-=n,i-=n},this.drawCorrelationPlot=function(){this.setCorrelationXYDimensions(),this.drawCorrelationLayout(),this.drawTitle(),this.drawCorrelationDataPoints()},this.initializeCorrelationPlot=function(){this.drawCorrelationPlot()},this.initializeCorrelationPlot()},CanvasXpress.prototype.Scatter2D=function(n){this.get2DYAxisWidth=function(){return this.allVsAll?this.yAxisShow?this.measureText(this.yAxisMaxStrLength,this.axisTickFont)+this.margin*3:this.margin:this.yAxisShow?this.getFontPt(this.axisTitleFont)+this.measureText(this.yAxisMaxStrLength,this.axisTickFont)+this.margin*5:this.margin},this.get2DXAxisHeight=function(){return this.allVsAll?this.xAxisShow?this.getFontPt(this.axisTitleFont)+this.margin*5:this.margin:this.xAxisShow?this.getFontPt(this.axisTickFont)+this.getFontPt(this.axisTitleFont)+this.margin*5:this.margin},this.set2DType=function(){this.type2D=this.isValidKaplanMeier()?"KM":this.graphType=="ScatterBubble2D"&&this.xAxisIndices.length>1&&this.xAxisIndices.length==this.yAxisIndices.length&&this.xAxisIndices.length==this.zAxisIndices.length?"XYZ":this.xAxisIndices.length>1&&this.xAxisIndices.length==this.yAxisIndices.length?"XY":this.xAxisIndices.length>this.yAxisIndices.length?"X":"Y"},this.set2DText=function(){var n=this.xAxisTitle.length>this.yAxisTitle.length?this.xAxisTitle:this.yAxisTitle,t=this.layoutComb?Math.min(this.layoutWidth,this.layoutHeight):Math.min(this.width,this.height);this.setAxisFont(n,t)},this.setDecorationsLegendPositions=function(){this.showDecorations&&(this.setDecorationLegendDimension(),this.showLegend&&(this.decorationsPosition=this.legendPosition=="bottom"?"right":"bottom"))},this.reRangeData=function(){this.xAxis=[];for(var n=0;n<this.data.d.kaplanMeier.length;n++)this.xAxis.push(this.data.d.kaplanMeier[n].time),this.xAxisTitle=this.data.d.kaplanMeier[n].time;this.yAxisTitle="Probability of Survival",this.setAxes("km")},this.set2DXYDimensions=function(){this.setDecorationsLegendPositions(),this.setLegendDimensions(),this.right=0,(this.showLegend||this.showIndicators)&&(this.right=this.legendWidth),this.showDecorations&&this.decorationsPosition=="right"&&(this.right+=this.legendDecorationWidth+this.margin*2),this.right+=this.graphType=="ScatterBubble2D"&&this.zAxisShow?this.getFontPt(this.axisTitleFont)+this.margin:this.margin,this.left=this.get2DYAxisWidth(),this.bottom=this.get2DXAxisHeight(),(this.showLegend||this.showIndicators)&&(this.bottom+=this.legendHeight),this.showDecorations&&this.decorationsPosition=="bottom"&&(this.bottom+=this.legendDecorationHeight+this.margin*2),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.setScatterPointSize(),this.isValidKaplanMeier()&&this.reRangeData(),this.setAxisUnits("xAxis"),this.setAxisUnits("yAxis")},this.set2DWireFrame=function(){var t,i,f,e,u,r,n;if(t=this.marginLeft+this.offsetX+this.left,f=t+this.x,u=this.yAxisTickStyle=="dotted"?"dottedLine":"line",this.yAxisMinorTicks)for(n=0;n<this.yAxisMinorValues.length;n++)r=parseFloat(this.yAxisMinorValues[n]),i=this.marginTop+this.offsetY+this.top+this.y-(r-this.yAxisMin)*this.yAxisUnit,this.drawLine(u,t,i,f,i,this.yAxisTickColor,this.outlineWidth/3,"butt");for(n=0;n<this.yAxisValues.length;n++)r=parseFloat(this.yAxisValues[n]),i=this.marginTop+this.offsetY+this.top+this.y-(r-this.yAxisMin)*this.yAxisUnit,this.drawLine(u,t,i,f,i,this.yAxisTickColor,!1,"butt");if(i=this.marginTop+this.offsetY+this.top,e=i+this.y,u=this.xAxisTickStyle=="dotted"?"dottedLine":"line",this.xAxisMinorTicks)for(n=0;n<this.xAxisMinorValues.length;n++)r=parseFloat(this.xAxisMinorValues[n]),t=this.marginLeft+this.offsetX+this.left+(r-this.xAxisMin)*this.xAxisUnit,this.drawLine(u,t,i,t,e,this.xAxisTickColor,this.outlineWidth/3,"butt");for(n=0;n<this.xAxisValues.length;n++)r=parseFloat(this.xAxisValues[n]),t=this.marginLeft+this.offsetX+this.left+(r-this.xAxisMin)*this.xAxisUnit,this.drawLine(u,t,i,t,e,this.xAxisTickColor,!1,"butt")},this.set2DLayout=function(){var n=this.marginLeft+this.offsetX+this.margin+this.getFontPt(this.axisTitleFont)/2,t=this.marginTop+this.offsetY+this.top+this.y/2,i,r,u;for(this.yAxisShow&&!this.allVsAll&&this.drawText(this.yAxisTitle,n,t,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2,!1,!1,!0),n=this.marginLeft+this.offsetX+this.left-this.margin,i=0;i<this.yAxisValues.length-1;i++)r=parseFloat(this.yAxisValues[i]),u=this.yAxisTransform&&!this.yAxisTransformTicks?this.formatAxisValue(this.transformValue(this.yAxisTransform,r,!0),"yAxis"):this.formatAxisValue(r,"yAxis"),t=this.marginTop+this.offsetY+this.top+this.y-(r-this.yAxisMin)*this.yAxisUnit,this.yAxisShow&&this.drawText(u,n,t,this.axisTickFont,this.axisTickColor,"right","middle");for(n=this.marginLeft+this.offsetX+this.left+this.x/2,t=this.marginTop+this.offsetY+this.top+this.y+this.margin+this.margin+this.getFontPt(this.axisTickFont)+this.margin+this.margin+this.getFontPt(this.axisTitleFont)/2,this.xAxisShow&&!this.allVsAll&&this.drawText(this.xAxisTitle,n,t,this.axisTitleFont,this.axisTitleColor,"center","middle",!1,!1,!1,!0),t=this.marginTop+this.offsetY+this.top+this.y+this.margin+this.margin+this.getFontPt(this.axisTickFont)/2,i=0;i<this.xAxisValues.length-1;i++)r=parseFloat(this.xAxisValues[i]),u=this.xAxisTransform&&!this.xAxisTransformTicks?this.formatAxisValue(this.transformValue(this.xAxisTransform,r,!0),"xAxis"):this.formatAxisValue(r,"xAxis"),n=this.marginLeft+this.offsetX+this.left+(r-this.xAxisMin)*this.xAxisUnit,this.xAxisShow&&this.drawText(u,n,t,this.axisTickFont,this.axisTickColor,"center","middle");this.graphType=="ScatterBubble2D"&&this.zAxisShow&&(n=this.marginLeft+this.offsetX+this.left+this.x+this.margin,t=this.marginTop+this.offsetY+this.top+this.y/2,this.drawText(this.zAxisTitle,n,t,this.axisTitleFont,this.axisTitleColor,"center","bottom",Math.PI/2,!1,!1,!0)),this.rectangle(this.marginLeft+this.offsetX+this.left,this.marginTop+this.offsetY+this.top,this.x,this.y,!1,this.foreground,"open")},this.draw2DDataPoints=function(){var t,n,o,e,tt,it,rt,ut,ft,et,ot,ct,lt,v=[],y=[],at=!1,c,ht,h,r;if(this.type2D!="KM")if(this.type2D=="XYZ"){var p=this.xAxisIndices[this.xAxisCurrent],w=this.yAxisIndices[this.yAxisCurrent],vt=this.zAxisIndices[this.zAxisCurrent],s=p+":"+w;for(this.xAxisTransform=="percentile"&&(tt=this.getAxisRangeBySample(this.xAxisIndices),rt=tt[0],it=tt[1]),this.yAxisTransform=="percentile"&&(ut=this.getAxisRangeBySample(this.yAxisIndices),et=ut[0],ft=ut[1]),ot=this.getAxisRangeBySample(this.zAxisIndices),lt=ot[0],ct=ot[1],r=0;r<this.varIndices.length;r++){var i=this.varIndices[r],b=this.getDataAtPos(i,p,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,w,!1,this.yAxisTransform,et,ft),yt=this.getDataAtPos(i,vt,!1,"percentile",lt,ct),d=this.getDataAtPos(i,p,"stdev"),g=this.getDataAtPos(i,w,"stdev"),u=this.sizeBy?this.dataSizes[r]:this.sizes[Math.floor(yt/10)+1],f=this.colorBy?this.dataColors[r]:this.colors[0],st=this.shapeBy?this.dataShapes[r]:this.shapes[0],a=this.scatterType&&this.scatterType.match(/image/i)?this.images[r]:!1,nt=a?"image":st;t=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,n=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.isVisibleSelectedDataPoint(i,s)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(i,s,st,t,n,u,u,!1,!0),d&&!isNaN(d)&&(o=d/2*this.xAxisUnit,this.errorBar(t,n,t+o,n,this.margin,f),this.errorBar(t,n,t-o,n,this.margin,f)),g&&!isNaN(g)&&(e=g/2*this.yAxisUnit,this.errorBar(t,n,t,n+e,-this.margin,f),this.errorBar(t,n,t,n-e,-this.margin,f)),this.addArea(this.drawShape(nt,t,n,u,u,f,this.foreground,"closed",!1,!1,!0,!1,!1,!1,a),[i,p,w,vt]),this.drawSelectedBackgroundLabel(i,s,t,n)),this.scatterType&&this.scatterType.match(/line|functio/i)&&r<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[r+1],s)&&(i=this.varIndices[r+1],b=this.getDataAtPos(i,p,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,w,!1,this.yAxisTransform,et,ft),o=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.scatterType=="lineStep"?(this.drawLine("line",t,n,o,n,this.colors[0]),this.drawLine("line",o,n,o,e,this.colors[0])):this.lineType=="spline"?(v.push(t),y.push(n)):this.drawLine("line",t,n,o,e,this.colors[0])))}this.scatterType&&this.scatterType.match(/line|functio/i)&&this.lineType=="spline"&&(v.push(o),y.push(e),this.drawLine("spline",v,y,!1,!1,this.colors[0]),v=[],y=[])}else if(this.type2D=="XY")for(h=0;h<this.xAxisIndices.length;h++){var f=h%this.colors.length,p=this.xAxisIndices[h],w=this.yAxisIndices[h],vt,s=p+":"+w;for(this.xAxisTransform=="percentile"&&(tt=this.getAxisRangeBySample(p),rt=tt[0],it=tt[1]),this.yAxisTransform=="percentile"&&(ut=this.getAxisRangeBySample(w),et=ut[0],ft=ut[1]),this.graphType!="ScatterBubble2D"||this.sizeBy||this.zAxisIndices[this.zAxisCurrent]&&(vt=this.zAxisIndices[this.zAxisCurrent],ot=this.getAxisRangeBySample(vt),lt=ot[0],ct=ot[1]),r=0;r<this.varIndices.length;r++){var i=this.varIndices[r],b=this.getDataAtPos(i,p,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,w,!1,this.yAxisTransform,et,ft),yt,d=this.getDataAtPos(i,p,"stdev"),g=this.getDataAtPos(i,w,"stdev"),st=this.shapeBy?this.dataShapes[r]:this.shapes[0],u=this.scatterPointSize,a=this.scatterType&&this.scatterType.match(/image/i)?this.images[r]:!1,nt=a?"image":st;this.sizeBy?u=this.dataSizes[r]:this.graphType=="ScatterBubble2D"&&this.zAxisIndices[h]&&(yt=this.getDataAtPos(i,vt,!1,"percentile",lt,ct),u=this.sizes[Math.floor(yt/10)+1]),t=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,n=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.isHistogram?(e=this.marginTop+this.offsetY+this.top+this.y-n,this.isVisibleSelectedDataPoint(i,s)&&(this.drawSelectedBackground(i,s,"rectangle",t-this.histogramBarWidth,n-this.histogramBarWidth,this.histogramBarWidth*2,e,!1,!0),this.addArea(this.rectangle(t-this.histogramBarWidth,n,this.histogramBarWidth*2,e,this.colors[f],!1,"closed",!1,!1,!0),[i,p,w]),this.drawSelectedBackgroundLabel(i,s,t,n))):this.isVisibleSelectedDataPoint(i,s)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(i,s,st,t,n,u,u,!1,!0),d&&!isNaN(d)&&(o=d/2*this.xAxisUnit,this.errorBar(t,n,t+o,n,this.margin,this.colorBy?this.dataColors[r]:this.colors[f]),this.errorBar(t,n,t-o,n,this.margin,this.colorBy?this.dataColors[r]:this.colors[f])),g&&!isNaN(g)&&(e=g/2*this.yAxisUnit,this.errorBar(t,n,t,n+e,-this.margin,this.colorBy?this.dataColors[r]:this.colors[f]),this.errorBar(t,n,t,n-e,-this.margin,this.colorBy?this.dataColors[r]:this.colors[f])),this.graphType=="ScatterBubble2D"?this.colorBy?this.addArea(this.drawShape(nt,t,n,u,u,this.dataColors[r],this.colors[f],"closed",!1,!1,!0,!1,!1,!1,a),[i,p,w,vt]):this.addArea(this.drawShape(nt,t,n,u,u,this.colors[f],this.foreground,"closed",!1,!1,!0,!1,!1,!1,a),[i,p,w,vt]):this.colorBy?this.addArea(this.drawShape(nt,t,n,u,u,this.dataColors[r],this.colors[f],"closed",!1,!1,!0,!1,!1,!1,a),[i,p,w]):this.addArea(this.drawShape(nt,t,n,u,u,this.colors[f],this.foreground,"closed",!1,!1,!0,!1,!1,!1,a),[i,p,w]),this.drawSelectedBackgroundLabel(i,s,t,n)),this.scatterType&&this.scatterType.match(/line|functio/i)&&r<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[r+1],s)&&(i=this.varIndices[r+1],at=!0),at&&(b=this.getDataAtPos(i,p,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,w,!1,this.yAxisTransform,et,ft),o=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.scatterType=="lineStep"?(this.drawLine("line",t,n,o,n,this.colors[0]),this.drawLine("line",o,n,o,e,this.colors[0])):this.lineType=="spline"?(v.push(t),y.push(n)):this.drawLine("line",t,n,o,e,this.colors[f]),at=!1))}this.scatterType&&this.scatterType.match(/line|functio/i)&&this.lineType=="spline"&&(v.push(o),y.push(e),this.drawLine("spline",v,y,!1,!1,this.colors[f]),v=[],y=[])}else if(this.type2D=="X")for(c=this.yAxisIndices[this.yAxisCurrent],this.yAxisTransform=="percentile"&&(ut=this.getAxisRangeBySample(c),et=ut[0],ft=ut[1]),this.graphType!="ScatterBubble2D"||this.sizeBy||this.zAxisIndices[this.zAxisCurrent]&&(ht=this.zAxisIndices[this.zAxisCurrent],ot=this.getAxisRangeBySample(ht),lt=ot[0],ct=ot[1]),h=0;h<this.xAxisIndices.length;h++){var f=h%this.colors.length,l=this.xAxisIndices[h],s=l+":"+c;for(this.xAxisTransform=="percentile"&&(tt=this.getAxisRangeBySample(l),rt=tt[0],it=tt[1]),r=0;r<this.varIndices.length;r++){var i=this.varIndices[r],b=this.getDataAtPos(i,l,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,c,!1,this.yAxisTransform,et,ft),d=this.getDataAtPos(i,l,"stdev"),g=this.getDataAtPos(i,c,"stdev"),yt,u=this.scatterPointSize,st=this.shapeBy?this.dataShapes[r]:this.shapes[0],a=this.scatterType&&this.scatterType.match(/image/i)?this.images[r]:!1,nt=a?"image":st;this.sizeBy?u=this.dataSizes[r]:this.graphType=="ScatterBubble2D"&&this.zAxisIndices[this.zAxisCurrent]&&(yt=this.getDataAtPos(i,ht,!1,"percentile",lt,ct),u=this.sizes[Math.floor(yt/10)+1]),t=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,n=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.isHistogram?(e=this.marginTop+this.offsetY+this.top+this.y-n,this.isVisibleSelectedDataPoint(i,s)&&(this.drawSelectedBackground(i,s,"rectangle",t-this.histogramBarWidth,n-this.histogramBarWidth,this.histogramBarWidth*2,e,!1,!0),this.addArea(this.rectangle(t-this.histogramBarWidth,n,this.histogramBarWidth*2,e,this.colors[f],!1,"closed",!1,!1,!0),[i,l,c]),this.drawSelectedBackgroundLabel(i,s,t,n))):this.isVisibleSelectedDataPoint(i,s)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(i,s,st,t,n,u,u,!1,!0),d&&!isNaN(d)&&(o=d/2*this.xAxisUnit,this.errorBar(t,n,t+o,n,this.margin,this.colorBy?this.dataColors[r]:this.colors[f]),this.errorBar(t,n,t-o,n,this.margin,this.colorBy?this.dataColors[r]:this.colors[f])),g&&!isNaN(g)&&(e=g/2*this.yAxisUnit,this.errorBar(t,n,t,n+e,-this.margin,this.colorBy?this.dataColors[r]:this.colors[f]),this.errorBar(t,n,t,n-e,-this.margin,this.colorBy?this.dataColors[r]:this.colors[f])),this.graphType=="ScatterBubble2D"?this.colorBy?this.addArea(this.drawShape(nt,t,n,u,u,this.dataColors[r],this.colors[f],"closed",!1,!1,!0,!1,!1,!1,a),[i,l,c,ht]):this.addArea(this.drawShape(nt,t,n,u,u,this.colors[f],this.foreground,"closed",!1,!1,!0,!1,!1,!1,a),[i,l,c,ht]):this.colorBy?this.addArea(this.drawShape(nt,t,n,u,u,this.dataColors[r],this.colors[f],"closed",!1,!1,!0,!1,!1,!1,a),[i,l,c]):this.addArea(this.drawShape(nt,t,n,u,u,this.colors[f],this.foreground,"closed",!1,!1,!0,!1,!1,!1,a),[i,l,c]),this.drawSelectedBackgroundLabel(i,s,t,n)),this.scatterType&&this.scatterType.match(/line|functio/i)&&r<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[r+1],s)&&(i=this.varIndices[r+1],at=!0),at&&(b=this.getDataAtPos(i,l,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,c,!1,this.yAxisTransform,et,ft),o=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.scatterType=="lineStep"?(this.drawLine("line",t,n,o,n,this.colors[0]),this.drawLine("line",o,n,o,e,this.colors[0])):this.lineType=="spline"?(v.push(t),y.push(n)):this.drawLine("line",t,n,o,e,this.colors[f])))}this.scatterType&&this.scatterType.match(/line|functio/i)&&this.lineType=="spline"&&(v.push(o),y.push(e),this.drawLine("spline",v,y,!1,!1,this.colors[f]),v=[],y=[])}else for(c=this.xAxisIndices[this.xAxisCurrent],this.xAxisTransform=="percentile"&&(tt=this.getAxisRangeBySample(c),rt=tt[0],it=tt[1]),this.graphType!="ScatterBubble2D"||this.sizeBy||this.zAxisIndices[this.zAxisCurrent]&&(ht=this.zAxisIndices[this.zAxisCurrent],ot=this.getAxisRangeBySample(ht),lt=ot[0],ct=ot[1]),h=0;h<this.yAxisIndices.length;h++){var f=this.colors[h%this.colors.length],l=this.yAxisIndices[h],s=c+":"+l;for(this.yAxisTransform=="percentile"&&(ut=this.getAxisRangeBySample(l),et=ut[0],ft=ut[1]),r=0;r<this.varIndices.length;r++){var i=this.varIndices[r],b=this.getDataAtPos(i,c,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,l,!1,this.yAxisTransform,et,ft),yt,d=this.getDataAtPos(i,c,"stdev"),g=this.getDataAtPos(i,l,"stdev"),st=this.shapeBy?this.dataShapes[r]:this.shapes[0],u=this.scatterPointSize,a=this.scatterType&&this.scatterType.match(/image/i)?this.images[r]:!1,nt=a?"image":st;this.colorBy&&(f=this.dataColors[r]),this.sizeBy?u=this.dataSizes[r]:this.graphType=="ScatterBubble2D"&&this.zAxisIndices[this.yAxisCurrent]&&(yt=this.getDataAtPos(i,ht,!1,"percentile",lt,ct),u=this.sizes[Math.floor(yt/10)+1]),t=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,n=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.isHistogram?(e=this.marginTop+this.offsetY+this.top+this.y-n,this.isVisibleSelectedDataPoint(i,s)&&(this.drawSelectedBackground(i,s,"rectangle",t-this.histogramBarWidth,n-this.histogramBarWidth,this.histogramBarWidth*2,e,!1,!0),this.addArea(this.rectangle(t-this.histogramBarWidth,n,this.histogramBarWidth*2,e,f,!1,"closed",!1,!1,!0),[i,c,l]),this.drawSelectedBackgroundLabel(i,s,t,n))):this.isVisibleSelectedDataPoint(i,s)&&(this.scatterType&&this.scatterType.match(/functio|lineStep/)||(this.drawSelectedBackground(i,s,st,t,n,u,u,!1,!0),d&&!isNaN(d)&&(o=d/2*this.xAxisUnit,this.errorBar(t,n,t+o,n,this.margin,f),this.errorBar(t,n,t-o,n,this.margin,f)),g&&!isNaN(g)&&(e=g/2*this.yAxisUnit,this.errorBar(t,n,t,n+e,-this.margin,f),this.errorBar(t,n,t,n-e,-this.margin,f)),this.graphType=="ScatterBubble2D"?this.addArea(this.drawShape(nt,t,n,u,u,f,this.foreground,"closed",!1,!1,!0,!1,!1,!1,a),[i,c,l,ht]):this.addArea(this.drawShape(nt,t,n,u,u,f,this.foreground,"closed",!1,!1,!0,!1,!1,!1,a),[i,c,l]),this.drawSelectedBackgroundLabel(i,s,t,n)),this.scatterType&&this.scatterType.match(/line|functio/i)&&r<this.varIndices.length-1&&this.isVisibleSelectedDataPoint(this.varIndices[r+1],s)&&(i=this.varIndices[r+1],at=!0),at&&(b=this.getDataAtPos(i,c,!1,this.xAxisTransform,rt,it),k=this.getDataAtPos(i,l,!1,this.yAxisTransform,et,ft),o=this.marginLeft+this.offsetX+this.left+(b-this.xAxisMin)*this.xAxisUnit,e=this.marginTop+this.offsetY+this.top+this.y-(k-this.yAxisMin)*this.yAxisUnit,this.scatterType=="lineStep"?(this.drawLine("line",t,n,o,n,this.colors[0]),this.drawLine("line",o,n,o,e,this.colors[0])):this.lineType=="spline"?(v.push(t),y.push(n)):this.drawLine("line",t,n,o,e,this.colors[h%this.colors.length])))}this.scatterType&&this.scatterType.match(/line|functio/i)&&this.lineType=="spline"&&(v.push(o),y.push(e),this.drawLine("spline",v,y,!1,!1,this.colors[h%this.colors.length]),v=[],y=[])}},this.draw2DLegend=function(){this.showLegend&&this.drawScatterLegend(),this.showDecorations&&this.drawDecorationLegend()},this.set2DprivateParams=function(){this.set2DType(),this.set2DText()},this.isValidKaplanMeier=function(){return this.data.d&&this.data.d.kaplanMeier?!0:!1},this.draw2DPlot=function(){this.xAxis&&this.yAxis&&this.setDataColorShapeSize(),this.set2DprivateParams(),this.set2DXYDimensions(),this.xAxis&&this.yAxis&&(this.drawPlotWindow(),this.set2DWireFrame(),this.draw2DDataPoints(),this.maskPlotArea(),this.set2DLayout(),this.drawTitle(),this.drawDecorationData(),this.draw2DLegend())},this.initializeScatter2D=function(){this.scatterSeries=="x"&&(this.transpose(!1,!0),this.scatterSeries="y"),this.layoutValid&&this.allVsAll?this.drawLayoutCompartments(this.draw2DPlot):(this.allVsAll||this.unsetAllVsAll(),this.draw2DPlot())},n||this.initializeScatter2D()},CanvasXpress.prototype.Scatter3D=function(n){this.set3DText=function(){this.setAxisFont(!1,this.x)},this.equalizeMargins=function(){var n=Math.max(this.marginLeft,Math.max(this.marginRight,Math.max(this.marginTop,this.marginBottom)));this.marginLeft=n,this.marginRight=n,this.marginTop=n,this.marginBottom=n},this.set3DXYDimensions=function(){var n;this.equalizeMargins(),this.tmpHeight&&(this.height=this.tmpHeight),this.tmpWidth&&(this.width=this.tmpWidth),n=Math.min(this.height,this.width)-40,this.tmpHeight=this.height,this.tmpWidth=this.width,this.height=n,this.width=n,this.x=this.width-(this.marginTop+this.top),this.y=this.height-(this.marginTop+this.top),this.left=this.top,(this.showLegend||this.showIndicators)&&(this.setLegendDimensions(),n=Math.max(this.legendWidth,this.legendHeight)/2,this.x-=n,this.y-=n,this.width=this.x+this.legendWidth+this.marginLeft+this.marginRight,this.height=this.y+this.legendHeight+this.marginTop+this.marginBottom),this.resizeCanvas(),this.resizeViewport(),this.setScatterPointSize()},this.draw3DLayout=function(n,t,i,r,u,f,e,o){for(var c,l,a,v,h,y=this.marginLeft+this.offsetX+this.left,p=this.marginTop+this.offsetY+this.top,s=0;s<n.length;s++)h=this.get3DTransfrom(n[s],t[s],i[s]),c=h[0]+y,l=h[1]+p,h=this.get3DTransfrom(r[s],u[s],f[s]),a=h[0]+y,v=h[1]+p,o=="dotted"?this.drawLine("dottedLine",c,l,a,v,e[s],!1,"butt"):this.drawLine("line",c,l,a,v,e[s],!1,"butt")},this.draw3DBar=function(n,t,i,r,u,f){for(var y=this.marginLeft+this.offsetX+this.left,p=this.marginTop+this.offsetY+this.top,ut=y+this.x/2,ft=p+this.y/2,h=r/2,l=[[[n-r,t,i-r],[n+r,t,i-r],[n+r,h,i-r],[n-r,h,i-r]],[[n+r,t,i-r],[n+r,t,i+r],[n+r,h,i+r],[n+r,h,i-r]],[[n-r,t,i+r],[n+r,t,i+r],[n+r,h,i+r],[n-r,h,i+r]],[[n-r,t,i-r],[n-r,t,i+r],[n-r,h,i+r],[n-r,h,i-r]],[[n-r,t,i-r],[n+r,t,i-r],[n+r,t,i+r],[n-r,t,i+r]]],o=[],a=[],v=[],c,s,e=0;e<l.length;e++){for(o[e]=[],s=0;s<l[e].length;s++){var k=this.xAxisMin<0?0:this.xAxisMin,d=this.yAxisMin<0?0:this.yAxisMin,g=this.zAxisMin<0?0:this.zAxisMin,nt=(l[e][s][0]-k)*this.xAxisUnit-this.xAxisOffset,tt=this.yAxisOffset-(l[e][s][1]-d)*this.yAxisUnit,it=(l[e][s][2]-g)*this.zAxisUnit-this.zAxisOffset;o[e].push(this.get3DTransfrom(nt,tt,it))}v.push(e),a.push(this.euclidianDistance([(o[e][0][0]+o[e][2][0])/2,(o[e][0][1]+o[e][2][1])/2,(o[e][0][2]+o[e][2][2])/2],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]))}for(v.sort(function(n,t){return a[t]-a[n]}),c=1;c<o.length;c++){var e=v[c],rt=c<3?this.darkenLightenColor(u,-c*30):u,w=[],b=[];for(s=0;s<o[e].length;s++)w.push(o[e][s][0]+y),b.push(o[e][s][1]+p);this.addArea(this.drawShape("polygon",w,b,!1,!1,rt,this.foreground,"closed"),f)}},this.set3DXLayout=function(){var r=[],u=[],f=[],e=[],o=[],s=[],h=[],c,n,t,l,a,y,p,w,i=this.lenX/15,v=15*-i+i,b=this.xAxisTitle?this.xAxisTitle:this.is3DPlot?"Samples":this.data.y.smps[this.xAxisIndex],k=this.marginLeft+this.offsetX+this.left,d=this.marginTop+this.offsetY+this.top;if(this.show3DGrid){for(t=v,c=0,n=0;t<this.lenX;)(c+1)%3&&(this.is3DPlot||(r[n]=t,u[n]=-this.lenY,f[n]=this.lenZ,e[n]=t,o[n]=this.lenY,s[n]=this.lenZ,h.push(this.xAxisTickColor),n++),r[n]=-this.lenX,u[n]=t*this.lenY/this.lenX,f[n]=this.lenZ,e[n]=this.lenX,o[n]=t*this.lenY/this.lenX,s[n]=this.lenZ,h.push(this.xAxisTickColor),n++),t+=i,c++;for(this.draw3DLayout(r,u,f,e,o,s,h,this.xAxisTickStyle),r=[],u=[],f=[],e=[],o=[],s=[],h=[],t=v,c=0,n=0,a=this.xAxisIncr;t<this.lenX;)(c+1)%3||(this.is3DPlot||(r[n]=t,u[n]=-this.lenY,f[n]=this.lenZ,e[n]=t,o[n]=this.lenY,s[n]=this.lenZ,h.push(this.foreground),n++),r[n]=-this.lenX,u[n]=t*this.lenY/this.lenX,f[n]=this.lenZ,e[n]=this.lenX,o[n]=t*this.lenY/this.lenX,s[n]=this.lenZ,h.push(this.foreground),l=this.get3DTransfrom(t,this.lenY,-this.lenZ),p=l[0]+k,w=l[1]+d,y=this.formatAxisValue(this.xAxisMin+a,"xAxis"),a+=this.xAxisIncr,this.xAxisShow&&!this.is3DPlot&&this.drawText(y,p,w+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2),n++),t+=i,c++;this.draw3DLayout(r,u,f,e,o,s,h,this.xAxisTickStyle)}this.xAxisShow&&!this.is3DPlot&&this.draw3DAxisTitle(v-i*2,this.lenX+i,this.lenY+i*4,this.lenY+i*4,-this.lenZ-i*4,-this.lenZ-i*4,b,"x"),r=[-this.lenX,-this.lenX,this.lenX,-this.lenX],u=[-this.lenY,-this.lenY,-this.lenY,this.lenY],f=[this.lenZ,this.lenZ,this.lenZ,this.lenZ],e=[-this.lenX,this.lenX,this.lenX,this.lenX],o=[this.lenY,-this.lenY,this.lenY,this.lenY],s=[this.lenZ,this.lenZ,this.lenZ,this.lenZ],h=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(r,u,f,e,o,s,h,this.xAxisTickStyle)},this.set3DYLayout=function(){var r=[],u=[],f=[],e=[],o=[],s=[],h=[],c,n,t,l,a,v,y,p,i=this.lenY/15,g=this.yAxisLen/30,w=15*-i+i,b=this.yAxisTitle?this.yAxisTitle:this.is3DPlot?"Value":this.data.y.smps[this.yAxisIndex],k=this.marginLeft+this.offsetX+this.left,d=this.marginTop+this.offsetY+this.top;if(this.show3DGrid){for(t=w,c=0,n=0;t<this.lenY;)(c+1)%3&&(this.is3DPlot||(r[n]=-this.lenX,u[n]=-this.lenY,f[n]=t*this.lenZ/this.lenY,e[n]=-this.lenX,o[n]=this.lenY,s[n]=t*this.lenZ/this.lenY,h.push(this.yAxisTickColor),n++),r[n]=-this.lenX,u[n]=t,f[n]=-this.lenZ,e[n]=-this.lenX,o[n]=t,s[n]=this.lenZ,h.push(this.yAxisTickColor),n++),t+=i,c++;for(this.draw3DLayout(r,u,f,e,o,s,h,this.yAxisTickStyle),r=[],u=[],f=[],e=[],o=[],s=[],h=[],t=w,c=0,n=0,a=this.is3DPlot?this.yAxisIncr*this.xAxisTicks*9/10:this.yAxisIncr*9;t<this.lenY;)(c+1)%3||(this.is3DPlot||(r[n]=-this.lenX,u[n]=-this.lenY,f[n]=t*this.lenZ/this.lenY,e[n]=-this.lenX,o[n]=this.lenY,s[n]=t*this.lenZ/this.lenY,h.push(this.foreground),n++),r[n]=-this.lenX,u[n]=t,f[n]=-this.lenZ,e[n]=-this.lenX,o[n]=t,s[n]=this.lenZ,h.push(this.foreground),l=this.get3DTransfrom(-this.lenX,t,-this.lenZ),y=l[0]+k,p=l[1]+d,v=this.formatAxisValue(this.yAxisMin+a,"yAxis"),a-=this.is3DPlot?this.yAxisIncr*this.xAxisTicks/10:this.yAxisIncr,this.yAxisShow&&(this.yRotate>=45&&this.xRotate>=45?this.drawText(v,y,p+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2):this.drawText(v,y-5,p,this.axisTickFont,this.axisTickColor,"right")),n++),t+=i,c++;this.draw3DLayout(r,u,f,e,o,s,h,this.yAxisTickStyle)}this.yAxisShow&&this.draw3DAxisTitle(-this.lenX-i*4,-this.lenX-i*4,w-i*2,this.lenY+i,-this.lenZ-i*4,-this.lenZ-i*4,b,"y"),r=[-this.lenX,-this.lenX,-this.lenX,-this.lenX],u=[-this.lenY,-this.lenY,-this.lenY,this.lenY],f=[-this.lenZ,this.lenZ,this.lenZ,this.lenZ],e=[-this.lenX,-this.lenX,-this.lenX,-this.lenX],o=[this.lenY,-this.lenY,this.lenY,this.lenY],s=[-this.lenZ,-this.lenZ,this.lenZ,-this.lenZ],h=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(r,u,f,e,o,s,h,this.yAxisTickStyle)},this.set3DZLayout=function(){var f=[],e=[],o=[],s=[],h=[],c=[],l=[],r,n,i,w,p,d,a,v,y,u=this.is3DPlot?this.lenZ/(this.varIndices.length*.5):this.lenZ/15,b=this.is3DPlot?this.lenZ/(this.smpIndices.length*.5):!1,k=this.is3DPlot?this.varIndices.length*.5*-u+u:15*-u+u,rt=this.is3DPlot?this.smpIndices.length*.5*-b+b:!1,ut=this.zAxisTitle?this.zAxisTitle:this.is3DPlot?"Variables":this.data.y.smps[this.zAxisIndex],g=this.marginLeft+this.offsetX+this.left,nt=this.marginTop+this.offsetY+this.top;if(this.show3DGrid&&!this.is3DPlot){for(i=k,r=0,n=0;i<this.lenZ;)(r+1)%3&&(f[n]=-this.lenX,e[n]=this.lenY,o[n]=i,s[n]=this.lenX,h[n]=this.lenY,c[n]=i,l.push(this.zAxisTickColor),n++,f[n]=i*this.lenX/this.lenZ,e[n]=this.lenY,o[n]=-this.lenZ,s[n]=i*this.lenX/this.lenZ,h[n]=this.lenY,c[n]=this.lenZ,l.push(this.zAxisTickColor),n++),i+=u,r++;for(this.draw3DLayout(f,e,o,s,h,c,l,this.zAxisTickStyle),f=[],e=[],o=[],s=[],h=[],c=[],l=[],i=k,r=0,n=0,d=this.zAxisIncr;i<this.lenZ;)(r+1)%3||(f[n]=-this.lenX,e[n]=this.lenY,o[n]=i,s[n]=this.lenX,h[n]=this.lenY,c[n]=i,l.push(this.foreground),n++,f[n]=i*this.lenX/this.lenZ,e[n]=this.lenY,o[n]=-this.lenZ,s[n]=i*this.lenX/this.lenZ,h[n]=this.lenY,c[n]=this.lenZ,l.push(this.foreground),p=this.get3DTransfrom(this.lenX,this.lenY,i),v=p[0]+g,y=p[1]+nt,a=this.formatAxisValue(this.zAxisMin+d,"zAxis"),d+=this.zAxisIncr,this.zAxisShow&&(this.xRotate>=45?this.yRotate>=45?this.drawText(a,v+5,y,this.axisTickFont,this.axisTickColor,"left"):this.drawText(a,v,y+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2):this.drawText(a,v+5,y,this.axisTickFont,this.axisTickColor,"left")),n++),i+=u,r++;this.draw3DLayout(f,e,o,s,h,c,l,this.zAxisTickStyle)}else if(this.is3DPlot){var t=this,tt=function(){var n=r/t.varLabelInterval;parseInt(n)==parseFloat(n)&&(p=t.get3DTransfrom(t.lenX,t.lenY,i-u/2),v=p[0]+g,y=p[1]+nt,a=t.data.y.vars[t.varIndices[r]],t.xRotate>=45?t.yRotate>=45?t.drawText(a,v+5,y,t.axisTickFont,t.axisTickColor,"left"):t.drawText(a,v,y+5,t.axisTickFont,t.axisTickColor,"right",!1,-Math.PI/2):t.drawText(a,v+5,y,t.axisTickFont,t.axisTickColor,"left"))},it=function(){var n=r/t.smpLabelInterval;parseInt(n)==parseFloat(n)&&(p=t.get3DTransfrom(w*t.lenX/t.lenZ-b/4,t.lenY,-t.lenZ),v=p[0]+g,y=p[1]+nt,a=t.data.y.smps[t.smpIndices[r]],t.drawText(a,v,y+5,t.axisTickFont,t.axisTickColor,"right",!1,-Math.PI/2))};for(i=k,r=0,n=0;i<this.lenZ;)f[n]=-this.lenX,e[n]=this.lenY,o[n]=i,s[n]=this.lenX,h[n]=this.lenY,c[n]=i,l.push(this.zAxisTickColor),tt(),n++,r++,i+=u;for(tt(),r=0,w=rt;w<this.lenZ;)f[n]=w*this.lenX/this.lenZ,e[n]=this.lenY,o[n]=-this.lenZ,s[n]=w*this.lenX/this.lenZ,h[n]=this.lenY,c[n]=this.lenZ,l.push(this.zAxisTickColor),it(),n++,r++,w+=b;this.draw3DLayout(f,e,o,s,h,c,l,this.zAxisTickStyle),it()}this.zAxisShow&&!this.is3DPlot&&this.draw3DAxisTitle(this.lenX+u*6,this.lenX+u*6,this.lenY+u*6,this.lenY+u*6,k-u*2,this.lenZ+u,ut,"z"),f=[-this.lenX,-this.lenX,this.lenX,-this.lenX],e=[this.lenY,this.lenY,this.lenY,this.lenY],o=[-this.lenZ,this.lenZ,-this.lenZ,-this.lenZ],s=[-this.lenX,this.lenX,this.lenX,this.lenX],h=[this.lenY,this.lenY,this.lenY,this.lenY],c=[this.lenZ,this.lenZ,this.lenZ,-this.lenZ],l=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(f,e,o,s,h,c,l,this.zAxisTickStyle)},this.draw3DAxisTitle=function(n,t,i,r,u,f,e,o){var p=this.measureText(e),y=p/2,c=e.split(""),l=(n+t)/2,a=(i+r)/2,v=(u+f)/2,w=this.marginLeft+this.offsetX,b=this.marginTop+this.offsetY,k=this.xRotate>=45||this.yRotate>=45?4:0,s,h;if((this.xRotate>=45||this.yRotate>=45)&&(p+=c.length*4,y=p/2),o=="x")for(l-=y,s=0;s<c.length;s++)h=this.get3DTransfrom(l,a,v),this.drawText(c[s],w+h[0],b+h[1],this.axisTitleFont,this.axisTitleColor,"left","top"),l+=this.measureText(c[s])+k;else if(o=="y")for(a+=y,s=0;s<c.length;s++)h=this.get3DTransfrom(l,a,v),this.drawText(c[s],w+h[0],b+h[1],this.axisTitleFont,this.axisTitleColor,"left","bottom",-Math.PI/2),a-=this.measureText(c[s])+k;else if(o=="z")for(v-=y,s=0;s<c.length;s++)h=this.get3DTransfrom(l,a,v),this.drawText(c[s],w+h[0],b+h[1],this.axisTitleFont,this.axisTitleColor,"left","bottom"),v+=this.measureText(c[s])+k},this.set3DLayout=function(){this.set3DXLayout(),this.set3DYLayout(),this.set3DZLayout()},this.set3DAxes=function(){var t=["x","y","z"],r,n,u,i;if(this.setMin=null,this.setMax=null,this.is3DPlot)this.xAxisTitle&&(r=this.yAxisTitle,this.yAxisTitle=this.xAxisTitle,this.xAxisTitle=r),this.yAxisMin=this.xAxisMin,this.yAxisMax=this.xAxisMax,this.yAxisIncr=this.xAxisIncr,this.yAxisDecs=this.xAxisDecs,this.yAxisRange=this.xAxisRange,this.yAxisUnit=this.lenY*2/this.yAxisRange,this.yAxisOffset=Math.min(this.lenY,(this.yAxisMin+this.yAxisRange/2)*this.yAxisUnit),this.xAxisMin=0,this.xAxisMax=9,this.xAxisIncr=this.isGroupedData?10/(this.grpIndices.length+1):10/(this.smpIndices.length+1),this.xAxisDecs=0,this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisUnit=this.lenX*2/this.xAxisRange,this.xAxisOffset=Math.min(this.lenX,(this.xAxisMin+this.xAxisRange/2)*this.xAxisUnit),this.zAxisMin=0,this.zAxisMax=9,this.zAxisIncr=10/(this.varIndices.length+1),this.zAxisDecs=0,this.zAxisRange=this.zAxisMax-this.zAxisMin,this.zAxisUnit=this.lenZ*2/this.zAxisRange,this.zAxisOffset=Math.min(this.lenZ,(this.zAxisMin+this.zAxisRange/2)*this.zAxisUnit);else for(n=0;n<t.length;n++)u=this.smpIndices,i=t[n].toUpperCase(),this[t[n]+"AxisIndex"]=this.getSampleIndices([this[t[n]+"Axis"]])[0],this.setSamplesVisible([this[t[n]+"AxisIndex"]]),this.setRangeData(),this[t[n]+"AxisMin"]=this["setMin"+i]!=null?this["setMin"+i]:this.minData,this[t[n]+"AxisMax"]=this["setMax"+i]!=null?this["setMax"+i]:this.maxData,this[t[n]+"AxisIncr"]=this.getAxisIncrements(this[t[n]+"AxisMin"],this[t[n]+"AxisMax"],10,this[t[n]+"AxisExact"]),this[t[n]+"AxisDecs"]=this.getAxisDecimals(this[t[n]+"AxisIncr"]),this[t[n]+"AxisMin"]=this.getAxisMin(this[t[n]+"AxisMin"],this[t[n]+"AxisIncr"]),this[t[n]+"AxisMax"]=this[t[n]+"AxisMin"]+this[t[n]+"AxisIncr"]*10,this[t[n]+"AxisRange"]=this[t[n]+"AxisMax"]-this[t[n]+"AxisMin"],this[t[n]+"AxisUnit"]=this["len"+i]*2/this[t[n]+"AxisRange"],this[t[n]+"AxisOffset"]=Math.min(this["len"+i],(this[t[n]+"AxisMin"]+this[t[n]+"AxisRange"]/2)*this[t[n]+"AxisUnit"]),this.setSamplesVisible(u);this.set3DCenter()},this.set3DCenter=function(){var n=this.xAxisMin<0?0:this.xAxisMin,t=this.yAxisMin<0?0:this.yAxisMin,i=this.zAxisMin<0?0:this.zAxisMin,r=((this.xAxisMin+this.xAxisMax)/2-n)*this.xAxisUnit-this.xAxisOffset,u=this.yAxisOffset-((this.yAxisMin+this.yAxisMax)/2-t)*this.yAxisUnit,f=((this.zAxisMin+this.zAxisMax)/2-i)*this.zAxisUnit-this.zAxisOffset;this.zero3DPoint=this.get3DTransfrom(r,u,f)},this.is3DVisibleDataPoint=function(n,t,i){return n>=this.xAxisMin&&n<=this.xAxisMax&&t>=this.yAxisMin&&t<=this.yAxisMax&&i>=this.zAxisMin&&i<=this.zAxisMax?!0:!1},this.isCulled=function(n,t,r,u){for(i=0;i<u;i++){var f=this.cull3D[i],e=f[2];if(r<=e&&n>=f[0]-e&&n<=f[0]+e&&t>=f[1]-e&&t<=f[1]+e)return!0}return!1},this.draw3DDataPoints=function(){var it=this.marginLeft+this.offsetX+this.left,rt=this.marginTop+this.offsetY+this.top,y=this.xAxisIndex+":"+this.yAxisIndex+":"+this.zAxisIndex,o=[],t=[],ut=[],h=[],c=[],l=[],p=[],ft=[],k,a,at,r,b,bt,i,e,n;if(this.is3DPlot)for(k=0,n=0;n<this.varIndices.length;n++)for(i=this.varIndices[n],r=0;r<this.smpIndices.length;r++){var vt=this.smpIndices[r],u=r*this.xAxisIncr+this.xAxisIncr/2,f=this.getDataAtPos(i,vt),s=n*this.zAxisIncr+this.zAxisIncr/2,et=0,ot=this.yAxisMin<0?0:this.yAxisMin,st=0,ht=(u-et)*this.xAxisUnit-this.xAxisOffset,ct=this.scatterType&&this.scatterType.match(/bar/)?0:this.yAxisOffset-(f-ot)*this.yAxisUnit,lt=(s-st)*this.zAxisUnit-this.zAxisOffset;p.push(!0),o.push([u,f,s]),a=this.get3DTransfrom(ht,ct,lt),t.push(a),ut.push(a[2]),l.push(this.euclidianDistance([t[k][0],t[k][1],t[k][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),ft.push([i,vt]),c.push(k++)}else for(n=0;n<this.varIndices.length;n++){var i=this.varIndices[n],u=this.getDataAtPos(i,this.xAxisIndex),f=this.getDataAtPos(i,this.yAxisIndex),s=this.getDataAtPos(i,this.zAxisIndex),et=this.xAxisMin<0?0:this.xAxisMin,ot=this.yAxisMin<0?0:this.yAxisMin,st=this.zAxisMin<0?0:this.zAxisMin,ht=(u-et)*this.xAxisUnit-this.xAxisOffset,ct=this.scatterType&&this.scatterType.match(/bar/)?0:this.yAxisOffset-(f-ot)*this.yAxisUnit,lt=(s-st)*this.zAxisUnit-this.zAxisOffset;p.push(this.is3DVisibleDataPoint(u,f,s)),o.push([u,f,s]),a=this.get3DTransfrom(ht,ct,lt),t.push(a),ut.push(a[2]),this.scatterType!="function"&&(c.push(n),l.push(this.euclidianDistance([t[n][0],t[n][1],t[n][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])))}if(at=this.range(ut),this.scatterType&&this.scatterType=="function"){var w=Math.sqrt(t.length),i=0,v=[];for(n=1;n<w;n++)for(r=0;r<w-1;r++){var d=(n-1)*w+r,g=n*w+r,nt=(n-1)*w+r+1,tt=n*w+r+1,yt=[t[d][0],t[g][0],t[tt][0],t[nt][0]],pt=[t[d][1],t[g][1],t[tt][1],t[nt][1]],ni=[t[d][2],t[g][2],t[tt][2],t[nt][2]],wt=this.colorBy?this.legendColorRange:!1,ti=this.colorBy?this.getHeatmapColor(wt[0],wt[1],this.mean([o[d][1],o[g][1],o[tt][1],o[nt][1]])):!1;c.push(i++),l.push(this.euclidianDistance([this.mean(yt),this.mean(pt),this.mean(ni)],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),v.push([yt,pt,ti])}for(c.sort(function(n,t){return l[t]-l[n]}),i=0;i<v.length;i++)n=c[i],p[n]&&(b=[n,this.xAxisIndex,this.yAxisIndex,this.zAxisIndex],this.colorBy?this.addArea(this.drawShape("polygon",v[n][0],v[n][1],!1,!1,v[n][2],this.foreground,"close"),b):this.addArea(this.drawShape("polygon",v[n][0],v[n][1],!1,!1,!1,this.foreground,"open"),b))}else{for(c.sort(function(n,t){return l[t]-l[n]}),bt=this.is3DPlot?this.scatterPointSize/(30*this.bar3DInverseWeight):this.scatterPointSize/(3*this.bar3DInverseWeight),i=0;i<t.length;i++){var n=c[i],kt=this.colorBy?this.dataColors[n]:this.colors[0],dt=this.scatterType&&this.scatterType.match(/image/i)?this.images[r]:!1,b=this.is3DPlot?[ft[n][0],ft[n][1]]:[n,this.xAxisIndex,this.yAxisIndex,this.zAxisIndex];if(p[n]&&this.isVisibleSelectedDataPoint(n,y))if(this.scatterType&&this.scatterType.match(/bar/))e=this.isInSelectedDataPoints(n,y)?this.selectedBackgroundColor:kt,this.draw3DBar(o[n][0],o[n][1],o[n][2],bt,e,b);else{var gt=this.shapeBy?this.dataShapes[n]:this.shapes[0],ii=dt?"image":gt,e=this.sizeBy?this.dataSizes[n]:this.scatterPointSize,u=it+t[n][0],f=rt+t[n][1],s=Math.floor(this.percentile(at[0],at[1],t[n][2]));e=e-e*(s/100)/3,this.drawSelectedBackground(n,y,gt,u,f,e,e),this.addArea(this.drawShape(ii,u,f,e,e,kt,this.foreground,"closed",!1,!1,!1,!1,!1,!1,dt),b),this.drawSelectedBackgroundLabel(n,y,u,f),this.scatterType&&this.scatterType.match(/line/)&&(h[n]=[t[n][0],t[n][1]])}}if(this.scatterType&&this.scatterType.match(/line/)&&h.length>0)for(n=0;n<h.length-1;n++)if(p[n]&&this.isVisibleSelectedDataPoint(n,y)&&p[n+1]&&this.isVisibleSelectedDataPoint(n+1,y)){var ri=it+h[n][0],ui=rt+h[n][1],fi=it+h[n+1][0],ei=rt+h[n+1][1];this.drawLine("line",ri,ui,fi,ei,this.colors[0])}}},this.set3DprivateParams=function(){this.set3DText(),this.set3DParams()},this.draw3DPlot=function(){this.setDataColorShapeSize(),this.set3DXYDimensions(),this.set3DprivateParams(),this.set3DRotation(),this.set3DAxes(),this.set3DLayout(),this.drawTitle(),this.draw3DDataPoints(),this.drawScatterLegend()},this.initializeScatter3D=function(){this.layoutValid?this.drawLayoutCompartments(this.draw3DPlot):this.draw3DPlot()},n||this.initializeScatter3D()},CanvasXpress.prototype.oneDPlot=function(){this.getShapeSize=function(){return this.x<100||this.y<100?this.rowBlockSize/6:this.x<200||this.y<200?this.rowBlockSize/3:this.rowBlockSize/1.5},this.setRowColBlocks=function(){var n=this.isGroupedData?this.grpIndices.length:this.smpIndices.length,t;this.rowBlocks=0,this.graphType=="Line"||this.graphType=="Area"||this.graphType=="AreaLine"||this.graphType=="Heatmap"||this.graphType=="Stacked"||this.graphType=="StackedLine"||this.graphType=="StackedPercent"||this.graphType=="StackedPercentLine"?(this.rowBlocks=n,this.colBlocks=this.graphType=="Heatmap"?this.varIndices.length:1):this.graphType=="BarLine"&&this.data.a?(t=this.getVariablesVisibleByAxis("xAxis"),this.rowBlocks=t.length*n,this.colBlocks=1):(this.rowBlocks=this.varIndices.length*n,this.colBlocks=1)},this.set1DVarSmpLabelFont=function(){var n,t,i;this.autoScaleFont?(this.data.l&&this.data.l.vars&&this.data.l.smps&&this.graphOrientation=="vertical"?n=this.scaleTextToSize(this.layoutMaxSamples*2):(i=Math.abs(this.smpLabelRotate==90)?6:2,n=this.isGraphTime?this.scaleTextToSize(this.timeValues.length*i):this.scaleTextToSize(this.smpIndices.length*i)),t=this.scaleTextToSize(this.varIndices.length*2),this.graphType=="Heatmap"&&this.autoAdjust&&(this.smpLabelDescription&&parseInt(n*this.smpLabelScaleFontFactor)>this.maxTextSize&&(n=this.maxTextSize),this.varLabelDescription&&parseInt(t*this.varLabelScaleFontFactor)>this.maxTextSize&&(t=this.maxTextSize),n=Math.min(n,t),t=n)):(n=this.smpLabelFontSize,t=this.varLabelFontSize),this.smpLabelFont=parseInt(n*this.smpLabelScaleFontFactor)+"Pt "+this.fontName,this.varLabelFont=parseInt(t*this.varLabelScaleFontFactor)+"Pt "+this.fontName},this.set1DText=function(){var n;this.layoutComb||(n=this.data.y.desc?this.data.y.desc.length>1?this.data.y.desc[0].length>this.data.y.desc[1].length?this.data.y.desc[0]:this.data.y.desc[1]:this.data.y.desc[0]:"NA"),this.layoutComb?this.setAxisFont(this.minLayoutAxisTitle,this.minLayoutAxis):this.graphOrientation=="vertical"?this.setAxisFont(n,this.y):this.setAxisFont(n,this.x)},this.getVariableTitleHeight=function(){return this.varTitle?parseInt(this.varTitleFontSize*this.varTitleScaleFontFactor)+this.margin:0},this.getVariableLabelLength=function(){return this.showVariableNames?this.varLabelRotate&&Math.abs(this.varLabelRotate)==90?this.getFontPt(this.varLabelFont)+this.margin:this.measureText(this.maxVarNameStr,this.varLabelFont)+this.margin:0},this.getVariableLabelDescLength=function(){return this.showVariableNames&&this.varLabelDescription?this.maxVarLabelDesc>this.maxVarStringLen?this.measureText(this.maxVarLabelDescStr.substring(0,this.maxVarStringLen),this.varLabelFont)+this.margin*2:this.measureText(this.maxVarLabelDescStr,this.varLabelFont)+this.margin*2:0},this.getSampleTitleHeight=function(){return this.smpTitle?parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)+this.margin:0},this.getSampleLabelLength=function(){return this.showSampleNames?this.smpLabelRotate&&Math.abs(this.smpLabelRotate)==90?this.getFontPt(this.smpLabelFont)+this.margin*2:this.isGraphTime?this.measureText(this.getMaxText(this.timeValues),this.smpLabelFont)+this.margin*2:this.maxSmpName>this.maxSmpStringLen?this.measureText(this.maxSmpNameStr.substring(0,this.maxSmpStringLen),this.smpLabelFont)+this.margin*2:this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.margin*2:0},this.getSampleLabelDescLength=function(){return this.showSampleNames&&this.smpLabelDescription?this.maxSmpLabelDesc>this.maxSmpStringLen?this.measureText(this.maxSmpLabelDescStr.substring(0,this.maxSmpStringLen),this.smpLabelFont)+this.margin*2:this.measureText(this.maxSmpLabelDescStr,this.smpLabelFont)+this.margin*2:0},this.getSmpOverlaysLength=function(){var n=0,t;if(this.showOverlays&&!this.isGroupedData){for(t=0;t<this.smpOverlays.length;t++)(this.data.x.hasOwnProperty(this.smpOverlays[t])||this.smpOverlays[t]=="-")&&n++;n>0&&(n=n*this.overlaysWidth+this.margin)}return n},this.getSmpOverlaysStrLength=function(){var t=0,n;if(this.showOverlays&&this.graphType=="Heatmap")for(n=0;n<this.smpOverlays.length;n++)this.data.x.hasOwnProperty(this.smpOverlays[n])&&(t=Math.max(t,this.measureText(this.smpOverlays[n],this.overlayFont)+this.margin));return t},this.getVarOverlaysHeight=function(){var n=0,t;if(this.showOverlays&&this.graphType=="Heatmap"){for(t=0;t<this.varOverlays.length;t++)(this.data.z.hasOwnProperty(this.varOverlays[t])||this.varOverlays[t]=="-")&&n++;n>0&&(n=n*this.overlaysWidth+this.margin)}return n},this.getVarOverlaysLength=function(){var t=0,n;if(this.showOverlays&&this.graphType=="Heatmap")for(n=0;n<this.varOverlays.length;n++)this.data.z.hasOwnProperty(this.varOverlays[n])&&(t=Math.max(t,this.measureText(this.varOverlays[n],this.overlayFont)+this.margin));return t},this.getAxisTitleTickLength=function(n){if(this.graphOrientation=="vertical"){var t;return t=this.tickRotate&&Math.abs(this.tickRotate)==90?this.getFontPt(this.axisTickFont):this.graphType=="Candlestick"?this.showVolume?Math.max(this.measureText(this.xAxisMaxStrLength,this.axisTickFont),this.measureText(this.xAxis2MaxStrLength,this.axisTickFont)):this.summaryType=="candle"?this.measureText(this.xAxisMaxStrLength,this.axisTickFont):this.measureText(this.xAxis2MaxStrLength,this.axisTickFont):this.graphType=="BarLine"?n?this.measureText(this.xAxis2MaxStrLength,this.axisTickFont):this.measureText(this.xAxisMaxStrLength,this.axisTickFont):this.measureText(this.xAxisMaxStrLength,this.axisTickFont),n?this.xAxis2Show?this.getFontPt(this.axisTitleFont)+t+this.margin*3:0:this.xAxisShow?this.getFontPt(this.axisTitleFont)+t+this.margin*3:0}return n?this.xAxis2Show?this.getFontPt(this.axisTitleFont)+this.getFontPt(this.axisTickFont)+this.margin*5:0:this.xAxisShow?this.getFontPt(this.axisTitleFont)+this.getFontPt(this.axisTickFont)+this.margin*5:0},this.getHeatmapIndicatorHeight=function(n){var t=this.data.y.desc&&this.data.y.desc[0]?this.margin*2+this.getFontPt(this.legendFont):0;return n&&this.isMultidimensionalHeatmap&&this.indicatorsPosition=="bottom"?this.legendHeight:this.indicatorHeight+this.margin*4+this.getFontPt(this.legendFont)+t},this.getLegendHeight=function(n){if(this.graphType!="Heatmap"||this.isMultidimensionalHeatmap){if(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))return this.legendPosition=="right"?this.legendWidth:this.legendHeight;var t=Math.min(this.getFontPt(this.legendFont),this.maxTextSize),i=this.layoutComb&&!n?this.layoutMaxVarLegend:this.varIndices.length;return i*t*1.5+t/2+this.margin}return 0},this.getLegendWidth=function(){if(this.graphType!="Heatmap"||this.isMultidimensionalHeatmap){if(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))return this.legendPosition=="right"?this.legendWidth:this.legendHeight;var t=Math.min(this.getFontPt(this.legendFont),this.maxTextSize),n=this.layoutComb?this.layoutMaxVarLegendLabel:this.maxVarNameStr,i=n.length>this.maxVarStringLen?n.substring(0,this.maxVarStringLen):n;return t*2+this.measureText(i,this.legendFont)+this.margin*6}return 0},this.getVarTreeHeight=function(){var n=0;return this.graphType=="Heatmap"&&this.showVarDendrogram&&this.varDendrogram&&(n=(this.varDendrogram.depth+1)*this.dendrogramSpace+this.margin),n},this.getSmpTreeWidthHeight=function(){var n=0;return this.showSmpDendrogram&&this.smpDendrogram&&!this.isGroupedData&&(n=(this.smpDendrogram.depth+1)*this.dendrogramSpace+this.margin),n},this.set1DXYDimensionsLeft=function(){this.left=this.graphOrientation=="vertical"?this.margin+this.getAxisTitleTickLength():this.smpDendrogramPosition=="right"?this.margin+this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength():this.margin+this.getSampleTitleHeight()+this.getSmpTreeWidthHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()},this.set1DXYDimensionsRight=function(){if(this.right=this.graphOrientation=="vertical"?this.margin+this.getAxisTitleTickLength(!0):this.smpDendrogramPosition=="right"?this.margin+this.getSmpTreeWidthHeight():this.margin,this.showLegend&&this.legendPosition=="right"&&(this.right+=this.getLegendWidth()),this.graphType=="Heatmap"){var t=this.getSampleLabelDescLength(),n=0;this.showOverlays&&(n=this.getVarOverlaysLength()),this.right+=Math.max(t,n)}},this.set1DXYDimensionsTop=function(){this.top=this.margin,this.title&&(this.top+=this.titleHeight+this.margin,this.subtitle&&(this.top+=this.subtitleHeight+this.margin)),this.graphOrientation=="vertical"?this.smpDendrogramPosition!="bottom"&&(this.top+=this.getSmpTreeWidthHeight()):this.graphType=="Heatmap"?(this.top+=this.getHeatmapIndicatorHeight(),this.varDendrogramPosition!="bottom"&&(this.top+=this.getVarTreeHeight()),this.varTitleLabelOverlayPosition!="bottom"?(this.top+=this.getVariableTitleHeight(),this.top+=this.getVariableLabelLength(),this.top+=this.getVarOverlaysHeight()):this.top+=this.getVariableLabelDescLength()):this.top+=this.getAxisTitleTickLength()},this.set1DXYDimensionsBottom=function(){this.bottom=this.margin,this.graphOrientation=="vertical"?(this.bottom+=this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength(),this.smpDendrogramPosition=="bottom"&&(this.bottom+=this.getSmpTreeWidthHeight()),this.showLegend&&this.legendPosition=="bottom"&&(this.bottom+=this.getLegendHeight())):this.graphType=="Heatmap"?(this.varTitleLabelOverlayPosition=="bottom"?(this.bottom+=this.getVarOverlaysHeight(),this.bottom+=this.getVariableLabelLength(),this.bottom+=this.getVariableTitleHeight()):this.bottom+=Math.max(this.getVariableLabelDescLength(),this.getSmpOverlaysStrLength()),this.varDendrogramPosition=="bottom"&&(this.bottom+=this.getVarTreeHeight()),this.showIndicators&&this.indicatorsPosition=="bottom"&&this.isMultidimensionalHeatmap&&(this.bottom+=this.getHeatmapIndicatorHeight(!0))):(this.bottom+=this.getAxisTitleTickLength(!0),this.showLegend&&this.legendPosition=="bottom"&&(this.bottom+=this.getLegendHeight()))},this.adjustLegendFontSize=function(){!this.tmpLegendFontSize&&this.autoAdjust&&(this.tmpLegendFontSize=this.legendFontSize),this.legendFontSize>3&&(this.legendFontSize-=2)},this.adjustSmpVarScaleFontFactor=function(){this.graphType=="Heatmap"&&this.autoAdjust&&(this.tmpSmpLabelScaleFontFactor||(this.tmpSmpLabelScaleFontFactor=this.smpLabelScaleFontFactor),this.tmpVarLabelScaleFontFactor||(this.tmpVarLabelScaleFontFactor=this.varLabelScaleFontFactor),this.smpLabelScaleFontFactor*=.8,this.varLabelScaleFontFactor*=.8,this.set1DVarSmpLabelFont())},this.adjustDendrogramSpace=function(){this.graphType=="Heatmap"&&this.autoAdjust&&(this.tmpDendrogramSpace||(this.tmpDendrogramSpace=this.dendrogramSpace),this.dendrogramSpace>1&&(this.dendrogramSpace-=1))},this.adjust1DYDimension=function(){while(this.autoAdjustYTries<=this.autoAdjustMax&&this.y<10)this.adjustLegendFontSize(),this.adjustSmpVarScaleFontFactor(),this.adjustDendrogramSpace(),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.autoAdjustYTries==this.autoAdjustMax&&this.y<10&&(this.showLegend&&this.legendPosition=="bottom"&&(this.tmpShowLegend=this.showLegend,this.showLegend=!1),this.varLabelDescription&&(this.tmpVarLabelDescription=this.varLabelDescription,this.varLabelDescription=!1),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<10&&this.errors.push("The text size doesn't fit in the graph. Either make it smaller or make the graph bigger!\nYou can also reduce the maximum length for the text string!")),this.autoAdjustYTries++},this.adjust1DXDimension=function(){while(this.autoAdjustXTries<=this.autoAdjustMax&&this.x<10)this.adjustLegendFontSize(),this.adjustSmpVarScaleFontFactor(),this.adjustDendrogramSpace(),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.autoAdjustXTries==this.autoAdjustMax&&this.x<10&&(this.showLegend&&this.legendPosition!="bottom"&&(this.tmpShowLegend=this.showLegend,this.showLegend=!1),this.smpLabelDescription&&(this.tmpSmpLabelDescription=this.smpLabelDescription,this.smpLabelDescription=!1),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<10&&this.errors.push("The text size doesn't fit in the graph. Either make it smaller or make the graph bigger!\nYou can also reduce the maximum length for the text string!")),this.autoAdjustXTries++},this.set1DXYDimensions=function(){this.isGraphTime&&(!this.showVolume||this.layoutComb&&this.layoutCurrent==0)&&this.setTimeAxis(),(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))&&this.setLegendDimensions(),this.setRowColBlocks(),this.set1DVarSmpLabelFont(),this.graphOrientation=="vertical"?(this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.autoAdjust&&(this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<10&&this.adjust1DYDimension()),this.set1DText(),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.autoAdjust&&(this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<10&&this.adjust1DXDimension())):(this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.autoAdjust&&(this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<10&&this.adjust1DXDimension()),this.set1DText(),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.autoAdjust&&(this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<10&&this.adjust1DYDimension()))},this.set1DPrivateParams=function(){var n=this.isGroupedData?this.grpIndices.length:this.smpIndices.length;this.autoAdjust?this.graphType=="Heatmap"?(this.rowBlockSize=this.y/this.rowBlocks,this.blockSeparation=this.rowBlockSize,this.colBlockSize=this.x/this.varIndices.length):(this.rowBlockSize=this.graphType.match(/Area/)?this.graphOrientation=="vertical"?this.x/(this.rowBlocks+n-2):this.y/(this.rowBlocks+n-2):this.plotByVariable?this.graphOrientation=="vertical"?this.x/(this.rowBlocks+this.varIndices.length+1):this.y/(this.rowBlocks+this.varIndices.length+1):this.graphOrientation=="vertical"?this.x/(this.rowBlocks+n+1):this.y/(this.rowBlocks+n+1),this.blockSeparation=this.rowBlockSize,this.colBlockSize=1):(this.rowBlockSize=this.scaleTextToSize(this.rowBlocks)+this.scaleTextConstantAdd,this.rowBlockSize*=this.blockFactor,this.graphType=="Heatmap"?(this.colBlockSize=this.colBlocks<20?this.scaleTextToSize(this.colBlocks)+this.scaleTextConstantAdd+this.scaleTextConstantAdd*3:parseInt(1/Math.sqrt(this.colBlocks)*this.scaleTextConstantMult)+1,this.colBlockSize*=this.blockFactor,this.blockSeparation=this.rowBlockSize/2,this.y=this.rowBlockSize*this.rowBlocks,this.x=this.colBlockSize*this.colBlocks):(this.blockSeparation=this.rowBlockSize*this.blockSeparationFactor,this.graphOrientation=="vertical"?this.x=this.graphType.match(/Area/)?this.rowBlockSize*(this.rowBlocks-1)+this.blockSeparation*(n-1):this.plotByVariable?this.rowBlockSize*this.rowBlocks+this.blockSeparation*this.varIndices.length+this.blockSeparation:this.rowBlockSize*this.rowBlocks+this.blockSeparation*n+this.blockSeparation:this.y=this.graphType.match(/Area/)?this.rowBlockSize*(this.rowBlocks-1)+this.blockSeparation*(n-1):this.plotByVariable?this.rowBlockSize*this.rowBlocks+this.blockSeparation*this.varIndices.length+this.blockSeparation:this.rowBlockSize*this.rowBlocks+this.blockSeparation*n+this.blockSeparation,this.colBlockSize=1),this.width=this.marginLeft+(this.left+this.x+this.right)*this.layoutCols+this.marginRight,this.height=this.marginTop+(this.top+this.y+this.bottom)*this.layoutRows+this.marginBottom,this.resizeCanvas())},this.set1DAttributes=function(){this.setLegendFont(),this.setTrees(),this.setOverlayColors(),this.setOverlayFont(),this.setValidDataColorShapeSize(),this.setDataColorShapeSize()},this.set1DXAxis=function(){var n=this.graphOrientation=="vertical"?"y":"x";this.setAxisUnits("xAxis",n),(this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a||this.graphType=="Candlestick"&&this.showVolume)&&this.setAxisUnits("xAxis2",n)},this.draw1DWireFrame=function(){var t,i,o,s,a,p,d,c,r,w,h=this.isGroupedData?this.grpIndices:this.smpIndices,v=this.xAxisTickStyle=="dotted"||this.yAxisTickStyle=="dotted"?"dottedLine":"line",y=this.smpHairline=="dotted"?"dottedLine":"line",u=this.marginLeft+this.offsetX+this.left,f=this.marginTop+this.offsetY+this.top,g,n,e;if(this.graphType!="Heatmap")if(this.graphType=="BarLine"&&this.data.a&&this.data.y.desc[1]?(g=this.getVariablesVisibleByAxis("xAxis"),w=g.length):w=this.graphType.match(/Stacked|Line|Area/)?1:this.varIndices.length,r=w*this.rowBlockSize,this.graphOrientation=="vertical"){if(this.isGraphTime){var l=(this.x-this.blockSeparation)/h.length,b=l/2,k=this.graphType.match(/Area/)?0:u+this.blockSeparation*.5+b;for(i=f,s=f+this.y,n=0;n<this.timeValueIndices.length;n++)t=this.timeValueIndices[n]*l+k,this.smpHairline&&this.drawLine(y,t,i,t,s,this.smpHairlineColor,this.smpHairlineWidth,"butt")}else if(!this.plotByVariable)for(t=this.graphType.match(/Area/)?u:u+this.blockSeparation+r/2,o=u,a=this.graphType.match(/Area/)?u+this.blockSeparation+r:u+this.blockSeparation*1.5+r,i=f,s=f+this.y,n=0;n<h.length;n++){if(this.blockContrast&&(c=n%2?this.evenColor:this.oddColor,this.ctx.save(),this.rectangle(o,i,a,s,c,c),this.ctx.restore(),o=a,a=o+this.blockSeparation+r),this.smpHairline){if(this.graphType.match(/Area/)&&(n==0||n==h.length-1)){t+=this.blockSeparation+r;continue}this.drawLine(y,t,i,t,s,this.smpHairlineColor,this.smpHairlineWidth,"butt")}t+=this.blockSeparation+r}if((this.xAxisMinorTicks||this.xAxis2MinorTicks)&&this.summaryType!="volume")for(n=0;n<this.xAxisMinorValues.length;n++)e=parseFloat(this.xAxisMinorValues[n]),i=this.marginTop+this.offsetY+this.top+this.y-(e-this.xAxisMin)*this.xAxisUnit,this.drawLine(v,u,i,u+this.x,i,this.xAxisTickColor,this.outlineWidth/3,"butt");for(t=this.marginLeft+this.offsetX+this.left-this.margin*2,n=0;n<this.xAxisValues.length;n++)e=parseFloat(this.xAxisValues[n]),i=this.marginTop+this.offsetY+this.top+this.y-(e-this.xAxisMin)*this.xAxisUnit,this.drawLine(v,u,i,u+this.x,i,this.xAxisTickColor,!1,"butt")}else{if(this.isGraphTime){var l=(this.y-this.blockSeparation)/h.length,b=l/2,k=this.graphType.match(/Area/)?0:f+this.blockSeparation*.5+b;for(t=u,o=this.x,n=0;n<this.timeValueIndices.length;n++)i=this.timeValueIndices[n]*l+k,this.smpHairline&&this.drawLine(y,t,i,o,i,this.smpHairlineColor,this.smpHairlineWidth,"butt")}else if(!this.plotByVariable)for(t=u,o=this.x,i=this.graphType.match(/Area/)?f:f+this.blockSeparation+r/2,s=f,p=this.graphType.match(/Area/)?f+this.blockSeparation+r:f+this.blockSeparation*1.5+r,n=0;n<h.length;n++){if(this.blockContrast&&(d=n==0||n==h.length-1?this.blockSeparation*1.5+r:this.blockSeparation+r,c=n%2?this.evenColor:this.oddColor,this.ctx.save(),this.rectangle(t,s,o,d,c,c),this.ctx.restore(),s=p,p=s+this.blockSeparation+r),this.smpHairline){if(this.graphType.match(/Area/)&&(n==0||n==h.length-1)){i+=this.blockSeparation+r;continue}this.drawLine(y,t,i,u+o,i,this.smpHairlineColor,this.smpHairlineWidth,"butt")}i+=this.blockSeparation+r}if((this.xAxisMinorTicks||this.xAxis2MinorTicks)&&this.summaryType!="volume")for(n=0;n<this.xAxisMinorValues.length;n++)e=parseFloat(this.xAxisMinorValues[n]),t=u+(e-this.xAxisMin)*this.xAxisUnit,this.drawLine(v,t,f,t,f+this.y,this.xAxisTickColor,this.outlineWidth/3,"butt");for(i=this.marginTop+this.offsetY+this.top-(this.margin*2+this.getFontPt(this.axisTickFont)/2),n=0;n<this.xAxisValues.length;n++)e=parseFloat(this.xAxisValues[n]),t=u+(e-this.xAxisMin)*this.xAxisUnit,this.drawLine(v,t,f,t,f+this.y,this.xAxisTickColor,!1,"butt")}},this.drawTrees=function(){this.isGroupedData||(this.drawDendrogram("smpDendrogram"),this.graphType=="Heatmap"&&this.drawDendrogram("varDendrogram"),this.maskTreeArea())},this.getMaxDepthDendrogramXYs=function(n){var i,t;if(n.length>0){for(i=[],t=0;t<n.length;t++)i.push(n[t][1]);for(i.sort(function(n,t){return t-n}),t=0;t<n.length;t++)if(n[t][1]==i[0])return t}else return-1},this.drawDendrogram=function(n){var d=this.marginLeft+this.offsetX+this.left,b=this.marginTop+this.offsetY+this.top,ni=n=="varDendrogram"?"showVarDendrogram":"showSmpDendrogram",fi=n=="varDendrogram"?this.varIndices:this.smpIndices,u,r,o,i,a,p,v=this.dendrogramSpace/2,n,ht,w,t,gt,e;if(this.graphType!="Heatmap"?(this.graphType=="BarLine"&&this.data.a&&this.data.y.desc[1]?(n=this.getVariablesVisibleByAxis("xAxis"),p=n.length):p=this.graphType.match(/Stacked|Line|Area/)?1:this.varIndices.length,a=p*this.rowBlockSize):a=0,this[ni]&&this[n]){var h=this[n].data,vt=this[n].idxs,p=this[n].depth,yt=this.getMaxDepthDendrogramXYs(h),g=this[n].heights,ei=this[n].max,y={},it={},s=[];if(n=="varDendrogram")for(t=0;t<h.length;t++)s[t]=this.createNode(this.data.y.vars[vt[t]],null,null,0,null);else for(t=0;t<h.length;t++)s[t]=this.createNode(this.data.y.smps[vt[t]],null,null,0,null);while(h.length>1){t=yt;var l=[t],ti=h[t][0],ut=h[t][1],pt=h[t][2],f=h[t][3],c=[ti],k=[ut],ii=[pt],ft=[f],nt={},et="",wt=pt;for(nt[t]=1,e=t+1;e<h.length;e++){var ri=h[e][0],bt=h[e][1],ot=h[e][2],st=h[e][3];if(bt==ut&&(ot==0&&st<=f||st<f))c.push(ri),k.push(bt),ii.push(ot),ft.push(st),wt+=ot,nt[e]=1,l.push(e);else break}if(c.length>1){if(n=="varDendrogram")for(ht=this.colBlockSize/2,w=this.varDendrogramPosition=="bottom"?this.varTitleLabelOverlayPosition!="bottom"?b+this.y+this.bottom-(this.margin+this.dendrogramSpace*(p+1)):b+this.y+this.bottom-(this.margin+this.dendrogramSpace*(p+1)+this.getVariableTitleHeight()):this.varTitleLabelOverlayPosition!="bottom"?b-(this.getVarOverlaysHeight()+this.getVariableLabelLength()+this.getVarTreeHeight()):b-(this.margin+this.getVarTreeHeight()+this.getVariableLabelDescLength()),t=0;t<c.length;t++)s[l[t]].dist=g[l[t]],u=d+ht+this.colBlockSize*(c[t]-1),u=this.varIndicesStart>-1?u-this.colBlockSize*this.varIndicesStart:u,this.varDendrogramPosition=="bottom"?(i=this.varTitleLabelOverlayPosition!="bottom"?this.height-(this.marginBottom+this.margin+this.dendrogramSpace*k[t]):this.height-(this.marginBottom+this.margin+this.dendrogramSpace*k[t]+this.getVariableTitleHeight()),this.dendrogramHeight||(r=this.isLeafNode(s[l[t]])&&!this.dendrogramHang?w:i-this.dendrogramSpace)):(r=w+this.dendrogramSpace*k[t],this.dendrogramHeight||(i=this.isLeafNode(s[l[t]])&&!this.dendrogramHang?w+this.dendrogramSpace*(p+1):r+this.dendrogramSpace)),this.drawLine("line",u,r,u,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]),y.hasOwnProperty(f)||(y[f]=0),this.isLeafNode(s[l[t]])||(this.addArea(["rect",u-v,i-v,u+v,i+v],[-f],"-"+y[f]+"-varDendrogram"),y[f]++),t<c.length-1&&(o=d+ht+this.colBlockSize*(c[t+1]-1),o=this.varIndicesStart>-1?o-this.colBlockSize*this.varIndicesStart:o,this.varDendrogramPosition=="bottom"?this.drawLine("line",u,i,o,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]):this.drawLine("line",u,r,o,r,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]));else if(this.graphOrientation=="vertical")for(this.smpDendrogramPosition=="bottom"?(w=b+this.y+this.bottom-(this.margin+this.getSampleTitleHeight()+this.dendrogramSpace*(p+1)),this.showLegend&&this.legendPosition=="bottom"&&(w-=this.getLegendHeight())):w=b-this.getSmpTreeWidthHeight(),t=0;t<c.length;t++)s[l[t]].dist=g[l[t]],u=d+this.blockSeparation+a/2+(this.blockSeparation+a)*(c[t]-1),u=this.smpIndicesStart>-1?u-(this.blockSeparation+a)*this.smpIndicesStart:u,this.smpDendrogramPosition=="bottom"?(i=this.height-(this.marginBottom+this.margin+this.dendrogramSpace*k[t]),this.showLegend&&this.legendPosition=="bottom"&&(i-=this.getLegendHeight()),this.dendrogramHeight||(r=this.isLeafNode(s[l[t]])&&!this.dendrogramHang?w:i-this.dendrogramSpace)):(r=w+this.dendrogramSpace*k[t],this.dendrogramHeight||(i=this.isLeafNode(s[l[t]])&&!this.dendrogramHang?w+this.dendrogramSpace*(p+1):r+this.dendrogramSpace)),this.drawLine("line",u,r,u,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]),y.hasOwnProperty(f)||(y[f]=0),this.isLeafNode(s[l[t]])||(this.addArea(["rect",u-v,i-v,u+v,i+v],[-f],"-"+y[f]+"-smpDendrogram"),y[f]++),t<c.length-1&&(o=d+this.blockSeparation+a/2+(this.blockSeparation+a)*(c[t+1]-1),o=this.smpIndicesStart>-1?o-(this.blockSeparation+a)*this.smpIndicesStart:o,this.smpDendrogramPosition=="bottom"?this.drawLine("line",u,i,o,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]):this.drawLine("line",u,r,o,r,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]));else for(w=this.smpDendrogramPosition=="right"?d+this.x+this.getSampleLabelDescLength()+this.margin:this.marginLeft+this.offsetX+this.margin+this.getSampleTitleHeight(),t=0;t<c.length;t++)s[l[t]].dist=g[l[t]],this.smpDendrogramPosition=="right"?o=d+this.x+this.getSampleLabelDescLength()+this.margin+(this.dendrogramSpace*(p+1)-this.dendrogramSpace*k[t]):u=this.marginLeft+this.offsetX+this.margin+this.getSampleTitleHeight()+this.dendrogramSpace*k[t],this.graphType=="Heatmap"?(r=b+this.blockSeparation+this.rowBlockSize*(c[t]-1),r=this.smpIndicesStart>-1?r-this.rowBlockSize*this.smpIndicesStart:r,this.autoAdjust&&(r-=this.blockSeparation/2)):(r=b+this.blockSeparation+a/2+(this.blockSeparation+a)*(c[t]-1),r=this.smpIndicesStart>-1?r-(this.blockSeparation+a)*this.smpIndicesStart:r),this.smpDendrogramPosition=="right"?this.dendrogramHeight||(u=this.isLeafNode(s[l[t]])&&!this.dendrogramHang?d+this.x+this.getSampleLabelDescLength()+this.margin:o-this.dendrogramSpace):this.dendrogramHeight||(o=this.isLeafNode(s[l[t]])&&!this.dendrogramHang?this.marginLeft+this.offsetX+this.margin+this.getSampleTitleHeight()+this.dendrogramSpace*(p+1):u+this.dendrogramSpace),this.drawLine("line",u,r,o,r,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]),y.hasOwnProperty(f)||(y[f]=0),this.isLeafNode(s[l[t]])||(this.addArea(["rect",o-v,r-v,o+v,r+v],[-f],"-"+y[f]+"-smpDendrogram"),y[f]++),t<c.length-1&&(this.graphType=="Heatmap"?(i=b+this.blockSeparation+this.rowBlockSize*(c[t+1]-1),i=this.smpIndicesStart>-1?i-this.rowBlockSize*this.smpIndicesStart:i,this.autoAdjust&&(i-=this.blockSeparation/2)):(i=b+this.blockSeparation+a/2+(this.blockSeparation+a)*(c[t+1]-1),i=this.smpIndicesStart>-1?i-(this.blockSeparation+a)*this.smpIndicesStart:i),this.smpDendrogramPosition=="right"?this.drawLine("line",o,r,o,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]):this.drawLine("line",u,r,u,i,this.dendrogramColor,!1,"butt",!1,!1,!0,[0,0,this.width,this.height]));var ct,lt,at=[],rt=[],kt=[],tt=[],ui=this.mean(c),dt=!1;it.hasOwnProperty(f)||(it[f]=0),et=f-1+"-"+it[f];for(gt in nt)tt.push(s[gt]);for(e=0;e<h.length;e++)nt.hasOwnProperty(e)?dt||(at.push([ui,ut-1,wt,ft[ft.length-1]]),ct=tt.shift(),lt=tt.pop(),tt.length>0?rt.push(this.createNode(et,ct,lt,0,null,tt)):rt.push(this.createNode(et,ct,lt,0,null)),it[f]++,dt=!0):(at.push(h[e]),rt.push(s[e]));for(e=0;e<g.length;e++)nt.hasOwnProperty(e)||kt.push(g[e]);h=at,s=rt,g=kt,yt=this.getMaxDepthDendrogramXYs(h)}}this[n].object=s[0]}},this.draw1DYLayout=function(){var i,t,a,o,rt,ut,p,ft,h=this.marginLeft+this.offsetX+this.left,s=this.marginTop+this.offsetY+this.top,w,b,c,d,k,it,ot,l,e,r,v,y,u,n;if(this.smpInfo=[],this.varInfo=[],this.smpTitle&&(it=parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)+"Pt "+this.fontName,this.graphOrientation=="vertical"?(i=h+this.x/2,t=s+this.y+this.bottom-(this.margin+parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)/2),this.legendPosition=="bottom"&&(t-=this.getLegendHeight()),this.drawText(this.smpTitle,i,t,it,this.smpTitleFontColor,"center","middle")):(i=this.marginLeft+this.offsetX+parseInt(this.smpTitleFontSize*this.smpTitleScaleFontFactor)/2,t=s+this.y/2,this.drawText(this.smpTitle,i,t,it,this.smpTitleColor,"center","middle",-Math.PI/2))),w=this.isGroupedData?this.grpIndices:this.smpIndices,b=this.isGroupedData?this.data.w.smps:this.data.y.smps,this.graphType=="Heatmap"){if(this.showSampleNames)if(l=Math.abs(this.smpLabelRotate)==90?"center":"right",this.isGraphTime){var g=this.y/w.length,d=g/2,nt=s+d;for(i=h-this.margin*2,a=h+this.x+this.margin,n=0;n<this.timeValueIndices.length;n++)t=this.timeValueIndices[n]*g+nt,this.smpInfo[n]=t,this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[n],i-this.margin,t,this.smpLabelFont,u,l,"middle",this.smpLabelRotate*Math.PI/180),["Smp-"+n]):this.addArea(this.drawText(this.timeValues[n],i,t,this.smpLabelFont,u,"right","middle"),["Smp-"+n]),this.smpLabelDescription&&(c=this.shortenText(this.data.x[this.smpLabelDescription][w[n]],this.maxSmpStringLen),this.drawText(c,a,t,this.smpLabelFont,u,"right","middle"))}else for(i=h,a=h+this.x+this.margin,t=s+this.blockSeparation,t-=this.blockSeparation/2,ft=1,v=this.getSmpOverlaysLength(),n=0;n<w.length;n++){if(e=n/this.smpLabelInterval,parseInt(e)==parseFloat(e)){var f=w[n],c=this.shortenText(b[f],this.maxSmpStringLen),et=this.margin*2+v,u=this.getSmpColor(b[f]);this.smpInfo[n]=t,this.smpLabelRotate?this.addArea(this.drawText(c,i-(et+this.margin),t,this.smpLabelFont,u,l,"middle",this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+f]):this.addArea(this.drawText(c,i-et,t,this.smpLabelFont,u,"right","middle",!1,!1,!1,!0),["Smp-"+f]),this.smpLabelDescription&&(c=this.shortenText(this.data.x[this.smpLabelDescription][f],this.maxSmpStringLen),this.drawText(c,a,t,this.smpLabelFont,u,"left","middle"))}t+=this.rowBlockSize}if(this.showVariableNames){if(d=this.colBlockSize/2,i=h+d,this.varTitleLabelOverlayPosition!="bottom")for(l=Math.abs(this.varLabelRotate)==90?"center":"left",t=s,t-=this.margin+this.getVarOverlaysHeight()+this.margin,o=s+this.y+this.margin,n=0;n<this.varIndices.length;n++){if(e=n/this.varLabelInterval,parseInt(e)==parseFloat(e)){var f=this.varIndices[n],k=this.shortenText(this.data.y.vars[f],this.maxVarStringLen),u=this.getVarColor(this.data.y.vars[f]);this.varInfo[n]=i,this.varLabelRotate?this.addArea(this.drawText(k,i,t,this.varLabelFont,u,l,"middle",-Math.PI/2+this.varLabelRotate*Math.PI/180,!1,!1,!0),["Var-"+f]):this.addArea(this.drawText(k,i,t,this.varLabelFont,u,"left","middle",-Math.PI/2,!1,!1,!0),["Var-"+f]),this.varLabelDescription&&(k=this.shortenText(this.data.z[this.varLabelDescription][f],this.maxVarStringLen),this.drawText(k,i,o,this.varLabelFont,u,"right","middle",-Math.PI/2))}i+=this.colBlockSize}else for(l=Math.abs(this.varLabelRotate)==90?"center":"right",t=s+this.y+this.margin,this.varOverlays.length>0&&(t+=this.varOverlays.length*this.overlaysWidth+this.margin*2),o=s-this.margin,n=0;n<this.varIndices.length;n++){if(e=n/this.varLabelInterval,parseInt(e)==parseFloat(e)){var f=this.varIndices[n],k=this.shortenText(this.data.y.vars[f],this.maxVarStringLen),u=this.getVarColor(this.data.y.vars[f]);this.varInfo[n]=i,this.varLabelRotate?this.addArea(this.drawText(k,i,t+this.margin,this.varLabelFont,u,l,"middle",-Math.PI/2+this.varLabelRotate*Math.PI/180,!1,!1,!0),["Var-"+f]):this.addArea(this.drawText(k,i,t,this.varLabelFont,u,"right","middle",-Math.PI/2,!1,!1,!0),["Var-"+f]),this.varLabelDescription&&(k=this.shortenText(this.data.z[this.varLabelDescription][f],this.maxVarStringLen),this.drawText(k,i,o,this.varLabelFont,u,"left","middle",-Math.PI/2))}i+=this.colBlockSize}this.varTitle&&(it=parseInt(this.varTitleFontSize*this.varTitleScaleFontFactor)+"Pt "+this.fontName,i=h+this.x/2,this.varTitleLabelOverlayPosition!="bottom"?(t=this.offsetY+this.margin*2+this.top,t-=this.getVariableLabelLength(),t-=this.getVarOverlaysHeight(),this.varDendrogramPosition=="top"&&(t-=this.getVarTreeHeight())):t=s+this.y+this.bottom-this.margin,this.drawText(this.varTitle,i,t,it,this.varTitleColor,"center","bottom"))}}else if(this.showSampleNames)if(this.graphType=="BarLine"&&this.data.a&&this.data.y.desc[1]?(ot=this.getVariablesVisibleByAxis("xAxis"),ft=ot.length):ft=this.graphType.match(/Stacked|Line|Area/)?1:this.plotByVariable?w.length:this.varIndices.length,p=ft*this.rowBlockSize,this.graphOrientation=="vertical")if(l=Math.abs(this.smpLabelRotate)==90?"center":"right",this.isGraphTime){var g=this.plotByVariable?(this.x-this.blockSeparation)/this.varIndices.length:(this.x-this.blockSeparation)/w.length,d=this.plotByVariable?this.rowBlockSize/2:g/2,nt=this.graphType.match(/Area/)?0:this.plotByVariable?h+this.blockSeparation:h+this.blockSeparation*.5+d;if(t=s+this.y+this.getSmpOverlaysLength()+this.margin+this.margin,this.plotByVariable)for(i=nt+d,n=0;n<this.varIndices.length;n++){for(r=0;r<this.timeValueIndices.length;r++)this.smpInfo[r]=i,this.smpHairline&&(this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[r],i,t+this.margin,this.smpLabelFont,u,l,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180),["Smp-"+r]):this.addArea(this.drawText(this.timeValues[r],i,t,this.smpLabelFont,u,"right","middle",-Math.PI/2),["Smp-"+r])),i+=this.rowBlockSize;i+=this.blockSeparation}else for(n=0;n<this.timeValueIndices.length;n++)i=this.timeValueIndices[n]*g+nt,this.smpInfo[n]=i,this.smpHairline&&(this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[n],i,t+this.margin,this.smpLabelFont,u,l,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180),["Smp-"+n]):this.addArea(this.drawText(this.timeValues[n],i,t,this.smpLabelFont,u,"right","middle",-Math.PI/2),["Smp-"+n]))}else if(i=this.plotByVariable?h+this.blockSeparation+this.rowBlockSize/2:this.graphType.match(/Area/)?h:h+this.blockSeparation+p/2,t=s,o=s+this.y,ut=o+this.getSmpOverlaysLength()+this.margin+this.margin,this.plotByVariable)for(n=0;n<this.varIndices.length;n++){for(r=0;r<w.length;r++){if(e=r/this.smpLabelInterval,parseInt(e)==parseFloat(e)){var tt=w[r],c=this.shortenText(b[tt],this.maxSmpStringLen),u=this.getSmpColor(b[tt]);this.smpInfo[r]=i,this.smpLabelRotate?this.addArea(this.drawText(c,i,ut+this.margin,this.smpLabelFont,u,l,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+tt]):this.addArea(this.drawText(c,i,ut,this.smpLabelFont,u,"right","middle",-Math.PI/2,!1,!1,!0),["Smp-"+tt])}i+=this.rowBlockSize}i+=this.blockSeparation}else for(n=0;n<w.length;n++){if(e=n/this.smpLabelInterval,parseInt(e)==parseFloat(e)){var f=w[n],c=this.shortenText(b[f],this.maxSmpStringLen),u=this.getSmpColor(b[f]);this.smpInfo[n]=i,this.smpLabelRotate?this.addArea(this.drawText(c,i,ut+this.margin,this.smpLabelFont,u,l,"middle",-Math.PI/2+this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+f]):this.addArea(this.drawText(c,i,ut,this.smpLabelFont,u,"right","middle",-Math.PI/2,!1,!1,!0),["Smp-"+f])}i+=this.blockSeparation+p}else if(this.isGraphTime){var g=this.plotByVariable?(this.y-this.blockSeparation)/this.varIndices.length:(this.y-this.blockSeparation)/w.length,d=this.plotByVariable?this.rowBlockSize/2:g/2,nt=this.graphType.match(/Area/)?0:this.plotByVariable?s+this.blockSeparation:s+this.blockSeparation*.5+d;if(i=h-this.margin*2,this.plotByVariable)for(t=nt+d,n=0;n<this.varIndices.length;n++){for(r=0;r<this.timeValueIndices.length;r++)this.smpInfo[r]=i,this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[r],i-this.margin,t,this.smpLabelFont,u,l,"middle",this.smpLabelRotate*Math.PI/180),["Smp-"+r]):this.addArea(this.drawText(this.timeValues[r],i,t,this.smpLabelFont,u,"right","middle"),["Smp-"+r]),t+=this.rowBlockSize;t+=this.blockSeparation}else for(n=0;n<this.timeValueIndices.length;n++)t=this.timeValueIndices[n]*g+nt,this.smpInfo[n]=t,this.smpLabelRotate?this.addArea(this.drawText(this.timeValues[n],i-this.margin,t,this.smpLabelFont,u,l,"middle",this.smpLabelRotate*Math.PI/180),["Smp-"+n]):this.addArea(this.drawText(this.timeValues[n],i,t,this.smpLabelFont,u,"right","middle"),["Smp-"+n])}else if(i=h,a=h+this.x,rt=i-(this.getSmpOverlaysLength()+this.margin*2),t=this.plotByVariable?s+this.blockSeparation+this.rowBlockSize/2:this.graphType.match(/Area/)?s:s+this.blockSeparation+p/2,this.plotByVariable)for(n=0;n<this.varIndices.length;n++){for(r=0;r<w.length;r++){if(e=r/this.smpLabelInterval,parseInt(e)==parseFloat(e)){var tt=w[r],c=this.shortenText(b[tt],this.maxSmpStringLen),u=this.getSmpColor(b[tt]);this.smpInfo[r]=t,this.smpLabelRotate?this.addArea(this.drawText(c,rt-this.margin,t,this.smpLabelFont,u,l,"middle",this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+f]):this.addArea(this.drawText(c,rt,t,this.smpLabelFont,u,"right","middle",!1,!1,!1,!0),["Smp-"+f])}t+=this.rowBlockSize}t+=this.blockSeparation}else for(n=0;n<w.length;n++){if(e=n/this.smpLabelInterval,parseInt(e)==parseFloat(e)){var f=w[n],c=this.shortenText(b[f],this.maxSmpStringLen),u=this.getSmpColor(b[f]);this.smpInfo[n]=t,this.smpLabelRotate?this.addArea(this.drawText(c,rt-this.margin,t,this.smpLabelFont,u,l,"middle",this.smpLabelRotate*Math.PI/180,!1,!1,!0),["Smp-"+f]):this.addArea(this.drawText(c,rt,t,this.smpLabelFont,u,"right","middle",!1,!1,!1,!0),["Smp-"+f])}t+=this.blockSeparation+p}if(this.showOverlays){if(this.validateOverlays(),this.smpOverlays.length>0&&!this.isGroupedData)if(p=ft*this.rowBlockSize,this.graphOrientation=="vertical"){for(i=h,a=p,o=this.overlaysWidth,this.graphType!="Heatmap"&&(i+=this.blockSeparation/2,a+=this.blockSeparation),n=0;n<this.smpIndices.length;n++){for(t=s+this.y+this.margin,r=0;r<this.smpOverlays.length;r++)v=this.smpOverlays[r],v!="-"&&(y=this.data.x[v][this.smpIndices[n]],u=y!=null?this.smpOverlayColors[v][y.toString()]:this.missingDataColor,this.rectangle(i,t,a,o,u),p>this.overlaysWidth?this.drawText(this.shortenText(y,this.overlayFontSize,p),i+a/2,t+o/2,this.overlayFont,this.overlayFontColor,"center","middle",!1,p-2):this.drawText(this.shortenText(y,this.overlayFontSize,this.overlaysWidth),i+a/2,t+o/2,this.overlayFont,this.overlayFontColor,"center","middle",-Math.PI/2,this.overlaysWidth-2)),t+=o;i+=a}for(i=h+this.x,t=s+this.y+this.margin+o/2,n=0;n<this.smpOverlays.length;n++)this.smpOverlays[n]!="-"&&this.drawText(this.smpOverlays[n],i,t,this.overlayFont,this.overlayFontColor,"left","middle",!1,p*2),t+=o}else{for(a=this.overlaysWidth,t=s,o=p,this.graphType!="Heatmap"&&(t+=this.blockSeparation/2,o+=this.blockSeparation),n=0;n<this.smpIndices.length;n++){for(i=h-(this.margin+this.smpOverlays.length*this.overlaysWidth+this.margin),r=0;r<this.smpOverlays.length;r++)v=this.smpOverlays[r],v!="-"&&(y=this.data.x[v][this.smpIndices[n]],u=y!=null?this.smpOverlayColors[v][y.toString()]:this.missingDataColor,this.rectangle(i,t,a,o,u),p>this.overlaysWidth?this.drawText(this.shortenText(y,this.overlayFontSize,p),i+a/2,t+o/2,this.overlayFont,this.overlayFontColor,"center","middle",-Math.PI/2,p-2):this.drawText(this.shortenText(y,this.overlayFontSize,this.overlaysWidth),i+a/2,t+o/2,this.overlayFont,this.overlayFontColor,"center","middle",!1,this.overlaysWidth-2)),i+=a;t+=o}for(i=h+a/2-(this.margin+this.smpOverlays.length*this.overlaysWidth+this.margin),t=s+this.y,this.graphType=="Heatmap"&&(t+=this.margin),n=0;n<this.smpOverlays.length;n++)this.smpOverlays[n]!="-"&&this.drawText(this.smpOverlays[n],i,t,this.overlayFont,this.overlayFontColor,"right","middle",-Math.PI/2,p*2),i+=a}if(this.varOverlays.length>0&&this.graphType=="Heatmap"){for(i=h+this.colBlockSize/2,o=this.overlaysWidth,n=0;n<this.varIndices.length;n++){for(t=this.varTitleLabelOverlayPosition!="bottom"?s-(this.margin+this.overlaysWidth*this.varOverlays.length):s+this.y+this.margin,r=0;r<this.varOverlays.length;r++)v=this.varOverlays[r],v!="-"&&(y=this.data.z[v][this.varIndices[n]],u=y!=null?this.varOverlayColors[v][y.toString()]:this.missingDataColor,this.rectangle(i-this.colBlockSize/2,t,this.colBlockSize,o,u),this.colBlockSize>this.overlaysWidth?this.drawText(this.shortenText(y,this.overlayFontSize,this.colBlockSize),i,t+o/2,this.overlayFont,this.overlayFontColor,"center","middle",!1,this.colBlockSize-2):this.drawText(this.shortenText(y,this.overlayFontSize,this.overlaysWidth),i,t+o/2,this.overlayFont,this.overlayFontColor,"center","middle",-Math.PI/2,this.overlaysWidth-2)),t+=this.overlaysWidth;i+=this.colBlockSize}for(i=h+this.x+this.margin,t=this.varTitleLabelOverlayPosition!="bottom"?s+o/2-(this.margin+this.overlaysWidth*this.varOverlays.length):s+this.y+this.margin+o/2,n=0;n<this.varOverlays.length;n++)this.smpOverlays[n]!="-"&&this.drawText(this.varOverlays[n],i,t,this.overlayFont,this.overlayFontColor,"left","middle",!1,this.colBlockSize*2),t+=o}}},this.validateOverlays=function(){var i=[],t,n;if(this.smpOverlays.length>0&&!this.isGroupedData){for(n=0;n<this.smpOverlays.length;n++)(this.data.x.hasOwnProperty(this.smpOverlays[n])||this.smpOverlays[n]=="-")&&i.push(this.smpOverlays[n]);this.smpOverlays=i}if(t=[],this.varOverlays.length>0&&!this.isGroupedData){for(n=0;n<this.varOverlays.length;n++)(this.data.z.hasOwnProperty(this.varOverlays[n])||this.varOverlays[n]=="-")&&t.push(this.varOverlays[n]);this.varOverlays=t}},this.draw1DXLayout=function(){var e=this.marginLeft+this.offsetX+this.left,o=this.marginTop+this.offsetY+this.top,f,s,h,t,n,i,r,u,c;if(this.layoutValid||(this.layoutAxis=3),this.graphType=="Heatmap")t=e+this.x/2-this.heatmapColors.length*this.indicatorWidth/2,n=o-this.getHeatmapIndicatorHeight(),this.varDendrogramPosition=="top"&&(n-=this.getVarTreeHeight()),this.varTitleLabelOverlayPosition!="bottom"?(n-=this.getVariableTitleHeight(),n-=this.getVariableLabelLength(),n-=this.getVarOverlaysHeight()):n-=this.getVariableLabelDescLength(),this.drawColorIndicator(t,n,this.minData,this.maxData,this.xAxisDecs,!0),this.data.y.desc&&this.data.y.desc[0]&&(t=e+this.x/2,n+=this.margin*4+this.getFontPt(this.legendFont)*1.5,this.drawText(this.data.y.desc[0],t,n,this.legendFont,this.legendFontColor,"center","middle"));else{if(this.graphOrientation=="vertical"){if(this.xAxisShow&&(this.layoutAxis==1||this.layoutAxis==3))for(t=this.marginLeft+this.offsetX+this.margin+this.getFontPt(this.axisTitleFont)/2,n=o+this.y/2,f=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:"",this.graphType=="BarLine"&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(f+" (Bars)",t,n,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2):this.graphType=="AreaLine"&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(f+" (Area)",t,n,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2):this.drawText(f,t,n,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2),h=Math.abs(this.tickRotate)==90?"center":"right",s=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Values:this.xAxisValues,t=e-this.margin*2,i=0;i<s.length-1;i++)r=parseFloat(s[i]),u=this.formatAxisValue(r,"xAxis"),n=this.graphType=="Candlestick"&&this.summaryType=="volume"?o+this.y-(r-this.xAxis2Min)*this.xAxis2Unit:o+this.y-(r-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,h,"middle",this.tickRotate*Math.PI/180):this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"right","middle");if(this.xAxis2Show&&(this.layoutAxis==2||this.layoutAxis==3)){if(h=Math.abs(this.tickRotate)==90?"center":"left",t=e+this.x+this.margin*2,this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]){for(i=0;i<this.xAxis2Values.length-1;i++)r=parseFloat(this.xAxis2Values[i]),u=this.formatAxisValue(r,"xAxis2"),n=o+this.y-(r-this.xAxis2Min)*this.xAxis2Unit,this.tickRotate?this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,h,"middle",this.tickRotate*Math.PI/180):this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"left","middle");f=this.graphType.match(/Stacked/)?this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]:"":this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]+" (Lines)":""}else{for(s=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Values:this.xAxisValues,i=0;i<s.length-1;i++)r=parseFloat(s[i]),u=this.formatAxisValue(r,"xAxis"),n=this.graphType=="Candlestick"&&this.summaryType=="volume"?o+this.y-(r-this.xAxis2Min)*this.xAxis2Unit:o+this.y-(r-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,h,"middle",this.tickRotate*Math.PI/180):this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"left","middle");f=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:""}t=e+this.x+this.right-(this.margin+this.getFontPt(this.axisTitleFont)/2),this.showLegend&&this.legendPosition=="right"&&(t-=this.getLegendWidth()),n=o+this.y/2,this.drawText(f,t,n,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2)}}else{if(this.xAxisShow&&(this.layoutAxis==1||this.layoutAxis==3))for(t=e+this.x/2,n=o-(this.margin*4+this.getFontPt(this.axisTickFont)+this.getFontPt(this.axisTitleFont)/2),f=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:"",this.graphType=="BarLine"&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(f+" (Bars)",t,n,this.axisTitleFont,this.axisTitleColor,"center","middle"):this.graphType=="AreaLine"&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]?this.drawText(f+" (Area)",t,n,this.axisTitleFont,this.axisTitleColor,"center","middle"):this.drawText(f,t,n,this.axisTitleFont,this.axisTitleColor,"center","middle"),s=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Values:this.xAxisValues,n=o-(this.margin*2+this.getFontPt(this.axisTickFont)/2),i=0;i<s.length-1;i++)r=parseFloat(s[i]),u=this.formatAxisValue(r,"xAxis"),t=this.graphType=="Candlestick"&&this.summaryType=="volume"?e+(r-this.xAxis2Min)*this.xAxis2Unit:e+(r-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"center","middle",this.tickRotate*Math.PI/180):this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"center","middle");if(this.xAxis2Show&&(this.layoutAxis==2||this.layoutAxis==3)){if(n=o+this.y+this.margin*2+this.getFontPt(this.axisTickFont)/2,this.graphType.match(/BarLine|AreaLine|StackedLine|StackedPercentLine/)&&this.data.a&&this.data.y.desc&&this.data.y.desc[1]){for(i=0;i<this.xAxis2Values.length-1;i++)r=parseFloat(this.xAxis2Values[i]),u=this.formatAxisValue(r,"xAxis2"),t=e+(r-this.xAxis2Min)*this.xAxis2Unit,this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"center","middle");f=this.graphType.match(/Stacked/)?this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]:"":this.data.y.desc&&this.data.y.desc[1]?this.data.y.desc[1]+" (Lines)":""}else{for(s=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Values:this.xAxisValues,i=0;i<s.length-1;i++)r=parseFloat(s[i]),u=this.formatAxisValue(r,"xAxis"),t=this.graphType=="Candlestick"&&this.summaryType=="volume"?e+(r-this.xAxis2Min)*this.xAxis2Unit:e+(r-this.xAxisMin)*this.xAxisUnit,this.tickRotate?this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"center","middle",this.tickRotate*Math.PI/180):this.drawText(u,t,n,this.axisTickFont,this.axisTickColor,"center","middle");f=this.graphType=="Candlestick"&&this.summaryType=="volume"?this.xAxis2Title:this.xAxisTitle?this.xAxisTitle:this.data.y.desc&&this.data.y.desc[0]?this.data.y.desc[0]:this.yAxisTitle?this.yAxisTitle:""}t=e+this.x/2,n=o+this.y+this.margin*4+this.getFontPt(this.axisTickFont)+this.getFontPt(this.axisTitleFont)/2,this.drawText(f,t,n,this.axisTitleFont,this.axisTitleColor,"center","middle")}}c=this.backgroundType.match(/window/i)?this.foregroundWindow:this.xAxisTickColor,this.rectangle(e,o,this.x,this.y,!1,c,"open",!1,this.outlineWidth)}},this.draw1DDataPoints=function(){switch(this.graphType){case"Bar":return this.draw1DBarDataPoints(this.varIndices,"xAxis"),!0;case"Line":return this.draw1DLineDataPoints(this.varIndices,"xAxis"),!0;case"BarLine":return this.draw1DBarDataPoints(this.xAxisVarIndices,"xAxis"),this.draw1DLineDataPoints(this.xAxis2VarIndices,"xAxis2"),!0;case"Stacked":case"StackedPercent":return this.draw1DStackedDataPoints(),!0;case"StackedLine":case"StackedPercentLine":return this.draw1DStackedDataPoints(),this.draw1DLineDataPoints(this.xAxis2VarIndices,"xAxis2"),!0;case"Area":return this.draw1DAreaDataPoints(this.varIndices,"xAxis"),!0;case"AreaLine":return this.draw1DAreaDataPoints(this.xAxisVarIndices,"xAxis"),this.draw1DAreaDataPoints(this.xAxis2VarIndices,"xAxis2",!0),!0;case"Boxplot":return this.showBoxplotOriginalData?(this.draw1DDotplotDataPoints(!0),this.draw1DBoxplotDataPoints(!0)):this.draw1DBoxplotDataPoints(),!0;case"Candlestick":return this.draw1DCandlestickDataPoints(),!0;case"Dotplot":return this.draw1DDotplotDataPoints(),!0;case"Heatmap":return this.draw1DHeatmapDataPoints(),!0}throw'Illegal graph type "'+this.graphType+'"';},this.draw1DBarDataPoints=function(n,t){var e=this.isGroupedData?this.grpIndices:this.smpIndices,o=e.length,s=this.xAxisMin<0?Math.abs(this.xAxisMin)*this.xAxisUnit:0,f=this.marginLeft+this.offsetX+this.left,r=this.marginTop+this.offsetY+this.top,v=this.plotByVariable?this.rowBlockSize:this.blockSeparation+this.rowBlockSize*n.length,i,u;for(this.graphOrientation=="vertical"?(f+=this.blockSeparation,r=r+this.y-s):(f+=s,r+=this.blockSeparation),i=0;i<n.length;i++){var h=[],c=[],l=[],a=[];for(u=0;u<o;u++)l.push(this.colorBy&&this.legendColorsN?this.dataColors[this.colorByType=="x"?u:i]:this.colors[i%this.colors.length]),h.push(this.getDataAtPos(n[i],e[u])),(this.isGroupedData||this.data.y.hasOwnProperty("stdev"))&&c.push(this.getDataAtPos(n[i],e[u],"stdev")),a.push([n[i],e[u]]);this.drawBarPlot(h,c,f,r,this.rowBlockSize,v,this[t+"Unit"],s,this[t+"Min"],this.graphOrientation,l,a),this.graphOrientation=="vertical"?f=this.plotByVariable?f+(this.blockSeparation+this.rowBlockSize*o):f+this.rowBlockSize:r=this.plotByVariable?r+(this.blockSeparation+this.rowBlockSize*o):r+this.rowBlockSize}},this.draw1DLineDataPoints=function(n,t){var u=this.isGroupedData?this.grpIndices:this.smpIndices,a=u.length,e=this.marginLeft+this.offsetX+this.left,f=this.marginTop+this.offsetY+this.top,o=this.graphType=="BarLine"?!0:!1,v=o?this.blockSeparation+this.xAxisVarIndices.length*this.rowBlockSize:this.blockSeparation+this.rowBlockSize,s=this.blockSeparation+this.rowBlockSize/2,i,r;for(this.graphOrientation=="vertical"?(e+=s,f+=this.y):f+=s,i=0;i<n.length;i++){var h=[],c=[],y=t=="xAxis"||this.coordinateLineColor?this.colors[i%this.colors.length]:this.colors[(i+this.xAxisVarIndices.length)%this.colors.length],p=this.lineDecoration=="symbol"?this.shapes[i%this.shapes.length]:"sphere",l=[];for(r=0;r<a;r++)h.push(this.getDataAtPos(n[i],u[r])),(this.isGroupedData||this.data.y.hasOwnProperty("stdev"))&&c.push(this.getDataAtPos(n[i],u[r],"stdev")),l.push([n[i],u[r]]);this.drawLinePlot(h,c,e,f,this.rowBlockSize,v,this[t+"Unit"],this[t+"Min"],this.graphOrientation,y,p,l),o&&this.xAxisVarIndices.length==this.xAxis2VarIndices.length&&(this.graphOrientation=="vertical"?e+=this.rowBlockSize:f+=this.rowBlockSize)}},this.draw1DStackedDataPoints=function(){var i=this.isGroupedData?this.grpIndices:this.smpIndices,c=i.length,u=this.marginLeft+this.offsetX+this.left,r=this.marginTop+this.offsetY+this.top,e=this.blockSeparation+this.rowBlockSize,f=this.graphType.match(/Line/)?this.xAxisVarIndices:this.varIndices,l=this.graphType=="StackedPercentLine"?this.xAxisVarIndices:!1,a=this.graphType.match(/Percent/)?!0:!1,n,t;for(this.graphOrientation=="vertical"?(u+=this.blockSeparation,r+=this.y):r+=this.blockSeparation,n=0;n<c;n++){var v=this.sum(this.getDataForSmpGrpAtIndex(i[n],l)),o=[],s=[],h=[];for(t=0;t<f.length;t++)o.push(this.getDataAtPos(f[t],i[n])),s.push(this.colors[t%this.colors.length]),h.push([f[t],i[n]]);this.drawStackedPlot(o,u,r,this.rowBlockSize,a,v,this.xAxisUnit,this.graphOrientation,s,h),this.graphOrientation=="vertical"?u+=e:r+=e}},this.draw1DAreaDataPoints=function(n,t,i){var e=this.isGroupedData?this.grpIndices:this.smpIndices,a=e.length,v=this.marginLeft+this.offsetX+this.left,o=this.marginTop+this.offsetY+this.top,y=this.rowBlockSize+this.blockSeparation,s=[],h=[],c=[],r,f,l,u;for(this.graphOrientation=="vertical"&&(o+=this.y),r=0;r<n.length;r++){for(f=[],l=t=="xAxis"||this.coordinateLineColor?this.colors[r%this.colors.length]:this.colors[(r+this.xAxisVarIndices.length)%this.colors.length],u=0;u<a;u++)f.push(this.getDataAtPos(n[r],e[u]));s.push(f),h.push(l),c.push([n[r]])}this.drawAreaPlot(s,v,o,this.x,this.y,y,this[t+"Unit"],this[t+"Min"],this.graphOrientation,i,h,c)},this.draw1DBoxplotDataPoints=function(n){var o=this.isGroupedData?this.grpIndices:this.smpIndices,s=o.length,f=this.varIndices,u=this.marginLeft+this.offsetX+this.left,i=this.marginTop+this.offsetY+this.top,y=this.plotByVariable?this.rowBlockSize:this.blockSeparation+this.rowBlockSize*f.length,p=n?"open":"closed",t,r,e;for(this.graphOrientation=="vertical"?(u+=this.blockSeparation,i+=this.y):i+=this.blockSeparation,t=0;t<f.length;t++){var h=[],c=[],l=[];for(r=0;r<s;r++){var a=["iqr1","iqr3","qtl1","qtl3","median","out"],v=[],w=this.colorBy&&this.legendColorsN?this.dataColors[this.colorByType=="x"?r:t]:this.colors[t%this.colors.length];for(e=0;e<a.length;e++)v.push(this.getDataAtPos(f[t],o[r],a[e]));h.push(v),c.push(n?this.foreground:w),l.push([f[t],o[r]])}this.drawBoxPlot(h,u,i,this.rowBlockSize,y,this.xAxisUnit,this.xAxisMin,this.graphOrientation,c,p,l),this.graphOrientation=="vertical"?u=this.plotByVariable?u+(this.blockSeparation+this.rowBlockSize*s):u+this.rowBlockSize:i=this.plotByVariable?i+(this.blockSeparation+this.rowBlockSize*s):i+this.rowBlockSize}},this.draw1DCandlestickDataPoints=function(){var o=this.isGroupedData?this.grpIndices:this.smpIndices,p=o.length,f=this.varIndices,e=this.marginLeft+this.offsetX+this.left,u=this.marginTop+this.offsetY+this.top,h=this.blockSeparation+this.rowBlockSize*f.length,s=this.summaryType=="candle"?!0:!1,c=s?this.xAxisUnit:this.xAxis2Unit,l=s?this.xAxisMin:this.xAxis2Min,w=this.rowBlockSize/2,i,a,v,n,y,r,t;for(this.graphOrientation=="vertical"?(e+=this.blockSeparation,u+=this.y):u+=this.blockSeparation,i=0;i<f.length;i++){var r=[],k=this.colors[i%this.colors.length],b=[];for(n=0;n<p;n++){for(a=s?["open","close","high","low"]:["volume"],v=[],t=0;t<a.length;t++)v.push(this.getDataAtPos(f[i],o[n],a[t]));r.push(v),b.push([f[i],o[n]])}if(this.drawCandlestickPlot(r,e,u,this.rowBlockSize,h,c,l,s,this.graphOrientation,k,b),this.stockIndicators.length>0)for(n=0;n<this.stockIndicators.length;n++){for(y=this.getTechnicalIndicatorColor(this.stockIndicators[n]),r=[],t=0;t<p;t++)r.push(this.getDataAtPos(f[i],o[t],this.stockIndicators[n]));this.graphOrientation=="vertical"?this.drawLinePlot(r,[],e+w,u,this.rowBlockSize,h,c,l,this.graphOrientation,y,!1,[]):this.drawLinePlot(r,[],e,u+w,this.rowBlockSize,h,c,l,this.graphOrientation,y,!1,[])}this.graphOrientation=="vertical"?e+=this.rowBlockSize:u+=this.rowBlockSize}},this.draw1DDotplotDataPoints=function(n){var r=this.isGroupedData?this.grpIndices:this.smpIndices,w=r.length,u=this.varIndices,e=this.marginLeft+this.offsetX+this.left,f=this.marginTop+this.offsetY+this.top,k=this.blockSeparation+this.rowBlockSize/2,d=this.plotByVariable?this.rowBlockSize:this.blockSeparation+this.rowBlockSize*u.length,h=n?this.getShapeSize()/this.dotPlotDataPointRatio:this.getShapeSize(),t,i,s;for(this.graphOrientation=="vertical"?(e+=k,f+=this.y):f+=k,t=0;t<u.length;t++){var c=[],b=[],l=[],a=[],v=[],y=[],p=0,o;for(i=0;i<w;i++)if(this.isGroupedData){var g=[],nt=[],tt=[],it=[],rt=[];for(s=0;s<this.data.w.grps[r[i]].length;s++)o=this.colorBy&&this.legendColorsN?this.dataColors[this.colorByType=="x"?p:t]:this.colors[t%this.colors.length],g.push(this.data.y.data[u[t]][this.data.w.grps[r[i]][s]]),it.push(this.shapeBy&&this.legendShapesN?this.dataShapes[this.shapeByType=="x"?p:t]:this.shapes[parseInt(t/this.colors.length)]),nt.push(this.sizeBy&&this.legendSizesN?this.dataSizes[this.sizeByType=="x"?p:t]:h),tt.push(n?this.addColorTransparency(o,this.dotPlotDataPointTransparency):o),rt.push([u[t],r[i],this.data.w.grps[r[i]][s]]),p++;c.push(g),a.push(it),v.push(nt),l.push(tt),y.push(rt)}else o=this.colorBy&&this.legendColorsN?this.dataColors[this.colorByType=="x"?i:t]:this.colors[t%this.colors.length],c.push([this.getDataAtPos(u[t],r[i])]),this.data.y.hasOwnProperty("stdev")&&b.push(this.getDataAtPos(u[t],r[i],"stdev")),a.push(this.shapeBy&&this.legendShapesN?[this.dataShapes[this.shapeByType=="x"?i:t]]:[this.shapes[parseInt(t/this.colors.length)]]),v.push(this.sizeBy&&this.legendSizesN?[this.dataSizes[this.sizeByType=="x"?i:t]]:[h]),l.push([n?this.addColorTransparency(o,this.dotPlotDataPointTransparency):o]),y.push([[u[t],r[i]]]);this.plotByVariable?this.drawDotPlot(c,b,e,f,this.rowBlockSize,this.rowBlockSize,d,this.xAxisUnit,this.xAxisMin,v,this.graphOrientation,l,a,h,y):this.drawDotPlot(c,b,e,f,this.rowBlockSize,this.blockSeparation,d,this.xAxisUnit,this.xAxisMin,v,this.graphOrientation,l,a,h,y),this.graphOrientation=="vertical"?e=this.plotByVariable?e+(this.blockSeparation+this.rowBlockSize*w):e+this.rowBlockSize:f=this.plotByVariable?f+(this.blockSeparation+this.rowBlockSize*w):f+this.rowBlockSize}},this.draw1DHeatmapDataPoints=function(){var i=this.isGroupedData?this.grpIndices:this.smpIndices,h=i.length,c=this.marginLeft+this.offsetX+this.left,u=this.marginTop+this.offsetY+this.top,l=this.varIndices.length*5>this.x?!0:!1,a=Math.max(Math.min(this.colBlockSize,this.rowBlockSize)-10,3),b=this.dataSizes&&this.dataSizes.length>0?a/this.max(this.dataSizes):1,k=this.outlineWidth,r,w,e,n,o,s,t;if(this.dataColors&&this.dataColors.length>0&&(this.outlineWidth=4),this.isMultidimensionalHeatmap){for(r=this.backgroundType.match(/window/i)?this.foregroundWindow:this.foreground,n=0;n<this.varIndices.length;n++)for(t=0;t<h;t++){var v=c+n*this.colBlockSize+this.colBlockSize/2,y=u+t*this.rowBlockSize+this.rowBlockSize/2,f=this.getDataAtPos(this.varIndices[n],i[t]),p=isNaN(f)?this.missingDataColor:this.getHeatmapColor(this.minData,this.maxData,f);r=this.dataColors&&this.dataColors.length>0?this.dataColors.shift():l?p:r,w=this.dataShapes&&this.dataShapes.length>0?this.dataShapes.shift():this.shapeByShape?this.shapeByShape:"rectangleHM",e=this.dataSizes&&this.dataSizes.length>0?this.dataSizes.shift()*b:a,this.addArea(this.drawShape(w,v,y,e,e,p,r,"closed",!1,!1,!0),[this.varIndices[n],i[t]]),this.showDataValues&&this.drawText(f,v+this.colBlockSize/2-2,y+this.rowBlockSize/2-2,this.overlayFont,this.foreground,"right","bottom")}this.outlineWidth=k,this.ctx.save()}else for(n=0;n<h;n++){for(o=[],s=[],t=0;t<this.varIndices.length;t++)o.push(this.getDataAtPos(this.varIndices[t],i[n])),s.push([this.varIndices[t],i[n]]);this.drawHeatmap(o,c,u,this.colBlockSize,this.rowBlockSize,this.minData,this.maxData,l,s),u+=this.rowBlockSize}},this.drawStockIndicatorsLegend=function(){var e=this.marginLeft+this.offsetX+this.left,o=this.marginTop+this.offsetY+this.top,i,f;if(this.summaryType=="candle"&&this.stockIndicators.length>0){var n=this.getFontPt(this.legendFont),t=n/2,s=this.measureText(this.getMaxText(this.stockIndicators),this.legendFont)+n+this.margin*2,u=this.graphOrientation=="vertical"?e+this.margin*2:e+this.x-s,r=o+this.margin+n;for(i=0;i<this.stockIndicators.length;i++)f=this.getTechnicalIndicatorColor(this.stockIndicators[i]),this.drawLine("line",u+t,r+t,u+t+n,r+t,f,!1,"butt",!1,!1,!0),this.drawText(this.stockIndicators[i],u+n+this.margin,r+t,this.legendFont,f,"left","middle"),r+=this.margin+n}},this.draw1DLegend=function(){var s=this.marginLeft+this.offsetX+this.left,h=this.marginTop+this.offsetY+this.top,u=this.getFontPt(this.legendFont),i=u/2,a=u*2,c,f;if(this.layoutValid&&(this.legendPosition=="bottom"?h+=this.margin:s+=this.margin),this.drawStockIndicatorsLegend(),this.showLegend&&(this.graphType!="Heatmap"||this.graphType=="Heatmap"&&this.isMultidimensionalHeatmap))if(this.isMultidimensionalHeatmap||(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/))this.graphOrientation=="vertical"?this.legendPosition=="right"?(s=this.getAxisTitleTickLength()+this.margin,h=0):(s=0,h=this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()+this.margin,this.showSmpDendrogram&&this.smpDendrogramPosition=="bottom"&&(h+=this.getSmpTreeWidthHeight())):this.legendPosition=="right"?(s=this.margin,this.showSmpDendrogram&&this.smpDendrogramPosition=="right"&&(s+=this.getSmpTreeWidthHeight()),s+=this.getVarOverlaysLength(),h=this.isMultidimensionalHeatmap&&this.indicatorsPosition=="bottom"?this.getVariableLabelLength()+this.margin:0):(s=0,h=this.getAxisTitleTickLength()+this.margin),this.drawScatterLegend(s,h);else if(this.graphType=="BarLine"||this.graphType=="AreaLine"||this.graphType=="StackedLine"||this.graphType=="StackedPercentLine"){var o=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,t=this.legendPosition=="right"?s+this.x+this.margin*4:s+this.x/2-(this.measureText(o,this.legendFont)+u)/2,n=this.legendPosition=="right"?h+this.y/2-this.getLegendHeight(!0)/2:h+this.y;if(this.smpDendrogramPosition=="right"&&(t+=this.getSmpTreeWidthHeight()),this.legendPosition=="bottom"?(n+=this.graphOrientation=="vertical"?this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()+this.margin:this.getAxisTitleTickLength(!0)+this.margin,this.showSmpDendrogram&&this.smpDendrogramPosition=="bottom"&&(n+=this.getSmpTreeWidthHeight())):this.graphOrientation=="vertical"&&(t+=this.getAxisTitleTickLength(!0)),c=n-this.margin,this.legendBox&&this.legendBackgroundColor){var o=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,v=(this.xAxisVarIndices.length+this.xAxis2VarIndices.length)*u*1.5+this.margin,y=this.margin*3+a+this.measureText(o,this.legendFont);this.rectangle(t-this.margin*2,c,y,v,this.legendBackgroundColor,this.legendBoxColor)}for(f=0;f<this.xAxisVarIndices.length;f++){var e=this.xAxisVarIndices[f],r=this.colors[f%this.colors.length],o=this.shortenText(this.data.y.vars[e],this.maxVarStringLen);this.addArea(this.rectangle(t,n,u,u,r,r),["Var-"+e]),this.addArea(this.drawText(o,t+a,n+i,this.legendFont,this.getVarColor(this.data.y.vars[e]),"left","middle"),["Var-"+e]),n+=u*1.5}for(f=0;f<this.xAxis2VarIndices.length;f++){var e=this.xAxis2VarIndices[f],r=this.coordinateLineColor?this.colors[f%this.colors.length]:this.colors[(f+this.xAxisVarIndices.length)%this.colors.length],o=this.shortenText(this.data.y.vars[e],this.maxVarStringLen),l=this.getFontPt(this.legendFont)/2;this.lineDecoration?this.lineDecoration=="symbol"?(this.drawLine("line",t,n+i,t+u,n+i,r),this.addArea(this.drawShape(this.shapes[f%this.shapes.length],t+i,n+i,l,l,r,r),["Var-"+e])):this.lineDecoration=="dot"&&(this.drawLine("line",t,n+i,t+u,n+i,r),this.addArea(this.drawShape("circle",t+i,n+i,l,l,r,r),["Var-"+e])):this.addArea(this.drawLine("line",t,n+i,t+u,n+i,r),["Var-"+e]),this.addArea(this.drawText(o,t+a,n+i,this.legendFont,this.getVarColor(this.data.y.vars[e]),"left","middle"),["Var-"+e]),n+=u*1.5}if(this.legendBox){var o=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,v=n-c-i+this.margin,y=this.margin*3+a+this.measureText(o,this.legendFont);this.rectangle(t-this.margin*2,c,y,v,!1,this.legendBoxColor,"open")}}else{var o=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,t=this.legendPosition=="right"?s+this.x+this.margin*4:s+this.x/2-(this.measureText(o,this.legendFont)+u)/2,n=this.legendPosition=="right"?h+this.y/2-this.getLegendHeight(!0)/2:h+this.y;if(this.legendPosition=="bottom"?(n+=this.graphOrientation=="vertical"?this.getSampleTitleHeight()+this.getSampleLabelLength()+this.getSmpOverlaysLength()+this.margin+this.margin:this.getAxisTitleTickLength(!0)+this.margin,this.showSmpDendrogram&&this.smpDendrogramPosition=="bottom"&&(n+=this.getSmpTreeWidthHeight())):this.graphOrientation=="vertical"&&(t+=this.getAxisTitleTickLength(!0)),this.smpDendrogramPosition=="right"&&this.showLegend&&this.legendPosition=="right"&&(t+=this.getSmpTreeWidthHeight()),c=n-this.margin,this.legendBox&&this.legendBackgroundColor){var o=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,v=this.varIndices.length*u*1.5+this.margin,y=this.margin*3+a+this.measureText(o,this.legendFont);this.disableGradientTransparency(),this.rectangle(t-this.margin*2,c,y,v,this.legendBackgroundColor,this.legendBoxColor),this.enableGradientTransparency()}for(f=0;f<this.varIndices.length;f++){var e=this.varIndices[f],r=this.colors[f%this.colors.length],p=this.shapes[f%this.shapes.length],o=this.shortenText(this.data.y.vars[e],this.maxVarStringLen),l=this.getFontPt(this.legendFont)/2;this.graphType=="Line"?this.lineDecoration?this.lineDecoration=="symbol"?(this.drawLine("line",t,n+i,t+u,n+i,r),this.addArea(this.drawShape(p,t+i,n+i,l,l,r,r),["Var-"+e])):this.lineDecoration=="dot"&&(this.drawLine("line",t,n+i,t+u,n+i,r),this.addArea(this.drawShape("circle",t+i,n+i,l,l,r,r),["Var-"+e])):this.addArea(this.drawLine("line",t,n+i,t+u,n+i,r),["Var-"+e]):this.graphType=="Dotplot"?(p=this.shapes[parseInt(f/this.colors.length)],this.addArea(this.drawShape(p,t+i,n+i,u,u,r,r),["Var-"+e])):this.addArea(this.rectangle(t,n,u,u,r,r),["Var-"+e]),this.addArea(this.drawText(o,t+a,n+i,this.legendFont,this.getVarColor(this.data.y.vars[e]),"left","middle"),["Var-"+e]),n+=u*1.5}if(this.legendBox){var o=this.maxVarName>this.maxVarStringLen?this.maxVarNameStr.substring(0,this.maxVarStringLen):this.maxVarNameStr,v=n-c-i+this.margin,y=this.margin*3+a+this.measureText(o,this.legendFont);this.rectangle(t-this.margin*2,c,y,v,!1,this.legendBoxColor,"open")}}},this.setOverlaysDendrogramVariable=function(){this.plotByVariable&&(this.graphType.match(/^Bar$|Boxplot|Dotplot/)?(this.showOverlays=!1,this.showVarDendrogram=!1,this.showSmpDendrogram=!1):this.plotByVariable=!1)},this.setIndicatorsLegendPositions=function(){(this.colorBy||this.shapeBy||this.sizeBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot/)&&(this.indicatorsPosition=this.legendPosition)},this.draw1DLayout=function(){this.drawTrees(),this.draw1DXLayout(),this.draw1DYLayout()},this.draw1DData=function(){this.drawPlotWindow(),this.draw1DWireFrame(),this.draw1DDataPoints(),this.maskPlotArea(),this.draw1DLayout(),this.draw1DLegend(),this.drawTitle(),this.drawDecorationData()},this.draw1DPlot=function(){this.setOverlaysDendrogramVariable(),this.setIndicatorsLegendPositions(),this.set1DAttributes(),this.set1DXYDimensions(),this.set1DPrivateParams(),this.set1DXAxis(),this.draw1DData()},this.checkHeatmap=function(){for(var i=["outline","shape","size"],t,n=0;n<i.length;n++)t=i[n]+"ByData",this[t]&&this.data.y[this[t]]&&this.isArray(this.data.y[this[t]])&&(this.isMultidimensionalHeatmap=!0)},this.checkSegregation=function(){this.graphType!="Candlestick"&&(this.data.l?(this.segregateSamplesBy?this.data.l.smps||this.segregateSamples(this.segregateSamplesBy,!0):this.desegregateSamples(!0),this.segregateVariablesBy?this.data.l.vars||this.segregateVariables(this.segregateVariablesBy,!0):this.desegregateVariables(!0)):(this.segregateSamplesBy&&this.segregateSamples(this.segregateSamplesBy,!0),this.segregateVariablesBy&&this.segregateVariables(this.segregateVariablesBy,!0)))},this.checkOrientation=function(){this.graphType=="Heatmap"&&(this.graphOrientation="horizontal")},this.restoreTempSettings=function(){this.tmpShowLegend&&(this.showLegend=this.tmpShowLegend,this.tmpShowLegend=!1),this.tmpLegendFontSize&&(this.legendFontSize=this.tmpLegendFontSize,this.tmpLegendFontSize=!1),this.tmpVarLabelDescription&&(this.varLabelDescription=this.tmpVarLabelDescription,this.tmpVarLabelDescription=!1),this.tmpVarLabelScaleFontFactor&&(this.varLabelScaleFontFactor=this.tmpVarLabelScaleFontFactor,this.tmpVarLabelScaleFontFactor=!1),this.tmpSmpLabelDescription&&(this.smpLabelDescription=this.tmpSmpLabelDescription,this.tmpSmpLabelDescription=!1),this.tmpSmpLabelScaleFontFactor&&(this.smpLabelScaleFontFactor=this.tmpSmpLabelScaleFontFactor,this.tmpSmpLabelScaleFontFactor=!1),this.tmpDendrogramSpace&&(this.dendrogramSpace=this.tmpDendrogramSpace,this.tmpDendrogramSpace=!1),this.autoAdjustXTries=0,this.autoAdjustYTries=0},this.initialize1DPlot=function(){this.checkOrientation(),this.checkSegregation(),this.checkHeatmap(),this.layoutValid?this.drawLayoutCompartments(this.draw1DPlot):this.draw1DPlot(),this.restoreTempSettings()},this.initialize1DPlot()},CanvasXpress.prototype.Network=function(n){this.findXYCoordinates=function(n){var i=this.adjustedCoordinates(n),t={};return t.x=(i.x/this.scaleFactor||1)-this.offsetX,t.y=(i.y/this.scaleFactor||1)-this.offsetY,t},this.addNode=function(n,t){var i,r,u;if(n){if(!n.id){for(i=0,r="id"+i;this.nodes.hasOwnProperty(r);)i++,r="id"+i;n.id=r}return n.color||(n.color=this.colors[0]),n.shape||(n.shape=this.shapes[0]),n.size||(n.size=1),t&&(u=this.findXYCoordinates(t),n.x=u.x,n.y=u.y),this.data.nodeIndices[n.id]=this.data.nodes.length,this.data.nodes.push(n),this.nodes[n.id]=n,n}},this.getNodeConfigurableProperties=function(n){var t=this.getObjectArray(this.nodeConfigurableProperties),i;if(n)for(i in this.data.nodes[n])t[i]=!0;return this.getKeys(t)},this.getEdgeConfigurableProperties=function(n){var t=this.getObjectArray(this.edgeConfigurableProperties),i;if(n)for(i in this.data.edges[n])t[i]=!0;return this.getKeys(t)},this.removeNode=function(n,t){var s,i,u,r;if(n&&n.id){var f=t?this.getObjectArray(this.findChildrenNodeIndices(n.id)):!1,e=[],o=0;if(this.nodeParentHood[n.id]&&this.nodeParentHood[n.id].children)for(i=0;i<this.nodeParentHood[n.id].children.length;i++)s=this.nodeParentHood[n.id].children[i],delete this.data.nodes[this.data.nodeIndices[s]].parentNode;for(this.data.nodeIndices={},i=0;i<this.data.nodes.length;i++)if(this.data.nodes[i].id!=n.id)if(f&&f.hasOwnProperty(i))for(u=this.edgesForNode(this.data.edges,this.data.nodes[i].id),r=0;r<u.length;r++)this.removeEdge(u[r]);else e.push(this.data.nodes[i]),this.data.nodeIndices[this.data.nodes[i].id]=o,o++;else for(u=this.edgesForNode(this.data.edges,n.id),r=0;r<u.length;r++)this.removeEdge(u[r]);this.data.nodes=e}},this.addEdge=function(n){n&&n.id1&&n.id2&&(n.color||(n.color=this.colors[0]),n.width||(n.width=1),n.type||(n.type="line"),this.data.edges.push(n))},this.removeEdge=function(n){var i,t;if(n&&n.id1&&n.id2){for(i=[],t=0;t<this.data.edges.length;t++)(this.data.edges[t].id1!=n.id1||this.data.edges[t].id2!=n.id2)&&i.push(this.data.edges[t]);this.data.edges=i}},this.getAllObjectAttributes=function(n){var t=[],i,r;if(this.data[n])for(i=0;i<this.data[n].length;i++)for(r in this.data[n][i])t.hasOwnProperty(r)?t[r]++:t[r]=1;return t},this.setAllObjectAttributes=function(n,t,i,r){var f,e,a,y,u,o;if(this.data[n]&&(f=this.getAllObjectAttributeValues(n,i),f))if(this.isNumeric(f)){if(e=this.range(f),t=="color")for(this.setHeatmapColors(e[1]-e[0]),u=0;u<this.data[n].length;u++)this.data[n][u].hasOwnProperty(i)?(o=this.data[n][u][i],a=this.getHeatmapColor(e[0],e[1],o),this.data[n][u][t]=a):this.data[n][u][t]=this.missingDataColor;else if(t=="size")for(u=0;u<this.data[n].length;u++)if(this.data[n][u].hasOwnProperty(i)){var o=this.data[n][u][i],c=this.percentile(e[0],e[1],o),v=parseInt(c*25/10);r?this.data[n][u].decorationSize=1+v/25:this.data[n][u][t]=1+v/100}else r?this.data[n][u].decorationSize=.1:this.data[n][u][t]=.1;else if(t=="shape")if(n=="nodes")for(y="square",u=0;u<this.data[n].length;u++)if(this.data[n][u].hasOwnProperty(i)){var o=this.data[n][u][i],c=this.percentile(e[0],e[1],o),h=parseInt(c/10);h>0&&h--,this.data[n][u][t]="pie"+h}else this.data[n][u][t]=y;else if(n=="edges")for(u=0;u<this.data[n].length;u++)if(this.data[n][u].hasOwnProperty(i)){var o=this.data[n][u][i],c=this.percentile(e[0],e[1],o),h=parseInt(c/10);h>0&&h--,this.data[n][u].type=this.lines[h]}else this.data[n][u].type=this.lines[10]}else{var p=0,l=0,w=.1,s={color:{},shape:{},size:{}};for(u=0;u<f.length;u++)s.color.hasOwnProperty(f[u])||(s.color[f[u]]=this.colors[p%this.colors.length],p++),n=="nodes"?s.shape.hasOwnProperty(f[u])||(s.shape[f[u]]=this.shapes[l%this.shapes.length],l++):s.shape.hasOwnProperty(f[u])||(s.lines[f[u]]=this.lines[l%this.lines.length],l++),s.size.hasOwnProperty(f[u])||(s.size[f[u]]=w,w+=.1);for(u=0;u<this.data[n].length;u++)this.data[n][u].hasOwnProperty(i)&&(o=this.data[n][u][i],this.data[n][u][t]=s[t][o])}},this.getAllObjectAttributeValues=function(n,t){var r=[],i;if(this.data[n])for(i=0;i<this.data[n].length;i++)this.data[n][i].hasOwnProperty(t)&&r.push(this.data[n][i][t]);return r},this.modifyNodeSize=function(n,t,i){var r=this.data.nodes[this.data.nodeIndices[n]];delete r.size,r.width=t,r.height=i},this.modifyXYNode=function(n,t,i){var r=this.data.nodes[this.data.nodeIndices[n]],u,f;if(r.x-=t,r.y-=i,r.labelX!=null&&r.labelY!=null&&this.modifyXYNodeLab(n,t,i),this.networkLayoutType!="radial"&&this.nodeParentHood[r.id]&&this.nodeParentHood[r.id].children)for(u=0;u<this.nodeParentHood[r.id].children.length;u++)f=this.nodeParentHood[r.id].children[u],this.modifyXYNode(f,t,i)},this.modifyXYNodeLab=function(n,t,i){var r=this.data.nodes[this.data.nodeIndices[n]],u=r.label!=null?r.label:r.name?r.name:r.id,f=this.measureText(u,this.nodeFont),e=this.nodeFontSize,o=r.width?r.width:r.size?this.nodeSize*r.size:this.nodeSize,s=r.height?r.height:r.size?this.nodeSize*r.size:this.nodeSize;r.labelX!=null&&r.labelY!=null?(r.labelX-=t,r.labelY-=i):this.rangeX>this.rangeY?(r.labelX=r.x-f/2-t,r.labelY=r.y+s/1.3-i):(r.labelX=r.x+o/1.3-t,r.labelY=r.y-e/2-i)},this.modifyXYNodeDec=function(n,t,i){var r=this.data.nodes[this.data.nodeIndices[n]];r.decorationsX-=t,r.decorationsY-=i},this.getHiddenNodes=function(){var t=[],n;if(this.data.nodes)for(n=0;n<this.data.nodes.length;n++)this.data.nodes[n].hide&&t.push(this.data.nodes[n]);return t},this.orderNodes=function(n){for(var t in this.selectNode)this[n](this.data.nodes[this.data.nodeIndices[t]])},this.sendNodeToBack=function(n){for(var i=[n],t=0;t<this.data.nodes.length;t++)this.data.nodes[t].id!=n.id&&i.push(this.data.nodes[t]);this.data.nodes=i,this.setNodeIndices()},this.sendNodeBackward=function(n){var i=[],r=this.data.nodeIndices[n.id],t;if(r>0){for(t=0;t<r-1;t++)i.push(this.data.nodes[t]);for(i.push(this.data.nodes[r]),i.push(this.data.nodes[r-1]),t=r+1;t<this.data.nodes.length;t++)i.push(this.data.nodes[t]);this.data.nodes=i,this.setNodeIndices()}},this.bringNodeToFront=function(n){for(var i=[],t=0;t<this.data.nodes.length;t++)this.data.nodes[t].id!=n.id&&i.push(this.data.nodes[t]);i.push(n),this.data.nodes=i,this.setNodeIndices()},this.bringNodeForward=function(n){var i=[],r=this.data.nodeIndices[n.id],t;if(this.data.nodes.length-1>r){for(t=0;t<r;t++)i.push(this.data.nodes[t]);for(i.push(this.data.nodes[r+1]),i.push(this.data.nodes[r]),t=r+2;t<this.data.nodes.length;t++)i.push(this.data.nodes[t]);this.data.nodes=i,this.setNodeIndices()}},this.flashNode=function(n,t,i){var u;for(n=this.toArray(n),u=0;u<n.length;u++){var e=n[u],r=this.data.nodes[this.data.nodeIndices[e]],o=r.width?r.width:r.size?r.size:this.nodeSize,s=r.height?r.height:r.size?r.size:this.nodeSize,f=this.adjustNetworkObjects(["circle",r.x,r.y,1]);this.flash(f[1],f[2],o*this.scaleFactor,s*this.scaleFactor,t||this.nodeHighlightColor,i)}},this.highlightNodes=function(n){this.isArray(n)?this.highlightNode=this.highlightNode.concat(n):this.highlightNode.push(n),this.draw()},this.unHighlightNodes=function(n){var u=[],t,r,i;for(n=this.toArray(n),t=0;t<this.highlightNode.length;t++){for(r=!1,i=0;i<n.length;i++)if(this.highlightNode[t]==n[i]){r=!0;break}r||u.push(this.highlightNode[t])}this.highlightNode=u,this.draw()},this.addToNetworkStack=function(){this.networkStack.length>=this.networkStackStates&&this.networkStack.shift(),this.networkStackIndex=this.networkStack.length,this.networkStack.push(this.cloneObject(this.data)),this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)},this.undoNetworkOp=function(){this.canNetworkUndoOp()?(this.networkStackIndex--,this.nodes={},this.updateData(this.networkStack[this.networkStackIndex]),this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)):this.debug&&alert("No data in Undo Stack")},this.canNetworkUndoOp=function(){return this.networkStackIndex>0?!0:!1},this.redoNetworkOp=function(){this.canNetworkRedoOp()?(this.networkStackIndex++,this.nodes={},this.updateData(this.networkStack[this.networkStackIndex]),this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)):this.debug&&alert("No data in Redo Stack")},this.canNetworkRedoOp=function(){return this.networkStackIndex<this.networkStack.length-1?!0:!1},this.clearNetworkStack=function(){this.stackNumber=!1,this.networkStackIndex=0,this.networkStack=[],this.userEvents.stackchange&&this.userEvents.stackchange.call(this,this.networkStackIndex,this.networkStack.length)},this.addLegend=function(n,t,i){if(this.inititalizeNetworkLegend(),n&&t){if(i&&n=="text"){var r=this.findXYCoordinates(i);t.x=r.x,t.y=r.y}return this.data.legend[n].push(t),t}},this.deleteLegend=function(n,t){var r,i;if(n&&t&&t.id){for(r=[],i=0;i<this.data.legend[n].length;i++)this.data.legend[n][i].id!=t.id&&r.push(this.data.legend[n][i]);this.data.legend[n]=r,delete this.data.legend.ids[n][t.id]}},this.alignDistributeSelectedNodes=function(n,t,i){var u,s,h,c,e=this.getSelectedNodeCoordinates(),f,o,r;if(e||t==89||t==90){if(n&&(this.cancelEvent(n),this.stopEvent(n)),t==84){u=this.min(e.y);for(f in this.selectNode)r=this.data.nodes[this.data.nodeIndices[f]],this.modifyXYNode(r.id,0,r.y-u)}else if(t==82){u=this.max(e.x);for(f in this.selectNode)r=this.data.nodes[this.data.nodeIndices[f]],this.modifyXYNode(r.id,r.x-u,0)}else if(t==66){u=this.max(e.y);for(f in this.selectNode)r=this.data.nodes[this.data.nodeIndices[f]],this.modifyXYNode(r.id,0,r.y-u)}else if(t==76){u=this.min(e.x);for(f in this.selectNode)r=this.data.nodes[this.data.nodeIndices[f]],this.modifyXYNode(r.id,r.x-u,0)}else if(t==86)for(s=this.range(e.y),h=this.rank(e.y),c=(s[1]-s[0])/(this.isSelectNodes-1),u=s[0],o=0;o<h.length;o++)f=e.i[h[o]],r=this.data.nodes[this.data.nodeIndices[f]],this.modifyXYNode(r.id,0,r.y-(u+o*c));else if(t==72)for(s=this.range(e.x),h=this.rank(e.x),c=(s[1]-s[0])/(this.isSelectNodes-1),u=s[0],o=0;o<h.length;o++)f=e.i[h[o]],r=this.data.nodes[this.data.nodeIndices[f]],this.modifyXYNode(r.id,r.x-(u+o*c),0);else if(t==90)return n.shiftKey||i?this.canNetworkRedoOp()&&(this.resetSelectedNodes(),this.redoNetworkOp()):this.canNetworkUndoOp()&&(this.resetSelectedNodes(),this.undoNetworkOp()),!1;this.draw(!1,!1,!1,!0),this.addToNetworkStack()}return!1},this.getSelectedNodeCoordinates=function(){var n={x:[],y:[],i:[]},r=!1,t,i;for(t in this.selectNode)i=this.data.nodes[this.data.nodeIndices[t]],n.x.push(i.x),n.y.push(i.y),n.i.push(t),r=!0;return r?n:!1},this.findNodesBy=function(n){var o=[],s=0,i,r,f,t,e,u;for(t in n)n[t]=this.toArray(n[t]),s++;for(i=0;i<this.data.nodes.length;i++){r=this.data.nodes[i],f=0;for(t in n)for(e=n[t],u=0;u<e.length;u++)r[t]&&r[t]==e[u]&&f++;f==s&&o.push(r)}return o},this.setNetworkDimensions=function(){this.left=0,this.top=0,this.x=this.width,this.y=this.height},this.setNetworkPrivateParams=function(){if(this.data.nodes.length>0){if(this.layoutDone=!1,this.x=this.width,this.y=this.height,this.networkLayoutType=="radial"){var n=this.width,t=this.height;this.width>this.height?this.width=this.height:this.height=this.width,this.x=this.width,this.y=this.height,this.networkXCenter=this.x/2,this.networkYCenter=this.y/2,this.width=n,this.height=t}else this.x=this.width,this.y=this.height,this.set3DParams(),this.area=this.x*this.y,this.networkForceConstant!=null&&this.networkForceConstantOriginal!=null&&(this.networkForceConstantOriginal=this.networkForceConstant),this.temperature!=null&&this.temperatureOriginal!=null&&(this.temperatureOriginal=this.temperature),this.initialTemperature!=null&&this.initialTemperatureOriginal!=null&&(this.initialTemperatureOriginal=this.initialTemperature),this.networkForceConstant=this.networkForceConstant?this.networkForceConstant:Math.sqrt(this.area/this.data.nodes.length),this.temperature=this.temperature?this.temperature:this.data.nodes.length+Math.floor(Math.sqrt(this.data.edges.length)),this.minimumTemperature=1,this.initialTemperature=this.initialTemperature?this.initialTemperature:this.temperature,this.iteration=0,this.networkForceConstant<.001&&(this.networkForceConstant=.001);this.x<=400||this.y<=400?(this.nodeSize-=4,this.nodeFont=this.nodeSize-6+"Pt "+this.fontName,this.showAnimationFont=this.nodeFont+"Pt "+this.fontName):this.edgeWidth=2}else this.layoutDone=!0},this.networkContains=function(n,t){return this.findNode(n,t)!=null},this.findNode=function(n,t){var r,i;for(r in n)if(i=n[r],t.call(i))return i;return null},this.filterEdges=function(n,t){var r=[],u,i;for(u in n)i=n[u],t.call(i)&&r.push(i);return r},this.reduceNetwork=function(n,t,i){var u=null,r;for(r in n)u=u==null?i?i.apply(i,[n[r]]):n[r]:t.apply(n[r],[u,n[r]]);return u},this.vectorDifference=function(n,t){var i=n.x-t.x,r=n.y-t.y,u=n.z-t.z;return i==0&&(i=.01+Math.random()),r==0&&(r=.01+Math.random()),this.is3DNetwork&&u==0&&(u=.01+Math.random()),{x:i,y:r,z:u}},this.vectorMagnitude=function(n){var t;return t=this.is3DNetwork?Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z):Math.sqrt(n.x*n.x+n.y*n.y),isNaN(t)?0:t},this.normalizeGraph=function(n){var e=[],u={},s=this,f,i,o,t,r;for(f in n.nodes)if(!u.hasOwnProperty(n.nodes[f].id)&&(i=n.nodes[f],o=[],u[i.id]=1,!this.networkContains(o,function(){return s.networkContains(this.nodes,function(){return this.id=i.id})})))for(t={},t.nodes=[],t.edges=[],this.addNodeToGraph(i,t,n),t.nodes.length>0&&e.push(t),r=0;r<t.nodes.length;r++)u[t.nodes[r].id]=1;return e},this.addNodeToGraph=function(n,t,i){var u,r;if(this.findNodeForId(n.id,t)==null){t.nodes.push(n),u=this.edgesForNode(i.edges,n.id);for(edgeIndex in u)r=u[edgeIndex],t.edges.push(r),r.id1==n.id?this.addNodeToGraph(this.findNodeForId(r.id2,i),t,i):this.addNodeToGraph(this.findNodeForId(r.id1,i),t,i)}},this.findNodeForId=function(n,t){return this.findNode(t.nodes,function(){return n==this.id})},this.edgesForNode=function(n,t){return this.filterEdges(n,function(){return this.id1==t||this.id2==t})},this.attractiveForce=function(n,t){switch(this.attractiveForceFunction){case"FruchtermanReingold":return n*n/t;case"Eades":return t*Math.log(n)}},this.repulsiveForce=function(n,t){return t*t/n},this.storePositions=function(){for(var i={},n,r,t=0;t<this.data.nodes.length;t++)n=this.data.nodes[t],n.hide||n.hiddenParent||(r={x:n.x,y:n.y,z:n.z},i[n.id]=r);return i},this.calculateRepulsiveDisplacement=function(n){var t=this,r=function(n,i,r){for(var v=r*r,e,l,c,o,a,h=0;h<i.length;h++)for(e=t.data.nodes[t.data.nodeIndices[i[h]]],l=n[e.id],c=0;c<i.length;c++)if(h!=c&&(o=t.data.nodes[t.data.nodeIndices[i[c]]],a=n[o.id],!e.hide&&!e.hiddenParent&&!o.hide&&!o.hiddenParent)){var u=t.vectorDifference(e,o),f=t.networkLayoutType=="organic"?Math.max(t.vectorMagnitude(u)-t.nodeSize*2,t.networkNodeMinDistance):t.vectorMagnitude(u),s=v/f;e.fixed||(l.x+=u.x/f*s,l.y+=u.y/f*s,l.z+=u.z/f*s),o.fixed||t.networkLayoutType!="organic"||(a.x-=u.x/f*s,a.y-=u.y/f*s,a.z-=u.z/f*s)}},i;if(this.subNetworks)for(i=0;i<this.subNetworks.length;i++)r(n[i],this.subNetworks[i].nodes,this.subNetworks[i].networkForceConstant);else r(n,this.getKeys(this.data.nodeIndices),this.networkForceConstant)},this.calculateAttractiveDisplacement=function(n){var t=this,r=function(n,i,r){for(var u,s=0;s<i.length;s++){if(u=i[s],!t.nodes||!t.nodes[u.id1]||!t.nodes[u.id2]){alert('Nodes "'+u.id1+'" and/or "'+u.id2+'" are missing!');return}if(t.nodes&&!t.nodes[u.id1].hide&&!t.nodes[u.id2].hide&&!t.nodes[u.id1].hiddenParent&&!t.nodes[u.id2].hiddenParent){var f=t.vectorDifference(t.nodes[u.id1],t.nodes[u.id2]),e=t.networkLayoutType=="organic"?Math.max(t.vectorMagnitude(f)-t.nodeSize*2,t.networkNodeMinDistance):Math.max(t.vectorMagnitude(f),t.networkNodeMinDistance),o=t.attractiveForce(e,r);t.nodes[u.id1].fixed||(n[u.id1].x-=f.x/e*o,n[u.id1].y-=f.y/e*o,n[u.id1].z-=f.z/e*o),t.nodes[u.id2].fixed||(n[u.id2].x+=f.x/e*o,n[u.id2].y+=f.y/e*o,n[u.id2].z+=f.z/e*o)}}},i;if(this.subNetworks)for(i=0;i<this.subNetworks.length;i++)r(n[i],this.subNetworks[i].edges,this.subNetworks[i].networkForceConstant);else r(n,this.data.edges,this.networkForceConstant)},this.applyDisplacement=function(n){var i=this,r=function(n,t){var e,u,r,f;for(e in n)u=i.nodes[e],u.fixed||(r=n[e],f=Math.max(i.vectorMagnitude(r),.001),u.x+=r.x/f*Math.min(t,Math.abs(r.x)),u.y+=r.y/f*Math.min(t,Math.abs(r.y)),u.z+=r.z/f*Math.min(t,Math.abs(r.z)))},t;if(this.nodes)if(this.subNetworks)for(t=0;t<this.subNetworks.length;t++)r(n[t],this.subNetworks[t].temperature);else r(n,this.temperature)},this.isLayoutDone=function(){var n=this,i=this.storePositions(),r=0,u=0,f=function(t,f){for(var a=0,v=0,o={x:Number.MAX_VALUE,y:Number.MAX_VALUE},s={x:Number.MAX_VALUE*-1,y:Number.MAX_VALUE*-1},h,e,c=0;c<t.length;c++)h=n.data.nodes[n.data.nodeIndices[t[c]]],h.hide||h.hiddenParent||h.fixed||(e=i[h.id],o.x=Math.min(o.x,e.x),o.y=Math.min(o.y,e.y),o.z=Math.min(o.z,e.z),s.x=Math.max(s.x,e.x),s.y=Math.max(s.y,e.y),s.z=Math.max(s.z,e.z)),a+=Math.abs(n.vectorMagnitude(n.vectorDifference(n.previousNodePositions[h.id],e))),v++;var l=a/v,y=Math.abs(n.vectorMagnitude(n.vectorDifference(o,s))),p=Math.abs(n.vectorMagnitude({x:f.x,y:f.y,z:parseInt((f.x+f.y)/2)}));f.minimumTemperature=y/p,f.layoutDone=l<f.minimumTemperature,f.layoutDone&&u++,f.initialProgress==null&&f.temperature<=f.minimumTemperature&&(f.initialProgress=l-f.minimumTemperature/2),f.initialProgress!=null&&(f.layoutProgress=Math.max(f.layoutProgress,1-(l-f.minimumTemperature/2)/f.initialProgress)),r+=f.layoutProgress},t;if(this.subNetworks){for(t=0;t<this.subNetworks.length;t++)f(this.subNetworks[t].nodes,this.subNetworks[t]);this.layoutProgress=r/this.subNetworks.length,this.layoutDone=u==this.subNetworks.length?!0:!1}else f(this.getKeys(this.data.nodeIndices),this);this.previousNodePositions=i},this.setInitialForceDirectedLayout=function(){var t=this,i=function(n,i,r){for(var u,f=0;f<n.length;f++)u=t.data.nodes[t.data.nodeIndices[n[f]]],u.hide||u.hiddenParent||(u.x=Math.floor(Math.random()*i),u.y=Math.floor(Math.random()*r),u.z=this.is3DNetwork?Math.floor(Math.random()*parseInt((i+r)/2)):0)},n;if(this.layoutProgress=0,this.subNetworks)for(n=0;n<this.subNetworks.length;n++)i(this.subNetworks[n].nodes,this.subNetworks[n].x,this.subNetworks[n].y);else i(this.getKeys(this.data.nodeIndices),this.x,this.y);this.previousNodePositions=this.storePositions()},this.setInitialNodeDisplacement=function(){var t=this.subNetworks?[]:{},i,n;if(this.subNetworks)for(n=0;n<this.subNetworks.length;n++)for(t[n]={},i=0;i<this.subNetworks[n].nodes.length;i++)t[n][this.subNetworks[n].nodes[i]]={x:0,y:0,z:0};else for(n=0;n<this.data.nodes.length;n++)t[this.data.nodes[n].id]={x:0,y:0,z:0};return t},this.updateForceDirectedLayout=function(n){var r=(new Date).getTime(),u=r,i,t;if(this.data.edges.length>1){if(!this.layoutDone)while(u-r<n){if(i=this.setInitialNodeDisplacement(),this.calculateRepulsiveDisplacement(i),this.calculateAttractiveDisplacement(i),this.applyDisplacement(i),this.subNetworks)for(t=0;t<this.subNetworks.length;t++)this.subNetworks[t].temperature=Math.max(this.subNetworks[t].temperature-this.subNetworks[t].initialTemperature/100,this.subNetworks[t].minimumTemperature);else this.temperature=Math.max(this.temperature-this.initialTemperature/100,this.minimumTemperature);this.isLayoutDone(),this.iteration++,u=(new Date).getTime()}}else this.layoutDone=!0;return this.layoutDone},this.renderNetwork=function(){if(this.ctx.shadowOffsetX=this.shadowOffsetX,this.ctx.shadowOffsetY=this.shadowOffsetY,this.ctx.shadowBlur=this.shadowBlur,this.ctx.shadowColor=this.shadowColor,this.setNetworkRotation(),this.resizeCanvas(),!this.layoutDone&&!this.showAnimation){this.drawNetworkProgressBar(!0);return}this.data.nodes.length>0&&(this.layoutDone&&this.setXYNodePrecision(),this.setNetworkMinMaxRangeXY(),this.setNetworkScaleFactor(),this.scaleFactor&&(this.showAnimation?(this.preScaleNetwork?(this.centerNetwork(),this.ctx.save(),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY),this.ctx.restore(),this.drawNetworkNodes(!0),this.networkNodesOnTop?(this.drawNetworkEdges(),this.drawNetworkNodes()):(this.drawNetworkNodes(),this.drawNetworkEdges()),this.layoutDone&&this.drawNetworkLegend(),this.ctx.save(),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.restore()):(this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY),this.drawNetworkNodes(!0),this.networkNodesOnTop?(this.drawNetworkEdges(),this.drawNetworkNodes()):(this.drawNetworkNodes(),this.drawNetworkEdges()),this.layoutDone&&(this.drawNetworkDecorations(),this.drawNetworkLegend()),this.ctx.translate(-this.offsetX,-this.offsetY),this.ctx.scale(1/this.scaleFactor,1/this.scaleFactor)),this.drawCitation(),this.drawTitle(),this.drawCanvasBox(!0)):(this.drawCitation(),this.drawTitle(),this.drawCanvasBox(!0),this.preScaleNetwork?(this.centerNetwork(),this.ctx.save(),this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY),this.ctx.restore()):(this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY)),this.drawNetworkNodes(!0),this.networkNodesOnTop?(this.drawNetworkEdges(),this.drawNetworkNodes()):(this.drawNetworkNodes(),this.drawNetworkEdges()),this.layoutDone&&(this.drawNetworkDecorations(),this.drawNetworkLegend())),this.drawNetworkProgressBar()))},this.reRootRadialNetwork=function(n){var i=this.data.nodes[n].id,u,r,t;for(this.networkCurrentAngle=this.getAngle(this.finalRadialNodePositions[i].x,this.finalRadialNodePositions[i].y,this.finalRadialNodePositions[this.networkRoot].x,this.finalRadialNodePositions[this.networkRoot].y,0)+180,this.orderRadialNetwork={},u=this.data.nodeIndices[i],r=0,t=u;t<this.data.nodes.length;t++)this.orderRadialNetwork[this.data.nodes[t].id]=r,r++;for(t=0;t<u;t++)this.orderRadialNetwork[this.data.nodes[t].id]=r,r++;this.networkXCenter=this.finalRadialNodePositions[i].x,this.networkYCenter=this.finalRadialNodePositions[i].y,this.networkRoot=i,this.layoutDone=!1,this.draw()},this.renderRadialLayout=function(){var t,n;for(this.ctx.scale(this.scaleFactor,this.scaleFactor),this.ctx.translate(this.offsetX,this.offsetY),t=this.data.nodes[this.data.nodeIndices[this.networkRoot]],n=1;n<this.networkDepth;n++)this.drawShape("circle",t.x,t.y,n*this.networkLevelSize*2,n*this.networkLevelSize*2,this.background,this.infoAreaColor,"open")},this.centerNetwork=function(){for(var n,t=0;t<this.data.nodes.length;t++)n=this.data.nodes[t],n.hide||n.hiddenParent||(n.x=(this.offsetX+n.x)*this.scaleFactor,n.y=(this.offsetY+n.y)*this.scaleFactor);this.scaleFactor=.9,this.offsetX=this.x*.05,this.offsetY=this.y*.05},this.adjustNetworkObjects=function(n){if(n)if(n[0]=="circle")n[1]=(this.offsetX+n[1])*this.scaleFactor,n[2]=(this.offsetY+n[2])*this.scaleFactor,n[3]=n[3]*this.scaleFactor;else for(var t=1;t<n.length;t++)n[t]=t%2?(this.offsetX+n[t])*this.scaleFactor:(this.offsetY+n[t])*this.scaleFactor;else return!1;return n},this.setXYNodePrecision=function(){var t,n;if(this.approximateNodePositions)for(t=0;t<this.data.nodes.length;t++)n=this.data.nodes[t],n.x&&(n.x=parseInt(n.x),this.nodes[n.id].x=n.x),n.y&&(n.y=parseInt(n.y),this.nodes[n.id].y=n.y),n.z&&(n.z=parseInt(n.z),this.nodes[n.id].z=n.z)},this.getLengthToNodeBoundary=function(n,t,i,r,u,f){if(u){var o=u.size?u.size:1,s=f&&u.height?u.height:u.width?u.width:this.nodeSize*o,h=f&&u.width?u.width:u.height?u.height:this.nodeSize*o,e=this.clip("line",[n,t,i,r],[n-s/2,t-h/2,s,h]);return this.lineLength(e[0],e[1],e[2],e[3])+this.margin*2}return this.margin*2},this.drawNetworkEdges=function(){var r,h;if(this.nodes){var c={},p=1,w=this.foreground;for(r=0;r<this.data.edges.length;r++){var n=this.data.edges[r],t=this.nodes[n.id1],i=this.nodes[n.id2],s=!1;if(t.hide||t.hiddenParent||i.hide||i.hiddenParent||n.anchor?this.showHiddenChildEdges&&((t.hide||t.hiddenParent||t.parentNode&&this.nodes[t.parentNode].hideChildren)&&(t=this.findVisibleParentNode(n.id1),t&&(s=!0)),(i.hide||i.hiddenParent||i.parentNode&&this.nodes[i.parentNode].hideChildren)&&(i=this.findVisibleParentNode(n.id2),i&&(s=!0))):s=!0,h=t.id+":"+i.id,s&&!n.hide&&!c.hasOwnProperty(h)){var b=this.selectNode.hasOwnProperty(t.id)&&this.selectNode.hasOwnProperty(i.id)?this.nodeHighlightColor:n.color?n.color:w,k=n.width?n.width:1,d=n.cap?n.cap:!1,l=n.exact?n.exact:!1,u,f,e,o;this.is3DNetwork?(u=t.x3d,f=t.y3d,e=i.x3d,o=i.y3d):(u=t.x,f=t.y,e=i.x,o=i.y);var a=n.type?n.type:"line",v=a.match(/curved/)?!0:!1,g=l?0:this.getLengthToNodeBoundary(u,f,e,o,t,v),nt=l?0:this.getLengthToNodeBoundary(e,o,u,f,i,v),y=this.drawLine(a,u,f,e,o,b,k,d,Math.max(0,g),Math.max(0,nt));this.layoutDone&&!this.isAnimation&&(this.preScaleNetwork?this.addArea(y,[r+this.data.nodes.length]):this.addArea(this.adjustNetworkObjects(y),[r+this.data.nodes.length]),p++),this.ctx.lineWidth=1,c[h]=1}}}},this.drawNetworkNodes=function(n){for(var it=this.data.nodes.length/this.zoom<this.showNodeNameThreshold?!0:!1,rt=this.foreground,ut=this.shapes[0],k=6001,ft=this.rangeX>this.rangeY?"bottom":"right",vt=this.autoHideOnDecorationsCenter&&this.decorationsPosition=="center"&&this.decorations.length>0?!0:!1,t,a,p,b,s=0;s<this.data.nodes.length;s++){if(t=this.data.nodes[s],n){if(!t.eventless)continue}else if(t.eventless)continue;if(!t.hide&&!t.hiddenParent&&!t.anchor){var f=this.is3DNetwork?t.x3d:t.x,i=this.is3DNetwork?t.y3d:t.y,et=t.shape?t.shape:ut,ot=this.selectNode.hasOwnProperty(t.id)?this.nodeHighlightColor:t.color?t.color:rt,st=t.outline?t.outline:this.foreground,d=t.size?t.size:1,v=t.width?t.width:this.nodeSize*d,y=t.height?t.height:this.nodeSize*d,ht=t.pattern?t.pattern:"closed",ct=t.rotate?t.rotate*Math.PI/180:!1,lt=t.outlineWidth?t.outlineWidth:!1,g=t.imagePath?t.imagePath:!1,at=t.zIndex?t.zIndex:g?k:!1,nt=t.eventless?!1:!0,tt=this.drawShape(et,f,i,v,y,ot,st,ht,ct,lt,!1,!1,!1,!1,g,at);if(this.layoutDone&&!this.isAnimation&&((nt||this.overrideEventlessNodes)&&(this.preScaleNetwork?this.addArea(tt,[s]):this.addArea(this.adjustNetworkObjects(tt),[s])),it&&!t.hideLabel)){var r,u,e=t.label?t.label:t.name?t.name:t.id,h=this.getNodeColor(t.id,t.labelColor),w=t.labelSize?this.nodeFontSize*t.labelSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,o=parseInt(w)+"Pt "+this.fontName,c=this.measureText(e,o),l=w;if(t.labelX!=null&&t.labelY!=null)r=t.labelX-c/2,u=t.labelY-l/2,this.drawText(e,t.labelX,t.labelY,o,h,"center","middle");else if(a=this.isMultipleLines(e),p=parseInt(w)+4,a&&(a%2?i+=parseInt(a/2)*p+p/2:i=i+parseInt(a/2)*p),t.labelPosition)switch(t.labelPosition){case"top":r=f-c/2,u=i-(y/1.3+l),this.drawText(e,f,u,o,h,"center","top");break;case"bottom":r=f-c/2,u=i+y/1.3,this.drawText(e,f,u,o,h,"center","top");break;case"right":r=f+v/1.3,u=i-l/2,this.drawText(e,r,i,o,h,"left","middle");break;case"left":r=f-(v/1.3+c),u=i-l/2,this.drawText(e,r,i,o,h,"left","middle");break;case"center":this.drawText(e,f,i,o,h,"center","middle")}else ft=="right"?(r=f+v/1.3,u=i-l/2,this.drawText(e,r,i,o,h,"left","middle")):(r=f-c/2,u=i+y/1.3,this.drawText(e,f,u,o,h,"center","top"));b=["rect",r,u,r+c,u+l],(nt||this.overrideEventlessNodes)&&(this.preScaleNetwork&&!this.isAnimation?this.addArea(b,[s],"-lab"):this.addArea(this.adjustNetworkObjects(b),[s],"-lab"))}k++}}},this.drawNetworkDecorations=function(){var y,ut,ft,s,o,et,e,i,c,a,n,st;if(this.showDecorations&&this.decorations.length>0){var nt=this.decorations.length*this.decorationsWidth,tt=nt/2,v=this.decorationsHeight/2,k=this.decorationsHeight*2/3,h=this.decorationsHeight/3;for(this.setHeatmapColors(this.decorationsRange[1]-this.decorationsRange[0]),y=0;y<this.data.nodes.length;y++){var t=this.data.nodes[y],f=[],d=[],rt=[],l=!1,ht=this.sizeDecorationBy&&t.decorationSize?t.decorationSize:v;if(!t.hide&&!t.hiddenParent&&!t.anchor){var p=this.is3DNetwork?t.x3d:t.x,w=this.is3DNetwork?t.y3d:t.y,ct=t.size?this.nodeSize*t.size:this.nodeSize,g=ct/2,r,u,b,it;switch(this.decorationsPosition){case"top":r=this.decorationsType=="pie"?p:p-tt,u=w-(g+this.decorationsHeight+this.decorationsWidth),u=this.decorationsType=="pie"?u-v:u;break;case"bottom":r=this.decorationsType=="pie"?p:p-tt,u=w+(g+this.decorationsHeight+this.decorationsWidth),u=this.decorationsType=="pie"?u+v:u;break;case"right":r=p+g+this.decorationsWidth,u=this.decorationsType=="pie"?w:w-v,r=this.decorationsType=="pie"?r+v:r;break;case"left":r=p-(g+this.decorationsWidth*(this.decorations.length+1)),u=this.decorationsType=="pie"?w:w-v,r=this.decorationsType=="pie"?r-v:r;break;case"center":r=this.decorationsType=="pie"?p:p-tt,u=this.decorationsType=="pie"?w:w-v}if(t.decorationsX!=null&&t.decorationsY!=null&&(r=t.decorationsX,u=t.decorationsY),this.preScaleNetwork&&!this.isAnimation?this.addArea(["rect",r,u,r+nt,u-this.decorationsHeight],[y],"-dec"):this.addArea(this.adjustNetworkObjects(["rect",r,u,r+nt,u-this.decorationsHeight]),[y],"-dec"),this.decorationsType=="bar")for(it=this.decorationsRange[1]<0?u:this.decorationsRange[0]>=0?u+this.decorationsHeight:u+this.decorationsHeight-Math.abs(this.decorationsRange[0]*this.decorationsUnits),n=0;n<this.decorations.length;n++)b=this.decorations[n],t[b]&&!isNaN(t[b])?this.rectangle(r,it,this.decorationsWidth,-t[b]*this.decorationsUnits,this.decorationsColors[n]):t.decorations&&t.decorations[b]&&!isNaN(t.decorations[b])&&this.rectangle(r,it,this.decorationsWidth,-t.decorations[b]*this.decorationsUnits,this.decorationsColors[n]),r+=this.decorationsWidth;else{if(this.decorationsType=="heatmap")for(n=0;n<this.decorations.length;n++)if(s=t[this.decorations[n]]?t[this.decorations[n]]:t.decorations?t.decorations[this.decorations[n]]:!1,this.isObject(s)){for(l={},e=0;e<this.decorations.length;e++){ut=t[this.decorations[e]]?t[this.decorations[e]]:t.decorations?t.decorations[this.decorations[e]]:{};for(ft in ut)l[ft]=!0}for(l=this.getKeys(l),f=[],o=0;o<l.length;o++)f[o]=[];break}for(n=0;n<this.decorations.length;n++)if(l||t[this.decorations[n]]!=null||t.decorations&&t.decorations[this.decorations[n]]!=null){if(s=t[this.decorations[n]]?t[this.decorations[n]]:t.decorations?t.decorations[this.decorations[n]]:{},this.isObject(s)||l){if(this.decorationsType.match(/stacked/)){o=[];for(e in s)isNaN(s[e])||o.push(s[e]);f.push(o)}else if(this.decorationsType=="heatmap")for(o=0;o<l.length;o++)e=l[o],f[o].push(s&&s[e]?s[e]:"NA")}else f.push(t[this.decorations[n]]?t[this.decorations[n]]:t.decorations?t.decorations[this.decorations[n]]:"NA");d.push([y]),this.decorationsType=="pie"&&(i=this.decorations[n],rt.push(this.decorationsProperties[i]&&this.decorationsProperties[i].color?this.decorationsProperties[i].color:this.colors[n%this.colors.length]))}else f.push(!1),d.push([y]);if(f.length>0)if(this.decorationsType.match(/stacked/)){for(et=this.decorationsType.match(/percent/)?!0:!1,n=0;n<this.decorations.length;n++)if(f[n]){var o=[],ot=0,i=this.decorations[n],s=t[this.decorations[n]]?t[this.decorations[n]]:t.decorations?t.decorations[this.decorations[n]]:{};for(e in s)c=this.decorationsProperties[e]&&this.decorationsProperties[e].color?this.decorationsProperties[e].color:this.decorationsColors[this.decorations.length+ot],o.push(c),ot++;this.drawStackedPlot(f[n],r,u,this.decorationsWidth,et,this.sum(f[n]),this.decorationsUnits,"vertical",o,d[n]),c=this.decorationsProperties[i]&&this.decorationsProperties[i].color?this.decorationsProperties[i].color:this.decorationsColors[n],a=this.decorationsProperties[i]&&this.decorationsProperties[i].shape?this.decorationsProperties[i].shape:"circle",this.drawShape(a,r+this.decorationsWidth/2,u+h,h/1.3,h/1.3,c,this.foreground,"closed"),r+=this.decorationsWidth}}else if(this.decorationsType=="heatmap"){if(l){for(k=this.decorationsHeight/f.length,n=0;n<f.length;n++)f[n]&&(i=l[n],this.drawHeatmap(f[n],r,u,this.decorationsWidth,k,this.decorationsRange[0],this.decorationsRange[1],!1,d,"-dec"),c=this.decorationsProperties[i]&&this.decorationsProperties[i].color?this.decorationsProperties[i].color:this.decorationsColors[this.decorations.length+n],a=this.decorationsProperties[i]&&this.decorationsProperties[i].shape?this.decorationsProperties[i].shape:"square",this.drawShape(a,r-h,u+k/2,h/2,h/2,c,this.foreground,"closed")),u+=k;for(n=0;n<this.decorations.length;n++){var i=this.decorations[n],c=this.decorationsProperties[i]&&this.decorationsProperties[i].color?this.decorationsProperties[i].color:this.decorationsColors[n],a=this.decorationsProperties[i]&&this.decorationsProperties[i].shape?this.decorationsProperties[i].shape:"circle";this.drawShape(a,r+this.decorationsWidth/2,u+h,h/1.3,h/1.3,c,this.foreground,"closed"),r+=this.decorationsWidth}}else if(f[0])for(this.drawHeatmap(f,r,u,this.decorationsWidth,k,this.decorationsRange[0],this.decorationsRange[1],!1,d,"-dec"),n=0;n<this.decorations.length;n++){var i=this.decorations[n],c=this.decorationsProperties[i]&&this.decorationsProperties[i].color?this.decorationsProperties[i].color:this.decorationsColors[n],a=this.decorationsProperties[i]&&this.decorationsProperties[i].shape?this.decorationsProperties[i].shape:"circle";this.drawShape(a,r+this.decorationsWidth/2,u+this.decorationsHeight+h/3,h/1.3,h/1.3,c,this.foreground,"closed"),r+=this.decorationsWidth}}else st=this.colors,this.colors=rt,this.drawPie(this.setPieData(f),r,u,ht),this.colors=st}}}}},this.getLegendId=function(n,t){if(n){if(!t){var i=0;for(t=n+"LegendId"+i;this.data.legend.ids[n].hasOwnProperty(t);)i++,t=n+"LegendId"+i}return this.data.legend.ids[n][t]=!0,t}},this.findNetworkXYRange=function(n){var r=Number.MAX_VALUE,u=Number.MAX_VALUE*-1,f=Number.MAX_VALUE,e=Number.MAX_VALUE*-1,i,t;if(n||(n=this.getKeys(this.data.nodeIndices)),n&&n.length>0)if(this.is3DNetwork&&this.layoutDone&&this.scaleFactor)for(i=0;i<n.length;i++)t=this.data.nodes[this.data.nodeIndices[n[i]]],t.hide||t.hiddenParent||t.anchor||(r=Math.min(r,t.x3d),u=Math.max(u,t.x3d),f=Math.min(f,t.y3d),e=Math.max(e,t.y3d));else for(i=0;i<n.length;i++)t=this.data.nodes[this.data.nodeIndices[n[i]]],t.hide||t.hiddenParent||t.anchor||(r=Math.min(r,t.x),u=Math.max(u,t.x),f=Math.min(f,t.y),e=Math.max(e,t.y));return{minX:r,maxX:u,minY:f,maxY:e}},this.inititalizeNetworkLegend=function(){this.data.legend||(this.data.legend={}),this.data.legend.pos||(this.data.legend.pos={}),this.data.legend.pos.nodes||(this.data.legend.pos.nodes={x:!1,y:!1}),this.data.legend.pos.edges||(this.data.legend.pos.edges={x:!1,y:!1}),this.data.legend.pos.decorations||(this.data.legend.pos.decorations={x:!1,y:!1}),this.data.legend.ids||(this.data.legend.ids={nodes:{},edges:{},text:{},decorations:{}})},this.drawNetworkLegend=function(){if(this.showLegend){this.inititalizeNetworkLegend();var n=this.findNetworkXYRange();this.curLegendX=n.minX,this.curLegendY=n.minY,this.showNetworkNodesLegend&&this.drawNetworkLegendNodes(),this.showNetworkEdgesLegend&&this.drawNetworkLegendEdges(),this.showNetworkTextLegend&&this.drawNetworkLegendText(),this.showNetworkDecorationsLegend&&this.drawNetworkLegendDecorations()}},this.drawNetworkLegendNodes=function(){var u,t,f,r,n,s;if(this.data.legend.nodes&&this.data.legend.nodes.length>0){for(u=this.data.legend.pos.nodes.x!=null?this.data.legend.pos.nodes.x:this.curLegendX,t=this.data.legend.pos.nodes.y!=null?this.data.legend.pos.nodes.y:this.curLegendY,this.data.legend.pos.nodes.x=parseInt(u),this.data.legend.pos.nodes.y=parseInt(t),f=0,r=0,n=0;n<this.data.legend.nodes.length;n++){this.data.legend.nodes[n].id=this.getLegendId("nodes",this.data.legend.nodes[n].id);var v=this.data.legend.nodes[n].color||this.nodeFontColor,y=this.data.legend.nodes[n].outline?this.data.legend.nodes[n].outline:this.foreground,p=this.data.legend.nodes[n].shape||this.shapes[0],i=this.data.legend.nodes[n].size?this.data.legend.nodes[n].size*this.nodeFontSize:this.nodeFontSize,w=this.data.legend.nodes[n].width?this.data.legend.nodes[n].width:i,b=this.data.legend.nodes[n].height?this.data.legend.nodes[n].height:i,k=this.data.legend.nodes[n].pattern?this.data.legend.nodes[n].pattern:"closed",d=this.data.legend.nodes[n].rotate?this.data.legend.nodes[n].rotate*Math.PI/180:!1,g=this.data.legend.nodes[n].outlineWidth?this.data.legend.nodes[n].outlineWidth:!1,nt=this.data.legend.nodes[n].imagePath?this.data.legend.nodes[n].imagePath:!1,tt=this.data.legend.nodes[n].zIndex?this.data.legend.nodes[n].zIndex:!1,it=this.data.legend.nodes[n].font?this.data.legend.nodes[n].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,h=parseInt(it)+"Pt "+this.fontName,c=this.data.legend.nodes[n].text?this.data.legend.nodes[n].text:"",rt=this.measureText(c,h);i=parseFloat(sprintf("%.1f",i)),f=Math.max(f,this.margin*3+i+rt),r=i/2,t+=r,this.drawShape(p,this.margin+u+r,this.margin+t+r,w,b,v,y,k,d,g,!1,!1,!1,!1,nt,tt),this.drawText(c,this.margin*2+u+i,this.margin+t+r,h,this.nodeFontColor,"left","middle"),t+=i}t+=this.margin+r;var e=this.data.legend.pos.nodes.x,o=this.data.legend.pos.nodes.y,l=f,a=t-this.data.legend.pos.nodes.y;this.legendBox&&this.rectangle(e,o,l,a,!1,this.legendBoxColor,"open"),s=["rect",e,o,e+l,o+a],this.preScaleNetwork?this.addArea(s,[-1],"-legend-Nodes"):this.addArea(this.adjustNetworkObjects(s),[-1],"-legend-Nodes"),this.curLegendX=u,this.curLegendY=t}},this.drawNetworkLegendEdges=function(){var r,t,f,i,n,h;if(this.data.legend.edges&&this.data.legend.edges.length>0){for(r=this.data.legend.pos.edges.x!=null?this.data.legend.pos.edges.x:this.curLegendX,t=this.data.legend.pos.edges.y!=null?this.data.legend.pos.edges.y:this.curLegendY,this.data.legend.pos.edges.x=parseInt(r),this.data.legend.pos.edges.y=parseInt(t),f=0,i=0,n=0;n<this.data.legend.edges.length;n++){this.data.legend.edges[n].id=this.getLegendId("edges",this.data.legend.edges[n].id);var y=this.data.legend.edges[n].color||this.nodeFontColor,p=this.data.legend.edges[n].type||"line",w=this.data.legend.edges[n].width||1,u=this.data.legend.edges[n].size?this.data.legend.edges[n].size*this.nodeFontSize:this.nodeFontSize,e=this.data.legend.edges[n].font?this.data.legend.edges[n].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,c=parseInt(e)+"Pt "+this.fontName,l=this.data.legend.edges[n].text||"",b=this.measureText(l,c);u=parseFloat(sprintf("%.1f",u)),f=Math.max(f,this.margin*3+u+b),i=e/2,t+=i,this.ctx.lineWidth=w*this.edgeWidth,this.drawLine(p,this.margin+r,this.margin+t+i,r+u,this.margin+t+i,y,!1,!1,0,0),this.drawText(l,this.margin*2+r+u,this.margin+t+i,c,this.nodeFontColor,"left","middle"),t+=e}t+=this.margin+i;var o=this.data.legend.pos.edges.x,s=this.data.legend.pos.edges.y,a=f,v=t-this.data.legend.pos.edges.y;this.legendBox&&this.rectangle(o,s,a,v,!1,this.legendBoxColor,"open"),h=["rect",o,s,o+a,s+v],this.preScaleNetwork?this.addArea(h,[-1],"-legend-Edges"):this.addArea(this.adjustNetworkObjects(h),[-1],"-legend-Edges"),this.curLegendX=r,this.curLegendY=t}},this.drawNetworkLegendText=function(){var f,n,u,r,e,l,h;if(this.data.legend.text&&this.data.legend.text.length>0)for(f=0,n=0;n<this.data.legend.text.length;n++){this.data.legend.text[n].id=this.getLegendId("text",this.data.legend.text[n].id),u=this.data.legend.text[n].x!=null?this.data.legend.text[n].x:this.curLegendX,r=this.data.legend.text[n].y!=null?this.data.legend.text[n].y:this.curLegendY,this.data.legend.text[n].x=parseInt(u),this.data.legend.text[n].y=parseInt(r);var y=this.data.legend.text[n].boxed||this.legendBox,p=this.data.legend.text[n].margin||this.margin,t=this.setNetworkLegendMargins(p),w=this.data.legend.text[n].color||this.nodeFontColor,c=this.data.legend.text[n].text||"",i=this.data.legend.text[n].font?this.data.legend.text[n].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor;i=parseInt(i),e=i+"Pt "+this.fontName,l=this.measureText(c,e),f=i/2,this.drawText(c,t[3]+u,t[0]+r+f,e,w,"left","middle");var o=this.data.legend.text[n].x,s=this.data.legend.text[n].y,a=t[1]+t[3]+l,v=t[0]+t[2]+i;y&&this.rectangle(o,s,a,v,!1,this.legendBoxColor,"open"),r+=t[0]+t[2]+i,h=["rect",o,s,o+a,s+v],this.preScaleNetwork?this.addArea(h,[-1],"-legend-Text"+n):this.addArea(this.adjustNetworkObjects(h),[-1],"-legend-Text"+n),this.curLegendX=u,this.curLegendY=r}},this.drawNetworkLegendDecorations=function(){var u,t,f,r,n,s;if(this.data.legend.decorations&&this.data.legend.decorations.length>0){for(u=this.data.legend.pos.decorations.x!=null?this.data.legend.pos.decorations.x:this.curLegendX,t=this.data.legend.pos.decorations.y!=null?this.data.legend.pos.decorations.y:this.curLegendY,this.data.legend.pos.decorations.x=parseInt(u),this.data.legend.pos.decorations.y=parseInt(t),f=0,r=0,n=0;n<this.data.legend.decorations.length;n++){this.data.legend.decorations[n].id=this.getLegendId("decorations",this.data.legend.decorations[n].id);var v=this.data.legend.decorations[n].color||this.nodeFontColor,y=this.data.legend.decorations[n].outline?this.data.legend.decorations[n].outline:this.foreground,p=this.data.legend.decorations[n].shape||this.shapes[0],i=this.data.legend.decorations[n].size?this.data.legend.decorations[n].size*this.nodeFontSize:this.nodeFontSize,w=this.data.legend.decorations[n].width?this.data.legend.decorations[n].width:i,b=this.data.legend.decorations[n].height?this.data.legend.decorations[n].height:i,k=this.data.legend.decorations[n].pattern?this.data.legend.decorations[n].pattern:"closed",d=this.data.legend.decorations[n].rotate?this.data.legend.decorations[n].rotate*Math.PI/180:!1,g=this.data.legend.decorations[n].outlineWidth?this.data.legend.decorations[n].otlineWidth:!1,nt=this.data.legend.decorations[n].font?this.data.legend.decorations[n].font*this.nodeFontSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,h=parseInt(nt)+"Pt "+this.fontName,c=this.data.legend.decorations[n].text?this.data.legend.decorations[n].text:"",tt=this.measureText(c,h);i=parseFloat(sprintf("%.1f",i)),f=Math.max(f,this.margin*3+i+tt),r=i/2,t+=r,this.drawShape(p,this.margin+u+r,this.margin+t+r,w,b,v,y,k,d,g),this.drawText(c,this.margin*2+u+i,this.margin+t+r,h,this.nodeFontColor,"left","middle"),t+=i}t+=this.margin+r;var e=this.data.legend.pos.decorations.x,o=this.data.legend.pos.decorations.y,l=f,a=t-this.data.legend.pos.decorations.y;this.legendBox&&this.rectangle(e,o,l,a,!1,this.legendBoxColor,"open"),s=["rect",e,o,e+l,o+a],this.preScaleNetwork?this.addArea(s,[-1],"-legend-Decorations"):this.addArea(this.adjustNetworkObjects(s),[-1],"-legend-Decorations"),this.curLegendX=u,this.curLegendY=t}},this.setNetworkLegendMargins=function(n){if(isNaN(n)){var t=n.split(/[,\s]+/);return t.length>3?[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:t.length==3?[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),parseInt(t[1])]:t.length==2?[parseInt(t[0]),parseInt(t[1]),parseInt(t[0]),parseInt(t[1])]:[parseInt(t[0]),parseInt(t[0]),parseInt(t[0]),parseInt(t[0])]}return[parseInt(n),parseInt(n),parseInt(n),parseInt(n)]},this.drawNetworkProgressBar=function(n){if(!this.layoutDone){this.ctx.save(),this.ctx.fillStyle="#fff",this.ctx.strokeStyle="#fff";var t=((new Date).getTime()-this.preUpdateTime)/(this.layoutTime*1e3);t=Math.max(t,this.layoutProgress),n?(this.ctx.strokeRect(this.width/2-50,this.height/2-5,100,10),this.ctx.fillRect(this.width/2-50,this.height/2-5,t*100,10),this.drawText("Calculating ...",this.width/2-50,this.height/2+10,this.showAnimationFont,this.showAnimationFontColor,"left","top")):(this.ctx.strokeRect(this.width-110,this.height-20,100,10),this.ctx.fillRect(this.width-110,this.height-20,t*100,10)),this.ctx.restore()}},this.packSubNetworks=function(){var c=this,e=function(n,t,i){for(var r=0;r<n.length;r++)c.modifyXYNode(n[r],t,i)},t=function(n,t,i,r){this.x=n,this.y=t,this.w=i,this.h=r},i,r,n;for(t.prototype.fits=function(n){return n.w>=this.w&&n.h>=this.h},t.prototype.sameSize=function(n){return n.w==this.w&&n.h==this.h},i=function(){this.l=null,this.r=null,this.a=null,this.f=!1},i.prototype.insert=function(n){if(this.l!=null)return this.l.insert(n)||this.r.insert(n);if(this.f||!n.fits(this.a))return null;if(n.sameSize(this.a))return this.f=!0,this;this.l=new i,this.r=new i;var u=this.a.w-n.w,f=this.a.h-n.h,r=this.a;return u>f?(this.l.a=new t(r.x,r.y,n.w,r.h),this.r.a=new t(r.x+n.w,r.y,r.w-n.w,r.h)):(this.l.a=new t(r.x,r.y,r.w,n.h),this.r.a=new t(r.x,r.y+n.h,r.w,r.h-n.h)),this.l.insert(n)},n=0;n<this.subNetworks.length;n++)this.subNetworks[n].mnm=this.findNetworkXYRange(this.subNetworks[n].nodes),this.subNetworks[n].w=this.subNetworks[n].mnm.maxX-this.subNetworks[n].mnm.minX,this.subNetworks[n].h=this.subNetworks[n].mnm.maxY-this.subNetworks[n].mnm.minY,e(this.subNetworks[n].nodes,this.subNetworks[n].mnm.minX,this.subNetworks[n].mnm.minY);for(r=this.subNetworks[1],n=0;n<this.subNetworks.length;n++)this.subNetworks[n].w+=r.w*.5,this.subNetworks[n].h+=r.h*.5;var u=this.subNetworks[0],o=u.nodes.length/this.data.nodes.length,l=(2+o)*this.x/this.y*u.w,a=(2+o)*this.y/this.x*u.h,s=new i;for(s.a=new t(0,0,l,a),n=0;n<this.subNetworks.length;n++){var h=this.subNetworks[n],v=new t(0,0,h.w,h.h),f=s.insert(v);f&&e(this.subNetworks[n].nodes,-f.a.x,-f.a.y)}this.scaleFactor*=.1},this.setNetworkMinMaxRangeXY=function(){var t;if(!this.networkFreeze||this.rangeX==null||this.rangeY==null){if(this.subNetworks&&!this.isAnimation&&(this.packSubNetworks(),this.isAnimation||(this.subNetworks=!1)),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=0,this.maxY=0,this.is3DNetwork&&this.layoutDone)for(t=0;t<this.data.nodes.length;t++){var n=this.data.nodes[t],i=n.width?n.width:n.size?this.nodeSize*n.size:this.nodeSize,r=n.height?n.height:n.size?this.nodeSize*n.size:this.nodeSize;n.hide||(this.minX=Math.min(this.minX,n.x3d-i/2),this.minY=Math.min(this.minY,n.y3d-r/2),this.maxX=Math.max(this.maxX,n.x3d+i/2),this.maxY=Math.max(this.maxY,n.y3d+r/2))}else for(t=0;t<this.data.nodes.length;t++){var n=this.data.nodes[t],i=n.width?n.width:n.size?this.nodeSize*n.size:this.nodeSize,r=n.height?n.height:n.size?this.nodeSize*n.size:this.nodeSize;n.hide||(this.minX=Math.min(this.minX,n.x-i/2),this.minY=Math.min(this.minY,n.y-r/2),this.maxX=Math.max(this.maxX,n.x+i/2),this.maxY=Math.max(this.maxY,n.y+r/2))}this.minX-=this.nodeSize*3,this.minY-=this.nodeSize*3,this.maxX+=this.nodeSize*3,this.maxY+=this.nodeSize*3,this.rangeX=this.maxX-this.minX,this.rangeY=this.maxY-this.minY}},this.setNetworkRotation=function(){var f,e,i,n,t,r,u;if(this.is3DNetwork&&this.layoutDone){var o=[],s=[],h=[];for(this.set3DRotation(),t=0;t<this.data.nodes.length;t++)s.push(t),n=this.data.nodes[t],f=this.get3DTransfrom(n.x,n.y,n.z),n.x3d=f[0],n.y3d=f[1],n.z3d=f[2],o.push(Math.sqrt(n.x3d*n.x3d+n.y3d*n.y3d+n.z3d*n.z3d));for(s.sort(function(n,t){return o[t]-o[n]}),e=0;e<this.data.nodes.length;e++)t=s[e],n=this.data.nodes[t],h.push(n);this.data.nodes=h,this.setNodeIndices()}else if(this.network2DRotate!=0){for(this.network2DRotate>=Math.abs(360)&&(this.network2DRotate=0),i=Math.PI*this.network2DRotate/360,t=0;t<this.data.nodes.length;t++)n=this.data.nodes[t],n.x!=null&&n.y!=null&&(r=n.x,u=n.y,n.x=r*Math.cos(i)-u*Math.sin(i),n.y=u*Math.cos(i)+r*Math.sin(i));if(this.data.legend.pos.nodes.x&&this.data.legend.pos.nodes.y&&(r=this.data.legend.pos.nodes.x,u=this.data.legend.pos.nodes.y,this.data.legend.pos.nodes.x=r*Math.cos(i)-u*Math.sin(i),this.data.legend.pos.nodes.y=u*Math.cos(i)+r*Math.sin(i)),this.data.legend.pos.edges.x&&this.data.legend.pos.edges.y&&(r=this.data.legend.pos.edges.x,u=this.data.legend.pos.edges.y,this.data.legend.pos.edges.x=r*Math.cos(i)-u*Math.sin(i),this.data.legend.pos.edges.y=u*Math.cos(i)+r*Math.sin(i)),this.data.legend.text)for(t=0;t<this.data.legend.text.length;t++)r=this.data.legend.text[t].x,u=this.data.legend.text[t].y,this.data.legend.text[t].x=r*Math.cos(i)-u*Math.sin(i),this.data.legend.text[t].y=u*Math.cos(i)+r*Math.sin(i);this.network2DRotate=0}},this.setNetworkScaleFactor=function(){(!this.networkFreeze||this.scaleFactor==null||isNaN(this.scaleFactor))&&(this.scaleFactor=this.networkLayoutType=="radial"?.3:Math.min(this.x/(this.maxX-this.minX),this.y/(this.maxY-this.minY))),this.scaleFactor*=this.zoom,this.networkFreeze&&(this.zoomGlobal*=this.zoom,this.zoom=1),this.widthBounds=this.x/this.scaleFactor,this.heightBounds=this.y/this.scaleFactor,this.offsetX=this.widthBounds/2-(this.minX+this.maxX)/2+this.panningX+this.panningGlobalX,this.offsetY=this.heightBounds/2-(this.minY+this.maxY)/2+this.panningY+this.panningGlobalY},this.optimizeNetworkLayout=function(){if(this.data.nodes.length>0){this.isAnimation=!0,this.setInitialForceDirectedLayout(),this.preUpdateTime=(new Date).getTime();var t=this.layoutTime*1e3,i=this.maxIterations*this.nodes.length,n=this,r=function(){this.update=function(){var u=(new Date).getTime();(n.updateForceDirectedLayout(30)||u-n.preUpdateTime>t||n.iteration>i)&&(n.layoutDone=!0,clearInterval(r),n.isAnimation=!1,n.iteration=0),n.renderNetwork()};var r=setInterval(this.update,30)};r.call()}},this.getAngle=function(n,t,i,r,u){var f=Math.atan2(r-t,i-n)*180/Math.PI%360;for(u||(u=0);f<u;)f+=360;while(f>=u+360)f-=360;return f},this.getPolar=function(n,t){return{x:this.networkXCenter+n*Math.cos(t*Math.PI/180),y:this.networkYCenter+n*Math.sin(t*Math.PI/180)}},this.setNodePositions=function(n){var t,i;for(t in n)i=this.data.nodes[this.data.nodeIndices[t]],i.x=n[t].x,i.y=n[t].y},this.animateRadialNodePositions=function(){var t,i,f;this.isAnimation=!0;var n=this,u=50,r=0;for(t in n.finalRadialNodePositions)this.initialRadialNodePositions[t].r==0&&(this.initialRadialNodePositions[t].a=this.finalRadialNodePositions[t].a),this.finalRadialNodePositions[t].r==0&&(this.finalRadialNodePositions[t].a=this.initialRadialNodePositions[t].a),i=this.finalRadialNodePositions[t].a-this.initialRadialNodePositions[t].a,i<0&&(i+=360),i>360&&(i-=360),i>180&&(i-=360),this.finalRadialNodePositions[t].a=this.initialRadialNodePositions[t].a+i;f=function(){this.update=function(){var f={},e=Math.atan(r/u*10-5)*.5/Math.atan(5)+.5,o=1-e,i;for(i in n.finalRadialNodePositions){var h=o*n.initialRadialNodePositions[i].a+e*n.finalRadialNodePositions[i].a,c=o*n.initialRadialNodePositions[i].r+e*n.finalRadialNodePositions[i].r,s=n.getPolar(c,h);f[i]={x:s.x,y:s.y}}r>=u&&(clearInterval(t),n.isAnimation=!1,f=n.finalRadialNodePositions),r++,n.setNodePositions(f),n.renderNetwork(),!n.isAnimation&&n.networkLayoutType=="radial"&&n.showNetworkRadialLayout&&n.renderRadialLayout()};var t=setInterval(this.update,50)},f.call()},this.setFinalRadialNodePositions=function(n,t){var o,f,c,r,s,e,i,h,u;if(this.finalRadialNodePositions||(this.finalRadialNodePositions={}),!this.nodeParentHood.drawn.hasOwnProperty(n)&&(e=this.data.nodes[this.data.nodeIndices[n]],!e.hide&&!e.hiddenParent)){if(this.nodeParentHood[n].children.length>1&&!t){for(i=[],h=this,this.orderRadialNetwork&&this.nodeParentHood[n].children.sort(function(n,t){return h.orderRadialNetwork[n]-h.orderRadialNetwork[t]}),u=0;u<this.nodeParentHood[n].children.length;u++)this.nodeParentHood[this.nodeParentHood[n].children[u]].level>this.nodeParentHood[n].level&&(this.setFinalRadialNodePositions(this.nodeParentHood[n].children[u]),i.push(this.nodeParentHood[this.nodeParentHood[n].children[u]].angle));i.length>0?r=i.length==1?i[0]:i[0]>i[i.length-1]?(i[0]+i[i.length-1])%360/2:(i[0]+i[i.length-1])/2:this.setFinalRadialNodePositions(n,!0)}else r=this.networkCurrentAngle,this.networkCurrentAngle=this.networkCurrentAngle+this.networkAngleStep;c=this.networkDepth-1-this.nodeParentHood[n].level,o=this.getPolar(this.networkRadialRadius,r),f=this.shortenLine(this.networkXCenter,this.networkYCenter,o.x,o.y,0,this.networkLevelSize*c,"line"),s=this.lineLength(this.networkXCenter,this.networkYCenter,f[2],f[3]),this.nodeParentHood[n].level==0&&(r=0,s=0),this.finalRadialNodePositions[e.id]={x:f[2],y:f[3],r:s,a:r%360},this.nodeParentHood.drawn[n]=!0,this.nodeParentHood[n].angle=r}},this.setInitialRadialNodePositions=function(){var n,t;if(this.initialRadialNodePositions)this.initialRadialNodePositions=this.finalRadialNodePositions,this.finalRadialNodePositions=!1;else for(this.initialRadialNodePositions={},n=0;n<this.data.nodes.length;n++)this.data.nodes[n].hide||this.data.nodes[n].hiddenParent||(t=this.data.nodes[n],this.initialRadialNodePositions[t.id]={x:this.networkXCenter,y:this.networkYCenter,r:0,a:0})},this.setRadialNetwrorkLayout=function(){this.data.nodes.length>0&&(this.networkLevelSize=this.x*4/(this.networkDepth*2),this.networkAngleStep=360/this.networkDivisions,this.networkCurrentAngle=this.networkCurrentAngle?this.networkCurrentAngle:0,this.networkRadialRadius=this.networkLevelSize*(this.networkDepth-1),this.setInitialRadialNodePositions(),this.setFinalRadialNodePositions(this.networkRoot),this.layoutDone=!0,this.showAnimation?this.animateRadialNodePositions():(this.setNodePositions(this.finalRadialNodePositions),this.renderNetwork()))},this.createRandomNetwork=function(n){var i={},o={},s,c,u,v,r,t;if(n)i=this.createMesh();else{for(i.nodes=[],s=Math.floor(Math.random()*this.randomNetworkNodes)+1,t=0;t<s;t++){var e={},y=Math.floor(Math.random()*this.shapes.length),h=Math.floor(Math.random()*this.colors.length);e.id="id"+t,e.shape=this.shapes[y],e.color=this.colors[h],e.size=1,i.nodes.push(e)}for(i.edges=[],t=0;t<i.nodes.length;t++){for(c=i.nodes[t],r=[],u=0;u<Math.floor(Math.random()*this.randomNetworkNodeEdgesMax)-1;u++)r.push(Math.floor(Math.random()*s));for(u=0;u<r.length;u++){var a=i.nodes[r[u]],l=t+":"+r[u],p=r[u]+":"+t;if(c.id!=a.id&&!o.hasOwnProperty(l)&&!o.hasOwnProperty(l)){var f={},w=Math.floor(Math.random()*this.lines.length),h=Math.floor(Math.random()*this.colors.length);f.id1=c.id,f.id2=a.id,f.width=1,f.type=this.lines[w],f.color=this.colors[h],i.edges.push(f),o[l]=1,o[p]=1}}}}if(this.reduceRandomNetwork&&(v=this.normalizeGraph(i),i=this.reduceNetwork(v,function(n,t){return n.nodes&&t.nodes?n.nodes.length>=t.nodes.length?n:t:n.nodes?n:t.nodes?t:null})),i.nodes.length<5)return this.createRandomNetwork(!0);for(r=[],t=0;t<i.edges.length;t++)i.edges[t].id1&&i.edges[t].id2&&r.push(i.edges[t]);return i.edges=r,i},this.createMesh=function(){var t={},i,r,f,n;for(t.nodes=[],t.edges=[],i=7,r=this,n=0;n<i*i;n++){var u={},e=Math.floor(Math.random()*this.shapes.length),o=Math.floor(Math.random()*this.colors.length);u.id="id"+n,u.shape=this.shapes[e],u.color=this.colors[o],u.size=1,t.nodes.push(u)}for(f=function(n,i){var u={},f=Math.floor(Math.random()*r.lines.length),e=Math.floor(Math.random()*r.colors.length);return u.id1=t.nodes[n].id,u.id2=t.nodes[i].id,u.width=1,u.type=r.lines[f],u.color=r.colors[e],u},n=0;n<t.nodes.length;n++)Math.floor(Math.random()*i)!=0&&(n+1<t.nodes.length&&(n+1)%i!=0&&t.edges.push(f(n,n+1)),n+i<t.nodes.length&&t.edges.push(f(n,n+i)));return t},this.setNodeChildren=function(n,t,i){var e,u,r,f;if(this.networkDepth=t>this.networkDepth?t:this.networkDepth,e=this.data.nodes[this.data.nodeIndices[n]],!e.hide&&!e.hiddenParent)if(u=this.edgesForNode(this.data.edges,n),this.nodeParentHood.hasOwnProperty(n))for(this.nodeParentHood[n].level=t<this.nodeParentHood[n].level?t:this.nodeParentHood[n].level,r=0;r<this.nodeParentHood[n].children.length;r++)f=this.nodeParentHood[n].children[r],this.nodeParentHood[f]&&t+1<this.nodeParentHood[f].level&&(this.nodeParentHood[f].level=t+1,this.nodeParentHood[f].parent=n);else if(u.length==1&&this.networkDivisions++,u.length>0)for(r=0;r<u.length;r++)this.nodeParentHood[n]||(this.nodeParentHood[n]={},this.nodeParentHood[n].children=[],this.nodeParentHood[n].level=t,this.nodeParentHood[n].angle=0,this.nodeParentHood[n].parent=i),this.nodeParentHood[n].level=t<this.nodeParentHood[n].level?t:this.nodeParentHood[n].level,u[r].id1==n?(this.nodeParentHood[n].children.push(u[r].id2),this.setNodeChildren(u[r].id2,t+1,n)):u[r].id2==n&&(this.nodeParentHood[n].children.push(u[r].id1),this.setNodeChildren(u[r].id1,t+1,n))},this.setNodeParentHood=function(){var n,t;if(this.nodeParentHood={},this.networkLayoutType=="radial")this.networkRoot||(this.networkRoot=this.data.nodes[0].id),this.nodeParentHood.drawn={},this.networkDepth=0,this.networkDivisions=0,this.setNodeChildren(this.networkRoot,0,!1);else{for(n=0;n<this.data.nodes.length;n++)this.data.nodes[n].hide||(this.data.nodes[n].parentNode||this.data.nodes[n].hideChildren)&&(this.data.nodes[n].parentNode&&!this.nodeParentHood.hasOwnProperty(this.data.nodes[n].parentNode)&&(this.nodeParentHood[this.data.nodes[n].parentNode]={}),this.data.nodes[n].parentNode&&(this.nodeParentHood[this.data.nodes[n].parentNode].children||(this.nodeParentHood[this.data.nodes[n].parentNode].children=[]),this.nodeParentHood[this.data.nodes[n].parentNode].children.push(this.data.nodes[n].id),this.data.nodes[this.data.nodeIndices[this.data.nodes[n].parentNode]].hideChildren&&(this.data.nodes[n].hiddenParent=!0)),this.data.nodes[n].hideChildren&&(this.nodeParentHood.hasOwnProperty(this.data.nodes[n].id)||(this.nodeParentHood[this.data.nodes[n].id]={}),this.nodeParentHood[this.data.nodes[n].id].hideChildren=!0));for(t in this.nodeParentHood)this.data.nodes[this.data.nodeIndices[t]].hideChildren||this.isParentHidden(t)?this.hideUnhideChildrenNodes(t,!0):this.nodeParentHood[t].children&&this.hideUnhideChildrenNodes(t,!1)}},this.isParentHidden=function(n){var i=this.findParentNodes(n),t;if(i)for(t=0;t<i.length;t++)if(this.data.nodes[this.data.nodeIndices[i[t]]].hideChildren)return!0;return!1},this.findParentNodes=function(n,t){if(this.data.nodes[this.data.nodeIndices[n]].parentNode){var i=this.data.nodes[this.data.nodeIndices[n]].parentNode;return t||(t=[]),t.push(i),this.findParentNodes(i,t)}return t?t.reverse():!1},this.findChildrenNodeIndices=function(n,t){if(t||(t=[]),this.networkLayoutType!="radial"&&this.nodeParentHood[n]&&this.nodeParentHood[n].children)for(var i=0;i<this.nodeParentHood[n].children.length;i++)t.push(this.data.nodeIndices[this.nodeParentHood[n].children[i]]),t=this.findChildrenNodeIndices(this.nodeParentHood[n].children[i],t);return t.length>0?t:!1},this.hasChildren=function(n){return this.nodeParentHood[n]&&this.nodeParentHood[n].children},this.findVisibleParentNode=function(n){var t=this.findParentNodes(n),i;if(t)for(t.reverse(),i=0;i<t.length;i++)if(!this.nodes[t[i]].hide&&!this.nodes[t[i]].hiddenParent)return this.nodes[t[i]];return!1},this.collateNetworks=function(){var n,r,t,u,i;if(this.data.nodes.length>0&&(n=this.normalizeGraph({nodes:this.data.nodes,edges:this.data.edges}),n.length>1)){for(r=[],t=0;t<n.length;t++)r.push(t);for(r.sort(function(t,i){return n[i].nodes.length-n[t].nodes.length}),this.subNetworks=[],u=0;u<n.length;u++){var t=r[u],e=[],o=[],f=n[t].nodes.length,s=n[t].edges.length,h=f/this.data.nodes.length,c=h*this.x*Math.log(n.length),l=h*this.y*Math.log(n.length),a=c*l;for(i=0;i<n[t].nodes.length;i++)e.push(n[t].nodes[i].id);for(i=0;i<n[t].edges.length;i++)typeof n[t].edges[i]!="function"&&o.push(n[t].edges[i]);this.subNetworks.push({nodes:e,edges:o,x:c,y:l,area:a,networkForceConstant:Math.sqrt(a/f),temperature:f+Math.floor(Math.sqrt(s)),minimumTemperature:1,initialTemperature:f+Math.floor(Math.sqrt(s)),initialProgress:null,layoutProgress:0,layoutDone:!1})}}},this.setObjectAttributes=function(){this.colorNodeBy&&this.setAllObjectAttributes("nodes","color",this.colorNodeBy),this.shapeNodeBy&&this.setAllObjectAttributes("nodes","shape",this.shapeNodeBy),this.sizeNodeBy&&this.setAllObjectAttributes("nodes","size",this.sizeNodeBy),this.sizeDecorationBy&&this.setAllObjectAttributes("nodes","size",this.sizeDecorationBy,!0),this.colorEdgeBy&&this.setAllObjectAttributes("edges","color",this.colorEdgeBy),this.shapeEdgeBy&&this.setAllObjectAttributes("edges","shape",this.shapeEdgeBy),this.sizeEdgeBy&&this.setAllObjectAttributes("edges","size",this.sizeEdgeBy)},this.setDecorationsRangeUnits=function(){var e,s,o,r,u,l,h,a,n,t,i,f,c;if(this.decorationsRange=[],e={},s={},this.showDecorations&&this.decorations.length>0){for(o=[],n=0;n<this.data.nodes.length;n++)for(r=this.data.nodes[n],i=0;i<this.decorations.length;i++)if(r[this.decorations[i]]||r.decorations&&r.decorations[this.decorations[i]])if(u=r[this.decorations[i]]?r[this.decorations[i]]:r.decorations[this.decorations[i]],this.isObject(u))if(this.decorationsType=="stacked"){l=0;for(t in u)isNaN(u[t])||(s[t]=!0,l+=u[t]);o.push(l)}else if(this.decorationsType=="stackedpercent"){for(t in u)isNaN(u[t])||(s[t]=!0);o=[0,100]}else if(this.decorationsType=="heatmap")for(t in u)isNaN(u[t])||(s[t]=!0,o.push(u[t]));else{alert("Ooops! canvasXpress does not support "+this.decorationsType+" for this multidimensional plotting");return}else isNaN(r[this.decorations[i]])&&(!r.decorations||isNaN(r.decorations[this.decorations[i]]))||o.push(r[this.decorations[i]]?r[this.decorations[i]]:r.decorations[this.decorations[i]]);for(this.decorationsRange=this.range(o),this.decorationsType=="stacked"&&(this.decorationsRange[0]=0),h=this.decorationsRange[1]-this.decorationsRange[0],h==0&&(this.decorationsRange[1]=this.max(o)+1),a=this.decorationsType.match(/stacked/)?this.decorationsRange[0]:this.decorationsRange[0]-h*.05,a>0&&(this.decorationsRange[0]=a,h=this.decorationsRange[1]-this.decorationsRange[0]),this.decorationsUnits=this.decorationsHeight/h,this.data.legend||(this.data.legend={}),this.data.legend.decorations=[],n=0;n<this.decorations.length;n++)if(this.decorationsColors[n])e[this.decorationsColors[n]]=!0,this.data.legend.decorations.push({shape:this.decorationsProperties[this.decorations[n]]&&this.decorationsProperties[this.decorations[n]].shape?this.decorationsProperties[this.decorations[n]].shape:"circle",color:this.decorationsProperties[this.decorations[n]]&&this.decorationsProperties[this.decorations[n]].color?this.decorationsProperties[this.decorations[n]].color:this.decorationsColors[n],text:this.decorations[n],size:.5,font:.5});else for(i=0;i<this.colors.length;i++)if(!e.hasOwnProperty(this.colors[i])){f=this.decorationsProperties[this.decorations[n]]&&this.decorationsProperties[this.decorations[n]].color?this.decorationsProperties[this.decorations[n]].color:this.colors[i],c=this.decorationsProperties[this.decorations[n]]&&this.decorationsProperties[this.decorations[n]].shape?this.decorationsProperties[this.decorations[n]].shape:"circle",this.decorationsColors[n]=f,e[f]=!0,this.data.legend.decorations.push({shape:c,color:f,text:this.decorations[n],size:.5,font:.5});break}n=this.decorations.length;for(t in s){if(this.decorationsColors[n])e[this.decorationsColors[n]]=!0,this.data.legend.decorations.push({shape:this.decorationsProperties[t]&&this.decorationsProperties[t].shape?this.decorationsProperties[t].shape:"square",color:this.decorationsProperties[t]&&this.decorationsProperties[t].color?this.decorationsProperties[t].color:this.decorationsColors[n],text:t,size:.5,font:.5});else for(i=0;i<this.colors.length;i++)if(!e.hasOwnProperty(this.colors[i])){f=this.decorationsProperties[t]&&this.decorationsProperties[t].color?this.decorationsProperties[t].color:this.colors[i],c=this.decorationsProperties[t]&&this.decorationsProperties[t].shape?this.decorationsProperties[t].shape:"square",this.decorationsColors[n]=f,e[f]=!0,this.data.legend.decorations.push({shape:c,color:f,text:t,size:.5,font:.5});break}n++}}},this.recalculateLayout=function(){this.calculateLayout=!0,this.initializeNetwork()},this.drawNetworkPlot=function(){this.showAnimationFont=this.showAnimationFontSize+"Pt "+this.fontName,this.setNodeParentHood(),this.setObjectAttributes(),this.setDecorationsRangeUnits(),this.calculateLayout?(this.collateNetworks(),this.setNetworkPrivateParams(),this.networkLayoutType=="radial"?this.setRadialNetwrorkLayout():this.optimizeNetworkLayout(),this.calculateLayout=!1):(this.layoutDone=!0,this.networkLayoutType=="radial"&&this.showAnimation?this.setRadialNetwrorkLayout():this.renderNetwork()),this.networkFreezeOnLoad&&this.layoutDone&&(this.networkFreezeOnLoad=!1,this.networkFreeze=!0)},this.initializeNetwork=function(){if(this.setNetworkDimensions(),!this.nodes&&this.data.nodes&&this.setNodes(),this.randomNetwork){var n=this.createRandomNetwork();this.data.nodes=n.nodes,this.data.edges=n.edges,this.setAllNodesVisible(),this.setNodes(),this.layoutDone=!1}this.drawNetworkPlot()},n||this.initializeNetwork()},CanvasXpress.prototype.Genome=function(){this.setGenomeSubtracks=function(){var o,nt,r,t,n;this.subtracks=[],this.subtracksInfo=[],this.y=this.margin;var v=this.marginTop+this.top,rt=0,y=this.xAxisMin*this.xAxisUnit,p=this.xAxisMax*this.xAxisUnit;for(o=0;o<this.data.tracks.length;o++){var w,f,u,a,s=[],e=[],b=0,i=this.data.tracks[o],c=i.data,h=i.type?i.type:this.featureTypeDefault,ut=i.height?i.height:this.featureHeightDefault,ft=i.subtracksMax||this.subtracksMaxDefault,k=i.bumpSpace?i.bumpSpace:0;if(!i.hide){if(i.name&&!i.hideName&&(this.y+=this.trackNameFontSize+this.margin*2),i.startY=this.marginTop+this.top+this.y,this.subtracks[o]=[],this.featureStaggered){for(t=0;t<c.length;t++){var n=c[t],et=this.shortenText(n.label||n.name||n.id,this.maxFeatureStringLen),d=n.hideName||i.hideFeatureNames?0:this.measureText(et,this.featureNameFont)+this.margin*3,g=n.data;n.hide||(n.index=t,n.counter=rt++,h=="box"?(w=this.getGenomeBoxRange(g),f=w[0]*this.xAxisUnit,u=(w[1]+k)*this.xAxisUnit,n.showDir&&this.xAxisUnit>.001&&(n.dir=="right"?u+=11:f-=11),u=Math.max(f+d,u)):h=="sequence"?(nt=this.setGenomeGaps(n.gaps,n.sequence.length,n.dir),n.offsetLeft&&!n.offset&&(n.offset=n.offsetLeft-(n.sequence.length+nt.total)+1),f=n.offset*this.xAxisUnit,u=f+(n.sequence.length+nt.total+k)*this.xAxisUnit,u=Math.max(f+d,u)):(f=(n.offset+k)*this.xAxisUnit,u=i.autowidth&&this.isArray(g)?f+g.length*this.xAxisUnit:f+i.width?i.width:this.featureWidthDefault,u=Math.max(f+d,u)),a=f>=y&&f<p?!0:u>y&&u<=p?!0:f<=y&&u>=p?!0:!1,s.push([f,u,a,t]))}if(s.length>0){for(s.sort(function(n,t){return n[0]-t[0]}),t=0;t<s.length;t++)if(s[t][2]){for(a=!1,r=0;r<e.length;r++)if(u=e[r][e[r].length-1][1],s[t][0]>u){e[r].push(s[t]),a=!0;break}a||e.push([s[t]])}for(t=0;t<e.length;t++)if(t<ft){this.subtracks[o][t]=[],b+=e[t].length;var l=0,tt=0,it=0;for(r=0;r<e[t].length;r++)n=c[e[t][r][3]],this.subtracks[o][t].push(e[t][r][3]),this.subtracksInfo[n.counter]={track:o,subtrack:t,index:n.index,name:n.label||n.name||n.id,start:v+this.y},h=="box"?(l=Math.max(l,this.getBoxFeatureHeight(n)),tt=Math.max(tt,n.translatesTop||0),it=Math.max(it,n.translatesBottom||0)):h=="sequence"&&(l=Math.max(l,this.getSequenceFeatureHeight(n)));for(this.isNameInSubtrack(i,this.subtracks[o][t])||(this.y+=this.featureNameFontSize+this.margin),this.y+=ut+this.margin,(h=="box"||h=="sequence")&&(this.y+=l),r=0;r<e[t].length;r++)n=c[e[t][r][3]],this.subtracksInfo[n.counter].end=v+this.y,this.subtracksInfo[n.counter].maxHeight=l,this.subtracksInfo[n.counter].translateTop=tt,this.subtracksInfo[n.counter].translateBottom=it}}}else for(t=0;t<c.length;t++)n=c[t],n.hide||(n.index=t,n.counter=rt++,t<ft&&(b++,this.subtracks[o][t]=[t],this.subtracksInfo[n.counter]={track:o,subtrack:t,index:n.index,name:n.label||n.name||n.id,start:v+this.y},this.y+=ut+this.margin,h=="box"?(this.subtracksInfo[n.counter].maxHeight=this.getBoxFeatureHeight(n),this.subtracksInfo[n.counter].translateTop=n.translatesTop||0,this.subtracksInfo[n.counter].translateBottom=n.translatesBottom||0,this.y+=this.subtracksInfo[n.counter].maxHeight):h=="sequence"&&(this.subtracksInfo[n.counter].maxHeight=this.getSequenceFeatureHeight(n),this.y+=this.subtracksInfo[n.counter].maxHeight),this.subtracksInfo[n.counter].end=v+this.y));i.endY=this.y,i.displayedFeatures=b,i.totalFeatures=c.length,this.y+=this.margin*2}}},this.isNameInSubtrack=function(n,t){for(var r,u,i=0;i<t.length;i++)if(r=t[i],u=n.data[r],!u.hideName&&!n.hideFeatureNames)return!1;return!0},this.getGenomeRange=function(n){for(var r=[],u,i,t=0;t<n.length;t++)for(u=n[t].data,i=0;i<u.length;i++)r=r.concat(u[i]);return this.range(r)},this.getGenomeBoxRange=function(n){var t,i;if(n){for(t=[],i=0;i<n.length;i++)t.push(n[i][0]),t.push(n[i][1]);return t.sort(function(n,t){return n-t}),[t[0],t[t.length-1]]}return[0,1]},this.setGenomeGaps=function(n,t,i){var u=0,f={total:u},r,e;if(n&&this.isArray(n)&&n.length>0){for(r=0;r<n.length;r++)e=i=="left"?t-n[r][0]:n[r][0],f[e]=n[r][1],u+=n[r][1];f.total=u}return f},this.getBoxFeatureHeight=function(n){if(this.genomeResolution!="low"&&(n.translate||n.sequence)){if(n.dir!="left"||n.sequenceRC||(n.sequenceRC=this.getReverseComplement(n.sequence)),n.cds&&!n.translate){var t=n.cds[0]%3||3;n.translate=n.dir=="left"?[t*-1]:[t]}if(n.translate&&!n.translateRC&&this.featureTranslateShow&&(n.translateRC=this.translate(n.translate,n.dir=="left"?n.sequenceRC:n.sequence)),n.translate&&this.genomeResolution=="high")return this.featureTranslateHeight*n.translate.length}return 0},this.getSequenceFeatureHeight=function(n){var t=0,i;if(this.genomeResolution=="high"){if(n.trace&&this.featureTracesShow&&(t+=this.featureTraceHeight),n.translate&&this.featureTranslateShow)for(i=0;i<n.translate.length;i++)t+=this.featureTranslateHeight;n.quality&&this.featureQualityShow&&(t+=this.featureQualityHeight),n.signalToNoise&&this.featureSignalToNoiseShow&&(t+=this.featureSignalToNoiseHeight),n.coordinate&&this.featureCoordinateShow&&(t+=this.featureCoordinateHeight)}else this.genomeResolution=="medium"&&n.trace&&this.featureTracesShow&&(t+=this.featureTraceHeight);return t},this.getReverseComplement=function(n){for(var i=n.split(""),r=[],t=0;t<i.length;t++)r.unshift(this.reverseComplement[i[t]]);return r.join("")},this.translate=function(n,t){for(var s={top:[],bottom:[]},o=t.split(""),e=this.getReverseComplement(t).split("").reverse(),h,u,i,f,r,c=0;c<n.length;c++)if(h=n[c],u={seq:[],off:0,rf:n[c]},h=="-1"){for(u.off=e.length%3,i=e.length-1;i>=0;i-=3)f=e[i]+e[i-1]+e[i-2],r=this.codon[f.toUpperCase()],u.seq.unshift(r?r[0]:"");s.bottom.push(u)}else if(h=="-2"){for(u.off=(e.length-1)%3,i=e.length-2;i>=0;i-=3)f=e[i]+e[i-1]+e[i-2],r=this.codon[f.toUpperCase()],u.seq.unshift(r?r[0]:"");s.bottom.push(u)}else if(h=="-3"){for(u.off=(e.length-2)%3,i=e.length-3;i>=0;i-=3)f=e[i]+e[i-1]+e[i-2],r=this.codon[f.toUpperCase()],u.seq.unshift(r?r[0]:"");s.bottom.push(u)}else if(h=="1"){for(u.off=0,i=0;i<o.length;i+=3)f=o[i]+o[i+1]+o[i+2],r=this.codon[f.toUpperCase()],u.seq.push(r?r[0]:"");s.top.push(u)}else if(h=="2"){for(u.off=1,i=1;i<o.length;i+=3)f=o[i]+o[i+1]+o[i+2],r=this.codon[f.toUpperCase()],u.seq.push(r?r[0]:"");s.top.push(u)}else if(h=="3"){for(u.off=2,i=2;i<o.length;i+=3)f=o[i]+o[i+1]+o[i+2],r=this.codon[f.toUpperCase()],u.seq.push(r?r[0]:"");s.top.push(u)}return s},this.setReverseTrace=function(n){var t;if(!n.reversed){var r=n.A.length,u=n.T.reverse(),f=n.G.reverse(),e=n.C.reverse(),o=n.A.reverse(),i=[];for(t=0;t<n.peak.length;t++)i.unshift(r-n.peak[t]);n.A=u,n.C=f,n.G=e,n.T=o,n.peak=i,n.reversed=!0}},this.getCoordinateStep=function(){var n=1;if(this.xAxisUnit*.2>this.sequenceFontSize?n=1:this.xAxisUnit*.5>this.sequenceFontSize?n=5:this.xAxisUnit*1>this.sequenceFontSize?n=10:this.xAxisUnit*200>this.sequenceFontSize?n=20:this.xAxisUnit*500>this.sequenceFontSize?n=50:this.xAxisUnit*1e3>this.sequenceFontSize?n=100:this.xAxisUnit*2500>this.sequenceFontSize?n=250:this.xAxisUnit*5e3>this.sequenceFontSize?n=500:this.xAxisUnit*2e3>this.sequenceFontSize?n=1e3:this.xAxisUnit*1e4>this.sequenceFontSize?n=5e3:this.xAxisUnit*2e4>this.sequenceFontSize?n=1e4:this.xAxisUnit*1e5>this.sequenceFontSize?n=5e4:this.xAxisUnit*2e5>this.sequenceFontSize?n=1e5:this.xAxisUnit*2e6>this.sequenceFontSize?n=1e6:this.xAxisUnit*2e7>this.sequenceFontSize?n=1e7:this.xAxisUnit*2e8>this.sequenceFontSize?n=1e8:this.xAxisUnit*2e9>this.sequenceFontSize?n=1e9:this.xAxisUnit*2e10>this.sequenceFontSize?n=1e10:this.xAxisUnit*2e11>this.sequenceFontSize&&(n=1e11),this.xAxisRange/n>10){for(n*=n*.1;n*10>this.xAxisRange;)n*=.1;return n}return n*3>this.xAxisRange?n*.1:n},this.drawBoxSequenceName=function(n,t,i,r,u,f,e,o,s,h){var c=this.featureNameFontSize/2,l=this.measureText(t,this.featureNameFont)+this.margin;s>=this.xAxisMin&&h<=this.xAxisMax?(f=o+f,this.addArea(this.drawText(t,f,e+c,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+n+":"+u])):s<=this.xAxisMin&&h>=this.xAxisMin?(f=o,this.addArea(this.drawText(t,f,e+c,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+n+":"+u])):s<=this.xAxisMax&&h>=this.xAxisMax?(f=o+f,this.addArea(this.drawText(t,f,e+c,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+n+":"+u])):f=o+f,i=="right"?this.drawShape("polygon",[f+l,f+l+this.margin*2,f+l],[e-1,e+c-1,e+c*2-1],!1,!1,r,r,"closed"):i=="left"&&this.drawShape("polygon",[f+l,f+l+this.margin*2,f+l+this.margin*2],[e+c-1,e-1,e+c*2-1],!1,!1,r,r,"closed")},this.drawGenomeLabels=function(){var s,a,v,y,h,f,r;if(!this.featureStaggered){var c=this.marginLeft,t=this.marginTop+this.top+this.margin,l=this.featureNameFontSize/2,i=0;for(s=0;s<this.data.tracks.length;s++){var e=this.data.tracks[s],w=e.type||this.featureTypeDefault,o=e.height||this.featureHeightDefault;if(!e.hide){for(e.name&&!e.hideName&&(t+=this.trackNameFontSize+this.margin*2),a=0;a<this.subtracks[s].length;a++)if(v=this.subtracks[s][a],v)for(y=0;y<v.length;y++){var k=v[y],n=e.data[k],d=n.counter,p=n.fill||e.fill||this.foreground,b=this.shortenText(n.label||n.name||n.id,this.maxFeatureStringLen),u=n.measureText||this.measureText(b,this.featureNameFont)+this.margin;if(n.measureText=u,n.hideName||e.hideFeatureNames||this.addArea(this.drawText(b,this.marginLeft,t+o/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+s+":"+d]),w=="box"||w=="sequence"){if(n.dir=="right"?this.drawShape("polygon",[c+u,c+u+this.margin*2,c+u],[t,t+l,t+l*2],!1,!1,p,p,"closed"):n.dir=="left"&&this.drawShape("polygon",[c+u,c+u+this.margin*2,c+u+this.margin*2],[t+l,t,t+l*2],!1,!1,p,p,"closed"),n.translate&&this.genomeResolution=="high"&&(h=this.featureNameFontSize-2+"Pt "+this.fontName,i=-4,n.trace&&this.featureTracesShow&&(i+=this.featureTraceHeight),n.translate&&this.featureTranslateShow)){for(f=0;f<n.translate.length;f++)r="+"+n.translate[f],r=="+1"?(this.drawText(r,this.marginLeft+u,t+i+o/2,h,this.featureNameFontColor,"left","middle"),i+=this.featureTranslateHeight):r=="+2"?(this.drawText(r,this.marginLeft+u,t+i+o/2,h,this.featureNameFontColor,"left","middle"),i+=this.featureTranslateHeight):r=="+3"&&(this.drawText(r,this.marginLeft+u,t+i+o/2,h,this.featureNameFontColor,"left","middle"),i+=this.featureTranslateHeight);for(i+=this.sequenceFontSize+2,f=0;f<n.translate.length;f++)r=n.translate[f],r=="-1"?(this.drawText(r,this.marginLeft+u,t+i+o/2,h,this.featureNameFontColor,"left","middle"),i+=this.featureTranslateHeight):r=="-2"?(this.drawText(r,this.marginLeft+u,t+i+o/2,h,this.featureNameFontColor,"left","middle"),i+=this.featureTranslateHeight):r=="-3"&&(this.drawText(r,this.marginLeft+u,t+i+o/2,h,this.featureNameFontColor,"left","middle"),i+=this.featureTranslateHeight)}t+=w=="box"?this.getBoxFeatureHeight(n):this.getSequenceFeatureHeight(n)}t+=o+this.margin}t+=this.margin*2}}}},this.plotGenomeData=function(){for(var r,k,w,ut,st,d,ht=this.marginLeft+this.left,i=this.marginTop+this.top,yt=this.xAxisUnit/2,y,ct,c,b,tt,a,lt,pt,wt,o,at,vt,f,ot,e,bt,kt,h=0;h<this.data.tracks.length;h++){var t=this.data.tracks[h],v=t.type||this.featureTypeDefault,u=t.height||this.featureHeightDefault,ni=t.subtracksMax||this.subtracksMaxDefault,ft=this.setMaxY!=null?this.setMaxY:t.setMaxY!=null?t.setMaxY:null,et=this.setMinY!=null?this.setMinY:t.setMinY!=null?t.setMinY:null,l=v.match(/bar|heatmap|line/)&&ft!=null&&et!=null?[ft,et]:v.match(/bar|heatmap|line/)?this.getGenomeRange(t.data):!1,g=v.match(/bar|line|box/)&&t.fill?t.fill:!1,nt=v.match(/bar|line|box/)&&t.outline?t.outline:this.foreground,ti=g?"closed":"open",p=!1;if(r=ht,!t.hide){if(l&&(ft!=null&&(l[0]=ft),et!=null&&(l[1]=et),ut=l[1]-l[0],st=l[0]-ut*.05,st>0&&(ut=l[1]-st),d=u/Math.max(l[0]+1,ut)),t.name&&!t.hideName&&(y=t.name,t.displayedFeatures!=t.totalFeatures&&(y+=" (Showing "+t.displayedFeatures+" out of "+t.totalFeatures+")"),this.addArea(this.drawText(y,r,i+this.trackNameFontSize/2+this.margin,this.trackNameFont,this.trackNameFontColor,"left","middle"),["track-"+h]),i+=this.trackNameFontSize+this.margin*2),t.highlight&&this.genomeResolution!="low")for(o=t.highlight,c=0;c<o.length;c++)o[c].offset&&(ct=o[c].color?o[c].color:this.colors[h%this.colors.length],r=this.marginLeft+this.left+(o[c].offset-.5-this.xAxisMin)*this.xAxisUnit,k=o[c].width?o[c].width*this.xAxisUnit:this.xAxisUnit,this.rectangle(r,t.startY,k,t.endY-t.startY+u,ct,ct));for(c=0;c<this.subtracks[h].length;c++)if(b=this.subtracks[h][c],b){for(this.featureStaggered&&(p=this.isNameInSubtrack(t,b)),tt=0;tt<b.length;tt++){var dt=b[tt],n=t.data[dt],s=n.data,y=this.shortenText(n.label||n.name||n.id,this.maxFeatureStringLen);if(v=="box")s.length>0&&(this.setGenomeBoxExons(n),!this.featureStaggered||t.hideFeatureNames||n.hideName&&p||(n.hideName||(r=(n.start-this.xAxisMin)*this.xAxisUnit-yt,this.drawBoxSequenceName(h,y,n.dir,n.fill||g,n.counter,r,i,ht,n.start,n.end)),i+=this.featureNameFontSize+this.margin),this.drawGenomeBox(i,u,n,t),this.genomeResolution=="high"&&n.translate&&this.featureTranslateShow&&(i+=this.featureTranslateHeight*n.translate.length));else if(v=="sequence")if(a=this.setGenomeGaps(n.gaps,n.sequence.length,n.dir),n.offsetLeft&&!n.offset&&(n.offset=n.offsetLeft-(n.sequence.length+a.total)+1),!this.featureStaggered||t.hideFeatureNames||n.hideName&&p||(n.hideName||(r=(n.offset-this.xAxisMin)*this.xAxisUnit-yt,this.drawBoxSequenceName(h,y,n.dir,n.fill,n.counter,r,i,ht,n.offset,n.offset+n.sequence.length+a.total)),i+=this.featureNameFontSize+this.margin),this.genomeResolution=="high"){if(n.trace&&this.featureTracesShow&&(this.drawGenomeTrace(i,n.counter,this.featureTraceHeight-1,n.offset,n.trace,a,n.dir),i+=this.featureTraceHeight),this.drawGenomeSequence(i,u,a,n,t),i+=u,n.translate&&this.featureTranslateShow)for(lt=0;lt<n.translate.length;lt++)i+=this.featureTranslateHeight;n.quality&&this.featureQualityShow&&(this.drawGenomeQuality(i,n.counter,this.featureQualityHeight-1,n.offset,n.quality,a,n.dir,t),i+=this.featureQualityHeight),n.signalToNoise&&this.featureSignalToNoiseShow&&(this.drawGenomeSignalToNoise(i,n.counter,this.featureSignalToNoiseHeight-1,n.offset,n.signalToNoise,a,n.dir,t),i+=this.featureSignalToNoiseHeight),n.coordinate&&this.featureCoordinateShow&&(this.drawGenomeCoordinate(i+1,n.counter,this.featureCoordinateHeight-1,n.offset,n.coordinate,n.sequence.length,a,n.dir,t),i+=this.featureCoordinateHeight),i-=u}else this.genomeResolution=="medium"?(n.trace&&this.featureTracesShow&&(this.drawGenomeTrace(i,n.counter,this.featureTraceHeight-1,n.offset,n.trace,a,n.dir),i+=this.featureTraceHeight),this.drawGenomeSequence(i,u,a,n,t),n.coordinate&&this.featureCoordinateShow&&this.drawGenomeCoordinate(i+1,n.counter,this.featureCoordinateHeight-1,n.offset,n.coordinate,n.sequence.length,a,n.dir,t)):(this.drawGenomeSequence(i,u,a,n,t),n.coordinate&&this.featureCoordinateShow&&this.drawGenomeCoordinate(i+1,n.counter,this.featureCoordinateHeight-1,n.offset,n.coordinate,n.sequence.length,a,n.dir,t));else if(v=="bar")for(f=this.genomeResolution=="high"?this.xAxisUnit/s.length:t.autowidth?this.xAxisUnit:n.width?n.width:t.width?t.width:this.featureWidthDefault,pt=f*s.length,r=this.marginLeft+this.left+(n.offset-this.xAxisMin)*this.xAxisUnit-(pt/2+1),!this.featureStaggered||t.hideFeatureNames||n.hideName&&p||(n.hideName||this.addArea(this.drawText(y,r,i+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+h+":"+n.counter]),i+=this.featureNameFontSize+this.margin),this.addArea(["rect",r,i,r+s.length*f,i+u],[n.counter]),k=r,wt=l[1]<0?i:l[0]>=0?i+u:i+u-Math.abs(l[0]*d),e=0;e<s.length;e++){var it=n.fill||g,rt=n.outline||nt,gt=this.isArray(it)&&it.length==s.length?it[e]:this.isArray(it)?it[0]:this.foreground,ot=this.isArray(rt)&&rt.length==s.length?rt[e]:this.isArray(rt)?rt[0]:this.foreground,o=s[e]*d;this.rectangle(k,wt,f,-o,gt,ot),k+=t.autowidth?f:f+2}else if(v=="heatmap")for(f=this.genomeResolution=="high"?this.xAxisUnit:t.autowidth?this.xAxisUnit:n.width?n.width:t.width?t.width:this.featureWidthDefault,r=this.marginLeft+this.left+(n.offset-this.xAxisMin)*this.xAxisUnit-(f/2+1),!this.featureStaggered||t.hideFeatureNames||n.hideName&&p||(n.hideName||this.addArea(this.drawText(y,r,i+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+h+":"+n.counter]),i+=this.featureNameFontSize+this.margin),this.addArea(["rect",r,i,r+f,i+u],[n.counter]),o=t.autowidth?u:u/s.length,w=i,e=0;e<s.length;e++)at=s[e],vt=this.getHeatmapColor(l[0],l[1],at),isNaN(at)?this.rectangle(r,w,f,o,this.missingDataColor,this.missingDataColor):this.rectangle(r,w,f,o,vt,vt),t.autowidth?r+=f:w+=o;else if(v=="line")for(f=t.autowidth?this.xAxisUnit:n.width?n.width:t.width?t.width:this.featureWidthDefault,r=this.marginLeft+this.left+(n.offset-this.xAxisMin)*this.xAxisUnit,!this.featureStaggered||t.hideFeatureNames||n.hideName&&p||(n.hideName||this.addArea(this.drawText(y,r,i+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+h+":"+n.counter]),i+=this.featureNameFontSize+this.margin),this.addArea(["rect",r,i,r+s.length*f,i+u],[n.counter]),w=i+u,ot=this.isArray(nt)?nt[0]:this.foreground,e=1;e<s.length;e++)bt=s[e-1]*d,kt=s[e]*d,this.drawLine("line",r,u*2+w-bt,r+f,u*2+w-kt,ot,!1,"butt"),r+=t.autowidth?f:f+2;else v=="triangle"&&(r=this.marginLeft+this.left+(n.offset-this.xAxisMin)*this.xAxisUnit,g=n.fill?n.fill:this.foreground,nt=n.outline?n.outline:this.foreground,!this.featureStaggered||t.hideFeatureNames||n.hideName&&p||(n.hideName||this.addArea(this.drawText(y,r,i+this.featureNameFontSize/2,this.featureNameFont,this.featureNameFontColor,"left","middle"),["track-"+h+":"+n.counter]),i+=this.featureNameFontSize+this.margin),this.addArea(this.drawShape("triangle",r,i+u/2,u,u,g,nt,"closed"),[n.counter]));this.featureStaggered&&tt<b.length-1&&(p||(i-=this.featureNameFontSize+this.margin),v=="box"?i-=this.getBoxFeatureHeight(n):v=="sequence"&&(i-=this.getSequenceFeatureHeight(n)))}i+=u+this.margin}i+=this.margin*2}}},this.setGenomeBoxExons=function(n){var r=n.data,t,i,u;if((!n.start||!n.end)&&(n.start=r[0][0],n.end=r[r.length-1][1],n.sequence))for(t=n.dir=="left"?n.sequence.length:1,i=0;i<r.length;i++)r[i].length==2&&(u=r[i][1]-r[i][0],n.dir=="left"?n.data[i].push(t-u,t):n.data[i].push(t,t+u)),t=n.dir=="left"?t-(u+1):t+u+1},this.setGenomeBoxArea=function(n,t,i){if(!i.insertion){var r=this.marginLeft+this.left,o=this.xAxisUnit/2,s=this.xAxisUnit/4,u=(i.start-this.xAxisMin)*this.xAxisUnit-o,f=(i.end-this.xAxisMin)*this.xAxisUnit+o,e=this.subtracksInfo[i.counter].maxHeight;i.showDir&&this.xAxisUnit>.001?i.dir=="right"?this.addArea(["rect",r+u,n,r+f+10,n+t+e],[i.counter]):this.addArea(["rect",r+u-10,n,r+f,n+t+e],[i.counter]):this.addArea(["rect",r+u,n,r+f,n+t+e],[i.counter])}},this.drawGenomeBoxLines=function(n,t,i,r){for(var u,o,s,l,f=n+t/2,y=i.dir=="right"?n:n+t,e=this.marginLeft+this.left,p=e+this.x,a=i.data,h=this.validateColor(i.fill||i.connect||r.connect||this.foreground),v=this.xAxisUnit/2,w=[],c=0;c<a.length;c++)u=(a[c][0]-this.xAxisMin)*this.xAxisUnit-v,o=(a[c][1]-this.xAxisMin)*this.xAxisUnit+v-u,!i.insertion&&(r.connect||i.connect)&&c<a.length-1&&(s=(a[c+1][0]-this.xAxisMin)*this.xAxisUnit,l=(u+o+s)/2,e+u+o<p&&e+s>e&&(Math.abs(y-f)<3?this.drawLine("line",e+u+o,f,e+s,f,h,!1,"butt"):(this.drawLine("line",e+u+o,f,e+l,y,h,!1,"butt"),this.drawLine("line",e+l,y,e+s-v,f,h,!1,"butt")))),i.insertion?(u=((a[c][0]+a[c][1])/2-this.xAxisMin)*this.xAxisUnit,w.push([e+u,n+t/2,v/2,t])):w.push([e+u,n,o,t]);return i.showDir&&this.xAxisUnit>.001&&!i.insertion&&(h=this.validateColor(i.showDir)||h,u=e+(i.start-this.xAxisMin)*this.xAxisUnit-v,o=e+(i.end-this.xAxisMin)*this.xAxisUnit+v,s=10,l=5,i.dir=="right"?o<p&&o+s>e&&(this.drawLine("line",o,f,o+s,f,h,!1,"butt"),this.drawLine("line",o+l,f-t/3,o+s,f,h,!1,"butt"),this.drawLine("line",o+l,f+t/3,o+s,f,h,!1,"butt")):u-s<p&&u>e&&(this.drawLine("line",u,f,u-s,f,h,!1,"butt"),this.drawLine("line",u-l,f-t/3,u-s,f,h,!1,"butt"),this.drawLine("line",u-l,f+t/3,u-s,f,h,!1,"butt"))),w},this.drawGenomeBoxAlleles=function(n,t,i,r,u){for(var h=r/u.length,f,l,s,e=0;e<u.length;e++){var o=u[e].split(""),c=(i-n)/o.length,a=t+h*e;for(f=0;f<o.length;f++)l=n+c*f,o[f]=="-"&&(o[f]="Gap"),s="sequence"+o[f].toUpperCase()+"Color",this.rectangle(l,a,c,h,this[s],this[s])}},this.drawGenomeBox=function(n,t,i,r){var ut=this,ft=function(){return ut.genomeResolution!="low"&&i.sequence?i.dir=="left"?i.sequenceRC.split(""):i.sequence.split(""):!1},y=this.validateColor(i.fill||i.connect||r.fill||r.connect||this.foreground),l=i.outline||r.outline||y,w=y?"closed":"open",b=this.xAxisUnit/2,a=this.sequenceFontSize>t?t-3+"Pt "+this.fontName:this.sequenceFont,p=ft(),s=i.translateRC,h=i.data,nt=this.marginLeft+this.left,et=nt+this.x,f,u,e,k,tt,o,c,v;for(this.setGenomeBoxArea(n,t,i),this.genomeResolution=="high"&&s&&(n+=s.top.length*this.featureTranslateHeight),f=this.drawGenomeBoxLines(n,t,i,r),u=0;u<f.length;u++)if(e=f[u][0],k=e+f[u][2],e<et&&k>nt&&(this.genomeResolution!="low"&&i.alleles&&i.alleles[u]&&!i.insertion&&this.drawGenomeBoxAlleles(e,n,k,t,i.alleles[u]),s&&this.genomeResolution=="high"||(i.insertion?(tt=i.dir=="left"?"triangle":"triangle2",this.drawShape(tt,f[u][0],f[u][1],f[u][2],f[u][3],y,l,w),this.addArea(["rect",f[u][0]-f[u][2]/2,f[u][1]-f[u][3]/2,f[u][0]+f[u][2]/2,f[u][1]+f[u][3]/2],[i.counter])):this.genomeResolution!="low"&&i.sequence&&(i.sequenceFill||r.sequenceFill||this.sequenceFill)?this.rectangle(f[u][0],f[u][1],f[u][2],f[u][3],i.sequenceFill||r.sequenceFill||this.sequenceFill,l,w):this.rectangle(f[u][0],f[u][1],f[u][2],f[u][3],y,l,w)),this.genomeResolution!="low"&&i.sequence&&!i.insertion)){var it={},ot=h[u][0],st=h[u][1],d=i.dir=="left"?p.length-h[u][3]+1:h[u][2],rt=i.dir=="left"?p.length-h[u][2]+1:h[u][3],g=d-3;if(st-ot!=rt-d&&this.errors.push("Exon length for segment "+u+" in feature "+i.id+"is different to the box dimmension"),p.length>0)for(e+=b,o=d;o<=rt;o++)c=p[o-1],c||this.errors.push("Nucleotide "+o+" in exon "+(u+1)+" in feature "+i.id+"not specified"),c?(v="sequence"+c.toUpperCase()+"Color",this.genomeResolution=="high"?s&&(!i.cds||i.cds&&o>=i.cds[0]&&o<=i.cds[1])?(this.drawTranslationTop(s,e,n,b,g,l,a,0,it),this.drawText(c,e,n+t/2,a,this[v],"center","middle"),this.drawTranslationBottom(s,e,n,b,g,l,a,0,it)):this.drawText(c,e,n+t/2,a,this[v],"center","middle"):this.rectangle(e-.5,n+1,1,t-2,this[v],this[v])):this.genomeResolution=="high"?this.drawText("-",e,n+t/2,a,this.missingDataColor,"center","middle"):this.rectangle(e-.5,n+1,1,t-2,this.missingDataColor,this.missingDataColor),g++,e+=this.xAxisUnit}},this.drawGenomeTrace=function(n,t,i,r,u,f,e){var it,b,rt,h,c,w,g,o;if(this.genomeResolution!="low"){e!="left"||u.reversed||this.setReverseTrace(u);var l=[],a=["A","C","G","T"],ut=this.marginLeft+this.left+(r-1-this.xAxisMin)*this.xAxisUnit,nt=this.marginLeft+this.left,tt=this.marginLeft+this.left+this.x,d=n+i;if(u.max==null){for(h=0;h<a.length;h++)l=l.concat(u[a[h]]);this.browser=="Firefox"?l=this.radixSort(l):l.sort(function(n,t){return n-t}),it=Math.floor(l.length*this.featureTraceTrim/100),u.max=l[l.length-(it+1)]}for(b=i/u.max,rt=a.length,h=0;h<rt;h++){var v=0,y=[],p=[],s=ut,k="sequence"+a[h].toUpperCase()+"Color",ft=u.peak.length;for(c=0;c<ft;c++)if(s>nt-this.xAxisUnit&&s<tt){if(w=this.xAxisUnit/(u.peak[c]-v),f[c]){for(g=Math.floor((u.peak[c]-v)/2),o=v;o<u.peak[c]-g;o++)y.push(s),p.push(d-Math.min(u.max,u[a[h]][o])*b),s+=w;for(v+=g,y.length>1&&p.length>1&&this.drawShape("path",y,p,!1,!1,this[k],this[k],"open"),y=[],p=[],o=0;o<f[c];o++)s+=this.xAxisUnit}for(o=v;o<=u.peak[c];o++)y.push(s),p.push(d-Math.min(u.max,u[a[h]][o])*b),s+=w;s-=w,v=u.peak[c]}else{if(f[c])for(o=0;o<f[c];o++)s+=this.xAxisUnit;v=u.peak[c],s+=this.xAxisUnit}if(s>nt-this.xAxisUnit&&s<tt)for(o=v;o<u[a[h]].length;o++)y.push(s),p.push(d-Math.min(u.max,u[a[h]][o])*b),s+=w;y.length>1&&p.length>1&&this.drawShape("path",y,p,!1,!1,this[k],this[k],"open")}}},this.drawTranslationTop=function(n,t,i,r,u,f,e,o,s){var c,h,l,a;if(n.top&&n.top.length>0)for(c=0;c<n.top.length;c++)y1=i-(n.top.length-c)*this.featureTranslateHeight,h=n.top[c],u-h.off>=0&&(u-h.off)%3==0&&(l=h.seq[Math.floor((u-h.off)/3)],a=u%2?this.oddColor:this.evenColor,l=="M"?a=this.sequenceStartColor:l=="*"&&(a=this.sequenceEndColor),s[h.rf]||(s[h.rf]=t-this.xAxisUnit*(o+2.5)),x0=t-s[h.rf]+r,this.rectangle(s[h.rf],y1,x0,this.featureTranslateHeight,a,f),this.drawText(l,s[h.rf]+x0/2,y1+this.featureTranslateHeight/2+1,e,this.foreground,"center","middle"),s[h.rf]=t+r)},this.drawTranslationBottom=function(n,t,i,r,u,f,e,o,s){var c,h,l,a;if(n.bottom&&n.bottom.length>0)for(c=0;c<n.bottom.length;c++)y1=i+(c+1)*this.featureTranslateHeight,h=n.bottom[c],u-h.off>=0&&(u-h.off)%3==0&&(l=h.seq[Math.floor((u+h.off+1)/3)],a=u%2?this.oddColor:this.evenColor,l=="M"?a=this.sequenceStartColor:l=="*"&&(a=this.sequenceEndColor),s[h.rf]||(s[h.rf]=t-this.xAxisUnit*(o+2.5)),x0=t-s[h.rf]+r,this.rectangle(s[h.rf],y1,x0,this.featureTranslateHeight,a,f),this.drawText(l,s[h.rf]+x0/2,y1+this.featureTranslateHeight/2+1,e,this.foreground,"center","middle"),s[h.rf]=t+r)},this.drawGenomeSequence=function(n,t,i,r,u){var st=r.counter,it=r.fill?r.fill:u.fill?u.fill:!1,b=r.outline,ht=it?"closed":"open",a=this.sequenceFontSize>t?t-3+"Pt "+this.fontName:this.sequenceFont,g=r.offset,w=r.sequence,rt=r.sequenceRC,h=r.translate,ut=r.translateRF,ct=r.dir,e,c,nt,tt,s;ct!="left"||rt||(rt=w,w=this.getReverseComplement(w)),h&&!ut&&(ut=h,h=this.translate(h,w));var v=w.split(""),o=this.marginLeft+this.left+(g-this.xAxisMin)*this.xAxisUnit,lt=this.marginLeft+this.left,at=this.marginLeft+this.left+this.x,k=(v.length+i.total)*this.xAxisUnit,f=0,y=u.subtype.match(/DNA|RNA/)?1:3,ft=this.xAxisUnit*4,et=this.xAxisUnit/2,d=-2,ot={},vt=n,p=0,l=0,yt=this;if(this.genomeResolution=="high"){for(e=o+f*this.xAxisUnit,h&&(n+=h.top.length*this.featureTranslateHeight);v.length>0;)if(e>lt-ft&&e<at+ft){if(c=v.shift(),c=="["){for(c=v.shift(),nt=[];c!="]";)nt.push(c),c=v.shift();this.drawText(nt.join("/"),o+f*this.xAxisUnit,n+t/2,a,this.sequenceMColor,"center","middle")}else tt="sequence"+c.toUpperCase()+"Color",h?(this.drawTranslationTop(h,e,n,et,d,b,a,l,ot),this.drawText(c,e,n+t/2,a,this[tt],"center","middle"),this.drawTranslationBottom(h,e,n,et,d,b,a,l,ot)):this.drawText(c,e,n+t/2,a,this[tt],"center","middle");if(f+=y,e=o+(f+p)*this.xAxisUnit,d++,l=0,i[parseInt(f/y)])for(s=0;s<i[parseInt(f/y)];s++)this.drawText("-",e,n+t/2,a,this.missingDataColor,"center","middle"),p++,l++,e=o+(f+p)*this.xAxisUnit}else if(v.shift(),f+=y,e=o+(f+p)*this.xAxisUnit,d++,l=0,i[parseInt(f/y)])for(s=0;s<i[parseInt(f/y)];s++)p++,l++,e=o+(f+p)*this.xAxisUnit}else{o=this.marginLeft+this.left+(g-.5-this.xAxisMin)*this.xAxisUnit,this.rectangle(o,n,k,t,it,b);for(s in i)o=this.marginLeft+this.left+(g-.5+parseInt(s)+l-this.xAxisMin)*this.xAxisUnit,k=i[s]*this.xAxisUnit,l+=i[s],this.rectangle(o,n,k,t,this.missingDataColor,b,ht)}this.addArea(["rect",o,n,k,n+t],[st])},this.drawGenomeQuality=function(n,t,i,r,u,f,e,o){var s,v,y;if(this.genomeResolution!="low"){var c=e=="left"?this.cloneObject(u).reverse():u,p=this.range(c),l=this.marginLeft+this.left+(r-.5-this.xAxisMin)*this.xAxisUnit,w=this.marginLeft+this.left,b=this.marginLeft+this.left+this.x,h=l,k=o.subtype.match(/DNA|RNA/)?1:3,a=k*this.xAxisUnit,d=this.featureQualityHeight-3+"Pt "+this.fontName;for(s=0;s<c.length;s++)if(l<b){if(f[s])for(v=0;v<f[s];v++)h+=a;y=this.getHeatmapColor(p[0],p[1],c[s]),this.rectangle(h,n,a,i,y,y),h>w&&this.genomeResolution=="high"&&this.featureQualityValues&&this.drawText(c[s],h+a/2,n+i/2,d,this.foreground,"center","middle"),h+=a}this.addArea(["rect",l,n,l+h,n+i],[t])}},this.drawGenomeSignalToNoise=function(n,t,i,r,u,f,e,o){var s,v,y;if(this.genomeResolution!="low"){var c=e=="left"?this.cloneObject(u).reverse():u,p=this.range(c),l=this.marginLeft+this.left+(r-.5-this.xAxisMin)*this.xAxisUnit,w=this.marginLeft+this.left,b=this.marginLeft+this.left+this.x,h=l,k=o.subtype.match(/DNA|RNA/)?1:3,a=k*this.xAxisUnit,d=this.featureSignalToNoiseHeight-3+"Pt "+this.fontName;for(s=0;s<c.length;s++)if(l<b){if(f[s])for(v=0;v<f[s];v++)h+=a;y=this.getHeatmapColor(p[0],p[1],c[s]),this.rectangle(h,n,a,i,y,y),h>w&&this.genomeResolution=="high"&&this.featureSignalToNoiseValues&&this.drawText(c[s],h+a/2,n+i/2,d,this.foreground,"center","middle"),h+=a}this.addArea(["rect",l,n,l+h,n+i],[t])}},this.drawGenomeCoordinate=function(n,t,i,r,u,f,e,o,s){var h;if(this.genomeResolution!="low"){var v=this.marginLeft+this.left+(r-this.xAxisMin)*this.xAxisUnit,y=this.marginLeft+this.left,p=this.marginLeft+this.left+this.x,l=u,d=s.subtype.match(/DNA|RNA/)?1:3,c=d*this.xAxisUnit,w=this.getCoordinateStep(),a=f+e.total,b=u+a,k=i-3+"Pt "+this.fontName;if(o=="left")for(h=v+(a-1)*c;u<b-e.total;)e[a-(u-l)-2]&&(h-=c*e[a-(u-l)-2]),h>y&&h<p&&u%w==0&&this.drawText(u,h,n+i/2,k,this.foreground,"center","middle"),h-=c,u++;else for(h=v;u<b-e.total;)e[u-l]&&(h+=c*e[u-l]),h>y&&h<p&&u%w==0&&this.drawText(u,h,n+i/2,k,this.foreground,"center","middle"),h+=c,u++}},this.setGenomeWireFrame=function(){var n=this.marginLeft+this.left,r=this.marginLeft+this.left+this.x,i=this.getCoordinateStep(),t=Math.floor(this.xAxisMin),u=this.getFontPt(this.featureNameFont)/2;for(this.genomeResolution=="low"&&(i*=5);n<=r;)n=this.marginLeft+this.left+(t-this.xAxisMin)*this.xAxisUnit,t%i==0&&(this.xAxisTickStyle=="dotted"?this.drawLine("dottedLine",n,this.marginTop+this.top,n,this.marginTop+this.top+this.y,this.wireColor,!1,"butt"):this.drawLine("line",n,this.marginTop+this.top,n,this.marginTop+this.top+this.y,this.wireColor,!1,"butt")),t++},this.setGenomeTicks=function(){var n=this.marginLeft+this.left,f=this.marginLeft+this.left+this.x,i=this.marginLeft+this.left,r=this.getCoordinateStep(),t=Math.floor(this.xAxisMin),e=this.getFontPt(this.featureNameFont)/2,u;for(this.genomeResolution=="low"&&(r*=5);n<=f;)n=this.marginLeft+this.left+(t-this.xAxisMin)*this.xAxisUnit,t%r==0&&(u=this.measureText(t,this.featureNameFont),n>=i&&(this.drawText(t.toString(),n,this.marginTop+this.top+this.y+this.margin+e,this.featureNameFont,this.xAxisTickColor,"center","middle",!1,!1,!1,!0),i=n+u*1.5)),t++},this.setGenomeLeftDimentions=function(){for(var u=[],r,t,i,n=0;n<this.data.tracks.length;n++)for(r=this.data.tracks[n],t=0;t<r.data.length;t++)i=r.data[t],u.push(i.label||i.name||i.id);return this.measureText(this.shortenText(this.getMaxText(u),this.maxFeatureStringLen),this.featureNameFont)+this.margin*4},this.setGenomeYDimentions=function(){this.bottom+=this.margin+this.getFontPt(this.featureNameFont),(this.autoAdjust||this.height<this.marginTop+this.top+this.y+this.bottom+this.marginBottom)&&(this.height=this.marginTop+this.top+this.y+this.bottom+this.marginBottom),this.resizeCanvas(),this.resizeViewport()},this.setGenomeAxisUnits=function(){this.setAxisUnits("xAxis"),this.genomeResolution=this.xAxisUnit>this.sequenceFontSize?"high":this.xAxisUnit*5>this.sequenceFontSize?"medium":"low"},this.setGenomeXDimentions=function(){this.featureStaggered?this.width?this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight:(this.left=this.setGenomeLeftDimentions(),this.width?this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight)},this.setGenomeFontsColors=function(){this.trackNameFont=this.trackNameFontSize+"Pt "+this.fontName,this.featureNameFont=this.featureNameFontSize+"Pt "+this.fontName,this.sequenceFont=this.sequenceFontSize+"Pt "+this.fontName,this.wireColor.match(/,0.1\)$/)||(this.wireColor=this.wireColor.replace(/\)$/,",0.1)"))},this.drawGenome=function(){this.setGenomeFontsColors(),this.setGenomeXDimentions(),this.setGenomeAxisUnits(),this.setGenomeSubtracks(),this.setGenomeYDimentions(),this.setGenomeWireFrame(),this.plotGenomeData(),this.maskPlotArea(),this.drawGenomeLabels(),this.setGenomeTicks()},this.initializeGenome=function(){this.drawGenome()},this.initializeGenome()},CanvasXpress.prototype.Circular=function(){this.setCircularXYDimensions=function(){this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.r=Math.min(this.x,this.y)/2,this.d=this.r*2,this.cx=this.marginLeft+this.left+this.r,this.cy=this.marginTop+this.top+this.r},this.setCircularSampleOverlays=function(){this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]&&this.smpOverlays.length==0&&(this.smpOverlays=[this.segregateSamplesBy])},this.setCircularPrivateParams=function(){var o,u,i,f,r,t,e,n;if(this.rAxisIndex=this.rAxis?this.getVariableIndices(this.rAxis):-1,this.ringSegments=this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]?this.getUniqueKeys(this.data.x[this.segregateSamplesBy]).length:1,this.ringVariables=[],this.ringSegmentRange=[],this.rAxisIndex>=0&&this.ringVariables.push([this.rAxisIndex]),this.segregateVariablesBy&&this.data.z[this.segregateVariablesBy])for(t=this.getUniqueKeys(this.data.z[this.segregateVariablesBy]),n=0;n<t.length;n++)this.rAxisIndex>=0&&t[n]==-1||this.ringVariables.push(this.getVariablesByAnnotationLevel(this.segregateVariablesBy,t[n]));else{for(t=[],o=0,n=0;n<this.data.y.vars.length;n++)this.rAxisIndex>=0&&n==this.rAxisIndex||t.push(c++);this.ringVariables.push(t)}if(this.ringNumber=this.ringVariables.length,u=this.ringSegementSeparationMain,this.rAxisIndex>=0)if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]){for(i={},f=0,n=0;n<this.data.y.smps.length;n++)r=this.data.x[this.segregateSamplesBy][n],i[r]||(i[r]=[]),i[r].push(this.data.y.data[this.rAxisIndex][n]);for(r in i)t=this.range(i[r]),this.rAxisZero?(f+=t[1],this.ringSegmentRange.push(t[1])):(f+=t[1]-t[0],this.ringSegmentRange.push(t[1]-t[0]));this.ringSegmentArc=(360-(this.ringSegmentSeparation*this.ringSegments+u))/f}else t=this.range(this.data.y.data[this.rAxisIndex]),this.ringSegmentArc=this.rAxisZero?(360-(this.ringSegmentSeparation*this.ringSegments+u))/t[1]:(360-(this.ringSegmentSeparation*this.ringSegments+u))/(t[1]-t[0]);else this.ringSegmentArc=(360-(this.ringSegmentSeparation*this.ringSegments+u))/this.data.y.smps.length;if(this.ringWeight)while(this.ringWeight.length!=this.ringNumber)this.ringWeight.length>this.ringNumber?this.ringWeight.pop():this.ringWeight.push(this.ringWeight[this.ringWeight.length-1]);else for(this.ringWeight=[],n=0;n<this.ringNumber;n++)this.rAxisShow&&this.rAxisIndex>=0&&n==this.rAxisIndex||this.ringWeight.push(1);for(e=0,n=0;n<this.ringWeight.length;n++)this.rAxisShow&&this.rAxisIndex>=0&&n==this.rAxisIndex||(e+=this.ringWeight[n]);for(n=0;n<this.ringWeight.length;n++)this.ringWeight[n]/=e},this.setCircularFonts=function(){var n,t;this.autoScaleFont?(n=this.scaleTextToSize(this.smpIndices.length*.5),t=this.scaleTextToSize(this.varIndices.length*.5)):(n=this.smpLabelFontSize,t=this.varLabelFontSize),this.smpLabelFont=parseInt(n*this.smpLabelScaleFontFactor)+"Pt "+this.fontName,this.varLabelFont=parseInt(t*this.varLabelScaleFontFactor)+"Pt "+this.fontName,this.setAxisFont(this.data.y.desc?this.data.y.desc[0]:"NA",this.y/(Math.PI*2))},this.getCircularSampleLabelLength=function(){return this.showSampleNames?this.smpLabelCircular?this.getFontPt(this.smpLabelFont)+this.margin:this.maxSmpName>this.maxSmpStringLen?this.measureText(this.maxSmpNameStr.substring(0,this.maxSmpStringLen),this.smpLabelFont)+this.margin:this.measureText(this.maxSmpNameStr,this.smpLabelFont)+this.margin:0},this.getCircularOverlaysWidth=function(){var n=0,t;if(this.showOverlays&&this.smpOverlays.length>0){for(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]&&n++,t=0;t<this.smpOverlays.length;t++)if(this.data.x.hasOwnProperty(this.smpOverlays[t])){if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]&&this.smpOverlays[t]==this.segregateSamplesBy)continue;n++}n>0&&(n=n*(this.overlaysWidth/2+this.margin))}return n},this.getCircularXAxisTickLength=function(){return this.measureText(this.xAxisMaxStrLength,this.axisTickFont)+this.margin*2},this.getCircularRAxisTickLength=function(){return this.measureText(this.rAxisMaxStrLength,this.axisTickFont)+this.margin*2},this.getCircularSmpTreeHeight=function(){var n=0;return this.showSmpDendrogram&&this.smpDendrogram&&(n=(this.smpDendrogram.depth+1)*this.dendrogramSpace+this.margin),n},this.setCurrentSettings=function(){var t,n,i,r;if(this.ringSegementSeparationMain=this.xAxisShow?this.arcLengthToDegrees(this.r*this.donutProportion*2,this.getCircularXAxisTickLength()):0,t=this.xAxisShow?(this.ringSegmentSeparation+this.ringSegementSeparationMain)*Math.PI/360:0,this.circularStart=Math.PI*1.5+t,this.currentRadius=this.r,this.circularSkips={},n=0,this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy])for(i in this.smpOverlayColors[this.segregateSamplesBy])r=this.getSamplesByAnnotationLevel(this.segregateSamplesBy,i),n+=r.length,this.circularSkips[n]=!0;else this.circularSkips[this.smpIndices.length]=!0},this.drawCircularRadialAxis=function(){var n,t;if(this.rAxisShow&&this.rAxisIndex>=0){for(n=0;n<this.ringSegmentRange.length;n++)t=this.ringSegmentRange[n];this.currentRadius-=this.getCircularRAxisTickLength()}},this.drawCircularSampleLabels=function(){var r,u,t,i,n;if(this.showSampleNames){if(r=this.ringSegmentArc*Math.PI/180,this.smpLabelCircular)for(t=this.circularStart,n=0;n<this.smpIndices.length;n++)i=this.data.y.smps[this.smpIndices[n]],u=this.getSmpColor(i),this.circularSkips[n]&&(t+=this.ringSegmentSeparation*Math.PI/180),this.drawArcText(i,this.cx,this.cy,this.currentRadius-this.smpLabelFontSize/2,t,r,this.smpLabelFont,u),t+=r;else{for(t=this.circularStart+r/2-Math.PI/2,this.ctx.save(),this.ctx.translate(this.cx,this.cy),this.ctx.rotate(t),n=0;n<this.smpIndices.length;n++){i=this.data.y.smps[this.smpIndices[n]],this.circularSkips[n]&&(t+=this.ringSegmentSeparation*Math.PI/180,this.ctx.rotate(this.ringSegmentSeparation*Math.PI/180));var f=this.currentRadius*Math.cos(t),e=this.currentRadius*Math.sin(t),u=this.getSmpColor(i);t<Math.PI*2?this.drawText(i,0,this.currentRadius,this.smpLabelFont,u,"right","middle",Math.PI/2):this.drawText(i,0,this.currentRadius,this.smpLabelFont,u,"left","middle",-Math.PI/2),t+=r,this.ctx.rotate(r)}for(n=0;n<this.smpIndices.length+2;n++)this.ctx.restore()}this.currentRadius-=this.getCircularSampleLabelLength()}},this.drawCircularOverlays=function(){var n,f,i,u,e,r,t;if(this.ringSegementDims=[],this.showOverlays&&this.smpOverlays.length>0){if(n=this.circularStart,this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]){for(i in this.smpOverlayColors[this.segregateSamplesBy]){var r=this.smpOverlayColors[this.segregateSamplesBy][i],o=this.getSamplesByAnnotationLevel(this.segregateSamplesBy,i),t=this.ringSegmentArc*o.length*Math.PI/180;this.drawShape("arc2",this.cx,this.cy,this.overlaysWidth/2,this.currentRadius,r,r,!1,!1,!1,!1,!1,n,n+t),this.drawArcText(i,this.cx,this.cy,this.currentRadius-this.overlaysWidth/4,n,t,this.overlayFont,this.overlayFontColor),this.ringSegementDims.push([n,n+t]),n+=t+this.ringSegmentSeparation*Math.PI/180}n-=this.ringSegmentSeparation*Math.PI/180,n=n%(Math.PI*2),this.drawArcText(this.segregateSamplesBy,this.cx,this.cy,this.currentRadius-this.overlaysWidth/4,n,this.circularStart-n,this.overlayFont,this.overlayFontColor),this.currentRadius-=this.overlaysWidth/2+this.margin,n=this.circularStart}else t=this.ringSegmentArc*Math.PI/180*this.smpIndices.length,this.ringSegementDims.push([this.circularStart,this.circularStart+t]);for(f=0;f<this.smpOverlays.length;f++)if(i=this.smpOverlays[f],!this.segregateSamplesBy||!this.data.x[this.segregateSamplesBy]||i!=this.segregateSamplesBy){if(t=this.ringSegmentArc*Math.PI/180,i!="-")for(u=0;u<this.smpIndices.length;u++)e=this.data.x[i][this.smpIndices[u]],r=this.smpOverlayColors[i][e],this.circularSkips[u]&&(n+=this.ringSegmentSeparation*Math.PI/180),this.drawShape("arc2",this.cx,this.cy,this.overlaysWidth/2,this.currentRadius,r,r,!1,!1,!1,!1,!1,n,n+t),this.showLevelOverlays&&this.drawArcText(i,this.cx,this.cy,this.currentRadius-this.overlaysWidth/4,n,t,this.overlayFont,this.overlayFontColor),n+=t;this.currentRadius-=this.overlaysWidth/2+this.margin,n=this.circularStart}}else t=this.ringSegmentArc*Math.PI/180*this.smpIndices.length,this.ringSegementDims.push([this.circularStart,this.circularStart+t])},this.drawCircularData=function(){for(var u=this.donutProportion*this.r,f=this.currentRadius-u,e=this.varIndices,r=0,i,t,n=0;n<this.ringNumber;n++)this.rAxisIndex>=0&&n==this.rAxisIndex||(i=this.circularStart,t=f*this.ringWeight[n]-this.margin,this.setVariablesVisible(this.ringVariables[n]),this.setAxes(),this.xAxisUnit=t/this.xAxisRange,this.drawCircularDataAxis(i,t),this.drawCircularDataPoints(i,t,n,r),r+=this.varIndices.length,this.currentRadius-=t+this.margin);this.varIndices=e},this.drawCircularDataAxis=function(n,t){for(var a,l,v,u,f,e,o,s,h,y=t/this.xAxisValues.length,p=0,w,c,r,i=0;i<=this.xAxisValues.length;i++)for(w=n,c=(this.currentRadius-(i*y+this.margin))*2,r=0;r<this.ringSegments;r++)i<this.xAxisValues.length&&r==0&&(a=this.ringSegementDims[r][0],l=this.ringSegementDims[this.ringSegments-1][1]%(Math.PI*2),v=this.xAxisValues[this.xAxisValues.length-(i+1)].toString(),this.drawArcText(v,this.cx,this.cy,c*.5-this.axisTickFontSize/4,l,a-l,this.axisTickFont,this.axisTickColor)),this.drawShape("arc3",this.cx,this.cy,c,c,this.xAxisTickColor,this.xAxisTickColor,!1,!1,!1,!1,!1,this.ringSegementDims[r][0]-p,this.ringSegementDims[r][1]+p);for(i=0;i<this.ringSegments;i++)u=this.currentRadius-this.margin,f=this.currentRadius-(this.xAxisValues.length*y+this.margin),e=u*Math.cos(this.ringSegementDims[i][0]),o=u*Math.sin(this.ringSegementDims[i][0]),s=f*Math.cos(this.ringSegementDims[i][0]),h=f*Math.sin(this.ringSegementDims[i][0]),this.drawLine("line",e+this.cx,o+this.cy,s+this.cx,h+this.cy,this.xAxisTickColor),e=u*Math.cos(this.ringSegementDims[i][1]),o=u*Math.sin(this.ringSegementDims[i][1]),s=f*Math.cos(this.ringSegementDims[i][1]),h=f*Math.sin(this.ringSegementDims[i][1]),this.drawLine("line",e+this.cx,o+this.cy,s+this.cx,h+this.cy,this.xAxisTickColor)},this.drawCircularDataPoints=function(n,t,i,r){var l=this.xAxisMin<0?Math.abs(this.xAxisMin)*this.xAxisUnit:0,e=this.ringSegmentArc*Math.PI/180*.3,a=e/2,o=this.ringSegmentArc*Math.PI/180*.7/this.ringVariables[i].length,u,f;for(n+=a,u=0;u<this.smpIndices.length;u++){for(this.circularSkips[u]&&(n+=this.ringSegmentSeparation*Math.PI/180),f=0;f<this.varIndices.length;f++){var s=this.colors[(f+r)%this.colors.length],h=this.getDataAtPos(this.varIndices[f],this.smpIndices[u]),c=(h-this.xAxisMin)*this.xAxisUnit;h>=l&&this.drawShape("arc2",this.cx,this.cy,c,this.currentRadius-(t-c+this.margin),s,s,!1,!1,!1,!1,!1,n,n+o),n+=o}n+=e}},this.setCircularSmpIndices=function(){var n;if(this.segregateSamplesBy&&this.data.x[this.segregateSamplesBy]){var t=[],i=[],r=this.getSmpAnnotations(this.segregateSamplesBy,this.smpIndices);for(n=0;n<r.length;n++)t=t.concat(this.getSamplesByAnnotationLevel(this.segregateSamplesBy,r[n]));for(n=0;n<t.length;n++)this.hiddenSmps[t[n]]?i.push(!0):i.push(!1);this.smpIndices=t,this.hiddenSmps=i}},this.drawCircularPlot=function(){this.drawCircularRadialAxis(),this.drawCircularOverlays(),this.drawCircularSampleLabels(),this.drawCircularData()},this.setCircularAttributes=function(){this.setCircularSmpIndices(),this.setCircularFonts(),this.setLegendFont(),this.setTrees(),this.setOverlayColors(),this.setOverlayFont(),this.setValidDataColorShapeSize(),this.setDataColorShapeSize(),this.setCurrentSettings()},this.initializeCircular=function(){this.setCircularXYDimensions(),this.setCircularSampleOverlays(),this.setCircularAttributes(),this.setCircularPrivateParams(),this.drawCircularPlot()},this.initializeCircular()},CanvasXpress.prototype.Video=function(){this.videoPlay=function(n){return function(){n.copyVideo(this,n.ctx,n.width,n.height)}}(this),this.videoUpdate=function(){var i=this.video.currentTime,r,u,t,f,o;if(this.videoCurrentTime&&this.drawText(i,this.width/2,20,!1,this.videoColor),this.videoGrid)for(r=(this.width-1)/this.videoGridStep,u=(this.height-1)/this.videoGridStep,t=0;t<=this.videoGridStep;t++)this.drawLine("line",r*t,0,r*t,this.height,this.videoColor),this.drawLine("line",0,u*t,this.width,u*t,this.videoColor);for(t=0;t<this.data.video.length;t++)if(f=this.data.video[t][0],o=f+this.data.video[t][1],i>=f&&i<=o){var s=this.data.video[t][2],e=this.data.video[t][3],n=this.data.video[t][4];switch(s){case"text":this.drawText(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);break;case"line":this.drawLine(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10]);break;case"shape":this.drawShape(e,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14])}}},this.copyVideo=function(n,t,i,r){var u=this;if(n.paused||n.ended)return!1;t.drawImage(n,0,0,i,r),this.videoUpdate(),setTimeout(function(){u.copyVideo(n,t,i,r)},50)},this.initializeVideo=function(){this.data||(this.data={video:{}}),this.data.video||(this.data.video={})},this.initializeVideo()},CanvasXpress.doc={F:{fill:{M:"Genome",T:"color",C:"Color for the feature"},id:{M:"Genome",T:"string",C:"Feature id"}},M:{Overlays:{D:"Colored boxes to help in the visualization of samples and variables",P:["overlayFont","overlayFontColor","overlayFontSize","overlayScaleFontFactor","overlaysWidth","showLevelOverlays","showOverlays","smpOverlayRecycleColors","smpOverlays","varOverlayRecycleColors","varOverlays"],B:["showLevelOverlays","showOverlays","smpOverlayRecycleColors","smpOverlays","varOverlayRecycleColors","varOverlays"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Axes:{D:"Axes parameters",P:["axisExact","axisExtension","rAxisAbsMax","rAxisAbsMin","rAxisCurrent","rAxisExact","rAxisMaxStrLength","rAxisMinorTicks","rAxisMinorValues","rAxisShow","rAxisTickColor","rAxisTickFormat","rAxisTickStyle","rAxisTicks","rAxisTitle","rAxisTransform","rAxisTransformTicks","rAxisValues","setMax","setMax2","setMaxR","setMaxX","setMaxY","setMaxZ","setMin","setMin2","setMinR","setMinX","setMinY","setMinZ","ticks","timeTicksFirst","timeValueIndices","timeValues","xAxis","xAxis2","xAxis2AbsMax","xAxis2AbsMin","xAxis2Exact","xAxis2MaxStrLength","xAxis2MinorTicks","xAxis2MinorValues","xAxis2Show","xAxis2TickFormat","xAxis2Ticks","xAxis2Values","xAxisAbsMax","xAxisAbsMin","xAxisCurrent","xAxisExact","xAxisMaxStrLength","xAxisMinorTicks","xAxisMinorValues","xAxisShow","xAxisTickColor","xAxisTickFormat","xAxisTickStyle","xAxisTicks","xAxisTitle","xAxisTransform","xAxisTransformTicks","xAxisValues","yAxis","yAxisAbsMax","yAxisAbsMin","yAxisCurrent","yAxisExact","yAxisMaxStrLength","yAxisMinorTicks","yAxisMinorValues","yAxisShow","yAxisTickColor","yAxisTickFormat","yAxisTickStyle","yAxisTicks","yAxisTitle","yAxisTransform","yAxisTransformTicks","yAxisValues","zAxis","zAxisAbsMax","zAxisAbsMin","zAxisCurrent","zAxisExact","zAxisMaxStrLength","zAxisMinorTicks","zAxisMinorValues","zAxisShow","zAxisTickColor","zAxisTickFormat","zAxisTickStyle","zAxisTicks","zAxisTitle","zAxisTransform","zAxisTransformTicks","zAxisValues"],B:["rAxisShow","rAxisTickColor","rAxisTitle","rAxisTransform","rAxisTransformTicks","xAxis2Show","xAxisShow","xAxisTickColor","xAxisTitle","xAxisTransform","xAxisTransformTicks","yAxisShow","yAxisTickColor","yAxisTitle","yAxisTransform","yAxisTransformTicks","zAxisShow","zAxisTickColor","zAxisTitle","zAxisTransform","zAxisTransformTicks"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Clustering:{D:"Paremeters used in clustering",P:["centerData","clusterAxis","distance","imputeMethod","kmeansClusters","linkage","maxIterations","useSmpVarIndexOnClustering"],B:["centerData","clusterAxis","distance","imputeMethod","kmeansClusters","linkage","maxIterations","useSmpVarIndexOnClustering"],U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Candlestick:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},Indicators:{D:"Legends for color, shape and size in visualizations",P:["indicatorsPosition","showIndicators"],B:["indicatorsPosition","showIndicators"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"2D Scatter Plot":{D:"General parameters in 2d scatter plots",P:["allVsAll","allVsAllType","functionIntervals","histogramBarWidth","histogramBins","isCreateHistogram","isHistogram"],B:["allVsAll","allVsAllType"],U:{ScatterBubble2D:"true",Scatter2D:"true"}},Text:{D:"Properties associated with text attributes :",P:["align","autoScaleFont","baseline","font","fontName","fontSize","fontStyle","fonts","maxTextSize","minTextSize","scaleTextConstantAdd","scaleTextConstantMult"]},"Axis Resizer":{D:"Parameters used when resizing graphs",P:["resizerBackgroundColor","resizerBackgroundColorCurrent","resizerBackgroundColorOutlineCurrent","resizerBackgroundImage","resizerDraw","resizerPosition","resizerTransparency","resizerType","resizerWidth"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Variables:{D:"Properties associated with variables",P:["filterVarBy","highlightVar","maxVarStringLen","showVariableNames","varHighlightColor","varLabelColor","varLabelDescription","varLabelFont","varLabelFontSize","varLabelInterval","varLabelRotate","varLabelScaleFontFactor","varTitle","varTitleColor","varTitleFont","varTitleFontSize","varTitleLabelOverlayPosition","varTitleScaleFontFactor"],B:["filterVarBy","highlightVar","maxVarStringLen","showVariableNames","varHighlightColor","varLabelColor","varLabelDescription","varLabelRotate","varLabelScaleFontFactor","varTitle","varTitleColor","varTitleLabelOverlayPosition","varTitleScaleFontFactor"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"Scatter and One-D Plots":{D:"General parameters in scatter and one dimesional plots",P:["colorBy","outlineBy","shapeBy","shapeByShape","sizeBy","this"],B:["colorBy","outlineBy","shapeBy","sizeBy"],U:{Boxplot:"true",Scatter3D:"true",ScatterBubble2D:"true",Bar:"true",Dotplot:"true",Scatter2D:"true",Heatmap:"true"}},"Venn Diagrams":{D:"General paremeters in Venn diagrams",P:["vennColors","vennCompartments","vennGroups","vennLegendColors"],B:["vennGroups","vennLegendColors"],U:{Venn:"true"}},"Ticks and Axis Titles":{D:"Attributes for ticks and titles in axes in one and two dimensional plots",P:["axisTickColor","axisTickFont","axisTickFontSize","axisTitleColor","axisTitleFont","axisTitleFontSize","axisTitleScaleFontFactor","tickRotate","tickScaleFontFactor"],B:["axisTickColor","axisTitleColor","axisTitleScaleFontFactor","tickRotate","tickScaleFontFactor"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},Dendrograms:{D:"General parameters in dendrograms",P:["dendrogramColor","dendrogramHang","dendrogramHeight","dendrogramSpace","showSmpDendrogram","showVarDendrogram","smpDendrogramPosition","varDendrogramPosition"],B:["dendrogramColor","dendrogramHang","dendrogramHeight","dendrogramSpace","showSmpDendrogram","showVarDendrogram","smpDendrogramPosition","varDendrogramPosition"],U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Candlestick:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},"Candlestick Plots":{D:"General parameters in candlestick plots",P:["showVolume","sma10Color","sma20Color","sma25Color","sma50Color","sma5Color","stockIndicators"],B:["showVolume","sma10Color","sma20Color","sma25Color","sma50Color","sma5Color","stockIndicators"],U:{Candlestick:"true"}},"Area Graphs":{D:"General parameters in area graphs",P:["areaIsCumulative"],B:["areaIsCumulative"],U:{Area:"true",AreaLine:"true"}},"Pie Charts":{D:"General parameters in pie charts",P:["maxPieSectors","pieSegmentLabels","pieSegmentPrecision","pieSegmentSeparation","pieType","showPieGrid","showPieSampleLabel","showPieValues","startPieSectors"],B:["maxPieSectors","pieSegmentLabels","pieSegmentPrecision","pieSegmentSeparation","pieType","showPieGrid","showPieSampleLabel","showPieValues","startPieSectors"],U:{Pie:"true"}},General:{D:"General properties used in most visualizations :",P:["acknowledgementIcon","acknowledgementIconPosition","acknowledgment","autoAdjust","autoAdjustMax","autoAdjustXTries","autoAdjustYTries","background","backgroundGradient1Color","backgroundGradient2Color","backgroundImage","backgroundType","backgroundVideo","backgroundWindow","backgroundWindowGradient1Color","backgroundWindowGradient2Color","backgroundWindowGradientOrientation","canvasBox","canvasBoxColor","foreground","foregroundWindow","functions","gradient","gradientOrientation","gradientRatio","gradientType","graphOrientation","graphType","margin","marginBottom","marginLeft","marginRight","marginTop","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","showGraph","showShadow","transparency","useFlashIE","videoAutoplay","videoClassName","videoColor","videoControls","videoCurrentTime","videoGrid","videoGridStep","videoLoop","videoPlaybackRate","videoPoster","videoPreload"],B:["acknowledgementIcon","acknowledgementIconPosition","acknowledgment","autoAdjustXTries","autoAdjustYTries","background","backgroundGradient1Color","backgroundGradient2Color","backgroundImage","backgroundType","backgroundVideo","canvasBox","canvasBoxColor","foreground","functions","graphOrientation","graphType","margin","marginBottom","marginLeft","marginRight","marginTop","showGraph","showShadow","useFlashIE","videoAutoplay","videoClassName","videoColor","videoControls","videoCurrentTime","videoGrid","videoGridStep","videoLoop","videoPlaybackRate","videoPoster","videoPreload"]},"Bar Graphs":{D:"General parameters in bar graphs",P:["showDataValues"],B:["showDataValues"],U:{Bar:"true",BarLine:"true"}},"Heatmaps and Networks":{D:"General parameters in heatmaps, correlations and networks",P:["heatmapType","indicatorCenter","indicatorHeight","indicatorWidth"],B:["heatmapType","indicatorCenter","indicatorHeight","indicatorWidth"],U:{Network:"true",Scatter3D:"true",Correlation:"true",Scatter2D:"true",Heatmap:"true"}},"Line Graphs":{D:"General parameters in line graphs",P:["coordinateLineColor","lineDecoration","lineTickness","lineType","tension"],B:["coordinateLineColor","lineDecoration","lineType"],U:{StackedLine:"true",Line:"true",StackedPercentLine:"true",BarLine:"true",AreaLine:"true"}},"Box Plots":{D:"General parameters in box plots",P:["boxPlotOutliersRatio","showBoxplotOriginalData"],U:{Boxplot:"true",Dotplot:"true"}},Attributes:{D:"Lines, Colors, Shapes, Sizes and Time :",P:["arrowPointSize","capType","colorHSV","colorRGB","colorScheme","colors","dashLength","dotLength","evenColor","images","lines","oddColor","outlineWidth","shapes","sizes","timeFormat"],B:["colorScheme","colors","evenColor","oddColor"]},"Remote Procedures":{D:"Parameters used when getting data remotely :",P:["remoteAutoPlay","remoteAutoPlayDelay","remoteDataIndex","remoteDirection","remoteIds","remoteParams","remoteParentId","remoteService","remoteUpdate","remoteUpdateDelay","remoteUpdating","remoteWindow"]},Animation:{D:"Animation parameters :",P:["animationCycles","animationTime","animationType","showAnimation","showAnimationFont","showAnimationFontColor","showAnimationFontSize","snapshotCopyChangeOnly"]},Events:{D:"Event parameters :",P:["broadcast","broadcastType","configuratorWidth","dataEvent","dataFilterWidth","destroyCanvasXpressZombies","disableConfigurator","disableDataFilters","disableDataTable","disableEvents","disableToolbar","eventArrowKeys","eventKeys","eventPlusMinusKeys","helpKeyEvents","infoTimeIn","infoTimeOut","isLayoutConfigurator","maintainZoomOnDrag","monitorCanvasXpressZombiesTime","resizable","showAdvancedConfiguration","this","toolbarPermanent"],B:["showAdvancedConfiguration"]},Images:{D:"General parameters with images :",P:["dropdownButton","imageDir","nextButton","playButton","previousButton","stopButton"]},"Combination Plots":{D:"Parameters used in complex plots :",P:["layout","layoutAdjust","layoutAxis","layoutComb","layoutCurrent","layoutHeight","layoutMaxVarLegend","layoutMulticolor","layoutWidth","offsetX","offsetY","scaleX","scaleY","translateX","translateY","weight"]},"Network Graphs":{D:"General parameters used in networks",P:["approximateNodePositions","attractiveForceFunction","autoHideOnDecorationsCenter","calculateLayout","colorEdgeBy","colorNodeBy","edgeConfigurableProperties","edgeWidth","filterEdgeBy","filterNodeBy","highlightNode","initialTemperature","is3DNetwork","isSelectNodes","layoutTime","moveParentsWithChildren","network2DRotate","networkDepth","networkDivisions","networkForceConstant","networkFreeze","networkFreezeOnLoad","networkLayoutType","networkNodeMinDistance","networkNodesOnTop","networkRoot","networkStack","networkStackIndex","networkStackStates","nodeConfigurableProperties","nodeFont","nodeFontColor","nodeFontSize","nodeHighlightColor","nodeScaleFontFactor","nodeSize","overrideEventlessNodes","preScaleNetwork","randomNetwork","randomNetworkNodeEdgesMax","randomNetworkNodes","reduceRandomNetwork","repulsiveForceFunction","selectNode","shapeEdgeBy","shapeNodeBy","showHiddenChildEdges","showNetworkDecorationsLegend","showNetworkEdgesLegend","showNetworkNodesLegend","showNetworkRadialLayout","showNetworkTextLegend","showNodeNameThreshold","sizeDecorationBy","sizeEdgeBy","sizeNodeBy","skipClick","subNetworks","temperature"],B:["autoHideOnDecorationsCenter","calculateLayout","colorEdgeBy","colorNodeBy","edgeWidth","filterEdgeBy","filterNodeBy","highlightNode","is3DNetwork","networkLayoutType","networkNodesOnTop","networkRoot","nodeFontColor","nodeHighlightColor","nodeScaleFontFactor","nodeSize","shapeEdgeBy","shapeNodeBy","showHiddenChildEdges","showNetworkRadialLayout","showNodeNameThreshold","sizeDecorationBy","sizeEdgeBy","sizeNodeBy"],U:{Network:"true"}},"Circular Graphs":{D:"General parameters in circular graphs",P:["circularLetterSeparationFactor","donutProportion","rAxis","rAxisZero","ringSegmentSeparation","ringType","ringWeight"],B:["circularLetterSeparationFactor","donutProportion","rAxis","rAxisZero","ringSegmentSeparation","ringType","ringWeight"],U:{Circular:"true"}},"Data table":{D:"Paremters associated with the data table :",P:["colWidth","dataTableColumnWidth","dataTableTransposed","freezeColLeft","freezeColRight","freezeRowBottom","freezeRowTop","maxCols","maxRows","networkShowDataTable","refresehDataTableOnDraw","rowHeight","showDataTable","showDataTableOnSelect","startCol","startRow"],B:["dataTableColumnWidth"]},"Genome Browser":{D:"General parameters used in genome browser",P:["featrureCoordinateHeight","featrureQualityHeight","featrureSignalToNoiseHeight","featrureTranslateHeight","featureConfigurableProperties","featureCoodinateShow","featureHeightDefault","featureNameFont","featureNameFontColor","featureNameFontSize","featureQualityShow","featureQualityValues","featureSignalToNoiseShow","featureSignalToNoiseValues","featureStaggered","featureTraceHeight","featureTraceTrim","featureTracesShow","featureTranslateShow","featureTypeDefault","featureWidthDefault","filterFeatureBy","genomeResolution","maxFeatureStringLen","periodTicksLabels","sequenceAColor","sequenceBColor","sequenceCColor","sequenceDColor","sequenceEColor","sequenceEndColor","sequenceFColor","sequenceFill","sequenceFont","sequenceFontSize","sequenceGAPColor","sequenceGColor","sequenceHColor","sequenceIColor","sequenceKColor","sequenceLColor","sequenceMColor","sequenceNColor","sequencePColor","sequenceQColor","sequenceRColor","sequenceSColor","sequenceStartColor","sequenceTColor","sequenceUColor","sequenceVColor","sequenceWColor","sequenceXColor","sequenceYColor","sequenceZColor","showFeatureNameThereshold","subtracksMaxDefault","trackConfigurableProperties","trackNameFont","trackNameFontColor","trackNameFontSize","wireColor"],B:["featureCoodinateShow","featureNameFontColor","featureQualityShow","featureQualityValues","featureSignalToNoiseShow","featureSignalToNoiseValues","featureStaggered","featureTracesShow","featureTranslateShow","featureTypeDefault","filterFeatureBy","maxFeatureStringLen","sequenceAColor","sequenceBColor","sequenceCColor","sequenceDColor","sequenceEColor","sequenceEndColor","sequenceFColor","sequenceFill","sequenceGAPColor","sequenceGColor","sequenceHColor","sequenceIColor","sequenceKColor","sequenceLColor","sequenceMColor","sequenceNColor","sequencePColor","sequenceQColor","sequenceRColor","sequenceSColor","sequenceStartColor","sequenceTColor","sequenceUColor","sequenceVColor","sequenceWColor","sequenceXColor","sequenceYColor","sequenceZColor","showFeatureNameThereshold","subtracksMaxDefault","trackNameFontColor"],U:{Genome:"true"}},"Data Table/Filter":{D:"Parameters associated with data table and data filter",P:["edgesProperties","featuresProperties","nodesProperties","skipConfigurableProperties"],B:["edgesProperties","featuresProperties","nodesProperties","skipConfigurableProperties"],U:{Network:"true",Genome:"true"}},Skins:{D:"Parameters to change the skin of the application widgets :",P:["skin","skinHighlight","skinProperties","skinPropertiesBlue","skinPropertiesGrey"]},Samples:{D:"Properties associated with samples",P:["filterSmpBy","highlightSmp","maxSmpStringLen","showSampleNames","smpHighlightColor","smpLabelCircular","smpLabelColor","smpLabelDescription","smpLabelFont","smpLabelFontSize","smpLabelInterval","smpLabelRotate","smpLabelScaleFontFactor","smpTitle","smpTitleColor","smpTitleFont","smpTitleFontSize","smpTitleScaleFontFactor"],B:["filterSmpBy","highlightSmp","maxSmpStringLen","showSampleNames","smpHighlightColor","smpLabelCircular","smpLabelColor","smpLabelDescription","smpLabelRotate","smpLabelScaleFontFactor","smpTitle","smpTitleColor","smpTitleScaleFontFactor"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"Zooming and Panning":{D:"Parameters associated with zooming and panning :",P:["panningGlobalX","panningGlobalY","panningStep","panningX","panningY","zoom","zoomGlobal","zoomSamplesDisable","zoomStep","zoomVariablesDisable"],B:["zoomSamplesDisable","zoomVariablesDisable"]},Snapshots:{D:"Paremeters used in snapshots",P:["isAnimation","snapshots"],U:{Network:"true"}},Debug:{D:"Debugging parameters :",P:["codeType","debug","errors","showCode","showVersion"]},Titles:{D:"Properties used to manipulate general title, subtitle and citation :",P:["citation","citationColor","citationFont","citationScaleFontFactor","smpTitleFontSize","subtitle","subtitleHeight","title","titleColor","titleHeight"],B:["citation","citationColor","citationScaleFontFactor","smpTitleFontSize","subtitle","subtitleHeight","title","titleColor","titleHeight"]},Legends:{D:"Legends for variables and samples",P:["legendBackgroundColor","legendBox","legendBoxColor","legendColor","legendFont","legendFontSize","legendPosition","legendScaleFontFactor","showLegend"],B:["legendBackgroundColor","legendBox","legendBoxColor","legendColor","legendPosition","legendScaleFontFactor","showLegend"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},"Dot Plots":{D:"General parameters in dot plots",P:["dotPlotDataPointRatio","dotPlotDataPointTransparency","dotPlotJitter"],U:{Boxplot:"true",Dotplot:"true"}},Decorations:{D:"Additional elements added to graphs to increase data understanding",P:["decorationFont","decorationFontSize","decorationScaleFontFactor","decorations","decorationsColor","decorationsColors","decorationsHeight","decorationsPosition","decorationsProperties","decorationsType","decorationsWidth","showDecorations"],U:{Network:"true",Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},"Scatter Plots":{D:"General parameters in scatter plots",P:["isSelectDataPoints","scatterSeries","scatterType","selectDataMode","selectDataModeDescription","selectDataPoint"],B:["scatterSeries","scatterType","selectDataMode","selectDataModeDescription"],U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},"Data Filters":{D:"Parameters associated with filtering :",P:["filterSkipNullKeys","filterType"],B:["filterSkipNullKeys","filterType"]},"3D Scatter Plot and Networks":{D:"General parameters in 3d scatter plots and neworks",P:["bar3DInverseWeight","cullingThreshold","maxRotate","minRotate","rotationDelay","rotationSensitivity","rotationStep","show3DGrid","x3DRatio","xRotate","y3DRatio","yRotate","z3DRatio","zRotate"],U:{Network:"true",Scatter3D:"true"}},"Correlation Graphs":{D:"General parameters for correlation",P:["correlationAnchorLegend","correlationAnchorLegendAlignWidth","correlationAxis","correlationLabelInterval"],B:["correlationAxis"],U:{Correlation:"true"}},Functions:{D:"Functions exposed in the configurator :",P:["addNormalDistributionLine","addRegressionLine","clusterSamples","clusterVariables","createHistogram","createRandomData","desegregateSamples","desegregateVariables","draw","groupSamples","hideCodeDiv","hideInfoDiv","hideUnhideSmps","hideUnhideVars","kmeansSamples","kmeansVariables","print","recalculateLayout","removeHistogram","reset","segregateSamples","segregateVariables","setSkin","showCodeDiv","showInfoDiv","sortSamplesByCategory","sortSamplesByVariable","sortVariablesByCategory","sortVariablesBySample","transform","transpose","ungroupSamples","updateCodeDiv"],B:["addNormalDistributionLine","addRegressionLine","clusterSamples","clusterVariables","createRandomData","desegregateSamples","desegregateVariables","draw","groupSamples","hideUnhideSmps","hideUnhideVars","kmeansSamples","kmeansVariables","print","recalculateLayout","removeHistogram","reset","segregateSamples","segregateVariables","setSkin","sortSamplesByCategory","sortSamplesByVariable","sortVariablesByCategory","sortVariablesBySample","transform","transpose","ungroupSamples"]},Heatmaps:{D:"General paremters for heatmaps",P:["isMultidimensionalHeatmap","smpIndicesStart","varIndicesStart"],U:{Heatmap:"true"}},"One dimentional plots":{D:"General parameters for one dimensional plots",P:["blockContrast","blockFactor","blockSeparationFactor","is3DPlot","plotByVariable","seriesSeparationFactor","smpHairline","smpHairlineColor","smpHairlineWidth"],B:["blockContrast","is3DPlot","plotByVariable","seriesSeparationFactor","smpHairline","smpHairlineColor","smpHairlineWidth"],U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Candlestick:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},Data:{D:"Data related parameters",P:["groupingFactors","isBoxPlotCalc","isGraphTime","isGroupedData","isLogData","isMarketDataFormated","isMarketSwitched","isTransformedData","missingDataColor","randomData","randomDataMean","randomDataSampleAnnotationRatio","randomDataSampleAnnotations","randomDataSamples","randomDataSigma","randomDataVariableAnnotationRatio","randomDataVariableAnnotations","randomDataVariables","randomMissingDataPercentage","ratioReference","segregateSamplesBy","segregateVariablesBy","showErrorBars","smpSort","sortDir","tmpAsciiArray","transformBase","transformType","varSort","zscoreAxis"],B:["groupingFactors","isLogData","missingDataColor","ratioReference","segregateSamplesBy","segregateVariablesBy","showErrorBars","sortDir","transformBase","transformType","zscoreAxis"],U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Candlestick:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}}},N:{hideLabel:{M:"Network",T:"boolean",C:"Flag to hide the label node"},zIndex:{M:"Network",T:"integer",C:"Css property for the imagePath"},x:{M:"Network",T:"float",C:"X coordinate"},outline:{M:"Network",T:"color",C:"Color for the outline of the node"},imagePath:{M:"Network",T:"url",C:"Url for the node image"},parentNode:{M:"Network",T:"string",C:"Id of parent node"},y:{M:"Network",T:"float",C:"Y coordinate"},anchor:{M:"Network",T:"boolean",C:"Flag make the node transparent"},color:{M:"Network",T:"color",C:"Color for the node"},outlineWidth:{M:"Network",T:"integer",C:"Pixels used to raw the outline of the node"},eventless:{M:"Network",T:"boolean",C:"Flag to disable all events in the node"},pattern:{O:"open, closed",M:"Network",T:"option",C:"Whether to draw a solid shape or just an outline"},rotate:{M:"Network",T:"integer",C:"Number of degrees to rotate the shape"},hide:{M:"Network",T:"boolean",C:"Flag to hide the node"},shape:{M:"Network",T:"string",C:"Shape for the node. One of the ones defined in shapes"},z:{M:"Network",T:"float",C:"Z coordinate"}},P:{yAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the Y axis.",D:"false"},vennCompartments:{A:"true",Z:"true",M:"Venn Diagrams",T:"array",C:"Name for the compartments in the the Venn diagrams"},setMaxX:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the X axis",D:"null"},sequenceLColor:{M:"Genome Browser",T:"color",C:"Color for the leucines in the genome browser",D:"rgb(0,103,0)"},pieSegmentLabels:{O:["inside","outside"],M:"Pie Charts",T:"option",C:"Location for the values in the pie charts",D:"inside"},shapeBy:{O:["false","variable"],M:"Scatter and One-D Plots",T:"option",C:"Name of a variable annotation or a sample name or the string 'variable' to shape the variables.",D:"false",X:"getXZData"},featrureQualityHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the quality height",D:"12"},xAxis2Exact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the 2nd X axis",D:"false"},sequenceFont:{A:"true",Z:"true",M:"Genome Browser",T:"font",C:"Font for the text of the sequence in the genome browser"},networkStack:{A:"true",Z:"true",M:"Network Graphs",T:"array",C:"Array to keep state of the network after a drag or move"},desegregateSamples:{S:["segregateSamples"],M:"Functions",T:"void",C:"Desegreagate samples previously segregated based on a sample category (data.x object)",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},is3DNetwork:{M:"Network Graphs",T:"boolean",C:"Flag to create or not a 3D network",D:"false"},backgroundWindow:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"Background color of the canvas window when the background type is a type of window.",D:"rgb(204,204,204)"},varDendrogramPosition:{M:"Dendrograms",T:"option",C:"Position for the variable dendrogram in the plot. It could be top, bottom, right or left depending on the orientation of the graph.",D:"top"},calculateLayout:{M:"Network Graphs",T:"boolean",C:"Flag to force or not to calculate the network layout.",D:"true"},varLabelInterval:{A:"true",M:"Variables",T:"integer",C:"Interval for the variable labels in heatmaps",D:"1"},shapes:{A:"true",O:["sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","pacman","mdavid","rect2","rect3","arc","rectangle","image"],M:"Attributes",T:"array",C:"Shapes used in network graphs"},yAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the Y axis",D:"[]"},sequenceTColor:{M:"Genome Browser",T:"color",C:"Color for the thymidines and threonines in the genome browser",D:"rgb(255,0,0)"},nodeFontColor:{M:"Network Graphs",T:"color",C:"Color for the network text",D:"background color"},networkNodeMinDistance:{A:"true",M:"Network Graphs",T:"integer",C:"Minimum distance between nodes in forceDirected and organic layouts",D:"2"},title:{S:["titleHeight","titleColor"],M:"Titles",T:"string",C:"Title of the graph.",D:"false"},featrureTranslateHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the translation height",D:"12"},featureCoodinateShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show coordinates",D:"true"},zAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the Z axis"},yAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the Y axis",D:"false"},rAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the R axis",D:"false"},showShadow:{S:["shadowOffsetX","shadowOffsetY","this.shadowBlur","shadowColor"],M:"General",T:"boolean",C:"Flag used to add  shadows to all element in the canvas. It will be forced to false if the browser is IE.",D:"false"},colorScheme:{S:["colors"],O:["user","basic","dark","strong","light","pastel","balanced","reset"],M:"Attributes",T:"option",C:"Color schemes can be user defined which will take the colors in the color property or one provided in canvasXpress. The order of the colors will be used to sequentially select when a different color is needed in a particular visualization.",D:"basic"},remoteWindow:{A:"true",M:"Remote Procedures",T:"integer",C:"Number of plots to show  when requesting remote data",D:"1"},showNetworkDecorationsLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show node legends in the networks",D:"true"},zAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the Z axis",D:"false"},xAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the X axis",D:"[]"},rAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the R axis",D:"[]"},isMarketDataFormated:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data has been formated to display Candlestick."},segregateSamples:{S:["desegregateSamples"],M:"Functions",T:"option",C:"Segregate samples based on a sample category (data.x object)",X:"getXData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},skin:{A:"true",O:["blue","grey"],M:"Skins",T:"option",C:"Skin for the application",D:"grey"},isTransformedData:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is transformed."},background:{S:["backgroundType"],M:"General",T:"color",C:"Background color for the canvas.",D:"rgb(255,255,255)"},resizerTransparency:{A:"true",M:"Axis Resizer",T:"boolean",C:"Flag to make the axis resizers transparent",D:"true"},hideUnhideVars:{M:"Functions",T:"array",C:"Hide or unhide variables. It works like a switch",X:"getVariablesAsArray",U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},periodTicksLabels:{A:"true",M:"Genome Browser",T:"integer",C:"Number of ticks to skip between values in the genome browser",D:"5"},colWidth:{A:"true",M:"Data table",T:"integer",C:"Mumber of pixels for the width of cells in the data table",D:"100"},scaleY:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Scale factor for the Y axis"},seriesSeparationFactor:{M:"One dimentional plots",T:"float",C:"Factor to adjust the spacing between the series in the bar graphs",D:"2"},varLabelFont:{A:"true",Z:"true",M:"Variables",T:"font",C:"Font for the variable labels in one dimensional plots"},startCol:{A:"true",Z:"true",M:"Data table",T:"boolean",C:"Starting column in the data table"},xAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the X axis.",D:"false"},nodesProperties:{M:"Data Table/Filter",T:"array",C:"Two dimensional array with object properties not at the root level for the nodes in the Network graph to include in the Data table and the data filter",D:"[]"},ratioReference:{M:"Data",T:"integer",C:"Default index of sample used in ratio transformation.",D:"0"},citationColor:{S:["citation"],M:"Titles",T:"color",C:"Color for a reference citation of the graph",D:"rgb(0,0,0)"},rAxisZero:{M:"Circular Graphs",T:"boolean",C:"Flag to force the rAxis to start from zero otherwise it starts from the minimum value",D:"true"},decorationsPosition:{A:"true",O:["bottom","right"],M:"Decorations",T:"option",C:"Position for the decorations in scatter plots and network graphs",D:"bottom"},eventPlusMinusKeys:{A:"true",M:"Events",T:"boolean",C:"Flag to enable plus / minus key binding events.",D:"true"},resizerBackgroundColorCurrent:{A:"true",M:"Axis Resizer",T:"color",C:"Color for the div that shows up the current area selected in the axes in the canvas",D:"rgb(153,187,232)"},correlationAnchorLegend:{A:"true",M:"Correlation Graphs",T:"boolean",C:"Flag to show a region above the correlation plot that anchror a sample/variable to a position",D:"false"},minRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Minimum number of degrees to rotate graph arround axes",D:"false"},axisTitleColor:{M:"Ticks and Axis Titles",T:"color",C:"Color for the axis title in one and two dimensional plots",D:"foregroung color"},xAxis2AbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the 2nd X axis"},panningGlobalX:{A:"true",Z:"true",M:"Zooming and Panning",T:"float",C:"Cumulative number of unit to pan the network in the X dimension"},xAxis:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the X axis",D:"[]",X:"getSamplesAsArray"},featureNameFont:{A:"true",Z:"true",M:"Genome Browser",T:"font",C:"Font for the text of the features in the genome browser"},scatterSeries:{O:["x","y"],M:"Scatter Plots",T:"option",C:"Axis that contain the series in the scatter plots",D:"y"},offsetY:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Additional amount to move for the Y axis."},selectNode:{A:"true",Z:"true",M:"Network Graphs",T:"object",C:"Name of nodes (in the data object) to select.",D:"{}"},isGraphTime:{A:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is a time series so ther is no need to plot every time interval",D:"false"},featureTraceHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the trace height",D:"40"},featureQualityShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show quality",D:"true"},lineDecoration:{O:["false","dot","symbol"],M:"Line Graphs",T:"option",C:"Lines decorations in the line graphs",D:"sybol"},kmeansVariables:{S:["kmeansClusters","maxIterations"],M:"Functions",T:"void",C:"Cluster variables using kmeans",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},xAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the X axis",D:"[]"},clusterAxis:{S:["distance","linkage","imputeMethod","centerData","clusterSamples","clusterVariables"],O:["samples","variables"],M:"Clustering",T:"option",C:"Default axis to use when clustering data.",D:"samples"},rotationDelay:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Time in milliseconds to wait between rendering the plot when dragging the mouse.",D:"100"},varLabelScaleFontFactor:{M:"Variables",T:"float",C:"Scaling factor used to increse or decrease variable font size in the canvas.",D:"1"},maxVarStringLen:{M:"Variables",T:"integer",C:"Maximum length in characters a variable label or description can have so anything above is truncated.",D:"30"},varLabelRotate:{M:"Variables",T:"integer",C:"Rotation for variable labels in degrees It could be positive or negative.",D:"0"},networkNodesOnTop:{M:"Network Graphs",T:"boolean",C:"Order to use when drawing nodes and edges in the networks",D:"true"},colorRGB:{A:"true",Z:"true",M:"Attributes",T:"array",C:"Color RGB. Red, Green, Blue used in the configurator"},setMaxZ:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the Z axis",D:"null"},dendrogramHeight:{M:"Dendrograms",T:"boolean",C:"Flag to size the branches of the dendrogram.",D:"false"},showFeatureNameThereshold:{M:"Genome Browser",T:"integer",C:"Threshehold used to set te limit when there are too many features in the genome browser",D:"20"},zAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the Z axis"},setMinZ:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the Z axis",D:"null"},varTitleFontSize:{A:"true",M:"Variables",T:"integer",C:"Size for the variable title in one dimensional plots",D:"10"},reduceRandomNetwork:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to create or not a single random network for debug and demonstraion purposes",D:"false"},edgeWidth:{M:"Network Graphs",T:"integer",C:"Default width for the edges in the networks",D:"1"},sequenceSColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate G/C and serines in the genome browser",D:"rgb(255,165,0)"},isMultidimensionalHeatmap:{A:"true",Z:"true",M:"Heatmaps",T:"boolean",C:"Flag to indicate if the heatmap is multidimensional"},maxIterations:{S:["kmeansClusters","kmeansSamples","kmeansVariables"],M:"Clustering",T:"integer",C:"Number of maximum iterations when clustering data with kmeans for one dimensional graphs or maximum number of iterations when calculating force direct layout networks.",D:"10"},sortDir:{O:["ascending","descending"],M:"Data",T:"option",C:"Default direction for data sorting.",D:"ascending"},filterSmpBy:{M:"Samples",T:"filter",C:"Filter samples by their annotation included in the 'data.x' object used in one dimensional plots",D:"[]",X:"getXData"},featrureSignalToNoiseHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the quality height",D:"12"},showOverlays:{M:"Overlays",T:"boolean",C:"Flag to indicate to show or not the overlays in one dimensional plots",D:"true"},autoAdjustMax:{A:"true",M:"General",T:"integer",C:"Number of times to try to automaticaly adjust the size of the canvas when autoAdjust is true",D:"3"},smpTitleColor:{M:"Samples",T:"color",C:"Font color for the sample title in one dimensional plots",D:"foreground color"},graphOrientation:{O:["horizontal","vertical"],M:"General",T:"option",C:"Orientation of the graph when plotting one dimensional graphs",D:"horizontal"},outlineWidth:{A:"true",M:"Attributes",T:"integer",C:"Default width in pixels for the lines",D:"1"},randomDataVariableAnnotationRatio:{A:"true",M:"Data",T:"integer",C:"Approximate number of classes in each variable annotation when creating random data",D:"2"},marginRight:{M:"General",T:"integer",C:"Length in pixels for the right margin in the canvas",D:"0"},align:{A:"true",O:["right","center","left"],M:"Text",T:"option",C:"Default horizontal alignment for drawing text.",D:"center"},dataTableTransposed:{A:"true",M:"Data table",T:"boolean",C:"Flag to transpose the data in the data table",D:"true"},showDataTableOnSelect:{A:"true",M:"Data table",T:"boolean",C:"Flag to indicate to show data after selecting data in the plot",D:"false"},wireColor:{A:"true",M:"Genome Browser",T:"color",C:"Color for the ticks in the genome browser",D:"rgba(204,204,204,0.1)"},sequenceVColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/C/G and valines in the genome browser",D:"rgb(0,103,0)"},marginTop:{M:"General",T:"integer",C:"Length in pixels for the top margin in the canvas",D:"0"},setMin:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data",D:"null"},animationCycles:{A:"true",M:"Animation",T:"integer",C:"Number of cycles to plot the graph for the animations.",D:"20"},sequenceDColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/G/T and aspartic acids in the genome browser",D:"rgb(0,0,0)"},videoLoop:{M:"General",T:"boolean",C:"Flag to loop videos default false"},shapeNodeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to shape the nods.",D:"false"},errors:{A:"true",Z:"true",M:"Debug",T:"array",C:"Array containing benign errors produced when rendering canvasXpress",D:"[]"},xAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the X axis",D:"true"},skinPropertiesGrey:{A:"true",Z:"true",M:"Skins",T:"array",C:"Values for the grey skin",D:"[]"},canvasBoxColor:{S:["canvasBox"],M:"General",T:"color",C:"Color for the box around the canvas",D:"rgb(0,0,0)"},subtitleHeight:{S:["subtitle","subtitleColor"],M:"Titles",T:"integer",C:"Height for the subtitle of the graph. The font height will be adjusted automatically to fit in the canvas.",D:"16"},indicatorsPosition:{O:["bottom","right"],M:"Indicators",T:"option",C:"Position for the color, shape and size indicators in several visualizations",D:"bottom"},featureConfigurableProperties:{A:"true",F:"id:[string];Feature id;[],fill:[color];Color for the feature;[]",M:"Genome Browser",T:"array",C:"Feature configurable properties",D:["'id'","'name'","'label'","'hideName'","'fill'","'outline'","'dir'","'showDir'","'connect'","'offset'","'data'","'subtype'","'quality'","'signalToNoise'","'coordinate'","'sequence'","'trace'","'gaps'","'translate'","'hide'","'counter'"]},titleHeight:{S:["title","titleColor"],M:"Titles",T:"integer",C:"Height for the title of the graph. The font height will be adjusted automatically to fit in the canvas.",D:"30"},subtracksMaxDefault:{M:"Genome Browser",T:"integer",C:"Maximum number of subtracks to show in a track",D:"8"},acknowledgment:{M:"General",T:"boolean",C:"Acknowledge canvasXpress",D:"false"},videoColor:{M:"General",T:"color",C:"Color for the video grid and current time",D:"rgb(255,0,0)"},sizes:{A:"true",O:["4","6","8","10","12","14","16","18","20","22","24","26","28","30","32","34"],M:"Attributes",T:"array",C:"Sizes used invisualizations"},infoTimeIn:{A:"true",M:"Events",T:"integer",C:"Time in milliseconds to start showing info after a mouse over",D:"3000"},layoutHeight:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Height of the current segment of the canvas when there are multiple graphs."},sizeEdgeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to size the edges.",D:"false"},foregroundWindow:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"Foreground color of the canvas window when the background type is a type of window.",D:"rgb(0,0,0)"},colorBy:{O:["false","variable"],M:"Scatter and One-D Plots",T:"option",C:"Name of a variable annotation or a sample name or the string 'variable' to color the variables.",D:"false",X:"getXZData"},randomNetworkNodeEdgesMax:{A:"true",M:"Network Graphs",T:"integer",C:"Default number of maximum edges when creating random networks",D:"5"},scaleTextConstantAdd:{A:"true",Z:"true",M:"Text",T:"float",C:"Constants to autoscale text (extra)",D:"2.5"},rAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the R axis",D:"false"},transformBase:{O:["2","10"],M:"Data",T:"integer",C:"Default log or exponential transformation.",D:"2"},centerData:{S:["distance","linkage","clusterAxis","imputeMethod","clusterSamples","clusterVariables"],M:"Clustering",T:"boolean",C:"Flag to indicate whether to center data when clustering",D:"false"},missingDataColor:{M:"Data",T:"color",C:"Color for the missing data",D:"rgb(255,255,0)"},rAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the R axis",D:"false"},offsetX:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Additional amount to move for the X axis"},videoAutoplay:{M:"General",T:"boolean",C:"Flag to autoplay videos default true"},rAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the R axis"},zAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the Z axis",D:"solid"},showNodeNameThreshold:{M:"Network Graphs",T:"integer",C:"Thereshold used to set the limit to hide or display the name of nodes in a network. If the number of nodes exceed this thereshold then the name will not be shown.",D:"50"},isSelectDataPoints:{A:"true",Z:"true",M:"Scatter Plots",T:"integer",C:"Number of selected data points (in the data object).",D:"0"},randomDataSampleAnnotations:{A:"true",M:"Data",T:"integer",C:"Default number of sample annotations when creating random data",D:"3"},smpLabelRotate:{M:"Samples",T:"integer",C:"Rotation for sample labels in degrees. It could be positive or negative.",D:"0"},resizerWidth:{A:"true",M:"Axis Resizer",T:"integer",C:"Length in pixels for the width of the visible axis resizer",D:"18"},showNetworkRadialLayout:{M:"Network Graphs",T:"boolean",C:"Flag to show or not a radial layout wire.",D:"false"},infoTimeOut:{A:"true",M:"Events",T:"integer",C:"Time in milliseconds to wait between updates for the mouse over info to show up",D:"3000"},overlayFont:{A:"true",Z:"true",M:"Overlays",T:"font",C:"Font for the overlays in one dimensional plots"},rAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the R axis",D:"solid"},setMinY:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the Y axis",D:"null"},showNetworkEdgesLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show edge legends in the networks",D:"true"},filterNodeBy:{M:"Network Graphs",T:"filter",C:"Filter nodes by their properties used in network graphs",D:"[]",X:"getNodeData"},panningGlobalY:{A:"true",Z:"true",M:"Zooming and Panning",T:"float",C:"Cumulative umber of unit to pan the network in the Y dimension"},featureHeightDefault:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the feature height",D:"14"},zAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the Z axis",D:"5"},remoteIds:{A:"true",Z:"true",M:"Remote Procedures",T:"array",C:"Array of the remoteIds passed after a service call"},freezeColLeft:{A:"true",M:"Data table",T:"integer",C:"Number of columns to freeze in the left side of the data table",D:"0"},dotPlotDataPointTransparency:{A:"true",S:["showBoxplotOriginalData","dotPlotDataPointRatio"],M:"Dot Plots",T:"float",C:"Fraction to adjust color transparency for the data points when displaying original data in boxplots.",D:"0.5"},yAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the Y axis",D:"false"},setMin2:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the 2nd axis",D:"null"},isGroupedData:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is grouped."},vennLegendColors:{M:"Venn Diagrams",T:"boolean",C:"Flag to use the venn colors to use for the legends instead of the letters",D:"false"},zoomGlobal:{A:"true",Z:"true",M:"Zooming and Panning",T:"float",C:"Cumulative zoom factor for the networks."},decorationsType:{A:"true",O:["pie","bar","heatmap","stacked","stackedpercent"],M:"Decorations",T:"option",C:"Type for the decorations in the networks. The types stacked and stackedpercent must be two dimensional. Heatmap could be one or two dimensional",D:"bar"},showVersion:{A:"true",M:"Debug",T:"boolean",C:"Flag to show version when mouse over top-left corner of the canvas.",D:"true"},networkDepth:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Depth of the radial network."},showHiddenChildEdges:{M:"Network Graphs",T:"boolean",C:"Flag to show or not children nodes when the parent node is hidden.",D:"true"},randomDataSigma:{A:"true",M:"Data",T:"integer",C:"Sigma value when creating random data",D:"100"},nodeConfigurableProperties:{A:"true",M:"Network Graphs",T:"array",C:"Node configurable properties",N:"x:[float];X coordinate;[],y:[float];Y coordinate;[],z:[float];Z coordinate;[],parentNode:[string];Id of parent node;[],shape:[string];Shape for the node. One of the ones defined in shapes;[shapes],color:[color];Color for the node;[],outline:[color];Color for the outline of the node;[],pattern:[open|closed];Whether to draw a solid shape or just an outline;[],rotate:[integer];Number of degrees to rotate the shape;[],outlineWidth:[integer];Pixels used to raw the outline of the node;[],imagePath:[url];Url for the node image;[],zIndex:[integer];Css property for the imagePath;[],eventless:[boolean];Flag to disable all events in the node;[overrideEventlessNodes],hide:[boolean];Flag to hide the node;[],hideLabel:[boolean];Flag to hide the label node;[],anchor:[boolean];Flag make the node transparent;[]",D:["'x'","'y'","'z'","'shape'","'color'","'outline'","'size'","'width'","'height'","'pattern'","'rotate'","'outlineWidth'","'imagePath'","'zIndex'","'eventless'"]},zoomStep:{A:"true",M:"Zooming and Panning",T:"float",C:"Percentage step for zooming networks and genome panel.",D:"0.2"},axisTitleScaleFontFactor:{M:"Ticks and Axis Titles",T:"float",C:"Scaling factor used to increse or decrease title font size in the canvas in one and two dimensional plots",D:"1"},zAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the Z axis",D:"false"},featureSignalToNoiseValues:{M:"Genome Browser",T:"boolean",C:"Flag use to show values for the quality",D:"false"},tickScaleFontFactor:{M:"Ticks and Axis Titles",T:"float",C:"Scaling factor used to increse or decrease tick font size in the canvas in one and two dimensional plots",D:"1"},showNetworkTextLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show node legends in the networks",D:"true"},showIndicators:{M:"Indicators",T:"boolean",C:"Flag to show color, shape and size indicators in several visualizations",D:"true"},createHistogram:{A:"true",O:["x","y"],M:"Functions",T:"option",C:"Create a histogram in 2D-Scatter plots in the 'x' axis or the 'y' axis",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},sma20Color:{M:"Candlestick Plots",T:"color",C:"The color for the 25 day single moving average",D:"rgb(0,0,255)"},smpHairlineColor:{M:"One dimentional plots",T:"color",C:"The color for the thin line that appears in the middle of the bar graphs",D:"rgb(204,204,204)"},axisTitleFont:{A:"true",Z:"true",M:"Ticks and Axis Titles",T:"font",C:"Font for the axis titles in one and two dimensional plots"},functions:{Z:"true",M:"General",T:"array",C:"Functions exposed to the api"},decorationsProperties:{A:"true",M:"Decorations",T:"object",C:"Object to assign properties like color for the network decorations",D:"{}"},ticks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the genome browser",D:"50"},rAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the R axis"},showAnimationFont:{A:"true",Z:"true",M:"Animation",T:"font",C:"Font for the text in animations"},videoPoster:{M:"General",T:"url",C:"Video poster for videos",D:"false"},nodeFontSize:{A:"true",M:"Network Graphs",T:"integer",C:"Size in pixels for the font size of text in the networks",D:"node width"},sortSamplesByVariable:{S:["sortDir","sortSamplesByCategory"],M:"Functions",T:"array",C:"Sort the samples by the value of a variable",X:"getVariablesAsArray",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},resizerBackgroundImage:{Z:"true",A:"true",M:"Axis Resizer",T:"url",C:"Object to store data when the canvas is zoomed with the axis resizer resizerEventData @type {object}",D:"-1"},sizeDecorationBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to size the network decoration.",D:"false"},setSkin:{O:["blue","grey"],M:"Functions",T:"option",C:"Change the skin of the application"},trackConfigurableProperties:{A:"true",M:"Genome Browser",T:"array",C:"Track configurable properties",D:["'name'","'hideName'","'hideFeatureNames'","'type'","'height'","'fill'","'outline'","'data'","'hide'","'connect'","'subtracksMax'","'highlight'"],G:"name:[string];Track name;[]"},xAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the X axis",D:"rgb(204,204,204)"},yAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the Y axis",D:"rgb(204,204,204)"},isAnimation:{A:"true",Z:"true",M:"Snapshots",T:"boolean",C:"Flag to indicate if there is an active animation"},pieSegmentPrecision:{M:"Pie Charts",T:"integer",C:"Number of decimals for values in the Pie charts",D:"0"},layoutMulticolor:{A:"true",M:"Combination Plots",T:"boolean",C:"Flag to cycle colors when displaying multiple graps in the canvas. If set to false the color will be reseted for every graph.",D:"true"},disableToolbar:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing the toolbar",D:"false"},decorationScaleFontFactor:{A:"true",M:"Decorations",T:"float",C:"Scaling factor used to increse or decrease decoration font size in the canvas.",D:"1"},previousButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the previous button (not including the image directory)",D:"rewind.png"},boxPlotOutliersRatio:{A:"true",M:"Box Plots",T:"integer",C:"Ratio for the size of the outliers with respect to boxplot",D:"8"},panningY:{A:"true",M:"Zooming and Panning",T:"float",C:"Number of unit to pan the network in the Y dimension",D:"0"},varTitleColor:{M:"Variables",T:"color",C:"Font color for the variable titles in one dimensional plots",D:"foreground color"},useFlashIE:{M:"General",T:"boolean",C:"Flag to use flash in IE rather than VML (through excanvas.js)",D:"true"},setMinR:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the R axis",D:"null"},randomDataMean:{A:"true",M:"Data",T:"integer",C:"Mean value when creating random data",D:"100"},transpose:{M:"Functions",T:"void",C:"Transpose the data. It takes no parameters",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},smpLabelScaleFontFactor:{M:"Samples",T:"float",C:"Scaling factor used to increse or decrease sample label font size in the canvas.",D:"1"},circularLetterSeparationFactor:{M:"Circular Graphs",T:"float",C:"Factor to adjust the spacing between letters in the circular graphs. The greater the number the closer the letters in the labels",D:"2"},debug:{A:"true",M:"Debug",T:"boolean",C:"Flag to turn on alerts.",D:"true"},citation:{S:["citationColor"],M:"Titles",T:"string",C:"A reference citation of the graph which is placed at the bottom right corner",D:"false"},smpSort:{A:"true",Z:"true",M:"Data",T:"integer",C:"Sample index used in sorting the data."},resizerBackgroundColorOutlineCurrent:{A:"true",M:"Axis Resizer",T:"color",C:"Color for the div that shows up the current area selected in the axes in the canvas",D:"rgb(153,187,232)"},showAnimation:{A:"true",M:"Animation",T:"boolean",C:"Flag to show or not animation for the graphs",D:"false"},networkFreezeOnLoad:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to prevent autoscaling for the network layout after loading.",D:"false"},layoutTime:{A:"true",M:"Network Graphs",T:"integer",C:"Time in milliseconds used to calculate the layout for the network",D:"15"},xAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the X axis"},isLogData:{M:"Data",T:"boolean",C:"Flag to indicate if the data is Log transformed.",D:"false"},tension:{A:"true",M:"Line Graphs",T:"float",C:"Curvature for the splines",D:"0.3"},networkStackIndex:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Index in the network stack for undo and redo operations"},axisTickColor:{M:"Ticks and Axis Titles",T:"color",C:"Color for the axis ticks in one and two dimensional plots",D:"foregroung color"},resizerBackgroundColor:{A:"true",M:"Axis Resizer",T:"color",C:"Color for the div that shows up when resizing the axes in the canvas or the whole canvas",D:"rgb(204,204,204)"},groupSamples:{S:["ungroupSamples"],M:"Functions",T:"array",C:"Group samples based on a sample category (data.x object)",X:"getXData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},zRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Number of degrees to rotate graph arround the Z axis",D:"0"},remoteDirection:{A:"true",O:["next","prev"],M:"Remote Procedures",T:"option",C:"Direction parameter used to obtain data remotely.",D:"next"},featureWidthDefault:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the feature width",D:"3"},skinPropertiesBlue:{A:"true",Z:"true",M:"Skins",T:"array",C:"Values for the blue skin",D:"[]"},rAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the R axis",D:"true"},showVariableNames:{M:"Variables",T:"boolean",C:"Flag to show the variable names in one dimensional plots",D:"true"},lineTickness:{A:"true",M:"Line Graphs",T:"float",C:"Thickness in pixels for line plots",D:"1"},decorationFontSize:{A:"true",M:"Decorations",T:"font",C:"Font size for the decorations in scatter plots and network graphs",D:"10"},fontSize:{A:"true",M:"Text",T:"integer",C:"Font size for text in complex plot only. See other categories to modify specific font sizes.",D:"12"},filterType:{O:["and","or"],M:"Data Filters",T:"option",C:"Type for the filter. Can be 'and' or 'or'",D:"and"},imageDir:{A:"true",M:"Images",T:"url",C:"Relative path to a directory contaioning images",D:"http://canvasxpress.org/images/"},animationTime:{A:"true",M:"Animation",T:"integer",C:"Time in milliseconds to wait between rendering the plot when showing the animation.",D:"30"},layoutMaxVarLegend:{A:"true",Z:"true",M:"Combination Plots",T:"integer",C:"Maximum length of legend when multiple graphs are displayed in the canvas."},resizable:{A:"true",M:"Events",T:"boolean",C:"Flag to disable resizing the canvas by dragging the mouse over the edges",D:"true"},attractiveForceFunction:{A:"true",O:["Eades","FruchtermanReingold"],M:"Network Graphs",T:"option",C:"Type of function to apply when calculating attractive force in forceDirected network layouts",D:"FruchtermanReingold"},rotationStep:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Number of degrees used when the plot is automatically rotated",D:"2"},xAxis2Ticks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the 2nd X axis",D:"5"},layoutCurrent:{A:"true",Z:"true",M:"Combination Plots",T:"integer",C:"Integer to identify the current graph being displayed in the canvas."},graphType:{O:["Bar","Line","Area","AreaLine","BarLine","Boxplot","Dotplot","Heatmap","Candlestick","Stacked","StackedLine","StackedPercent","StackedPercentLine","Scatter2D","ScatterBubble2D","Scatter3D","Correlation","Pie","Venn","Network","Genome","Circular"],M:"General",T:"option",C:"Type of graph",D:"Bar"},distance:{S:["linkage","clusterAxis","centerData","clusterSamples","clusterVariables"],O:["euclidian","manhattan","max"],M:"Clustering",T:"option",C:"Distance metric to use when clustering data.",D:"euclidian"},featureSignalToNoiseShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show quality",D:"true"},remoteUpdateDelay:{A:"true",M:"Remote Procedures",T:"integer",C:"Time in milliseconds to wait between tryig to get an upated version of the file containing the data",D:"10000"},layout:{A:"true",M:"Combination Plots",T:"string",C:"Topology of the canvas. Number of rows and columns.",D:"1X1"},marginBottom:{M:"General",T:"integer",C:"Length in pixels for the bottom margin in the canvas",D:"0"},filterEdgeBy:{M:"Network Graphs",T:"filter",C:"Filter edges by their properties used in network graphs",D:"[]",X:"getEdgeData"},showPieValues:{M:"Pie Charts",T:"float",C:"A flag to show the values for the pie",D:"true"},smpTitleFontSize:{A:"true",M:"Samples",T:"integer",C:"Size for the sample title in one dimensional plots",D:"10"},edgeConfigurableProperties:{A:"true",M:"Network Graphs",T:"array",C:"Edge configurable properties",D:["'width'","'cap'","'exact'","'type'"],E:"color:[color];Color for the edge;[],width:[integer];Pixel width for the edges between nodes;[],cap:[butt|round|square];Type of cap for the end of the lines;[capType],exact:[boolean];Flag to indicate to create the edge between nodes without subtracting the size of the nodes;[],type:[string];Type of line use to join the nodes;[lines],hide:[boolean];Flag to hide the edge;[],anchor:[boolean];Flag make the edge transparent;[]"},ringType:{M:"Circular Graphs",T:"array",C:"Array containing the types for each ring in the circular plots",D:"[]"},zoomSamplesDisable:{S:["zoomVariablesDisable"],M:"Zooming and Panning",T:"boolean",C:"Flag to disable zooming of samples with mouse wheel in Heatmaps",D:"false"},decorationsColor:{A:"true",M:"Decorations",T:"color",C:"Color for the decorations in scatter plots and network graphs",D:"foreground color"},sequenceUColor:{M:"Genome Browser",T:"color",C:"Color for the uracils in the genome browser",D:"rgb(255,0,0)"},freezeRowTop:{A:"true",M:"Data table",T:"integer",C:"Number of rows to freeze at the top of the data table",D:"0"},nodeHighlightColor:{M:"Network Graphs",T:"color",C:"The color for the highlighted nodes.",D:"rgb(255,0,0)"},oddColor:{M:"Attributes",T:"color",C:"The color for the odd numbers in samples or sequences",D:"background color"},capType:{A:"true",O:["butt","round","square"],M:"Attributes",T:"option",C:"Default type of cap for lines.",D:"butt"},showAnimationFontColor:{A:"true",M:"Animation",T:"color",C:"Color for the animation text",D:"background color"},canvasBox:{S:["canvasBoxColor"],M:"General",T:"boolean",C:"Flag to create a box around the canvas",D:"true"},updateCodeDiv:{A:"true",M:"Functions",T:"void",C:"Update the code to generate the plot"},videoGridStep:{M:"General",T:"int",C:"Number of steps to divide the grid in the video",D:"10"},rAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the R axis",D:"5"},sortVariablesBySample:{S:["sortDir","sortVariablesByCategory"],M:"Functions",T:"array",C:"Sort the variables by the value of a sample",X:"getSamplesAsArray",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},randomNetwork:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to create or not random network for debug and demonstraion purposes",D:"false"},layoutWidth:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Width of the current segment of the canvas when there are multiple graphs."},histogramBarWidth:{A:"true",M:"2D Scatter Plot",T:"float",C:"Length in pixels for half of the bar width in the 2D sccaterplot histogram",D:"0.5"},correlationAxis:{O:["samples","variables"],M:"Correlation Graphs",T:"option",C:"Axis used for the correlation.",D:"samples"},zAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the Z axis",D:"true"},shadowOffsetX:{A:"true",S:["showShadow"],M:"General",T:"integer",C:"Length in pixels for the shadow offset in the X axis.",D:"3"},xAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the X axis",D:"5"},rAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the R axis",D:"true"},sequenceZColor:{M:"Genome Browser",T:"color",C:"Color for the glutamines in the genome browser",D:"rgb(0,0,0)"},skinProperties:{A:"true",Z:"true",M:"Skins",T:"array",C:"Properties for the skin",D:["'skinBackgroundColor'","'skinBorderColor'","'skinColor'","'skinShadowColor'"]},setMaxY:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the Y axis",D:"null"},ungroupSamples:{S:["groupSamples"],M:"Functions",T:"void",C:"Ungroup samples previously grouped according to a sample category (data.x object)",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},legendFontSize:{A:"true",S:["autoScaleFont","legendScaleFontFactor"],M:"Legends",T:"integer",C:"Font size for the legends. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the legend scaling factor",D:"10"},randomDataSamples:{A:"true",M:"Data",T:"integer",C:"Default number of samples when creating random data",D:"50"},setMaxR:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the R axis",D:"null"},shapeByShape:{A:"true",O:["false","sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","mdavid"],M:"Scatter and One-D Plots",T:"array",C:"String that identify the shape to use in multidimensional heatmaps. shapeByData will take precedence over this property.",D:"false"},indicatorHeight:{M:"Heatmaps and Networks",T:"integer",C:"Length in pixels for the heatmap indicator",D:"8"},marginLeft:{M:"General",T:"integer",C:"Length in pixels for the left margin in the canvas",D:"0"},xAxis2:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the 2nd X axis",X:"getSamplesAsArray",D:"[]"},layoutComb:{A:"true",M:"Combination Plots",T:"boolean",C:"Flag that identify that multiple graphs will be displayed in the canvas.",D:"false"},broadcast:{A:"true",M:"Events",T:"boolean",C:"Flag to enable broadcasting to other canvasXpress objects in the page",D:"true"},yAxisTitle:{M:"Axes",T:"string",C:"Title for the Y axis",D:"false"},eventKeys:{A:"true",M:"Events",T:"boolean",C:"Flag to enable key binding events. This prevent some default browser shortcuts and it is system specific. Please see the Event section bellow.",D:"true"},yRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Number of degrees to rotate graph arround the Y axis",D:"0"},featureTraceTrim:{A:"true",M:"Genome Browser",T:"integer",C:"Default triming for nucleotide values in the traces (expressed in percent)",D:"1"},smpTitleFont:{A:"true",Z:"true",M:"Samples",T:"font",C:"Font for the sample title in one dimensional plots"},nextButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the next button (not including the image directory)",D:"fast_forward.png"},sequenceCColor:{M:"Genome Browser",T:"color",C:"Color for the cytosines and cysteins in the genome browser",D:"rgb(0,0,255)"},segregateVariablesBy:{O:["false","string"],M:"Data",T:"option",C:"String to indicate the annotation used to segregate the variables. It must be a category in the 'data.z' object",D:"false"},yAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the Y axis"},showSmpDendrogram:{M:"Dendrograms",T:"boolean",C:"Flag to show or not the sample dendrogram",D:"false"},showAdvancedConfiguration:{M:"Events",T:"boolean",C:"Flag to show advanced configuration properties.",D:"false"},disableEvents:{A:"true",M:"Events",T:"boolean",C:"Flag to disable all events.",D:"false"},edgesProperties:{M:"Data Table/Filter",T:"array",C:"Two dimensional array with object properties not at the root level for the edges in the Network graph to include in the Data table and the data filter",D:"[]"},showVarDendrogram:{M:"Dendrograms",T:"boolean",C:"Flag to show or not the variable dendrogram",D:"false"},freezeColRight:{A:"true",M:"Data table",T:"integer",C:"Number of columns to freeze in the right side of the data table",D:"0"},featrureCoordinateHeight:{A:"true",M:"Genome Browser",T:"integer",C:"Default size in pixels of the coordinates height",D:"12"},pieType:{O:["separated","solid"],M:"Pie Charts",T:"option",C:"Position for the pices of the pie",D:"separated"},rAxis:{M:"Circular Graphs",T:"string",C:"Radial axis for circular plots. It must be the name of a variable",D:"false"},fonts:{A:"true",Z:"true",M:"Text",T:"array",C:"Font name. It will be set depending on the browser. It could be Optimer, Helvetiker, Gentilis or Verdana, sans-serif"},reset:{M:"Functions",T:"void",C:"Reset the canvas"},remoteDataIndex:{A:"true",Z:"true",M:"Remote Procedures",T:"integer",C:"Index of the canvasXpress object requested"},smpLabelColor:{M:"Samples",T:"color",C:"Font color for the sample labels in one dimensional plots",D:"foreground color"},showDecorations:{A:"true",M:"Decorations",T:"boolean",C:"Flag to show or not extra decorations like (regression lines, splines, etc) in scatter plots and (heatmaps, pie charts or stacked bar graphs in) network graphs",D:"false"},backgroundVideo:{S:["backgroundType"],M:"General",T:"url",C:"Url for the background video",D:"false"},approximateNodePositions:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to force approximate X, Y node positions.",D:"false"},heatmapType:{O:["blue","blue-green","blue-red","blue-yellow","blue-cyan","blue-purple","green","green-blue","green-red","green-yellow","green-cyan","green-purple","red","red-blue","red-green","red-yellow","red-cyan","red-purple","yellow","yellow-green","yellow-red","yellow-yellow","yellow-cyan","yellow-purple","cyan","cyan-green","cyan-red","cyan-cyan","cyan-cyan","cyan-purple","purple","purple-green","purple-red","purple-purple","purple-cyan","purple-purple"],M:"Heatmaps and Networks",T:"option",C:"Color shades for the heatmap. It could be red, blue, green, yellow, cyan, purple or any combination of two colors separated by a dash",D:"blue-red"},citationScaleFontFactor:{M:"Titles",T:"float",C:"Scaling factor used to increase or decrease citation font size in the canvas",D:"1"},zoomVariablesDisable:{S:["zoomSamplesDisable"],M:"Zooming and Panning",T:"boolean",C:"Flag to disable zooming of variables with mouse wheel in Heatmaps",D:"false"},hideInfoDiv:{A:"true",M:"Functions",T:"void",C:"Hide additional information"},xAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the X axis",D:"solid"},smpTitleScaleFontFactor:{M:"Samples",T:"float",C:"Scaling factor used to increse or decrease sample title font size in the canvas",D:"1"},axisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data",D:"false"},monitorCanvasXpressZombiesTime:{A:"true",M:"Events",T:"integer",C:"Time in milliseconds to wait between checking for canvasXpress zombies",D:"30000"},selectDataPoint:{A:"true",Z:"true",M:"Scatter Plots",T:"array",C:"Ids of data points (in the data object) to select.",D:"[]"},subtitle:{S:["subtitleHeight","subtitleColor"],M:"Titles",T:"string",C:"Title of the graph.",D:"rgb(0,0,0)"},animationType:{A:"true",O:["grow","spring","random"],M:"Animation",T:"option",C:"Type of animation",D:"grow"},showErrorBars:{M:"Data",T:"boolean",C:"Flag to indicate whether to show or not error bars in the graphs.",D:"true"},autoAdjustXTries:{Z:"true",M:"General",T:"integer",C:"Counter to try to automaticaly adjust the horizontal size of the canvas when autoAdjust is true"},colorEdgeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to color the edges.",D:"false"},margin:{M:"General",T:"integer",C:"Length in pixels for the distance between many areas in the graphs",D:"5"},xAxisMaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the X axis"},acknowledgementIconPosition:{O:["outside","inside"],M:"General",T:"option",C:"Acknowledge canvasXpress icon position",D:"outside"},broadcastType:{A:"true",O:["var","comb"],M:"Events",T:"option",C:"Model for broadcasting to identify either variables or a combination of variable and samples",D:"var"},autoAdjustYTries:{Z:"true",M:"General",T:"integer",C:"Counter to try to automaticaly adjust the vertical size of the canvas when autoAdjust is true"},segregateSamplesBy:{O:["false","string"],M:"Data",T:"option",C:"String to indicate the annotation used to segregate the samples. It must be a category in the 'data.x' object",D:"false"},print:{M:"Functions",T:"void",C:"Save the current parameters for a remote data set. @param {void} saveRemoteParameters"},backgroundType:{S:["backgroundImage","gradientOrientation","backgroundGradient1Color","backgroundGradient2Color"],O:["solid","gradient","window","windowGradient","windowGradient2","windowSolidGradient","image","windowImage","video"],M:"General",T:"option",C:"Type of background for the canvas. The canvas may have a window for plotting the data which may be a gradient, a solid pattern or an image.",D:"solid"},maxSmpStringLen:{M:"Samples",T:"integer",C:"Maximum length in characters a sample label or description can have so anything above is truncated.",D:"50"},showAnimationFontSize:{A:"true",M:"Animation",T:"integer",C:"Size in pixels for the font size of text involved in the animation",D:"10"},axisExtension:{A:"true",M:"Axes",T:"float",C:"Percentage to extend the values in the data",D:"0.1"},autoAdjust:{A:"true",M:"General",T:"boolean",C:"Flag to automaticaly adjust the size of the canvas in most visualizations. If set to 'false' you can easily adjust the rows and columns in the heatmap visualizations",D:"true"},sequenceMColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/G and methionines in the genome browser",D:"rgb(0,103,0)"},randomDataVariableAnnotations:{A:"true",M:"Data",T:"integer",C:"Default number of variable annotations when creating random data",D:"2"},xAxis2AbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the 2nd X axis"},subNetworks:{A:"true",Z:"true",M:"Network Graphs",T:"array",C:"Array to keep independent networks"},showInfoDiv:{A:"true",M:"Functions",T:"void",C:"Show additional information"},yAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the Y axis"},blockContrast:{M:"One dimentional plots",T:"boolean",C:"A flag to creates a shade between the samples so there are two backgrounds, one for the odd samples and one for the even samples.",D:"false"},xAxisExact:{A:"true",M:"Axes",T:"boolean",C:"Flag to force exact values for the data in the X axis",D:"false"},legendBox:{S:["legendBoxColor","legendBackgroundColor"],M:"Legends",T:"boolean",C:"Flag to create a box around the legend",D:"true"},showDataTable:{A:"true",M:"Data table",T:"boolean",C:"Flag to indicate to show the data table",D:"false"},remoteService:{A:"true",M:"Remote Procedures",T:"url",C:"Url used to obtain data remotely. It expects and array of canvasXpress objects",D:"false"},randomDataVariables:{A:"true",M:"Data",T:"integer",C:"Default number of variables when creating random data",D:"50"},gradientRatio:{A:"true",S:["gradientType"],M:"General",T:"float",C:"Ratio used to generate the linear gradients applied to all elements in the visualizations",D:"1.3"},decorationFont:{A:"true",Z:"true",M:"Decorations",T:"font",C:"Font for the decoration in scatter plots and network graphs"},playButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the play button (not including the image directory)",D:"play.png"},sequenceRColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/G and arginines in the genome browser",D:"rgb(255,0,0)"},varOverlayRecycleColors:{M:"Overlays",T:"boolean",C:"Flag to indicate to recycle variable overlay colors with each overlay",D:"false"},zAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the Z axis",D:"true"},dotPlotDataPointRatio:{A:"true",S:["showBoxplotOriginalData","dotPlotDataPointTransparency"],M:"Dot Plots",T:"float",C:"Ratio to adjust the size of the data points when displaying original data in boxplots. The higher the number the smaller the data points",D:"2"},sequenceNColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/C/G/T and asparagines in the genome browser",D:"rgb(0,0,0)"},smpOverlays:{M:"Overlays",T:"array",C:"Sample annotations included in the 'data.x' object used in one dimensional plots",D:"[]",X:"getXData"},translateY:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Amount to translate for the Y axis."},axisTitleFontSize:{A:"true",S:["autoScaleFont","axisTitleScaleFontFactor"],M:"Ticks and Axis Titles",T:"integer",C:"Font size for the axis titles in one and two dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the axis title scaling factor",D:"10"},draw:{M:"Functions",T:"void",C:"Redraw the canvas",U:{Network:"true"}},featureNameFontSize:{A:"true",M:"Genome Browser",T:"integer",C:"Size in pixels for the font size of text of the features in the genome browser",D:"8"},xAxisTickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the X axis",D:"false"},sequenceFColor:{M:"Genome Browser",T:"color",C:"Color for the phenylalanines in the genome browser",D:"rgb(0,0,255)"},addRegressionLine:{M:"Functions",T:"void",C:"Add regression line(s) to a 2D-Scatter plot",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},varLabelColor:{M:"Variables",T:"color",C:"Font color for the variable labels in one dimensional plots",D:"foreground color"},nodeSize:{M:"Network Graphs",T:"integer",C:"Length in pixels for the size of the nodes in the network",D:"10 | 20"},maxRows:{A:"true",M:"Data table",T:"integer",C:"Maximum number of rows to display in the data table",D:"10"},yAxisShow:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the Y axis",D:"true"},zAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the Z axis",D:"false"},destroyCanvasXpressZombies:{A:"true",M:"Events",T:"boolean",C:"Flag to destroy canvasXpress objects stored in the references array when they are no longer part of the DOM. This may happen when canvasXpress is used in other JS frameworks and the objects are not destroyed by the developer",D:"true"},axisTickFont:{A:"true",Z:"true",M:"Ticks and Axis Titles",T:"font",C:"Font for the axis ticks in one and two dimensional plots"},baseline:{A:"true",O:["top","middle","bottom"],M:"Text",T:"option",C:"Default vertical alignment for drawing text.",D:"right"},smpDendrogramPosition:{M:"Dendrograms",T:"option",C:"Position for the sample dendrogram in the plot. It could be top, bottom, right or left depending on the orientation of the graph.",D:"left"},is3DPlot:{M:"One dimentional plots",T:"boolean",C:"Flag to create or not a 3D plot",D:"false"},isLayoutConfigurator:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing the configurator when there is a click in the full layout icon in the toolbar",D:"true"},removeHistogram:{M:"Functions",T:"void",C:"Remove histogram from a 2D-Scatter plot",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},disableDataFilters:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing data filters",D:"false"},createRandomData:{M:"Functions",T:"void",C:"Create a random data set"},yAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the Y axis",D:"true"},helpKeyEvents:{A:"true",M:"Events",T:"boolean",C:"Flag to enable help on key events.",D:"true"},remoteUpdate:{A:"true",M:"Remote Procedures",T:"boolean",C:"Flag to indicate that the file to get the data needs to be updated",D:"false"},shadowOffsetY:{A:"true",S:["showShadow"],M:"General",T:"integer",C:"Length in pixels for the shadow offset in the Y axis.",D:"3"},varSort:{A:"true",Z:"true",M:"Data",T:"integer",C:"Variable index used in sorting the data."},yAxisTicks:{A:"true",M:"Axes",T:"integer",C:"Number of ticks in the Y axis",D:"5"},decorations:{A:"true",M:"Decorations",T:"array",C:"Name of the node properties to include in the network decorations in the 'data.nodes' object",D:"[]"},showCode:{A:"true",M:"Debug",T:"boolean",C:"Flag to show code for the canvas.",D:"false"},autoHideOnDecorationsCenter:{M:"Network Graphs",T:"boolean",C:"Flag to hide node when decorations are positioned on the center",D:"false"},colors:{S:["colorScheme"],M:"Attributes",T:"array",C:"Colors.",D:"colors"},showSampleNames:{M:"Samples",T:"boolean",C:"Flag to show the sample names in one dimensional plots.",D:"true"},panningX:{A:"true",M:"Zooming and Panning",T:"float",C:"Number of unit to pan the network in the X dimension",D:"0"},yAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the Y axis",D:"0"},shadowColor:{A:"true",S:["showShadow"],M:"General",T:"color",C:"Color for the shadow.",D:"rgba(0,0,0,0.5)"},xAxis2Show:{M:"Axes",T:"boolean",C:"Flag to show on not the values of the ticks in the second X axis",D:"true"},showCodeDiv:{A:"true",M:"Functions",T:"void",C:"Show the code for the plot"},dendrogramSpace:{M:"Dendrograms",T:"integer",C:"Length in pixels to space the branches in the dendrograms.",D:"6"},addNormalDistributionLine:{M:"Functions",T:"void",C:"Add a normaldistribution line(s) to a 2D-Scatter plot",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},kmeansSamples:{S:["kmeansClusters","maxIterations"],M:"Functions",T:"void",C:"Cluster samples using kmeans",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},eventArrowKeys:{A:"true",M:"Events",T:"boolean",C:"Flag to enable arrow key binding events.",D:"true"},maxTextSize:{A:"true",M:"Text",T:"integer",C:"Maximum size for any text in the canvas.",D:"14"},skinHighlight:{A:"true",Z:"true",M:"Skins",T:"color",C:"Color for the highlight skin automatically calculated"},xAxisTitle:{M:"Axes",T:"string",C:"Title for the X axis",D:"false"},functionIntervals:{A:"true",M:"2D Scatter Plot",T:"integer",C:"Number of intervals to use when drawing functions in the decorations",D:"20"},gradient:{A:"true",S:["gradientType"],M:"General",T:"boolean",C:"Flag used to apply gradients to all elements ploted in the visualizations according to their corresponding color",D:"false"},genomeResolution:{A:"true",Z:"true",O:["low","medium","high"],M:"Genome Browser",T:"option",C:"Number to adjust the splines curvature"},maxCols:{A:"true",M:"Data table",T:"integer",C:"Maximum number of columns to display in the data table",D:"8"},rAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the R axis"},sma5Color:{M:"Candlestick Plots",T:"color",C:"The color for the 5 day single moving average",D:"rgb(255,0,0)"},nodeFont:{A:"true",Z:"true",M:"Network Graphs",T:"font",C:"Font for the text in networks"},x3DRatio:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value between 0 - 1 for adjusting the 3D of the X Axis",D:"1"},sequenceGAPColor:{M:"Genome Browser",T:"color",C:"Color for the deletions, insertions and gaps  in the genome browser",D:"rgb(255,0,255)"},maintainZoomOnDrag:{A:"true",M:"Events",T:"boolean",C:"Flag to enable maintaining zooming after initial drag in one dimensional plots",D:"false"},disableConfigurator:{A:"true",M:"Events",T:"boolean",C:"Flag to disable configurator.",D:"false"},colorHSV:{A:"true",Z:"true",M:"Attributes",T:"array",C:"Color HSV. Hue, Saturation and Value used in the configurator"},sequenceIColor:{M:"Genome Browser",T:"color",C:"Color for the isoleucines in the genome browser",D:"rgb(0,103,0)"},smpTitle:{M:"Samples",T:"string",C:"Title for the sample axis in one dimensional plots",D:"false"},correlationAnchorLegendAlignWidth:{A:"true",M:"Correlation Graphs",T:"integer",C:"Length in pixels of the height of the correlation anchor legend",D:"40"},shapeEdgeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to shape the nods.",D:"false"},xAxis2MaxStrLength:{A:"true",Z:"true",M:"Axes",T:"string",C:"Longest string for ticks in the 2nd X axis"},show3DGrid:{A:"true",M:"3D Scatter Plot and Networks",T:"boolean",C:"Flag to show the X,Y,Z grid in scatter 3D plots",D:"true"},randomNetworkNodes:{A:"true",M:"Network Graphs",T:"integer",C:"Default number of nodes when creating random networks",D:"50"},codeType:{A:"true",O:["pretty","compact","tab"],M:"Debug",T:"option",C:"Output type for the JSON code",D:"pretty"},xAxis2MinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the 2nd X axis",D:"[]"},fontName:{A:"true",O:["Gentilis","Helvetiker","Optimer","Verdana, sans-serif"],M:"Text",T:"font",C:"Font name. It will be set depending on the browser. It could be Optimer, Helvetiker, Gentilis or Verdana, sans-serif",D:"Verdana, sans-serif"},smpLabelInterval:{A:"true",M:"Samples",T:"integer",C:"Interval for the sample labels in one dimensional plots",D:"1"},rAxisTitle:{M:"Axes",T:"string",C:"Title for the R axis",D:"false"},dataTableColumnWidth:{Z:"true",M:"Data table",T:"array",C:"Initialize configurations"},highlightSmp:{M:"Samples",T:"array",C:"Name of samples in the 'data.y' object to highlight.",D:"[]",X:"getSamplesAsArray"},decorationsHeight:{A:"true",M:"Decorations",T:"integer",C:"Length in pixels of the height for the decorations in the networks",D:"20"},donutProportion:{M:"Circular Graphs",T:"float",C:"Proportion of the center of the circular graph to use as void",D:"0.3"},sequenceBColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate C/G/T and asparagines in the genome browser",D:"rgb(0,0,0)"},segregateVariables:{S:["segregateVariables"],M:"Functions",T:"option",C:"Segregate variables based on a variable category (data.z object)",X:"getZData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},coordinateLineColor:{M:"Line Graphs",T:"boolean",C:"Flag to used same color in BarLine plots. If set to true the color of the bars and the lines will be the same",D:"true"},dendrogramColor:{M:"Dendrograms",T:"color",C:"The color for the dendrograms",D:"rgb(204,204,204)"},sequenceQColor:{M:"Genome Browser",T:"color",C:"Color for the glutamines in the genome browser",D:"rgb(0,0,0)"},layoutAxis:{A:"true",Z:"true",O:["1","2","3"],M:"Combination Plots",T:"option",C:"Flag to indicated whether to print axes values when multiple graphs are displayed in the canvas. The possible values are: 1: horizontal, 2: vertical, 3: both"},smpIndicesStart:{A:"true",Z:"true",M:"Heatmaps",T:"integer",C:"Number that indicates starting point for samples in heatmaps when the canvas is zoom in."},xAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the X axis",D:"0"},zAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the Z axis",D:"0"},nodeScaleFontFactor:{M:"Network Graphs",T:"float",C:"Scaling factor used to increse or decrease network text font size in the canvas.",D:"1"},evenColor:{M:"Attributes",T:"color",C:"The color for the even numbers in samples or sequences",D:"rgb(240,240,240)"},backgroundWindowGradient2Color:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"The second color of the gradient if the background is a type of window gradient.",D:"rgb(0,0,36)"},showLevelOverlays:{M:"Overlays",T:"boolean",C:"Flag to indicate to show or not the level overlays in one dimensional plots",D:"true"},startPieSectors:{M:"Pie Charts",T:"float",C:"Starting degrees for pie sectors. 0 is equivalent to 3:00 oclock",D:"0"},legendBoxColor:{S:["legendBox"],M:"Legends",T:"color",C:"Color for the box around the legend",D:"rgb(0,0,0)"},rotationSensitivity:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Factor to adjust the sensitivity of the mouse when rotating the  graph",D:"45"},selectDataMode:{O:["area","name"],M:"Scatter Plots",T:"option",C:"Type of mode to highliht selected data points",D:"area"},font:{A:"true",Z:"true",M:"Text",T:"font",C:"The combination of font name style and size.",D:"Verdana, sans-serif 12pt"},skipClick:{A:"true",Z:"true",M:"Network Graphs",T:"boolean",C:"Flag to skip click events after a mouse down event in the networks when the eventModel is global"},trackNameFontColor:{M:"Genome Browser",T:"color",C:"Color for the text of the tracks in the genome browser",D:"background color"},rAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the R axis.",D:"false"},scaleTextConstantMult:{A:"true",Z:"true",M:"Text",T:"integer",C:"Constants to autoscale text",D:"40"},varLabelDescription:{M:"Variables",T:"string",C:"Variable label description is a valid sample classification included in the 'data.z' object used in heatmaps",D:"false"},images:{A:"true",S:["scatterType"],M:"Attributes",T:"array",C:"Array of urls of images used in scatter plots.",D:"[]"},linkage:{S:["distance","clusterAxis","imputeMethod","centerData","clusterSamples","clusterVariables"],O:["single","complete","average"],M:"Clustering",T:"option",C:"Linkage type to use when clustering data.",D:"single"},sequenceStartColor:{M:"Genome Browser",T:"color",C:"Color for the start codon in the genome browser",D:"rgb(0,255,0)"},smpLabelDescription:{M:"Samples",T:"string",C:"Sample label description is a valid sample classification included in the 'data.x' object used in heatmaps",D:"false"},backgroundGradient1Color:{S:["backgroundType","backgroundGradient2Color"],M:"General",T:"color",C:"The first color of the gradient if the background is a type of gradient.",D:"rgb(0,0,200)"},smpLabelFont:{A:"true",Z:"true",M:"Samples",T:"font",C:"Font for the sample labels in one dimensional plots"},timeValueIndices:{A:"true",M:"Axes",T:"array",C:"Array containig the indices of the values when the the graph is a time series",D:"[]"},legendColor:{M:"Legends",T:"color",C:"Color for the legends",D:"foregroung color"},layoutAdjust:{A:"true",M:"Combination Plots",T:"boolean",C:"Flag to force recalculating the ranges in the axes when multiple graphs are displayed in the canvas.",D:"false"},featureNameFontColor:{M:"Genome Browser",T:"color",C:"Color for the text of the features in the genome browser",D:"background color"},isSelectNodes:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Number of selected nodes (in the data object).",D:"0"},varHighlightColor:{M:"Variables",T:"color",C:"The color for the highlighted variables.",D:"rgb(255,0,0)"},startRow:{A:"true",Z:"true",M:"Data table",T:"boolean",C:"Starting row in the data table"},remoteAutoPlayDelay:{A:"true",M:"Remote Procedures",T:"integer",C:"Time in milliseconds to wait between iterations over remote data sets",D:"3000"},kmeansClusters:{S:["maxIterations","kmeansSamples","kmeansVariables"],M:"Clustering",T:"integer",C:"Number of clusters when clustering data with kmeans.",D:"3"},lines:{A:"true",Z:"true",O:["","dashed","dotted","bezierY","bezierX","curved + arrow","arrowHead","arrowTail","arrowHeadSquareTail","arrowTailSquareHead","square","squareHead","squareTail","squareHeadArrowTail","squareTailArrowHead"],M:"Attributes",T:"array",C:"Line types available network graphs The patterns can be: '', 'dashed', 'dotted', 'bezierY', 'bezierX' and 'curved'. The end could be: 'arrow', 'arrowHead', 'arrowTail', 'arrowHeadSquareTail', 'arrowTailSquareHead', 'square', 'squareHead', 'squareTail', 'squareHeadArrowTail' or 'squareTailArrowHead'."},varTitleScaleFontFactor:{M:"Variables",T:"float",C:"Scaling factor used to increse or decrease variable font size in the canvas.",D:"1"},xAxis2MinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the 2nd X axis",D:"true"},showPieGrid:{M:"Pie Charts",T:"float",C:"A flag to show the labels for the grid when plotting multiple pies",D:"true"},sequenceHColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/C/T and histidines in the genome browser",D:"rgb(255,0,0)"},acknowledgementIcon:{O:["cx.png","cxn.png"],M:"General",T:"option",C:"Acknowledge canvasXpress icon",D:"cx.png"},timeFormat:{A:"true",O:["default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime"],M:"Attributes",T:"option",C:"Time Format according to date.format.js Steven Levithan <stevenlevithan.com>",D:"isoDate"},networkStackStates:{A:"true",M:"Network Graphs",T:"integer",C:"Number of states to keep in the network stack after a drag or move",D:"5"},sequenceEColor:{M:"Genome Browser",T:"color",C:"Color for the glutamic acids in the genome browser",D:"rgb(0,0,0)"},hideCodeDiv:{A:"true",M:"Functions",T:"void",C:"Hide the code for the plot"},trackNameFontSize:{A:"true",M:"Genome Browser",T:"integer",C:"Size in pixels for the font size of text of the tracks in the genome browser",D:"10"},sequenceEndColor:{M:"Genome Browser",T:"color",C:"Color for the end codon in the genome browser",D:"rgb(255,0,0)"},dropdownButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the drop down button (not including the image directory)",D:"menu_dropdown.png"},legendFont:{A:"true",Z:"true",M:"Legends",T:"font",C:"Font for the legends"},randomDataSampleAnnotationRatio:{A:"true",M:"Data",T:"integer",C:"Approximate number of classes in each sample annotation when creating random data",D:"2"},xAxis2Values:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the 2nd X axis",D:"[]"},freezeRowBottom:{A:"true",M:"Data table",T:"integer",C:"Number of rows to freeze at the bottom of the data table",D:"0"},xAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the X axis",D:"true"},overrideEventlessNodes:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to override nodes that do not take events to be able to edit them",D:"false"},legendScaleFontFactor:{M:"Legends",T:"float",C:"Scaling factor used to increse or decrease legend font size in the canvas.",D:"1"},tmpAsciiArray:{A:"true",Z:"true",M:"Data",T:"array",C:"A temporary array to enable sorting data asciibetically."},sma50Color:{M:"Candlestick Plots",T:"color",C:"The color for the 50 day single moving average",D:"rgb(0,0,0)"},areaIsCumulative:{M:"Area Graphs",T:"boolean",C:"Flag to treat area graphs as cumulative values",D:"false"},stopButton:{A:"true",M:"Images",T:"image",C:"Relative path to an image file to the stop button (not including the image directory)",D:"stop.png"},trackNameFont:{A:"true",Z:"true",M:"Genome Browser",T:"font",C:"Font for the text of the tracks in the genome browser"},randomData:{A:"true",M:"Data",T:"boolean",C:"Flag to create or not random data for debug and demonstraion purposes",D:"false"},networkDivisions:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Number of angular divisions in the radial network."},resizerDraw:{A:"true",M:"Axis Resizer",T:"boolean",C:"Flag to make the axis resizers draw the canvas as they move",D:"true"},temperature:{A:"true",M:"Network Graphs",T:"integer",C:"Temperature to limit displacement at later stages of forceDirected and organic layouts. A value based on the number of node and edges will be assigned if not specified",D:"0"},indicatorWidth:{M:"Heatmaps and Networks",T:"integer",C:"Length in pixels for the heatmap indicator line width used for increase the size of the indicator",D:"1"},panningStep:{A:"true",M:"Zooming and Panning",T:"float",C:"Percentage step for panning networks.",D:"0.2"},featureTypeDefault:{O:["box","bar","heatmap","sequence","triangle","line"],M:"Genome Browser",T:"option",C:"Default type for the feature in the genome browser",D:"line"},sequenceFontSize:{A:"true",M:"Genome Browser",T:"integer",C:"Size in pixels for the font size of text of the sequence in the genome browser",D:"10"},zAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the Z axis",D:"[]"},allVsAllType:{O:["both","upper","lower"],M:"2D Scatter Plot",T:"option",C:"Type for the n-1 x n-1 matrix of 2D sccaterplots",D:"both"},overlayFontSize:{A:"true",M:"Overlays",T:"integer",C:"Font size for the overlays in one dimensional plots",D:"6"},backgroundWindowGradientOrientation:{A:"true",S:["backgroundType"],O:["vertical","horizontal"],M:"General",T:"string",C:"The orientation for the gradient if the background type is windowGradient or windowGradient2.",D:"vertical"},yAxisTransformTicks:{M:"Axes",T:"boolean",C:"Flag to transform the values of the ticks in the Y axis",D:"true"},zAxisTransform:{O:["false","log2","log10","exp2","exp10","percentile"],M:"Axes",T:"option",C:"Tranformation for the values in the Z axis.",D:"false"},isCreateHistogram:{A:"true",Z:"true",M:"2D Scatter Plot",T:"boolean",C:"Flag to indicate there is a histogram",D:"false"},rAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the R axis",D:"[]"},autoScaleFont:{A:"true",S:["smpLabelFontSize","varLabelFontSize","legendFontSize","axisTickFontSize","axisTitleFontSize"],M:"Text",T:"boolean",C:"Flag to automatically adjust the font size in many visualization. Please be aware that scaling factors can still modify the font size. This flag needs to be false for the text to accept the specified font size.",D:"true"},varIndicesStart:{A:"true",Z:"true",M:"Heatmaps",T:"integer",C:"Number that indicates starting point for variables in heatmaps when the canvas is zoom in."},backgroundGradient2Color:{S:["backgroundType","backgroundGradient1Color"],M:"General",T:"color",C:"The second color of the gradient if the background is a type of gradient.",D:"rgb(0,0,36)"},videoGrid:{M:"General",T:"boolean",C:"Flag to show grid in video",D:"false"},smpLabelCircular:{M:"Samples",T:"boolean",C:"Flag to show the sample names in a circular orientation in circular plots.",D:"false"},dataFilterWidth:{A:"true",M:"Events",T:"integer",C:"Size in pixels for the data filters.",D:"300"},transparency:{A:"true",M:"General",T:"float",C:"Percentage of transparency applied to all elements in the visualiztionss",D:"null"},useSmpVarIndexOnClustering:{M:"Clustering",T:"boolean",C:"Flag to indicate to use variable or sample index rather than names when clustering. This allows to use '(', ')' and ':' in the variable or sample name",D:"false"},zAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the Z axis",D:"rgb(204,204,204)"},transform:{S:["transformType","transformBase","ratioReference","zscoreAxis"],O:["false","log2","log10","exp2","exp10","percentile","zscore","ratio","ratio2","ratio10","save","reset","undo"],M:"Functions",T:"option",C:"Transform all the data. Warning: the option 'save' overwrites the original data",U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},transformType:{O:["false","log2","log10","exp2","exp10","percentile","zscore","ratio","ratio2","ratio10","save","reset","undo"],M:"Data",T:"option",C:"Default transformation type.",D:"false"},timeValues:{A:"true",M:"Axes",T:"array",C:"Array containig the tick values when the the graph is a time series",D:"[]"},sequenceKColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate G/T and lysines in the genome browser",D:"rgb(255,0,0)"},backgroundWindowGradient1Color:{A:"true",S:["backgroundType"],M:"General",T:"color",C:"The first color of the gradient if the background is a type of window gradient.",D:"rgb(0,0,200)"},disableDataTable:{A:"true",M:"Events",T:"boolean",C:"Flag to disable showing data table",D:"false"},maxFeatureStringLen:{M:"Genome Browser",T:"integer",C:"Maximum length in characters a feature label can have so anything above is truncated.",D:"50"},yAxis:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the Y axis",X:"getSamplesAsArray",D:"[]"},setMinX:{A:"true",M:"Axes",T:"float",C:"Minimum value to set the data in the X axis",D:"null"},sizeBy:{O:["false","variable"],M:"Scatter and One-D Plots",T:"option",C:"Name of a variable annotation or a sample name or the string 'variable' to size the variables.",D:"false",X:"getXZData"},featureTranslateShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show tranlation",D:"true"},varTitleFont:{A:"true",Z:"true",M:"Variables",T:"font",C:"Font for the variable titles in one dimensional plots"},videoClassName:{M:"General",T:"string",C:"Video class name / css for videos",D:"video-js vjs-default-skin"},preScaleNetwork:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to prescale or not the network. This is a aesthetic parameter to make the graph look nicer... Sometimes...",D:"false"},sequencePColor:{M:"Genome Browser",T:"color",C:"Color for the prolines in the genome browser",D:"rgb(255,165,0)"},isHistogram:{A:"true",M:"2D Scatter Plot",T:"boolean",C:"Flag to convert the 2D scatter plot into a histogram. That is, the points in the scatter plot are converted to bars that start at the bottom of the Y axis. It is useful to represent proteomics spectra or histograms.",D:"false"},xRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Number of degrees to rotate graph arround the X axis",D:"45"},weight:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Fraction of the canvas to be used (a value between 0 and 1). Used when multiple graphs are displayed in one canvas. Could be an number or an array of numbers."},showLegend:{M:"Legends",T:"boolean",C:"Flag to show or not the legend in the graphs",D:"true"},indicatorCenter:{O:["white","black","rainbow","rainbow-red","rainbow-green"],M:"Heatmaps and Networks",T:"option",C:"Color for the center of the heatmap indicator. If rainbow-red is specified the order of the colors to generate the gradient will be: red - blue - green. If rainbow-green is specified then the order of the colors to generate the gradient will be: green - blue - red. The option rainbow is an alias for rainbow-red.",D:"white"},sequenceYColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate C/T and tyrosines in the genome browser",D:"rgb(0,0,255)"},histogramBins:{A:"true",M:"2D Scatter Plot",T:"integer",C:"Number of bins in histogram",D:"20"},yAxisTickStyle:{A:"true",O:["solid","dotted"],M:"Axes",T:"option",C:"Style for the tick lines in the Y axis",D:"solid"},varTitle:{M:"Variables",T:"integer",C:"Title for the sample axis in one dimensional plots",D:"10"},networkFreeze:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to prevent autoscaling for the network layout.",D:"false"},stockIndicators:{O:["Sma5","Sma10","Sma20","Sma25","Sma50"],M:"Candlestick Plots",T:"array",C:"Stock technical indicators",D:"[]"},colorNodeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to color the nodes.",D:"false"},backgroundImage:{S:["backgroundType"],M:"General",T:"url",C:"Url for the background image",D:"false"},showPieSampleLabel:{M:"Pie Charts",T:"boolean",C:"A flag to show the sample label when plotting mutliple pies",D:"true"},minTextSize:{A:"true",M:"Text",T:"integer",C:"Minimum size for any text in the canvas.",D:"4"},isBoxPlotCalc:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the iqr has been calculated if the graph type is Boxplot."},blockFactor:{A:"true",S:["autoAdjust","blockSeparationFactor"],M:"One dimentional plots",T:"int",C:"Factor to adjust the size of the sample blocks in the one dimensional graphs. The default is 1. If you want to make the blocks wider then increase this parameter (2 is twice as big). This only works if the auto adjust property is set to 'false'",D:"1"},pieSegmentSeparation:{M:"Pie Charts",T:"integer",C:"Length in pixels for the separation of the pieces of the pie charts",D:"3"},timeTicksFirst:{A:"true",M:"Axes",T:"boolean",C:"Flag to indicate whether to use the first date on a time graph or the last",D:"false"},remoteParams:{A:"true",M:"Remote Procedures",T:"object",C:"Object to hold parameters used to obtain data remotely. The target property will be always added to the method as well as the direction [next|prev] (see below.",D:"{}"},dotLength:{A:"true",M:"Attributes",T:"integer",C:"Size in pixels of the length between dots in the doted lines.",D:"1"},zAxisMinorValues:{A:"true",M:"Axes",T:"array",C:"Values for the minor ticks in the Z axis",D:"[]"},smpHighlightColor:{M:"Samples",T:"color",C:"The color for the higlighted samples.",D:"rgb(255,0,0)"},network2DRotate:{A:"true",Z:"true",M:"Network Graphs",T:"integer",C:"Number of degrees to rotate network arround the X axis"},clusterSamples:{S:["distance","linkage","clusterAxis","imputeMethod","centerData"],M:"Functions",T:"void",C:"Cluster samples based on data and generate a dendrogram on the sample axis. It takes no parameters",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",StackedPercentLine:"true",Area:"true",Line:"true",StackedLine:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},arrowPointSize:{A:"true",M:"Attributes",T:"integer",C:"Size in pixels of the arrow head in arrow lines.",D:"10"},yAxisValues:{A:"true",M:"Axes",T:"array",C:"Values for the ticks in the Y axis",D:"[]"},sma25Color:{M:"Candlestick Plots",T:"color",C:"The color for the 25 day single moving average",D:"rgb(255,0,255)"},sequenceFill:{M:"Genome Browser",T:"color",C:"Color for the background when showing sequnces in the box or sequence object in the Genome. The default is to use the background of the object. If specied a valid color then all the background of sequences will be uniform",D:"false"},titleColor:{S:["subtitle","subtitleHeight"],M:"Titles",T:"color",C:"Color for the subtitle",D:"rgb(0,0,0)"},outlineBy:{M:"Scatter and One-D Plots",T:"string",C:"Name of the annotation for the outline when drawing a multidimensional Heatmap",D:"false"},cullingThreshold:{A:"true",M:"3D Scatter Plot and Networks",T:"integer",C:"Number of data point to start culling data",D:"1000"},setMax2:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data in the 2nd axis",D:"null"},sortVariablesByCategory:{S:["sortDir","sortVariablesBySample"],M:"Functions",T:"array",C:"Sort the variables by a variable category (data.z object)",X:"getZData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},desegregateVariables:{S:["segregateVariables"],M:"Functions",T:"void",C:"Desegregate variables previously segregated based on a variable category (data.z object)",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},setMax:{A:"true",M:"Axes",T:"float",C:"Maximum value to set the data",D:"null"},selectDataModeDescription:{O:["false"],M:"Scatter Plots",T:"option",C:"Variable label to display when highlihting selected data points that must be in the 'data.z' object",D:"false",X:"getZData"},tickRotate:{M:"Ticks and Axis Titles",T:"integer",C:"Rotation for graph ticks in degrees. It could be positive or negative.",D:"0"},networkLayoutType:{O:["forceDirected","organic","radial"],M:"Network Graphs",T:"option",C:"Type of network layout.",D:"forceDirected"},zoom:{A:"true",M:"Zooming and Panning",T:"float",C:"Zoom factor for the networks. A number greater than zero",D:"1"},legendBackgroundColor:{S:["legendBox"],M:"Legends",T:"color",C:"Color for the legend background",D:"background color"},citationFont:{A:"true",Z:"true",M:"Titles",T:"font",C:"Font for the reference citation"},initialTemperature:{A:"true",M:"Network Graphs",T:"integer",C:"Initial temperature to limit displacement at later stages of forceDirected and organic layouts. A value based on the number of node and edges will be assigned if not specified",D:"0"},overlayScaleFontFactor:{A:"true",M:"Overlays",T:"float",C:"Scaling factor used to increse or decrease overlays font size in the canvas in one dimensional plots",D:"1"},showNetworkNodesLegend:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to show node legends in the networks",D:"true"},shadowBlur:{A:"true",S:["showShadow"],M:"General",T:"integer",C:"Amount in blur for the shadow.",D:"2"},varTitleLabelOverlayPosition:{O:["botom","top"],M:"Variables",T:"option",C:"Position for variable labels in heatmaps",D:"bottom"},remoteAutoPlay:{A:"true",M:"Remote Procedures",T:"boolean",C:"Flag to iterate over remote data sets",D:"false"},recalculateLayout:{M:"Functions",T:"void",C:"Recalculate the network layout",U:{Scatter3D:"true",ScatterBubble2D:"true",Scatter2D:"true"}},sequenceXColor:{M:"Genome Browser",T:"color",C:"Color for the any aminoacid code in the genome browser",D:"rgb(0,0,0)"},overlayFontColor:{A:"true",M:"Overlays",T:"color",C:"Color for the overlays in one dimensional plots",D:"foregroung color"},sizeNodeBy:{M:"Network Graphs",T:"string",C:"Name of the attribute to size the nodes.",D:"false"},snapshotCopyChangeOnly:{A:"true",M:"Animation",T:"boolean",C:"Flag to indicate whether to copy all or only the changed attributes in the network animation. This optimizes memory usage for snapshots.",D:"true"},axisTickFontSize:{A:"true",S:["autoScaleFont","tickScaleFontFactor"],M:"Ticks and Axis Titles",T:"integer",C:"Font size for the axis ticks in one and two dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the tick scaling factor",D:"10"},xAxisMinorTicks:{A:"true",M:"Axes",T:"boolean",C:"A flag to show minor tick lines in the X axis",D:"true"},sequenceGColor:{M:"Genome Browser",T:"color",C:"Color for the guanines and glycines in the genome browser",D:"rgb(0,0,0)"},legendPosition:{O:["right","bottom"],M:"Legends",T:"option",C:"Position for the legend in the graphs",D:"right"},dashLength:{A:"true",M:"Attributes",T:"integer",C:"Size in pixels of the length of the dashes and the separation between the dashes in the dashed lines.",D:"8"},zAxisTitle:{M:"Axes",T:"string",C:"Title for the Z axis",D:"false"},dotPlotJitter:{A:"true",M:"Dot Plots",T:"boolean",C:"Flag to jitter the point in dotplots",D:"false"},remoteParentId:{A:"true",Z:"true",M:"Remote Procedures",T:"string",C:"Id for the parent holding the remoteWindow to prevent id collisions"},groupingFactors:{M:"Data",T:"array",C:"An array that holds the group names used for grouping the data. It must be a category in the 'data.x' object",D:"[]",X:"getXData"},configuratorWidth:{A:"true",M:"Events",T:"integer",C:"Size in pixels for the configurator.",D:"300"},translateX:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Amount to translate for the X axis."},networkRoot:{M:"Network Graphs",T:"string",C:"Node Id of the network root.",D:"false"},varOverlays:{M:"Overlays",T:"array",C:"Variable annotations included in the 'data.z' object used in one dimensional plots",D:"[]",X:"getZData"},z3DRatio:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value between 0 - 1 for adjusting the 3D of the Z Axis",D:"1"},remoteUpdating:{A:"true",Z:"true",M:"Remote Procedures",T:"boolean",C:"Flag to indicate that updating data is in progress"},foreground:{M:"General",T:"color",C:"Foreground color for the canvas",D:"rgb(0,0,0)"},filterFeatureBy:{M:"Genome Browser",T:"filter",C:"Filter features by their properties used in genome browser      *",D:"[]",X:"getFeatureData"},plotByVariable:{M:"One dimentional plots",T:"boolean",C:"Flag to indicate whether to group the data variable rather than by sample",D:"false"},rowHeight:{A:"true",M:"Data table",T:"integer",C:"Mumber of pixels for the height of cells in the data table",D:"100"},blockSeparationFactor:{A:"true",S:["autoAdjust","blockFactor"],M:"One dimentional plots",T:"int",C:"Factor to adjust the spacing between the sample blocks in the one dimensional graphs. The default is 1. If you  want to make the blocks wider apart then increse this parameter (2 is twice as much). This only works if the auto adjust property is set to 'false'",D:"1"},smpHairlineWidth:{M:"One dimentional plots",T:"float",C:"The width for the thin line that appears in the middle of the sample block just for aesthetics.",D:"0.3"},scatterType:{O:["false","line","bar","image","lineImage","lineStep"],M:"Scatter Plots",T:"option",C:"Type of scatter plot",D:"false"},videoCurrentTime:{M:"General",T:"boolean",C:"Flag to show video current time",D:"false"},dendrogramHang:{M:"Dendrograms",T:"boolean",C:"Flag to show or not the nodes in the dendrogram as hanging or not similar to that one in R",D:"false"},featureQualityValues:{M:"Genome Browser",T:"boolean",C:"Flag use to show values for the quality",D:"false"},bar3DInverseWeight:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value for adjusting the thickness of 3D bars. The larger the value the the thinner the bar",D:"1"},resizerPosition:{A:"true",O:["top","rigth","bottom","left"],M:"Axis Resizer",T:"option",C:"Position for the axis resizer in complex plots",D:"bottom"},repulsiveForceFunction:{A:"true",O:["square","log","pow","sqrt"],M:"Network Graphs",T:"option",C:"Type of function to apply when calculating repulsive force in forceDirected network layouts",D:"square"},vennGroups:{M:"Venn Diagrams",T:"integer",C:"Number of groups in the Venn diagram",D:"4"},zAxis:{A:"true",M:"Axes",T:"array",C:"Name of the samples groups or variables to be displayed in the Z axis",X:"getSamplesAsArray",D:"[]"},videoPlaybackRate:{M:"General",T:"float",C:"Video Playback Rate",D:"1"},lineType:{O:["rect","spline"],M:"Line Graphs",T:"option",C:"Type of line used to join the points in line graphs",D:"rect"},y3DRatio:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Value between 0 - 1 for adjusting the 3D of the Y Axis",D:"1"},zscoreAxis:{O:["samples","variables"],M:"Data",T:"option",C:"Default axis to use to zsore the data.",D:"samples"},rAxisCurrent:{A:"true",M:"Axes",T:"integer",C:"Index of the sample that is currently displayed displayed in the R axis",D:"0"},decorationsWidth:{A:"true",M:"Decorations",T:"integer",C:"Length in pixels of the width for the decorations in the networks",D:"10"},featureStaggered:{M:"Genome Browser",T:"boolean",C:"Flag use to stagger the features in the genome panel",D:"false"},filterVarBy:{M:"Variables",T:"filter",C:"Filter variables by their annotation included in the 'data.z' object used in one dimensional plots",D:"[]",X:"getZData"},moveParentsWithChildren:{A:"true",M:"Network Graphs",T:"boolean",C:"Flag to make parents move when a child is moved",D:"false"},yAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the Y axis"},maxPieSectors:{M:"Pie Charts",T:"float",C:"Max pie sectors. After that number the sectors will be put in a sector named 'other'.",D:"20"},xAxisAbsMin:{A:"true",Z:"true",M:"Axes",T:"float",C:"Minimum unfiltered value for the X axis"},filterSkipNullKeys:{M:"Data Filters",T:"boolean",C:"Flag to indicate to bypass filtering when a key is non existent in the data objects",D:"false"},correlationLabelInterval:{A:"true",M:"Correlation Graphs",T:"integer",C:"Interval for the sample or variable labels in the correlation plot",D:"1"},ringSegmentSeparation:{M:"Circular Graphs",T:"int",C:"Number of degrees to separate the segments in the circular plots",D:"4"},networkForceConstant:{A:"true",M:"Network Graphs",T:"float",C:"Constant used for calculating attractive and repulsive forces in forcedDirected and organic layouts. A value based on the average area per node will be assigned if not specified",D:"0"},networkShowDataTable:{A:"true",O:["nodes","edges"],M:"Data table",T:"option",C:"Show nodes or edges on data table",D:"nodes"},vennColors:{A:"true",S:["colors"],M:"Venn Diagrams",T:"array",C:"Colors for the Venn bubles. If not specified the colors will be chosen from the colors array. Colors in this array need to be at least the same number of groups in the Venn diagram",D:"[]"},skipConfigurableProperties:{M:"Data Table/Filter",T:"boolean",C:"Flag to indicate to exclude configurable parameters in the data table and the data filters in Networks and Genome Browser",D:"true"},scaleX:{A:"true",Z:"true",M:"Combination Plots",T:"float",C:"Scale factor for the X axis"},overlaysWidth:{A:"true",M:"Overlays",T:"integer",C:"Length in pixels of the width for the colored boxes to clasify samples and or variables in one dimensional plots",D:"30"},gradientType:{A:"true",S:["gradient"],O:["linear","radial"],M:"General",T:"option",C:"Type of patern used for the gradients applied to all elements in the visualizations",D:"radial"},"this":{A:"true",Z:"true",M:"Events",T:"time",C:"Time in milliseconds to keep track of time"},resizerType:{A:"true",O:["false","samples","box"],M:"Axis Resizer",T:"option",C:"String to indicate the type of axis resizer in complex plots",D:"false"},showDataValues:{M:"Bar Graphs",T:"boolean",C:"Flag to indicate whether to show data values in the one bar graphs.",D:"false"},allVsAll:{M:"2D Scatter Plot",T:"boolean",C:"Flag to plot an n-1 x n-1 matrix of 2D sccaterplots",D:"false"},toolbarPermanent:{A:"true",M:"Events",T:"boolean",C:"Flag to make the toolbar permanently visible.",D:"false"},featureTracesShow:{M:"Genome Browser",T:"boolean",C:"Flag use to show traces",D:"true"},hideUnhideSmps:{M:"Functions",T:"array",C:"Hide or unhide samples. It works like a switch",X:"getSamplesAsArray",U:{StackedPercent:"true",Bar:"true",Correletion:"true",Pie:"true",ScatterBubble2D:"true",Barline:"true",StackedLine:"true",Scatter2D:"true",Dotplot:"true",Boxplot:"true",StackedPercentLine:"true",Scatter3D:"true",Area:"true",Line:"true",Stacked:"true",Heatmap:"true",AreaLine:"true"}},decorationsColors:{A:"true",M:"Decorations",T:"array",C:"Array of colors used for selection in network decorations not to be confused by its singular form 'decorationsColor' above",D:"[]"},zAxisAbsMax:{A:"true",Z:"true",M:"Axes",T:"float",C:"Maximum unfiltered value for the Z axis"},imputeMethod:{S:["distance","linkage","clusterAxis","centerData","clusterSamples","clusterVariables"],O:["mean","median"],M:"Clustering",T:"option",C:"Imputation method for missing data when clustering",D:"mean"},isMarketSwitched:{A:"true",Z:"true",M:"Data",T:"boolean",C:"Flag to indicate if the data is a Candlestick."},randomMissingDataPercentage:{A:"true",M:"Data",T:"integer",C:"Default percentege of missing values when creating random data",D:"0"},videoPreload:{O:["Auto","Metadata","none"],M:"General",T:"option",C:"Data for videos @cfg {string object} videoData",D:"{}"},highlightVar:{M:"Variables",T:"array",C:"Name of variables in the 'data.y' object to highlight.",D:"[]",X:"getVariablesAsArray"},smpHairline:{O:["false","solid","dotted"],M:"One dimentional plots",T:"option",C:"This is a thin line that appears in the middle of the bar graphs just for aesthetics.",D:"dotted"},sortSamplesByCategory:{S:["sortDir","sortSamplesByVariable"],M:"Functions",T:"array",C:"Sort the samples by a sample category (data.x object)",X:"getXData",U:{StackedPercent:"true",Boxplot:"true",Bar:"true",Correletion:"true",StackedPercentLine:"true",Pie:"true",Barline:"true",Area:"true",StackedLine:"true",Line:"true",Dotplot:"true",AreaLine:"true",Heatmap:"true",Stacked:"true"}},featuresProperties:{M:"Data Table/Filter",T:"array",C:"Two dimensional array with object properties not at the root level for the features in the Genome graph to include in the Data table and the data filter",D:"[]"},smpOverlayRecycleColors:{M:"Overlays",T:"boolean",C:"Flag to indicate to recycle sample overlay colors with each overlay",D:"false"},sequenceWColor:{M:"Genome Browser",T:"color",C:"Color for the degenerate A/T and tryptophans in the genome browser",D:"rgb(0,0,255)"},fontStyle:{A:"true",O:["false","bold","italic"],M:"Text",T:"option",C:"Font style. Not implemented yet.",D:"false"},ringWeight:{M:"Circular Graphs",T:"array",C:"Array containing the dimensions for each ring in the circular plots",D:"[]"},showBoxplotOriginalData:{A:"true",S:["dotPlotDataPointRatio","dotPlotDataPointTransparency"],M:"Box Plots",T:"boolean",C:"Flag to show original data in boxplots",D:"false"},rAxisTickColor:{M:"Axes",T:"color",C:"Color for the tick lines in the R axis",D:"rgb(204,204,204)"},showGraph:{M:"General",T:"boolean",C:"Flag to show the graph",D:"true"},videoControls:{M:"General",T:"boolean",C:"Flag to show controls in videos default true"},showVolume:{M:"Candlestick Plots",T:"boolean",C:"Flag to show or not volume in the candlestick graphs",D:"true"},sma10Color:{M:"Candlestick Plots",T:"color",C:"The color for the 5 day single moving average",D:"rgb(0,255,0)"},gradientOrientation:{A:"true",S:["backgroundType"],O:["vertical","horizontal"],M:"General",T:"option",C:"The orientation for the gradient if the background type is windowGradient or windowGradient2.",D:"vertical"},refresehDataTableOnDraw:{A:"true",M:"Data table",T:"boolean",C:"Flag to indicate to refresh data after drawing the plot",D:"true"},smpLabelFontSize:{A:"true",S:["autoScaleFont","smpLabelScaleFontFactor"],M:"Samples",T:"integer",C:"Size for the sample labels in one dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the sample label scaling factor",D:"10"},varLabelFontSize:{A:"true",S:["autoScaleFont","varLabelScaleFontFactor"],M:"Variables",T:"integer",C:"Size for the variable labels in one dimensional plots. Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the variable label scaling factor",D:"10"},maxRotate:{A:"true",M:"3D Scatter Plot and Networks",T:"float",C:"Maximum number of degrees to rotate graph arround axes",D:"false"},sequenceAColor:{M:"Genome Browser",T:"color",C:"Color for the adenines and alanines in the genome browser",D:"rgb(0,103,0)"},clusterVariables:{S:["distance","linkage","clusterAxis","imputeMethod","centerData"],M:"Functions",T:"void",C:"Cluster variables based on data and generate a dendrogram on the variable axis. It takes no parameters",U:{Heatmap:"true"}},xAxis2TickFormat:{A:"true",M:"Axes",T:"string",C:"Format for the tick values in the second X axis",D:"false"},dataEvent:{A:"true",Z:"true",M:"Events",T:"array",C:"Array to store the areas that will trigger an event"},highlightNode:{M:"Network Graphs",T:"array",C:"Name of nodes in the 'data.nodes' object to highlight.",D:"[]"},snapshots:{A:"true",Z:"true",M:"Snapshots",T:"array",C:"Array to hold the data used in the animation"}},G:{name:{M:"Genome",T:"string",C:"Track name"}},E:{cap:{O:"butt, round, square",M:"Network",T:"option",C:"Type of cap for the end of the lines"},width:{M:"Network",T:"integer",C:"Pixel width for the edges between nodes"},anchor:{M:"Network",T:"boolean",C:"Flag make the edge transparent"},color:{M:"Network",T:"color",C:"Color for the edge"},hide:{M:"Network",T:"boolean",C:"Flag to hide the edge"},exact:{M:"Network",T:"boolean",C:"Flag to indicate to create the edge between nodes without subtracting the size of the nodes"},type:{M:"Network",T:"string",C:"Type of line use to join the nodes"}}};